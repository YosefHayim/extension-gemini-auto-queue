var aistudio=(function(){"use strict";var ae=Object.defineProperty;var oe=(p,h,y)=>h in p?ae(p,h,{enumerable:!0,configurable:!0,writable:!0,value:y}):p[h]=y;var E=(p,h,y)=>oe(p,typeof h!="symbol"?h+"":h,y);function p(s){return s}var h=(s=>(s.GET_QUEUE="GET_QUEUE",s.UPDATE_QUEUE="UPDATE_QUEUE",s.GET_SETTINGS="GET_SETTINGS",s.UPDATE_SETTINGS="UPDATE_SETTINGS",s.GET_FOLDERS="GET_FOLDERS",s.UPDATE_FOLDERS="UPDATE_FOLDERS",s.PROCESS_QUEUE="PROCESS_QUEUE",s.STOP_PROCESSING="STOP_PROCESSING",s.GENERATE_IMAGE="GENERATE_IMAGE",s.OPEN_SIDE_PANEL="OPEN_SIDE_PANEL",s))(h||{});const y={matches:["https://aistudio.google.com/*"],runAt:"document_idle",main(){console.log("Gemini Nano Flow: Content script loaded on aistudio.google.com"),chrome.runtime.sendMessage({type:h.OPEN_SIDE_PANEL}).catch(()=>{}),document.addEventListener("keydown",r=>{(r.ctrlKey||r.metaKey)&&r.shiftKey&&r.key==="g"&&(r.preventDefault(),chrome.runtime.sendMessage({type:h.OPEN_SIDE_PANEL}).catch(console.error))});const s=()=>{document.querySelectorAll('[data-apikey], [aria-label*="API"]').length>0&&console.log("Gemini Nano Flow: AI Studio API key UI detected")};s();const e=new MutationObserver(r=>{s()});return e.observe(document.body,{childList:!0,subtree:!0}),()=>{e.disconnect()}}};function W(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var P={exports:{}},V=P.exports,$;function H(){return $||($=1,(function(s,e){(function(r,i){i(s)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:V,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const i="The message port closed before a response was received.",l=m=>{const b={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(b).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class v extends WeakMap{constructor(n,o=void 0){super(o),this.createItem=n}get(n){return this.has(n)||this.set(n,this.createItem(n)),super.get(n)}}const re=t=>t&&typeof t=="object"&&typeof t.then=="function",G=(t,n)=>(...o)=>{m.runtime.lastError?t.reject(new Error(m.runtime.lastError.message)):n.singleCallbackArg||o.length<=1&&n.singleCallbackArg!==!1?t.resolve(o[0]):t.resolve(o)},I=t=>t==1?"argument":"arguments",se=(t,n)=>function(g,...c){if(c.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${I(n.minArgs)} for ${t}(), got ${c.length}`);if(c.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${I(n.maxArgs)} for ${t}(), got ${c.length}`);return new Promise((u,d)=>{if(n.fallbackToNoCallback)try{g[t](...c,G({resolve:u,reject:d},n))}catch(a){console.warn(`${t} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),g[t](...c),n.fallbackToNoCallback=!1,n.noCallback=!0,u()}else n.noCallback?(g[t](...c),u()):g[t](...c,G({resolve:u,reject:d},n))})},B=(t,n,o)=>new Proxy(n,{apply(g,c,u){return o.call(c,t,...u)}});let M=Function.call.bind(Object.prototype.hasOwnProperty);const R=(t,n={},o={})=>{let g=Object.create(null),c={has(d,a){return a in t||a in g},get(d,a,x){if(a in g)return g[a];if(!(a in t))return;let A=t[a];if(typeof A=="function")if(typeof n[a]=="function")A=B(t,t[a],n[a]);else if(M(o,a)){let w=se(a,o[a]);A=B(t,t[a],w)}else A=A.bind(t);else if(typeof A=="object"&&A!==null&&(M(n,a)||M(o,a)))A=R(A,n[a],o[a]);else if(M(o,"*"))A=R(A,n[a],o["*"]);else return Object.defineProperty(g,a,{configurable:!0,enumerable:!0,get(){return t[a]},set(w){t[a]=w}}),A;return g[a]=A,A},set(d,a,x,A){return a in g?g[a]=x:t[a]=x,!0},defineProperty(d,a,x){return Reflect.defineProperty(g,a,x)},deleteProperty(d,a){return Reflect.deleteProperty(g,a)}},u=Object.create(t);return new Proxy(u,c)},L=t=>({addListener(n,o,...g){n.addListener(t.get(o),...g)},hasListener(n,o){return n.hasListener(t.get(o))},removeListener(n,o){n.removeListener(t.get(o))}}),te=new v(t=>typeof t!="function"?t:function(o){const g=R(o,{},{getContent:{minArgs:0,maxArgs:0}});t(g)}),j=new v(t=>typeof t!="function"?t:function(o,g,c){let u=!1,d,a=new Promise(T=>{d=function(f){u=!0,T(f)}}),x;try{x=t(o,g,d)}catch(T){x=Promise.reject(T)}const A=x!==!0&&re(x);if(x!==!0&&!A&&!u)return!1;const w=T=>{T.then(f=>{c(f)},f=>{let D;f&&(f instanceof Error||typeof f.message=="string")?D=f.message:D="An unexpected error occurred",c({__mozWebExtensionPolyfillReject__:!0,message:D})}).catch(f=>{console.error("Failed to send onMessage rejected reply",f)})};return w(A?x:a),!0}),ne=({reject:t,resolve:n},o)=>{m.runtime.lastError?m.runtime.lastError.message===i?n():t(new Error(m.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?t(new Error(o.message)):n(o)},q=(t,n,o,...g)=>{if(g.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${I(n.minArgs)} for ${t}(), got ${g.length}`);if(g.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${I(n.maxArgs)} for ${t}(), got ${g.length}`);return new Promise((c,u)=>{const d=ne.bind(null,{resolve:c,reject:u});g.push(d),o.sendMessage(...g)})},ie={devtools:{network:{onRequestFinished:L(te)}},runtime:{onMessage:L(j),onMessageExternal:L(j),sendMessage:q.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:q.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},O={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return b.privacy={network:{"*":O},services:{"*":O},websites:{"*":O}},R(m,ie,b)};r.exports=l(chrome)}})})(P)),P.exports}var Q=H();const _=W(Q);function k(s,...e){}const z={debug:(...s)=>k(console.debug,...s),log:(...s)=>k(console.log,...s),warn:(...s)=>k(console.warn,...s),error:(...s)=>k(console.error,...s)},N=class N extends Event{constructor(e,r){super(N.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=r}};E(N,"EVENT_NAME",U("wxt:locationchange"));let F=N;function U(s){var e;return`${(e=_==null?void 0:_.runtime)==null?void 0:e.id}:aistudio:${s}`}function Z(s){let e,r;return{run(){e==null&&(r=new URL(location.href),e=s.setInterval(()=>{let i=new URL(location.href);i.href!==r.href&&(window.dispatchEvent(new F(i,r)),r=i)},1e3))}}}const S=class S{constructor(e,r){E(this,"isTopFrame",window.self===window.top);E(this,"abortController");E(this,"locationWatcher",Z(this));E(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return _.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,r){const i=setInterval(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearInterval(i)),i}setTimeout(e,r){const i=setTimeout(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearTimeout(i)),i}requestAnimationFrame(e){const r=requestAnimationFrame((...i)=>{this.isValid&&e(...i)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(e,r){const i=requestIdleCallback((...l)=>{this.signal.aborted||e(...l)},r);return this.onInvalidated(()=>cancelIdleCallback(i)),i}addEventListener(e,r,i,l){var m;r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(m=e.addEventListener)==null||m.call(e,r.startsWith("wxt:")?U(r):r,i,{...l,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),z.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:S.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var m,b,v;const r=((m=e.data)==null?void 0:m.type)===S.SCRIPT_STARTED_MESSAGE_TYPE,i=((b=e.data)==null?void 0:b.contentScriptName)===this.contentScriptName,l=!this.receivedMessageIds.has((v=e.data)==null?void 0:v.messageId);return r&&i&&l}listenForNewerScripts(e){let r=!0;const i=l=>{if(this.verifyScriptStartedEvent(l)){this.receivedMessageIds.add(l.data.messageId);const m=r;if(r=!1,m&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",i),this.onInvalidated(()=>removeEventListener("message",i))}};E(S,"SCRIPT_STARTED_MESSAGE_TYPE",U("wxt:content-script-started"));let K=S;const Y=Symbol("null");let J=0;class X extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[r,i]of e)this.set(r,i)}}_getPublicKeys(e,r=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const i=this._getPrivateKey(e,r);let l;return i&&this._publicKeys.has(i)?l=this._publicKeys.get(i):r&&(l=[...e],this._publicKeys.set(i,l)),{privateKey:i,publicKey:l}}_getPrivateKey(e,r=!1){const i=[];for(let l of e){l===null&&(l=Y);const m=typeof l=="object"||typeof l=="function"?"_objectHashes":typeof l=="symbol"?"_symbolHashes":!1;if(!m)i.push(l);else if(this[m].has(l))i.push(this[m].get(l));else if(r){const b=`@@mkm-ref-${J++}@@`;this[m].set(l,b),i.push(b)}else return!1}return JSON.stringify(i)}set(e,r){const{publicKey:i}=this._getPublicKeys(e,!0);return super.set(i,r)}get(e){const{publicKey:r}=this._getPublicKeys(e);return super.get(r)}has(e){const{publicKey:r}=this._getPublicKeys(e);return super.has(r)}delete(e){const{publicKey:r,privateKey:i}=this._getPublicKeys(e);return!!(r&&super.delete(r)&&this._publicKeys.delete(i))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new X;function le(){}function C(s,...e){}const ee={debug:(...s)=>C(console.debug,...s),log:(...s)=>C(console.log,...s),warn:(...s)=>C(console.warn,...s),error:(...s)=>C(console.error,...s)};return(async()=>{try{const{main:s,...e}=y,r=new K("aistudio",e);return await s(r)}catch(s){throw ee.error('The content script "aistudio" crashed on startup!',s),s}})()})();
aistudio;

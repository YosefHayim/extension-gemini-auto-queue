var gemini=(function(){"use strict";var bC=Object.defineProperty;var UC=(On,It,Ot)=>It in On?bC(On,It,{enumerable:!0,configurable:!0,writable:!0,value:Ot}):On[It]=Ot;var zn=(On,It,Ot)=>UC(On,typeof It!="symbol"?It+"":It,Ot);function On(t){return t}function It(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ot={exports:{}},Um=Ot.exports,Ja;function Vm(){return Ja||(Ja=1,(function(t,e){(function(o,i){i(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Um,function(o){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)o.exports=globalThis.browser;else{const i="The message port closed before a response was received.",s=c=>{const f={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(f).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class p extends WeakMap{constructor(V,X=void 0){super(X),this.createItem=V}get(V){return this.has(V)||this.set(V,this.createItem(V)),super.get(V)}}const g=U=>U&&typeof U=="object"&&typeof U.then=="function",h=(U,V)=>(...X)=>{c.runtime.lastError?U.reject(new Error(c.runtime.lastError.message)):V.singleCallbackArg||X.length<=1&&V.singleCallbackArg!==!1?U.resolve(X[0]):U.resolve(X)},v=U=>U==1?"argument":"arguments",E=(U,V)=>function(O,...ne){if(ne.length<V.minArgs)throw new Error(`Expected at least ${V.minArgs} ${v(V.minArgs)} for ${U}(), got ${ne.length}`);if(ne.length>V.maxArgs)throw new Error(`Expected at most ${V.maxArgs} ${v(V.maxArgs)} for ${U}(), got ${ne.length}`);return new Promise((ge,Q)=>{if(V.fallbackToNoCallback)try{O[U](...ne,h({resolve:ge,reject:Q},V))}catch(q){console.warn(`${U} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,q),O[U](...ne),V.fallbackToNoCallback=!1,V.noCallback=!0,ge()}else V.noCallback?(O[U](...ne),ge()):O[U](...ne,h({resolve:ge,reject:Q},V))})},_=(U,V,X)=>new Proxy(V,{apply(O,ne,ge){return X.call(ne,U,...ge)}});let T=Function.call.bind(Object.prototype.hasOwnProperty);const P=(U,V={},X={})=>{let O=Object.create(null),ne={has(Q,q){return q in U||q in O},get(Q,q,se){if(q in O)return O[q];if(!(q in U))return;let pe=U[q];if(typeof pe=="function")if(typeof V[q]=="function")pe=_(U,U[q],V[q]);else if(T(X,q)){let de=E(q,X[q]);pe=_(U,U[q],de)}else pe=pe.bind(U);else if(typeof pe=="object"&&pe!==null&&(T(V,q)||T(X,q)))pe=P(pe,V[q],X[q]);else if(T(X,"*"))pe=P(pe,V[q],X["*"]);else return Object.defineProperty(O,q,{configurable:!0,enumerable:!0,get(){return U[q]},set(de){U[q]=de}}),pe;return O[q]=pe,pe},set(Q,q,se,pe){return q in O?O[q]=se:U[q]=se,!0},defineProperty(Q,q,se){return Reflect.defineProperty(O,q,se)},deleteProperty(Q,q){return Reflect.deleteProperty(O,q)}},ge=Object.create(U);return new Proxy(ge,ne)},R=U=>({addListener(V,X,...O){V.addListener(U.get(X),...O)},hasListener(V,X){return V.hasListener(U.get(X))},removeListener(V,X){V.removeListener(U.get(X))}}),N=new p(U=>typeof U!="function"?U:function(X){const O=P(X,{},{getContent:{minArgs:0,maxArgs:0}});U(O)}),F=new p(U=>typeof U!="function"?U:function(X,O,ne){let ge=!1,Q,q=new Promise(ve=>{Q=function(K){ge=!0,ve(K)}}),se;try{se=U(X,O,Q)}catch(ve){se=Promise.reject(ve)}const pe=se!==!0&&g(se);if(se!==!0&&!pe&&!ge)return!1;const de=ve=>{ve.then(K=>{ne(K)},K=>{let le;K&&(K instanceof Error||typeof K.message=="string")?le=K.message:le="An unexpected error occurred",ne({__mozWebExtensionPolyfillReject__:!0,message:le})}).catch(K=>{console.error("Failed to send onMessage rejected reply",K)})};return de(pe?se:q),!0}),H=({reject:U,resolve:V},X)=>{c.runtime.lastError?c.runtime.lastError.message===i?V():U(new Error(c.runtime.lastError.message)):X&&X.__mozWebExtensionPolyfillReject__?U(new Error(X.message)):V(X)},$=(U,V,X,...O)=>{if(O.length<V.minArgs)throw new Error(`Expected at least ${V.minArgs} ${v(V.minArgs)} for ${U}(), got ${O.length}`);if(O.length>V.maxArgs)throw new Error(`Expected at most ${V.maxArgs} ${v(V.maxArgs)} for ${U}(), got ${O.length}`);return new Promise((ne,ge)=>{const Q=H.bind(null,{resolve:ne,reject:ge});O.push(Q),X.sendMessage(...O)})},G={devtools:{network:{onRequestFinished:R(N)}},runtime:{onMessage:R(F),onMessageExternal:R(F),sendMessage:$.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:$.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},W={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return f.privacy={network:{"*":W},services:{"*":W},websites:{"*":W}},P(c,G,f)};o.exports=s(chrome)}})})(Ot)),Ot.exports}var Gm=Vm();const xo=It(Gm);function _r(t,...e){}const is={debug:(...t)=>_r(console.debug,...t),log:(...t)=>_r(console.log,...t),warn:(...t)=>_r(console.warn,...t),error:(...t)=>_r(console.error,...t)},Kr=class Kr extends Event{constructor(e,o){super(Kr.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=o}};zn(Kr,"EVENT_NAME",ls("wxt:locationchange"));let ss=Kr;function ls(t){var e;return`${(e=xo==null?void 0:xo.runtime)==null?void 0:e.id}:gemini:${t}`}function qm(t){let e,o;return{run(){e==null&&(o=new URL(location.href),e=t.setInterval(()=>{let i=new URL(location.href);i.href!==o.href&&(window.dispatchEvent(new ss(i,o)),o=i)},1e3))}}}const Lo=class Lo{constructor(e,o){zn(this,"isTopFrame",window.self===window.top);zn(this,"abortController");zn(this,"locationWatcher",qm(this));zn(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=o,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return xo.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,o){const i=setInterval(()=>{this.isValid&&e()},o);return this.onInvalidated(()=>clearInterval(i)),i}setTimeout(e,o){const i=setTimeout(()=>{this.isValid&&e()},o);return this.onInvalidated(()=>clearTimeout(i)),i}requestAnimationFrame(e){const o=requestAnimationFrame((...i)=>{this.isValid&&e(...i)});return this.onInvalidated(()=>cancelAnimationFrame(o)),o}requestIdleCallback(e,o){const i=requestIdleCallback((...s)=>{this.signal.aborted||e(...s)},o);return this.onInvalidated(()=>cancelIdleCallback(i)),i}addEventListener(e,o,i,s){var c;o==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(c=e.addEventListener)==null||c.call(e,o.startsWith("wxt:")?ls(o):o,i,{...s,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),is.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:Lo.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var c,f,p;const o=((c=e.data)==null?void 0:c.type)===Lo.SCRIPT_STARTED_MESSAGE_TYPE,i=((f=e.data)==null?void 0:f.contentScriptName)===this.contentScriptName,s=!this.receivedMessageIds.has((p=e.data)==null?void 0:p.messageId);return o&&i&&s}listenForNewerScripts(e){let o=!0;const i=s=>{if(this.verifyScriptStartedEvent(s)){this.receivedMessageIds.add(s.data.messageId);const c=o;if(o=!1,c&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",i),this.onInvalidated(()=>removeEventListener("message",i))}};zn(Lo,"SCRIPT_STARTED_MESSAGE_TYPE",ls("wxt:content-script-started"));let as=Lo;const Hm=Symbol("null");let $m=0;class Bm extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[o,i]of e)this.set(o,i)}}_getPublicKeys(e,o=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const i=this._getPrivateKey(e,o);let s;return i&&this._publicKeys.has(i)?s=this._publicKeys.get(i):o&&(s=[...e],this._publicKeys.set(i,s)),{privateKey:i,publicKey:s}}_getPrivateKey(e,o=!1){const i=[];for(let s of e){s===null&&(s=Hm);const c=typeof s=="object"||typeof s=="function"?"_objectHashes":typeof s=="symbol"?"_symbolHashes":!1;if(!c)i.push(s);else if(this[c].has(s))i.push(this[c].get(s));else if(o){const f=`@@mkm-ref-${$m++}@@`;this[c].set(s,f),i.push(f)}else return!1}return JSON.stringify(i)}set(e,o){const{publicKey:i}=this._getPublicKeys(e,!0);return super.set(i,o)}get(e){const{publicKey:o}=this._getPublicKeys(e);return super.get(o)}has(e){const{publicKey:o}=this._getPublicKeys(e);return super.has(o)}delete(e){const{publicKey:o,privateKey:i}=this._getPublicKeys(e);return!!(o&&super.delete(o)&&this._publicKeys.delete(i))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}function us(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function cs(t,e,o=".",i){if(!us(e))return cs(t,{},o,i);const s=Object.assign({},e);for(const c in t){if(c==="__proto__"||c==="constructor")continue;const f=t[c];f!=null&&(i&&i(s,c,f,o)||(Array.isArray(f)&&Array.isArray(s[c])?s[c]=[...f,...s[c]]:us(f)&&us(s[c])?s[c]=cs(f,s[c],(o?`${o}.`:"")+c.toString(),i):s[c]=f))}return s}function zm(t){return(...e)=>e.reduce((o,i)=>cs(o,i,"",t),{})}const Om=zm(),Wa=t=>t!==null?{isDetected:!0,result:t}:{isDetected:!1},Jm=t=>t===null?{isDetected:!0,result:null}:{isDetected:!1},Wm=()=>({target:globalThis.document,unifyProcess:!0,detector:Wa,observeConfigs:{childList:!0,subtree:!0,attributes:!0},signal:void 0,customMatcher:void 0}),Km=(t,e)=>Om(t,e),ds=new Bm;function Ym(t){const{defaultOptions:e}=t;return(o,i)=>{const{target:s,unifyProcess:c,observeConfigs:f,detector:p,signal:g,customMatcher:h}=Km(i,e),v=[o,s,c,f,p,g,h],E=ds.get(v);if(c&&E)return E;const _=new Promise(async(T,P)=>{if(g!=null&&g.aborted)return P(g.reason);const R=new MutationObserver(async F=>{for(const H of F){if(g!=null&&g.aborted){R.disconnect();break}const $=await Ka({selector:o,target:s,detector:p,customMatcher:h});if($.isDetected){R.disconnect(),T($.result);break}}});g==null||g.addEventListener("abort",()=>(R.disconnect(),P(g.reason)),{once:!0});const N=await Ka({selector:o,target:s,detector:p,customMatcher:h});if(N.isDetected)return T(N.result);R.observe(s,f)}).finally(()=>{ds.delete(v)});return ds.set(v,_),_}}async function Ka({target:t,selector:e,detector:o,customMatcher:i}){const s=i?i(e):t.querySelector(e);return await o(s)}const Qm=Ym({defaultOptions:Wm()});var fs,Ya;function Xm(){if(Ya)return fs;Ya=1;var t=/^[a-z](?:[\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-(?:[\x2D\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,e=function(o){return t.test(o)};return fs=e,fs}var Zm=Xm();const jm=It(Zm);var eh=(t,e,o)=>new Promise((i,s)=>{var c=g=>{try{p(o.next(g))}catch(h){s(h)}},f=g=>{try{p(o.throw(g))}catch(h){s(h)}},p=g=>g.done?i(g.value):Promise.resolve(g.value).then(c,f);p((o=o.apply(t,e)).next())}),th=["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"];function nh(t){return eh(this,null,function*(){const{name:e,mode:o="closed",css:i,isolateEvents:s=!1}=t;if(!th.includes(e)&&!jm(e))throw Error(`"${e}" cannot have a shadow root attached to it. It must be two words and kebab-case, with a few exceptions. See https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow#elements_you_can_attach_a_shadow_to`);const c=document.createElement(e),f=c.attachShadow({mode:o}),p=document.createElement("html"),g=document.createElement("body"),h=document.createElement("head");if(i){const v=document.createElement("style");"url"in i?v.textContent=yield fetch(i.url).then(E=>E.text()):v.textContent=i.textContent,h.appendChild(v)}return p.appendChild(h),p.appendChild(g),f.appendChild(p),s&&(Array.isArray(s)?s:["keydown","keyup","keypress"]).forEach(E=>{g.addEventListener(E,_=>_.stopPropagation())}),{parentElement:c,shadow:f,isolatedElement:g}})}async function oh(t,e){var v;const o=[e.css??""];if(((v=t.options)==null?void 0:v.cssInjectionMode)==="ui"){const E=await ah();o.push(E.replaceAll(":root",":host"))}const{isolatedElement:i,parentElement:s,shadow:c}=await nh({name:e.name,css:{textContent:o.join(`
`).trim()},mode:e.mode??"open",isolateEvents:e.isolateEvents});s.setAttribute("data-wxt-shadow-root","");let f;const p=()=>{ih(s,e),rh(s,c.querySelector("html"),e),f=e.onMount(i,c,s)},g=()=>{var E;for((E=e.onRemove)==null||E.call(e,f),s.remove();i.lastChild;)i.removeChild(i.lastChild);f=void 0},h=sh({mount:p,remove:g},e);return t.onInvalidated(g),{shadow:c,shadowHost:s,uiContainer:i,...h,get mounted(){return f}}}function rh(t,e,o){var i,s;o.position!=="inline"&&(o.zIndex!=null&&(t.style.zIndex=String(o.zIndex)),t.style.overflow="visible",t.style.position="relative",t.style.width="0",t.style.height="0",t.style.display="block",e&&(o.position==="overlay"?(e.style.position="absolute",(i=o.alignment)!=null&&i.startsWith("bottom-")?e.style.bottom="0":e.style.top="0",(s=o.alignment)!=null&&s.endsWith("-right")?e.style.right="0":e.style.left="0"):(e.style.position="fixed",e.style.top="0",e.style.bottom="0",e.style.left="0",e.style.right="0")))}function ps(t){if(t.anchor==null)return document.body;let e=typeof t.anchor=="function"?t.anchor():t.anchor;return typeof e=="string"?e.startsWith("/")?document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue??void 0:document.querySelector(e)??void 0:e??void 0}function ih(t,e){var i,s;const o=ps(e);if(o==null)throw Error("Failed to mount content script UI: could not find anchor element");switch(e.append){case void 0:case"last":o.append(t);break;case"first":o.prepend(t);break;case"replace":o.replaceWith(t);break;case"after":(i=o.parentElement)==null||i.insertBefore(t,o.nextElementSibling);break;case"before":(s=o.parentElement)==null||s.insertBefore(t,o);break;default:e.append(o,t);break}}function sh(t,e){let o;const i=()=>{o==null||o.stopAutoMount(),o=void 0},s=()=>{t.mount()},c=t.remove;return{mount:s,remove:()=>{i(),t.remove()},autoMount:g=>{o&&is.warn("autoMount is already set."),o=lh({mount:s,unmount:c,stopAutoMount:i},{...e,...g})}}}function lh(t,e){const o=new AbortController,i="explicit_stop_auto_mount",s=()=>{var p;o.abort(i),(p=e.onStop)==null||p.call(e)};let c=typeof e.anchor=="function"?e.anchor():e.anchor;if(c instanceof Element)throw Error("autoMount and Element anchor option cannot be combined. Avoid passing `Element` directly or `() => Element` to the anchor.");async function f(p){let g=!!ps(e);for(g&&t.mount();!o.signal.aborted;)try{g=!!await Qm(p??"body",{customMatcher:()=>ps(e)??null,detector:g?Jm:Wa,signal:o.signal}),g?t.mount():(t.unmount(),e.once&&t.stopAutoMount())}catch(h){if(o.signal.aborted&&o.signal.reason===i)break;throw h}}return f(c),{stopAutoMount:s}}async function ah(){const t=xo.runtime.getURL("/content-scripts/gemini.css");try{return await(await fetch(t)).text()}catch(e){return is.warn(`Failed to load styles @ ${t}. Did you forget to import the stylesheet in your entrypoint?`,e),""}}var ms={exports:{}},Io={},hs={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa;function uh(){if(Qa)return Se;Qa=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function _(A){return A===null||typeof A!="object"?null:(A=E&&A[E]||A["@@iterator"],typeof A=="function"?A:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,R={};function N(A,L,Z){this.props=A,this.context=L,this.refs=R,this.updater=Z||T}N.prototype.isReactComponent={},N.prototype.setState=function(A,L){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,L,"setState")},N.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function F(){}F.prototype=N.prototype;function H(A,L,Z){this.props=A,this.context=L,this.refs=R,this.updater=Z||T}var $=H.prototype=new F;$.constructor=H,P($,N.prototype),$.isPureReactComponent=!0;var G=Array.isArray,W=Object.prototype.hasOwnProperty,U={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function X(A,L,Z){var te,Ee={},me=null,Te=null;if(L!=null)for(te in L.ref!==void 0&&(Te=L.ref),L.key!==void 0&&(me=""+L.key),L)W.call(L,te)&&!V.hasOwnProperty(te)&&(Ee[te]=L[te]);var we=arguments.length-2;if(we===1)Ee.children=Z;else if(1<we){for(var Ne=Array(we),pt=0;pt<we;pt++)Ne[pt]=arguments[pt+2];Ee.children=Ne}if(A&&A.defaultProps)for(te in we=A.defaultProps,we)Ee[te]===void 0&&(Ee[te]=we[te]);return{$$typeof:t,type:A,key:me,ref:Te,props:Ee,_owner:U.current}}function O(A,L){return{$$typeof:t,type:A.type,key:L,ref:A.ref,props:A.props,_owner:A._owner}}function ne(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function ge(A){var L={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(Z){return L[Z]})}var Q=/\/+/g;function q(A,L){return typeof A=="object"&&A!==null&&A.key!=null?ge(""+A.key):L.toString(36)}function se(A,L,Z,te,Ee){var me=typeof A;(me==="undefined"||me==="boolean")&&(A=null);var Te=!1;if(A===null)Te=!0;else switch(me){case"string":case"number":Te=!0;break;case"object":switch(A.$$typeof){case t:case e:Te=!0}}if(Te)return Te=A,Ee=Ee(Te),A=te===""?"."+q(Te,0):te,G(Ee)?(Z="",A!=null&&(Z=A.replace(Q,"$&/")+"/"),se(Ee,L,Z,"",function(pt){return pt})):Ee!=null&&(ne(Ee)&&(Ee=O(Ee,Z+(!Ee.key||Te&&Te.key===Ee.key?"":(""+Ee.key).replace(Q,"$&/")+"/")+A)),L.push(Ee)),1;if(Te=0,te=te===""?".":te+":",G(A))for(var we=0;we<A.length;we++){me=A[we];var Ne=te+q(me,we);Te+=se(me,L,Z,Ne,Ee)}else if(Ne=_(A),typeof Ne=="function")for(A=Ne.call(A),we=0;!(me=A.next()).done;)me=me.value,Ne=te+q(me,we++),Te+=se(me,L,Z,Ne,Ee);else if(me==="object")throw L=String(A),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Te}function pe(A,L,Z){if(A==null)return A;var te=[],Ee=0;return se(A,te,"","",function(me){return L.call(Z,me,Ee++)}),te}function de(A){if(A._status===-1){var L=A._result;L=L(),L.then(function(Z){(A._status===0||A._status===-1)&&(A._status=1,A._result=Z)},function(Z){(A._status===0||A._status===-1)&&(A._status=2,A._result=Z)}),A._status===-1&&(A._status=0,A._result=L)}if(A._status===1)return A._result.default;throw A._result}var ve={current:null},K={transition:null},le={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:K,ReactCurrentOwner:U};function b(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:pe,forEach:function(A,L,Z){pe(A,function(){L.apply(this,arguments)},Z)},count:function(A){var L=0;return pe(A,function(){L++}),L},toArray:function(A){return pe(A,function(L){return L})||[]},only:function(A){if(!ne(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Se.Component=N,Se.Fragment=o,Se.Profiler=s,Se.PureComponent=H,Se.StrictMode=i,Se.Suspense=g,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Se.act=b,Se.cloneElement=function(A,L,Z){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var te=P({},A.props),Ee=A.key,me=A.ref,Te=A._owner;if(L!=null){if(L.ref!==void 0&&(me=L.ref,Te=U.current),L.key!==void 0&&(Ee=""+L.key),A.type&&A.type.defaultProps)var we=A.type.defaultProps;for(Ne in L)W.call(L,Ne)&&!V.hasOwnProperty(Ne)&&(te[Ne]=L[Ne]===void 0&&we!==void 0?we[Ne]:L[Ne])}var Ne=arguments.length-2;if(Ne===1)te.children=Z;else if(1<Ne){we=Array(Ne);for(var pt=0;pt<Ne;pt++)we[pt]=arguments[pt+2];te.children=we}return{$$typeof:t,type:A.type,key:Ee,ref:me,props:te,_owner:Te}},Se.createContext=function(A){return A={$$typeof:f,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:c,_context:A},A.Consumer=A},Se.createElement=X,Se.createFactory=function(A){var L=X.bind(null,A);return L.type=A,L},Se.createRef=function(){return{current:null}},Se.forwardRef=function(A){return{$$typeof:p,render:A}},Se.isValidElement=ne,Se.lazy=function(A){return{$$typeof:v,_payload:{_status:-1,_result:A},_init:de}},Se.memo=function(A,L){return{$$typeof:h,type:A,compare:L===void 0?null:L}},Se.startTransition=function(A){var L=K.transition;K.transition={};try{A()}finally{K.transition=L}},Se.unstable_act=b,Se.useCallback=function(A,L){return ve.current.useCallback(A,L)},Se.useContext=function(A){return ve.current.useContext(A)},Se.useDebugValue=function(){},Se.useDeferredValue=function(A){return ve.current.useDeferredValue(A)},Se.useEffect=function(A,L){return ve.current.useEffect(A,L)},Se.useId=function(){return ve.current.useId()},Se.useImperativeHandle=function(A,L,Z){return ve.current.useImperativeHandle(A,L,Z)},Se.useInsertionEffect=function(A,L){return ve.current.useInsertionEffect(A,L)},Se.useLayoutEffect=function(A,L){return ve.current.useLayoutEffect(A,L)},Se.useMemo=function(A,L){return ve.current.useMemo(A,L)},Se.useReducer=function(A,L,Z){return ve.current.useReducer(A,L,Z)},Se.useRef=function(A){return ve.current.useRef(A)},Se.useState=function(A){return ve.current.useState(A)},Se.useSyncExternalStore=function(A,L,Z){return ve.current.useSyncExternalStore(A,L,Z)},Se.useTransition=function(){return ve.current.useTransition()},Se.version="18.3.1",Se}var Xa;function gs(){return Xa||(Xa=1,hs.exports=uh()),hs.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za;function ch(){if(Za)return Io;Za=1;var t=gs(),e=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,h){var v,E={},_=null,T=null;h!==void 0&&(_=""+h),g.key!==void 0&&(_=""+g.key),g.ref!==void 0&&(T=g.ref);for(v in g)i.call(g,v)&&!c.hasOwnProperty(v)&&(E[v]=g[v]);if(p&&p.defaultProps)for(v in g=p.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:p,key:_,ref:T,props:E,_owner:s.current}}return Io.Fragment=o,Io.jsx=f,Io.jsxs=f,Io}var ja;function dh(){return ja||(ja=1,ms.exports=ch()),ms.exports}var w=dh(),fe=gs();/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ph=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,o,i)=>i?i.toUpperCase():o.toLowerCase()),eu=t=>{const e=ph(t);return e.charAt(0).toUpperCase()+e.slice(1)},tu=(...t)=>t.filter((e,o,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===o).join(" ").trim(),mh=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=fe.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:s="",children:c,iconNode:f,...p},g)=>fe.createElement("svg",{ref:g,...hh,width:e,height:e,stroke:t,strokeWidth:i?Number(o)*24/Number(e):o,className:tu("lucide",s),...!c&&!mh(p)&&{"aria-hidden":"true"},...p},[...f.map(([h,v])=>fe.createElement(h,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(t,e)=>{const o=fe.forwardRef(({className:i,...s},c)=>fe.createElement(gh,{ref:c,iconNode:e,className:tu(`lucide-${fh(eu(t))}`,`lucide-${t}`,i),...s}));return o.displayName=eu(t),o};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=_e("book-marked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=_e("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=_e("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=_e("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=_e("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=_e("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=_e("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=_e("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=_e("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=_e("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=_e("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=_e("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=_e("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=_e("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=_e("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=_e("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=_e("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=_e("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=_e("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=_e("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=_e("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=_e("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=_e("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=_e("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=_e("panel-right",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=_e("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=_e("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=_e("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=_e("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=_e("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=_e("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=_e("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=_e("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=_e("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=_e("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=_e("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=_e("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=_e("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=_e("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=_e("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=_e("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=_e("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=_e("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var Ye=(t=>(t.IDLE="IDLE",t.PROCESSING="PROCESSING",t.COMPLETED="COMPLETED",t.FAILED="FAILED",t.PAUSED="PAUSED",t))(Ye||{}),Jt=(t=>(t.LEFT="LEFT",t.RIGHT="RIGHT",t))(Jt||{}),wr=(t=>(t.FLASH="gemini-2.0-flash-preview-image-generation",t.PRO="imagen-3.0-generate-002",t))(wr||{}),Le=(t=>(t.NONE="none",t.IMAGE="image",t.VIDEO="video",t.CANVAS="canvas",t.DEEP_RESEARCH="deep_research",t.LEARNING="learning",t.VISUAL_LAYOUT="visual_layout",t))(Le||{});const In={none:{label:"Chat Only",icon:Rh,description:"Regular conversation without tools"},image:{label:"Image",icon:nu,description:"Generate images with Imagen"},video:{label:"Video",icon:Jh,description:"Create videos with Veo 3.1"},canvas:{label:"Canvas",icon:bh,description:"Collaborative writing canvas"},deep_research:{label:"Research",icon:Hh,description:"Deep research mode"},learning:{label:"Learning",icon:xh,description:"Personalized learning"},visual_layout:{label:"Layout",icon:Ph,description:"Visual layout (Labs)"}};var Po=(t=>(t.LIGHT="LIGHT",t.DARK="DARK",t))(Po||{}),vt=(t=>(t.GEMINI="gemini",t.OPENAI="openai",t.ANTHROPIC="anthropic",t))(vt||{});const su={gemini:{label:"Google Gemini",description:"Google's Gemini AI models"},openai:{label:"OpenAI",description:"GPT models from OpenAI"},anthropic:{label:"Anthropic Claude",description:"Claude models from Anthropic"}};var Vt=(t=>(t.GET_QUEUE="GET_QUEUE",t.UPDATE_QUEUE="UPDATE_QUEUE",t.GET_SETTINGS="GET_SETTINGS",t.UPDATE_SETTINGS="UPDATE_SETTINGS",t.GET_FOLDERS="GET_FOLDERS",t.UPDATE_FOLDERS="UPDATE_FOLDERS",t.PROCESS_QUEUE="PROCESS_QUEUE",t.STOP_PROCESSING="STOP_PROCESSING",t.GENERATE_IMAGE="GENERATE_IMAGE",t.OPEN_SIDE_PANEL="OPEN_SIDE_PANEL",t.PASTE_PROMPT="PASTE_PROMPT",t.ENABLE_IMAGE_CREATION="ENABLE_IMAGE_CREATION",t.SUBMIT_PROMPT="SUBMIT_PROMPT",t.PROMPT_SUBMITTED="PROMPT_SUBMITTED",t.GENERATION_COMPLETE="GENERATION_COMPLETE",t.CONTENT_SCRIPT_READY="CONTENT_SCRIPT_READY",t))(Vt||{});const it={QUEUE:"nano_flow_queue",SETTINGS:"nano_flow_settings",FOLDERS:"nano_flow_folders",ONBOARDING_COMPLETE:"nano_flow_onboarding_complete"},ws={prefix:"",suffix:"",position:Jt.LEFT,primaryModel:wr.FLASH,dripFeed:!1,autoCaption:!0,globalNegatives:"extra fingers, deformed limbs, blurry, low resolution",globalNegativesEnabled:!0,theme:Po.DARK,defaultTool:Le.IMAGE,toolSequence:[Le.IMAGE],useToolSequence:!1,aiApiKeys:{},preferredAIProvider:vt.GEMINI},Kh=[{id:"getting-started",name:"Getting Started",isOpen:!0,templates:[{id:"gs-1",name:"How Templates Work",text:"Templates are reusable prompts you can quickly add to your queue. Click the + button to use this template, or edit it to make it your own!",createdAt:Date.now(),lastEditedAt:Date.now(),timesUsed:0,images:[]},{id:"gs-2",name:"Your First Prompt",text:"A cozy coffee shop on a rainy afternoon, warm golden lighting through foggy windows, steaming cup of coffee on a wooden table",createdAt:Date.now(),lastEditedAt:Date.now(),timesUsed:0,images:[]}]},{id:"inspiration",name:"Prompt Inspiration",isOpen:!1,templates:[{id:"insp-1",name:"Dreamy Portrait",text:"Portrait of a person with soft bokeh background, golden hour lighting, film grain texture, shallow depth of field",createdAt:Date.now(),lastEditedAt:Date.now(),timesUsed:0,images:[]},{id:"insp-2",name:"Fantasy Landscape",text:"Floating islands in a pastel sunset sky, waterfalls cascading into clouds, ancient trees with glowing leaves, Studio Ghibli inspired",createdAt:Date.now(),lastEditedAt:Date.now(),timesUsed:0,images:[]},{id:"insp-3",name:"Urban Night Scene",text:"Neon-lit city street at midnight, rain-soaked pavement reflecting colorful signs, lone figure with umbrella, cyberpunk atmosphere",createdAt:Date.now(),lastEditedAt:Date.now(),timesUsed:0,images:[]}]}];async function Tr(t){try{return(await chrome.storage.local.get(t))[t]??null}catch(e){return console.error(`Error getting ${t} from storage:`,e),null}}async function Cr(t,e){try{return await chrome.storage.local.set({[t]:e}),!0}catch(o){return console.error(`Error setting ${t} in storage:`,o),!1}}async function Yh(){return await Tr(it.QUEUE)??[]}async function Ar(t){return Cr(it.QUEUE,t)}async function Qh(){const t=await Tr(it.SETTINGS),e={...ws,...t};return e.apiKey&&(!e.aiApiKeys||!e.aiApiKeys.gemini)&&(e.aiApiKeys={...e.aiApiKeys,gemini:e.apiKey}),e.aiApiKeys||(e.aiApiKeys={}),e}async function Xh(t){return Cr(it.SETTINGS,t)}async function Zh(){return await Tr(it.FOLDERS)??Kh}async function Nn(t){return Cr(it.FOLDERS,t)}async function jh(){return await Tr(it.ONBOARDING_COMPLETE)??!1}async function eg(t){return Cr(it.ONBOARDING_COMPLETE,t)}function lu(t){const e=t.aiApiKeys||{};return!!(e.gemini||e.openai||e.anthropic)}function tg(t){const e=t.aiApiKeys||{};return e[t.preferredAIProvider]?{provider:t.preferredAIProvider,key:e[t.preferredAIProvider]}:e.gemini?{provider:vt.GEMINI,key:e.gemini}:e.openai?{provider:vt.OPENAI,key:e.openai}:e.anthropic?{provider:vt.ANTHROPIC,key:e.anthropic}:null}function ng(t){const e=(o,i)=>{i==="local"&&t(o)};return chrome.storage.onChanged.addListener(e),()=>{chrome.storage.onChanged.removeListener(e)}}const og=({isOpen:t,isDark:e,onClose:o,onUpload:i})=>{const s=fe.useRef(null),c=()=>{const p=`Prompt,Template Modifier
A cyberpunk city,hyper-realistic 8k resolution
A majestic dragon,anime studio ghibli style
A cozy cabin,winter forest background`,g=new Blob([p],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a"),v=URL.createObjectURL(g);h.setAttribute("href",v),h.setAttribute("download","nano_flow_template.csv"),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(v)},f=p=>{var v;const g=(v=p.target.files)==null?void 0:v[0];if(!g)return;const h=new FileReader;h.onload=E=>{var R;const T=((R=E.target)==null?void 0:R.result).split(`
`),P=[];T.forEach(N=>{var G,W;const F=N.split(","),H=(G=F[0])==null?void 0:G.trim(),$=(W=F[1])==null?void 0:W.trim();H&&H.toLowerCase()!=="prompt"&&P.push({prompt:H,modifier:$})}),i(P),o()},h.readAsText(g),s.current&&(s.current.value="")};return t?w.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center bg-black/80 backdrop-blur-md p-2",children:w.jsxs("div",{className:`max-w-md w-full p-2 rounded-md border shadow-2xl ${e?"glass-panel border-white/10":"bg-white border-slate-200"}`,children:[w.jsxs("div",{className:"flex items-center justify-between p-2",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Th,{size:18,className:"text-blue-500"}),w.jsx("h2",{className:"text-sm font-black",children:"Import Batch"})]}),w.jsx("button",{onClick:o,className:"p-1 hover:bg-white/5 rounded-md transition-all",children:w.jsx(rn,{size:18})})]}),w.jsxs("div",{className:"p-2 space-y-2",children:[w.jsxs("div",{className:`p-2 rounded-md border text-[10px] leading-tight ${e?"bg-white/5 border-white/5 opacity-70":"bg-slate-50 border-slate-100"}`,children:[w.jsxs("div",{className:"flex items-center gap-1 font-black uppercase tracking-widest mb-1",children:[w.jsx(No,{size:10})," CSV Guide"]}),"Format: Prompt, Modifiers (Optional)."]}),w.jsxs("button",{onClick:c,className:`w-full p-2 rounded-md font-black text-xs flex items-center justify-center gap-2 border ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[w.jsx(ru,{size:16})," Get Template"]}),w.jsxs("button",{onClick:()=>{var p;return(p=s.current)==null?void 0:p.click()},className:"w-full p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-md font-black text-xs flex items-center justify-center gap-2 shadow-lg",children:[w.jsx(_s,{size:16})," Upload CSV"]}),w.jsx("input",{ref:s,type:"file",accept:".csv",className:"hidden",onChange:f})]})]})}):null},rg=({onComplete:t,isDark:e})=>{const[o,i]=fe.useState(0),s=[{title:"Welcome to Nano Flow",description:"A high-performance bulk image generation engine designed to unlock Gemini's creative potential at scale.",icon:w.jsx(Es,{className:"text-blue-500",size:40})},{title:"The Queue Engine",description:"Paste dozens of prompts or upload a CSV. Use the selection toolbar to weight specific words for the AI.",icon:w.jsx(vs,{className:"text-amber-500",size:40})},{title:"Style Library",description:"Manage custom modifiers, instructions, and reference assets in folders. Apply them to your queue in one click.",icon:w.jsx(ys,{className:"text-emerald-500",size:40})},{title:"AI Prompt Optimization",description:"Use the magic wand icons to let Gemini analyze and improve your library prompts automatically for better results.",icon:w.jsx(Ss,{className:"text-amber-400",size:40})},{title:"Flash vs Pro",description:"Toggle between ultra-fast Flash 2.0 and high-fidelity Imagen 3 models in your application settings.",icon:w.jsx(Wh,{className:"text-purple-500",size:40})}];return w.jsx("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/80 backdrop-blur-md p-2",children:w.jsx("div",{className:`max-w-md w-full p-6 rounded-md border shadow-2xl animate-in fade-in zoom-in-95 duration-300 ${e?"glass-panel border-white/10":"bg-white border-slate-200"}`,children:w.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[w.jsx("div",{className:"p-3 bg-white/5 rounded-md shadow-inner border border-white/5 mb-2",children:s[o].icon}),w.jsx("h2",{className:"text-xl font-black tracking-tight",children:s[o].title}),w.jsx("p",{className:"text-sm opacity-60 leading-relaxed font-medium min-h-[60px]",children:s[o].description}),w.jsx("div",{className:"flex gap-1 mb-4",children:s.map((c,f)=>w.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${o===f?"bg-blue-500 w-4":"bg-white/10"}`},f))}),w.jsxs("div",{className:"w-full flex gap-2",children:[o>0?w.jsxs("button",{onClick:()=>i(c=>c-1),className:"flex-1 p-2 rounded-md border border-white/10 text-[10px] font-black uppercase tracking-widest hover:bg-white/5 transition-all flex items-center justify-center gap-2",children:[w.jsx(yh,{size:14})," Back"]}):w.jsx("button",{onClick:t,className:"flex-1 p-2 rounded-md border border-white/10 text-[10px] font-black uppercase opacity-40 hover:opacity-100 transition-all",children:"Skip"}),o<s.length-1?w.jsxs("button",{onClick:()=>i(c=>c+1),className:"flex-[2] p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-md font-black text-[10px] uppercase tracking-widest shadow-lg shadow-blue-600/20 flex items-center justify-center gap-2",children:["Next ",w.jsx(vh,{size:14})]}):w.jsxs("button",{onClick:t,className:"flex-[2] p-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-md font-black text-[10px] uppercase tracking-widest shadow-lg shadow-emerald-600/20 flex items-center justify-center gap-2",children:["Get Started ",w.jsx(Eh,{size:14})]})]})]})})})},ig={[Ye.IDLE]:"bg-gray-500/20 text-gray-400",[Ye.PROCESSING]:"bg-blue-500/20 text-blue-400 animate-pulse",[Ye.COMPLETED]:"bg-emerald-500/20 text-emerald-400",[Ye.FAILED]:"bg-red-500/20 text-red-400",[Ye.PAUSED]:"bg-amber-500/20 text-amber-400"},sg={[Ye.IDLE]:"Waiting in queue to be processed",[Ye.PROCESSING]:"Currently being generated by Gemini",[Ye.COMPLETED]:"Successfully completed",[Ye.FAILED]:"Generation failed - check Gemini for errors",[Ye.PAUSED]:"Paused - will resume when queue starts"},lg=({status:t})=>w.jsx("div",{title:sg[t],className:`px-2 py-0.5 rounded-md text-[9px] font-black uppercase tracking-widest flex items-center gap-1 cursor-help ${ig[t]}`,children:t}),ag=({text:t})=>w.jsx("span",{title:t,className:"inline-flex items-center cursor-help opacity-30 hover:opacity-70 transition-opacity ml-1",children:w.jsx(No,{size:10})}),ug=({queue:t,isDark:e,defaultTool:o,onAddToQueue:i,onRemoveFromQueue:s,onOpenCsvDialog:c})=>{const[f,p]=fe.useState(""),[g,h]=fe.useState([]),[v,E]=fe.useState(null),[_,T]=fe.useState(o||Le.IMAGE),P=fe.useRef(null),R=fe.useRef(null),N=()=>{if(P.current){const G=P.current.selectionStart,W=P.current.selectionEnd,U=P.current.value.substring(G,W);U.trim().length>0?E({start:G,end:W,text:U}):E(null)}},F=G=>{if(!v||!P.current)return;const{start:W,end:U,text:V}=v,X=P.current.value;let O="";switch(G){case"standard":O=`(${V}:1.2)`;break;case"heavy":O=`((${V}:1.5))`;break;case"ultra":O=`(((${V}:1.8)))`;break;case"echo":O=`${V}... ${V}`;break}const ne=X.substring(0,W)+O+X.substring(U);p(ne),E(null),P.current.focus()},H=G=>{Array.from(G.target.files||[]).forEach(U=>{const V=new FileReader;V.onload=X=>{var ne;const O=(ne=X.target)==null?void 0:ne.result;h(ge=>[...ge,O])},V.readAsDataURL(U)}),G.target.value=""},$=()=>{i(f,void 0,g,_),p(""),h([])};return w.jsxs("div",{className:"space-y-2 animate-in fade-in duration-300",children:[w.jsxs("div",{className:"flex items-center justify-between px-1",children:[w.jsxs("span",{className:"text-[9px] font-black uppercase tracking-widest opacity-40 flex items-center",children:["New Prompt",w.jsx(ag,{text:"Enter your image description. Use line breaks to create multiple prompts at once."})]}),w.jsxs("div",{className:"flex gap-1",children:[w.jsx("button",{onClick:()=>{var G;return(G=R.current)==null?void 0:G.click()},title:"Attach reference images",className:`p-1.5 rounded-md border transition-all ${e?"bg-white/5 border-white/10":"bg-white border-slate-200 shadow-sm"} ${g.length>0?"text-blue-500 bg-blue-500/10 border-blue-500/30":"opacity-40 hover:opacity-100"}`,children:w.jsx(nu,{size:14})}),w.jsx("button",{onClick:c,title:"Import prompts from CSV",className:`p-1.5 rounded-md border transition-all ${e?"bg-white/5 border-white/10":"bg-white border-slate-200 shadow-sm"} opacity-40 hover:opacity-100`,children:w.jsx(_s,{size:14})}),w.jsx("input",{ref:R,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:H})]})]}),w.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(In).filter(([G])=>G!==Le.NONE).map(([G,W])=>w.jsxs("button",{onClick:()=>T(G),title:W.description,className:`px-2 py-1 rounded-md text-[9px] font-bold transition-all flex items-center gap-1 ${_===G?"bg-blue-600 text-white shadow-lg shadow-blue-600/30":e?"bg-white/5 hover:bg-white/10 border border-white/10":"bg-slate-100 hover:bg-slate-200 border border-slate-200"}`,children:[w.jsx("span",{children:W.icon}),w.jsx("span",{className:"hidden sm:inline",children:W.label})]},G))}),w.jsxs("div",{className:"relative",children:[w.jsx("textarea",{ref:P,value:f,onChange:G=>p(G.target.value),onSelect:N,placeholder:"Enter image instructions...",className:`w-full p-2 text-xs min-h-[140px] rounded-md border outline-none transition-all no-scrollbar leading-relaxed ${e?"bg-black/40 border-white/10 focus:border-blue-500/50":"bg-slate-50 border-slate-200 focus:border-blue-500/50 shadow-inner"}`}),v&&w.jsxs("div",{className:"absolute top-0 right-0 -translate-y-full mb-1 flex gap-1 p-1 bg-blue-600 rounded-md shadow-2xl animate-in fade-in slide-in-from-bottom-1 z-50",children:[w.jsx("button",{onClick:()=>F("standard"),title:"Light emphasis (1.2x)",className:"p-1 hover:bg-white/10 rounded-md",children:w.jsx(Oh,{size:12})}),w.jsx("button",{onClick:()=>F("heavy"),title:"Strong emphasis (1.5x)",className:"p-1 hover:bg-white/10 rounded-md",children:w.jsx(kh,{size:12})}),w.jsx("button",{onClick:()=>F("echo"),title:"Repeat for impact",className:"p-1 hover:bg-white/10 rounded-md",children:w.jsx(zh,{size:12})}),w.jsx("button",{onClick:()=>E(null),title:"Cancel",className:"p-1 hover:bg-white/10 rounded-md border-l border-white/20",children:w.jsx(rn,{size:12})})]}),g.length>0&&w.jsx("div",{className:"absolute left-1 bottom-1 flex gap-1 p-1 bg-black/60 rounded-md overflow-x-auto max-w-[160px] no-scrollbar",children:g.map((G,W)=>w.jsxs("div",{className:"relative shrink-0",children:[w.jsx("img",{src:G,className:"w-8 h-8 rounded-md object-cover",alt:"ref"}),w.jsx("button",{onClick:()=>h(U=>U.filter((V,X)=>X!==W)),title:"Remove image",className:"absolute -top-1 -right-1 bg-red-600 text-white rounded-md p-0.5",children:w.jsx(rn,{size:6})})]},W))}),w.jsx("button",{onClick:$,title:"Add prompt to processing queue",className:"absolute right-2 bottom-2 bg-blue-600 text-white px-3 py-1 rounded-md text-[10px] font-black uppercase shadow-lg shadow-blue-600/30 active:scale-95 transition-all",children:"Add to Queue"})]}),w.jsx("div",{className:"pt-2 space-y-1",children:t.length===0?w.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-10 gap-2 border-2 border-dashed border-white/5 rounded-md",children:[w.jsx(vs,{size:24}),w.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Queue Empty"})]}):t.map(G=>{const W=G.tool?In[G.tool]:In[Le.IMAGE];return w.jsxs("div",{className:`p-2 rounded-md border group transition-all ${e?"bg-white/2 border-white/5":"bg-white border-slate-100 shadow-sm"}`,children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(lg,{status:G.status}),w.jsxs("span",{title:(W==null?void 0:W.description)||"Tool",className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${e?"bg-white/10 text-white/60":"bg-slate-100 text-slate-600"}`,children:[W==null?void 0:W.icon," ",W==null?void 0:W.label]})]}),w.jsx("button",{onClick:()=>s(G.id),title:"Remove from queue",className:"opacity-0 group-hover:opacity-100 text-red-500/40 hover:text-red-500 transition-all p-1",children:w.jsx(Sr,{size:12})})]}),w.jsxs("p",{className:"text-[10px] font-medium leading-tight line-clamp-2 opacity-80",children:['"',G.originalPrompt,'"']}),G.images&&G.images.length>0&&w.jsx("div",{className:"flex gap-1 mt-2",children:G.images.slice(0,4).map((U,V)=>w.jsx("img",{src:U,className:"w-6 h-6 rounded-md object-cover border border-white/5",alt:"ref"},V))})]},G.id)})})]})};var xr={},Ts={exports:{}},st={},Cs={exports:{}},As={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au;function cg(){return au||(au=1,(function(t){function e(K,le){var b=K.length;K.push(le);e:for(;0<b;){var A=b-1>>>1,L=K[A];if(0<s(L,le))K[A]=le,K[b]=L,b=A;else break e}}function o(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var le=K[0],b=K.pop();if(b!==le){K[0]=b;e:for(var A=0,L=K.length,Z=L>>>1;A<Z;){var te=2*(A+1)-1,Ee=K[te],me=te+1,Te=K[me];if(0>s(Ee,b))me<L&&0>s(Te,Ee)?(K[A]=Te,K[me]=b,A=me):(K[A]=Ee,K[te]=b,A=te);else if(me<L&&0>s(Te,b))K[A]=Te,K[me]=b,A=me;else break e}}return le}function s(K,le){var b=K.sortIndex-le.sortIndex;return b!==0?b:K.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var g=[],h=[],v=1,E=null,_=3,T=!1,P=!1,R=!1,N=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(K){for(var le=o(h);le!==null;){if(le.callback===null)i(h);else if(le.startTime<=K)i(h),le.sortIndex=le.expirationTime,e(g,le);else break;le=o(h)}}function G(K){if(R=!1,$(K),!P)if(o(g)!==null)P=!0,de(W);else{var le=o(h);le!==null&&ve(G,le.startTime-K)}}function W(K,le){P=!1,R&&(R=!1,F(X),X=-1),T=!0;var b=_;try{for($(le),E=o(g);E!==null&&(!(E.expirationTime>le)||K&&!ge());){var A=E.callback;if(typeof A=="function"){E.callback=null,_=E.priorityLevel;var L=A(E.expirationTime<=le);le=t.unstable_now(),typeof L=="function"?E.callback=L:E===o(g)&&i(g),$(le)}else i(g);E=o(g)}if(E!==null)var Z=!0;else{var te=o(h);te!==null&&ve(G,te.startTime-le),Z=!1}return Z}finally{E=null,_=b,T=!1}}var U=!1,V=null,X=-1,O=5,ne=-1;function ge(){return!(t.unstable_now()-ne<O)}function Q(){if(V!==null){var K=t.unstable_now();ne=K;var le=!0;try{le=V(!0,K)}finally{le?q():(U=!1,V=null)}}else U=!1}var q;if(typeof H=="function")q=function(){H(Q)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,pe=se.port2;se.port1.onmessage=Q,q=function(){pe.postMessage(null)}}else q=function(){N(Q,0)};function de(K){V=K,U||(U=!0,q())}function ve(K,le){X=N(function(){K(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){P||T||(P=!0,de(W))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return o(g)},t.unstable_next=function(K){switch(_){case 1:case 2:case 3:var le=3;break;default:le=_}var b=_;_=le;try{return K()}finally{_=b}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,le){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var b=_;_=K;try{return le()}finally{_=b}},t.unstable_scheduleCallback=function(K,le,b){var A=t.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?A+b:A):b=A,K){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=b+L,K={id:v++,callback:le,priorityLevel:K,startTime:b,expirationTime:L,sortIndex:-1},b>A?(K.sortIndex=b,e(h,K),o(g)===null&&K===o(h)&&(R?(F(X),X=-1):R=!0,ve(G,b-A))):(K.sortIndex=L,e(g,K),P||T||(P=!0,de(W))),K},t.unstable_shouldYield=ge,t.unstable_wrapCallback=function(K){var le=_;return function(){var b=_;_=le;try{return K.apply(this,arguments)}finally{_=b}}}})(As)),As}var uu;function dg(){return uu||(uu=1,Cs.exports=cg()),Cs.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cu;function fg(){if(cu)return st;cu=1;var t=gs(),e=dg();function o(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function c(n,r){f(n,r),f(n+"Capture",r)}function f(n,r){for(s[n]=r,n=0;n<r.length;n++)i.add(r[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function _(n){return g.call(E,n)?!0:g.call(v,n)?!1:h.test(n)?E[n]=!0:(v[n]=!0,!1)}function T(n,r,l,d){if(l!==null&&l.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function P(n,r,l,d){if(r===null||typeof r>"u"||T(n,r,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function R(n,r,l,d,m,y,S){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=n,this.type=r,this.sanitizeURL=y,this.removeEmptyString=S}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){N[n]=new R(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];N[r]=new R(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){N[n]=new R(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){N[n]=new R(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){N[n]=new R(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){N[n]=new R(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){N[n]=new R(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){N[n]=new R(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){N[n]=new R(n,5,!1,n.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function H(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(F,H);N[r]=new R(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(F,H);N[r]=new R(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(F,H);N[r]=new R(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){N[n]=new R(n,1,!1,n.toLowerCase(),null,!1,!1)}),N.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){N[n]=new R(n,1,!1,n.toLowerCase(),null,!0,!0)});function $(n,r,l,d){var m=N.hasOwnProperty(r)?N[r]:null;(m!==null?m.type!==0:d||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(P(r,l,m,d)&&(l=null),d||m===null?_(r)&&(l===null?n.removeAttribute(r):n.setAttribute(r,""+l)):m.mustUseProperty?n[m.propertyName]=l===null?m.type===3?!1:"":l:(r=m.attributeName,d=m.attributeNamespace,l===null?n.removeAttribute(r):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,d?n.setAttributeNS(d,r,l):n.setAttribute(r,l))))}var G=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),U=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),ge=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),K=Symbol.iterator;function le(n){return n===null||typeof n!="object"?null:(n=K&&n[K]||n["@@iterator"],typeof n=="function"?n:null)}var b=Object.assign,A;function L(n){if(A===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);A=r&&r[1]||""}return`
`+A+n}var Z=!1;function te(n,r){if(!n||Z)return"";Z=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(D){var d=D}Reflect.construct(n,[],r)}else{try{r.call()}catch(D){d=D}n.call(r.prototype)}else{try{throw Error()}catch(D){d=D}n()}}catch(D){if(D&&d&&typeof D.stack=="string"){for(var m=D.stack.split(`
`),y=d.stack.split(`
`),S=m.length-1,C=y.length-1;1<=S&&0<=C&&m[S]!==y[C];)C--;for(;1<=S&&0<=C;S--,C--)if(m[S]!==y[C]){if(S!==1||C!==1)do if(S--,C--,0>C||m[S]!==y[C]){var x=`
`+m[S].replace(" at new "," at ");return n.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",n.displayName)),x}while(1<=S&&0<=C);break}}}finally{Z=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?L(n):""}function Ee(n){switch(n.tag){case 5:return L(n.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return n=te(n.type,!1),n;case 11:return n=te(n.type.render,!1),n;case 1:return n=te(n.type,!0),n;default:return""}}function me(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case U:return"Portal";case O:return"Profiler";case X:return"StrictMode";case q:return"Suspense";case se:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ge:return(n.displayName||"Context")+".Consumer";case ne:return(n._context.displayName||"Context")+".Provider";case Q:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case pe:return r=n.displayName||null,r!==null?r:me(n.type)||"Memo";case de:r=n._payload,n=n._init;try{return me(n(r))}catch{}}return null}function Te(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(r);case 8:return r===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function we(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ne(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pt(n){var r=Ne(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),d=""+n[r];if(!n.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,y=l.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return m.call(this)},set:function(S){d=""+S,y.call(this,S)}}),Object.defineProperty(n,r,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Yr(n){n._valueTracker||(n._valueTracker=pt(n))}function $d(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return n&&(d=Ne(n)?n.checked?"true":"false":n.value),n=d,n!==l?(r.setValue(n),!0):!1}function Qr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function js(n,r){var l=r.checked;return b({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Bd(n,r){var l=r.defaultValue==null?"":r.defaultValue,d=r.checked!=null?r.checked:r.defaultChecked;l=we(r.value!=null?r.value:l),n._wrapperState={initialChecked:d,initialValue:l,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function zd(n,r){r=r.checked,r!=null&&$(n,"checked",r,!1)}function el(n,r){zd(n,r);var l=we(r.value),d=r.type;if(l!=null)d==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?tl(n,r.type,l):r.hasOwnProperty("defaultValue")&&tl(n,r.type,we(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Od(n,r,l){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var d=r.type;if(!(d!=="submit"&&d!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,l||r===n.value||(n.value=r),n.defaultValue=r}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function tl(n,r,l){(r!=="number"||Qr(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Fo=Array.isArray;function eo(n,r,l,d){if(n=n.options,r){r={};for(var m=0;m<l.length;m++)r["$"+l[m]]=!0;for(l=0;l<n.length;l++)m=r.hasOwnProperty("$"+n[l].value),n[l].selected!==m&&(n[l].selected=m),m&&d&&(n[l].defaultSelected=!0)}else{for(l=""+we(l),r=null,m=0;m<n.length;m++){if(n[m].value===l){n[m].selected=!0,d&&(n[m].defaultSelected=!0);return}r!==null||n[m].disabled||(r=n[m])}r!==null&&(r.selected=!0)}}function nl(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(o(91));return b({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Jd(n,r){var l=r.value;if(l==null){if(l=r.children,r=r.defaultValue,l!=null){if(r!=null)throw Error(o(92));if(Fo(l)){if(1<l.length)throw Error(o(93));l=l[0]}r=l}r==null&&(r=""),l=r}n._wrapperState={initialValue:we(l)}}function Wd(n,r){var l=we(r.value),d=we(r.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),r.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),d!=null&&(n.defaultValue=""+d)}function Kd(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Yd(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ol(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Yd(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Xr,Qd=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,l,d,m){MSApp.execUnsafeLocalFunction(function(){return n(r,l,d,m)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Xr=Xr||document.createElement("div"),Xr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Xr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function bo(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var Uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qw=["Webkit","ms","Moz","O"];Object.keys(Uo).forEach(function(n){qw.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Uo[r]=Uo[n]})});function Xd(n,r,l){return r==null||typeof r=="boolean"||r===""?"":l||typeof r!="number"||r===0||Uo.hasOwnProperty(n)&&Uo[n]?(""+r).trim():r+"px"}function Zd(n,r){n=n.style;for(var l in r)if(r.hasOwnProperty(l)){var d=l.indexOf("--")===0,m=Xd(l,r[l],d);l==="float"&&(l="cssFloat"),d?n.setProperty(l,m):n[l]=m}}var Hw=b({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rl(n,r){if(r){if(Hw[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(o(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(o(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(o(61))}if(r.style!=null&&typeof r.style!="object")throw Error(o(62))}}function il(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sl=null;function ll(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var al=null,to=null,no=null;function jd(n){if(n=ir(n)){if(typeof al!="function")throw Error(o(280));var r=n.stateNode;r&&(r=_i(r),al(n.stateNode,n.type,r))}}function ef(n){to?no?no.push(n):no=[n]:to=n}function tf(){if(to){var n=to,r=no;if(no=to=null,jd(n),r)for(n=0;n<r.length;n++)jd(r[n])}}function nf(n,r){return n(r)}function of(){}var ul=!1;function rf(n,r,l){if(ul)return n(r,l);ul=!0;try{return nf(n,r,l)}finally{ul=!1,(to!==null||no!==null)&&(of(),tf())}}function Vo(n,r){var l=n.stateNode;if(l===null)return null;var d=_i(l);if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(o(231,r,typeof l));return l}var cl=!1;if(p)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){cl=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{cl=!1}function $w(n,r,l,d,m,y,S,C,x){var D=Array.prototype.slice.call(arguments,3);try{r.apply(l,D)}catch(z){this.onError(z)}}var qo=!1,Zr=null,jr=!1,dl=null,Bw={onError:function(n){qo=!0,Zr=n}};function zw(n,r,l,d,m,y,S,C,x){qo=!1,Zr=null,$w.apply(Bw,arguments)}function Ow(n,r,l,d,m,y,S,C,x){if(zw.apply(this,arguments),qo){if(qo){var D=Zr;qo=!1,Zr=null}else throw Error(o(198));jr||(jr=!0,dl=D)}}function Rn(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function sf(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function lf(n){if(Rn(n)!==n)throw Error(o(188))}function Jw(n){var r=n.alternate;if(!r){if(r=Rn(n),r===null)throw Error(o(188));return r!==n?null:n}for(var l=n,d=r;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){l=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return lf(m),n;if(y===d)return lf(m),r;y=y.sibling}throw Error(o(188))}if(l.return!==d.return)l=m,d=y;else{for(var S=!1,C=m.child;C;){if(C===l){S=!0,l=m,d=y;break}if(C===d){S=!0,d=m,l=y;break}C=C.sibling}if(!S){for(C=y.child;C;){if(C===l){S=!0,l=y,d=m;break}if(C===d){S=!0,d=y,l=m;break}C=C.sibling}if(!S)throw Error(o(189))}}if(l.alternate!==d)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?n:r}function af(n){return n=Jw(n),n!==null?uf(n):null}function uf(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=uf(n);if(r!==null)return r;n=n.sibling}return null}var cf=e.unstable_scheduleCallback,df=e.unstable_cancelCallback,Ww=e.unstable_shouldYield,Kw=e.unstable_requestPaint,Ve=e.unstable_now,Yw=e.unstable_getCurrentPriorityLevel,fl=e.unstable_ImmediatePriority,ff=e.unstable_UserBlockingPriority,ei=e.unstable_NormalPriority,Qw=e.unstable_LowPriority,pf=e.unstable_IdlePriority,ti=null,qt=null;function Xw(n){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(ti,n,void 0,(n.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:eT,Zw=Math.log,jw=Math.LN2;function eT(n){return n>>>=0,n===0?32:31-(Zw(n)/jw|0)|0}var ni=64,oi=4194304;function Ho(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ri(n,r){var l=n.pendingLanes;if(l===0)return 0;var d=0,m=n.suspendedLanes,y=n.pingedLanes,S=l&268435455;if(S!==0){var C=S&~m;C!==0?d=Ho(C):(y&=S,y!==0&&(d=Ho(y)))}else S=l&~m,S!==0?d=Ho(S):y!==0&&(d=Ho(y));if(d===0)return 0;if(r!==0&&r!==d&&(r&m)===0&&(m=d&-d,y=r&-r,m>=y||m===16&&(y&4194240)!==0))return r;if((d&4)!==0&&(d|=l&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=d;0<r;)l=31-Rt(r),m=1<<l,d|=n[l],r&=~m;return d}function tT(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nT(n,r){for(var l=n.suspendedLanes,d=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes;0<y;){var S=31-Rt(y),C=1<<S,x=m[S];x===-1?((C&l)===0||(C&d)!==0)&&(m[S]=tT(C,r)):x<=r&&(n.expiredLanes|=C),y&=~C}}function pl(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function mf(){var n=ni;return ni<<=1,(ni&4194240)===0&&(ni=64),n}function ml(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function $o(n,r,l){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Rt(r),n[r]=l}function oT(n,r){var l=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<l;){var m=31-Rt(l),y=1<<m;r[m]=0,d[m]=-1,n[m]=-1,l&=~y}}function hl(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var d=31-Rt(l),m=1<<d;m&r|n[d]&r&&(n[d]|=r),l&=~m}}var Ie=0;function hf(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var gf,gl,yf,vf,Ef,yl=!1,ii=[],an=null,un=null,cn=null,Bo=new Map,zo=new Map,dn=[],rT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _f(n,r){switch(n){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":Bo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(r.pointerId)}}function Oo(n,r,l,d,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},r!==null&&(r=ir(r),r!==null&&gl(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),n)}function iT(n,r,l,d,m){switch(r){case"focusin":return an=Oo(an,n,r,l,d,m),!0;case"dragenter":return un=Oo(un,n,r,l,d,m),!0;case"mouseover":return cn=Oo(cn,n,r,l,d,m),!0;case"pointerover":var y=m.pointerId;return Bo.set(y,Oo(Bo.get(y)||null,n,r,l,d,m)),!0;case"gotpointercapture":return y=m.pointerId,zo.set(y,Oo(zo.get(y)||null,n,r,l,d,m)),!0}return!1}function Sf(n){var r=Mn(n.target);if(r!==null){var l=Rn(r);if(l!==null){if(r=l.tag,r===13){if(r=sf(l),r!==null){n.blockedOn=r,Ef(n.priority,function(){yf(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function si(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=El(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);sl=d,l.target.dispatchEvent(d),sl=null}else return r=ir(l),r!==null&&gl(r),n.blockedOn=l,!1;r.shift()}return!0}function wf(n,r,l){si(n)&&l.delete(r)}function sT(){yl=!1,an!==null&&si(an)&&(an=null),un!==null&&si(un)&&(un=null),cn!==null&&si(cn)&&(cn=null),Bo.forEach(wf),zo.forEach(wf)}function Jo(n,r){n.blockedOn===r&&(n.blockedOn=null,yl||(yl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sT)))}function Wo(n){function r(m){return Jo(m,n)}if(0<ii.length){Jo(ii[0],n);for(var l=1;l<ii.length;l++){var d=ii[l];d.blockedOn===n&&(d.blockedOn=null)}}for(an!==null&&Jo(an,n),un!==null&&Jo(un,n),cn!==null&&Jo(cn,n),Bo.forEach(r),zo.forEach(r),l=0;l<dn.length;l++)d=dn[l],d.blockedOn===n&&(d.blockedOn=null);for(;0<dn.length&&(l=dn[0],l.blockedOn===null);)Sf(l),l.blockedOn===null&&dn.shift()}var oo=G.ReactCurrentBatchConfig,li=!0;function lT(n,r,l,d){var m=Ie,y=oo.transition;oo.transition=null;try{Ie=1,vl(n,r,l,d)}finally{Ie=m,oo.transition=y}}function aT(n,r,l,d){var m=Ie,y=oo.transition;oo.transition=null;try{Ie=4,vl(n,r,l,d)}finally{Ie=m,oo.transition=y}}function vl(n,r,l,d){if(li){var m=El(n,r,l,d);if(m===null)bl(n,r,d,ai,l),_f(n,d);else if(iT(m,n,r,l,d))d.stopPropagation();else if(_f(n,d),r&4&&-1<rT.indexOf(n)){for(;m!==null;){var y=ir(m);if(y!==null&&gf(y),y=El(n,r,l,d),y===null&&bl(n,r,d,ai,l),y===m)break;m=y}m!==null&&d.stopPropagation()}else bl(n,r,d,null,l)}}var ai=null;function El(n,r,l,d){if(ai=null,n=ll(d),n=Mn(n),n!==null)if(r=Rn(n),r===null)n=null;else if(l=r.tag,l===13){if(n=sf(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return ai=n,null}function Tf(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yw()){case fl:return 1;case ff:return 4;case ei:case Qw:return 16;case pf:return 536870912;default:return 16}default:return 16}}var fn=null,_l=null,ui=null;function Cf(){if(ui)return ui;var n,r=_l,l=r.length,d,m="value"in fn?fn.value:fn.textContent,y=m.length;for(n=0;n<l&&r[n]===m[n];n++);var S=l-n;for(d=1;d<=S&&r[l-d]===m[y-d];d++);return ui=m.slice(n,1<d?1-d:void 0)}function ci(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function di(){return!0}function Af(){return!1}function mt(n){function r(l,d,m,y,S){this._reactName=l,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(l=n[C],this[C]=l?l(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?di:Af,this.isPropagationStopped=Af,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),r}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sl=mt(ro),Ko=b({},ro,{view:0,detail:0}),uT=mt(Ko),wl,Tl,Yo,fi=b({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Al,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Yo&&(Yo&&n.type==="mousemove"?(wl=n.screenX-Yo.screenX,Tl=n.screenY-Yo.screenY):Tl=wl=0,Yo=n),wl)},movementY:function(n){return"movementY"in n?n.movementY:Tl}}),xf=mt(fi),cT=b({},fi,{dataTransfer:0}),dT=mt(cT),fT=b({},Ko,{relatedTarget:0}),Cl=mt(fT),pT=b({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),mT=mt(pT),hT=b({},ro,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),gT=mt(hT),yT=b({},ro,{data:0}),If=mt(yT),vT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ET={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_T={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ST(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=_T[n])?!!r[n]:!1}function Al(){return ST}var wT=b({},Ko,{key:function(n){if(n.key){var r=vT[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ci(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ET[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Al,charCode:function(n){return n.type==="keypress"?ci(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ci(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),TT=mt(wT),CT=b({},fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nf=mt(CT),AT=b({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Al}),xT=mt(AT),IT=b({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),NT=mt(IT),PT=b({},fi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),kT=mt(PT),RT=[9,13,27,32],xl=p&&"CompositionEvent"in window,Qo=null;p&&"documentMode"in document&&(Qo=document.documentMode);var MT=p&&"TextEvent"in window&&!Qo,Pf=p&&(!xl||Qo&&8<Qo&&11>=Qo),kf=" ",Rf=!1;function Mf(n,r){switch(n){case"keyup":return RT.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Df(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var io=!1;function DT(n,r){switch(n){case"compositionend":return Df(r);case"keypress":return r.which!==32?null:(Rf=!0,kf);case"textInput":return n=r.data,n===kf&&Rf?null:n;default:return null}}function LT(n,r){if(io)return n==="compositionend"||!xl&&Mf(n,r)?(n=Cf(),ui=_l=fn=null,io=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pf&&r.locale!=="ko"?null:r.data;default:return null}}var FT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!FT[n.type]:r==="textarea"}function Ff(n,r,l,d){ef(d),r=yi(r,"onChange"),0<r.length&&(l=new Sl("onChange","change",null,l,d),n.push({event:l,listeners:r}))}var Xo=null,Zo=null;function bT(n){jf(n,0)}function pi(n){var r=co(n);if($d(r))return n}function UT(n,r){if(n==="change")return r}var bf=!1;if(p){var Il;if(p){var Nl="oninput"in document;if(!Nl){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),Nl=typeof Uf.oninput=="function"}Il=Nl}else Il=!1;bf=Il&&(!document.documentMode||9<document.documentMode)}function Vf(){Xo&&(Xo.detachEvent("onpropertychange",Gf),Zo=Xo=null)}function Gf(n){if(n.propertyName==="value"&&pi(Zo)){var r=[];Ff(r,Zo,n,ll(n)),rf(bT,r)}}function VT(n,r,l){n==="focusin"?(Vf(),Xo=r,Zo=l,Xo.attachEvent("onpropertychange",Gf)):n==="focusout"&&Vf()}function GT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pi(Zo)}function qT(n,r){if(n==="click")return pi(r)}function HT(n,r){if(n==="input"||n==="change")return pi(r)}function $T(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Mt=typeof Object.is=="function"?Object.is:$T;function jo(n,r){if(Mt(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var m=l[d];if(!g.call(r,m)||!Mt(n[m],r[m]))return!1}return!0}function qf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hf(n,r){var l=qf(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=r&&d>=r)return{node:l,offset:r-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=qf(l)}}function $f(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?$f(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Bf(){for(var n=window,r=Qr();r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=Qr(n.document)}return r}function Pl(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function BT(n){var r=Bf(),l=n.focusedElem,d=n.selectionRange;if(r!==l&&l&&l.ownerDocument&&$f(l.ownerDocument.documentElement,l)){if(d!==null&&Pl(l)){if(r=d.start,n=d.end,n===void 0&&(n=r),"selectionStart"in l)l.selectionStart=r,l.selectionEnd=Math.min(n,l.value.length);else if(n=(r=l.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var m=l.textContent.length,y=Math.min(d.start,m);d=d.end===void 0?y:Math.min(d.end,m),!n.extend&&y>d&&(m=d,d=y,y=m),m=Hf(l,y);var S=Hf(l,d);m&&S&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(r=r.createRange(),r.setStart(m.node,m.offset),n.removeAllRanges(),y>d?(n.addRange(r),n.extend(S.node,S.offset)):(r.setEnd(S.node,S.offset),n.addRange(r)))}}for(r=[],n=l;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<r.length;l++)n=r[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var zT=p&&"documentMode"in document&&11>=document.documentMode,so=null,kl=null,er=null,Rl=!1;function zf(n,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Rl||so==null||so!==Qr(d)||(d=so,"selectionStart"in d&&Pl(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),er&&jo(er,d)||(er=d,d=yi(kl,"onSelect"),0<d.length&&(r=new Sl("onSelect","select",null,r,l),n.push({event:r,listeners:d}),r.target=so)))}function mi(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var lo={animationend:mi("Animation","AnimationEnd"),animationiteration:mi("Animation","AnimationIteration"),animationstart:mi("Animation","AnimationStart"),transitionend:mi("Transition","TransitionEnd")},Ml={},Of={};p&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function hi(n){if(Ml[n])return Ml[n];if(!lo[n])return n;var r=lo[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in Of)return Ml[n]=r[l];return n}var Jf=hi("animationend"),Wf=hi("animationiteration"),Kf=hi("animationstart"),Yf=hi("transitionend"),Qf=new Map,Xf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(n,r){Qf.set(n,r),c(r,[n])}for(var Dl=0;Dl<Xf.length;Dl++){var Ll=Xf[Dl],OT=Ll.toLowerCase(),JT=Ll[0].toUpperCase()+Ll.slice(1);pn(OT,"on"+JT)}pn(Jf,"onAnimationEnd"),pn(Wf,"onAnimationIteration"),pn(Kf,"onAnimationStart"),pn("dblclick","onDoubleClick"),pn("focusin","onFocus"),pn("focusout","onBlur"),pn(Yf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WT=new Set("cancel close invalid load scroll toggle".split(" ").concat(tr));function Zf(n,r,l){var d=n.type||"unknown-event";n.currentTarget=l,Ow(d,r,void 0,n),n.currentTarget=null}function jf(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],m=d.event;d=d.listeners;e:{var y=void 0;if(r)for(var S=d.length-1;0<=S;S--){var C=d[S],x=C.instance,D=C.currentTarget;if(C=C.listener,x!==y&&m.isPropagationStopped())break e;Zf(m,C,D),y=x}else for(S=0;S<d.length;S++){if(C=d[S],x=C.instance,D=C.currentTarget,C=C.listener,x!==y&&m.isPropagationStopped())break e;Zf(m,C,D),y=x}}}if(jr)throw n=dl,jr=!1,dl=null,n}function Re(n,r){var l=r[$l];l===void 0&&(l=r[$l]=new Set);var d=n+"__bubble";l.has(d)||(ep(r,n,2,!1),l.add(d))}function Fl(n,r,l){var d=0;r&&(d|=4),ep(l,n,d,r)}var gi="_reactListening"+Math.random().toString(36).slice(2);function nr(n){if(!n[gi]){n[gi]=!0,i.forEach(function(l){l!=="selectionchange"&&(WT.has(l)||Fl(l,!1,n),Fl(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[gi]||(r[gi]=!0,Fl("selectionchange",!1,r))}}function ep(n,r,l,d){switch(Tf(r)){case 1:var m=lT;break;case 4:m=aT;break;default:m=vl}l=m.bind(null,r,l,n),m=void 0,!cl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),d?m!==void 0?n.addEventListener(r,l,{capture:!0,passive:m}):n.addEventListener(r,l,!0):m!==void 0?n.addEventListener(r,l,{passive:m}):n.addEventListener(r,l,!1)}function bl(n,r,l,d,m){var y=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var C=d.stateNode.containerInfo;if(C===m||C.nodeType===8&&C.parentNode===m)break;if(S===4)for(S=d.return;S!==null;){var x=S.tag;if((x===3||x===4)&&(x=S.stateNode.containerInfo,x===m||x.nodeType===8&&x.parentNode===m))return;S=S.return}for(;C!==null;){if(S=Mn(C),S===null)return;if(x=S.tag,x===5||x===6){d=y=S;continue e}C=C.parentNode}}d=d.return}rf(function(){var D=y,z=ll(l),J=[];e:{var B=Qf.get(n);if(B!==void 0){var ee=Sl,re=n;switch(n){case"keypress":if(ci(l)===0)break e;case"keydown":case"keyup":ee=TT;break;case"focusin":re="focus",ee=Cl;break;case"focusout":re="blur",ee=Cl;break;case"beforeblur":case"afterblur":ee=Cl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=dT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=xT;break;case Jf:case Wf:case Kf:ee=mT;break;case Yf:ee=NT;break;case"scroll":ee=uT;break;case"wheel":ee=kT;break;case"copy":case"cut":case"paste":ee=gT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Nf}var ie=(r&4)!==0,Ge=!ie&&n==="scroll",k=ie?B!==null?B+"Capture":null:B;ie=[];for(var I=D,M;I!==null;){M=I;var Y=M.stateNode;if(M.tag===5&&Y!==null&&(M=Y,k!==null&&(Y=Vo(I,k),Y!=null&&ie.push(or(I,Y,M)))),Ge)break;I=I.return}0<ie.length&&(B=new ee(B,re,null,l,z),J.push({event:B,listeners:ie}))}}if((r&7)===0){e:{if(B=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",B&&l!==sl&&(re=l.relatedTarget||l.fromElement)&&(Mn(re)||re[Qt]))break e;if((ee||B)&&(B=z.window===z?z:(B=z.ownerDocument)?B.defaultView||B.parentWindow:window,ee?(re=l.relatedTarget||l.toElement,ee=D,re=re?Mn(re):null,re!==null&&(Ge=Rn(re),re!==Ge||re.tag!==5&&re.tag!==6)&&(re=null)):(ee=null,re=D),ee!==re)){if(ie=xf,Y="onMouseLeave",k="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(ie=Nf,Y="onPointerLeave",k="onPointerEnter",I="pointer"),Ge=ee==null?B:co(ee),M=re==null?B:co(re),B=new ie(Y,I+"leave",ee,l,z),B.target=Ge,B.relatedTarget=M,Y=null,Mn(z)===D&&(ie=new ie(k,I+"enter",re,l,z),ie.target=M,ie.relatedTarget=Ge,Y=ie),Ge=Y,ee&&re)t:{for(ie=ee,k=re,I=0,M=ie;M;M=ao(M))I++;for(M=0,Y=k;Y;Y=ao(Y))M++;for(;0<I-M;)ie=ao(ie),I--;for(;0<M-I;)k=ao(k),M--;for(;I--;){if(ie===k||k!==null&&ie===k.alternate)break t;ie=ao(ie),k=ao(k)}ie=null}else ie=null;ee!==null&&tp(J,B,ee,ie,!1),re!==null&&Ge!==null&&tp(J,Ge,re,ie,!0)}}e:{if(B=D?co(D):window,ee=B.nodeName&&B.nodeName.toLowerCase(),ee==="select"||ee==="input"&&B.type==="file")var ae=UT;else if(Lf(B))if(bf)ae=HT;else{ae=GT;var ue=VT}else(ee=B.nodeName)&&ee.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(ae=qT);if(ae&&(ae=ae(n,D))){Ff(J,ae,l,z);break e}ue&&ue(n,B,D),n==="focusout"&&(ue=B._wrapperState)&&ue.controlled&&B.type==="number"&&tl(B,"number",B.value)}switch(ue=D?co(D):window,n){case"focusin":(Lf(ue)||ue.contentEditable==="true")&&(so=ue,kl=D,er=null);break;case"focusout":er=kl=so=null;break;case"mousedown":Rl=!0;break;case"contextmenu":case"mouseup":case"dragend":Rl=!1,zf(J,l,z);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":zf(J,l,z)}var ce;if(xl)e:{switch(n){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else io?Mf(n,l)&&(he="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(he="onCompositionStart");he&&(Pf&&l.locale!=="ko"&&(io||he!=="onCompositionStart"?he==="onCompositionEnd"&&io&&(ce=Cf()):(fn=z,_l="value"in fn?fn.value:fn.textContent,io=!0)),ue=yi(D,he),0<ue.length&&(he=new If(he,n,null,l,z),J.push({event:he,listeners:ue}),ce?he.data=ce:(ce=Df(l),ce!==null&&(he.data=ce)))),(ce=MT?DT(n,l):LT(n,l))&&(D=yi(D,"onBeforeInput"),0<D.length&&(z=new If("onBeforeInput","beforeinput",null,l,z),J.push({event:z,listeners:D}),z.data=ce))}jf(J,r)})}function or(n,r,l){return{instance:n,listener:r,currentTarget:l}}function yi(n,r){for(var l=r+"Capture",d=[];n!==null;){var m=n,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Vo(n,l),y!=null&&d.unshift(or(n,y,m)),y=Vo(n,r),y!=null&&d.push(or(n,y,m))),n=n.return}return d}function ao(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function tp(n,r,l,d,m){for(var y=r._reactName,S=[];l!==null&&l!==d;){var C=l,x=C.alternate,D=C.stateNode;if(x!==null&&x===d)break;C.tag===5&&D!==null&&(C=D,m?(x=Vo(l,y),x!=null&&S.unshift(or(l,x,C))):m||(x=Vo(l,y),x!=null&&S.push(or(l,x,C)))),l=l.return}S.length!==0&&n.push({event:r,listeners:S})}var KT=/\r\n?/g,YT=/\u0000|\uFFFD/g;function np(n){return(typeof n=="string"?n:""+n).replace(KT,`
`).replace(YT,"")}function vi(n,r,l){if(r=np(r),np(n)!==r&&l)throw Error(o(425))}function Ei(){}var Ul=null,Vl=null;function Gl(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ql=typeof setTimeout=="function"?setTimeout:void 0,QT=typeof clearTimeout=="function"?clearTimeout:void 0,op=typeof Promise=="function"?Promise:void 0,XT=typeof queueMicrotask=="function"?queueMicrotask:typeof op<"u"?function(n){return op.resolve(null).then(n).catch(ZT)}:ql;function ZT(n){setTimeout(function(){throw n})}function Hl(n,r){var l=r,d=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(d===0){n.removeChild(m),Wo(r);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=m}while(l);Wo(r)}function mn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function rp(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return n;r--}else l==="/$"&&r++}n=n.previousSibling}return null}var uo=Math.random().toString(36).slice(2),Ht="__reactFiber$"+uo,rr="__reactProps$"+uo,Qt="__reactContainer$"+uo,$l="__reactEvents$"+uo,jT="__reactListeners$"+uo,eC="__reactHandles$"+uo;function Mn(n){var r=n[Ht];if(r)return r;for(var l=n.parentNode;l;){if(r=l[Qt]||l[Ht]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=rp(n);n!==null;){if(l=n[Ht])return l;n=rp(n)}return r}n=l,l=n.parentNode}return null}function ir(n){return n=n[Ht]||n[Qt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function co(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(o(33))}function _i(n){return n[rr]||null}var Bl=[],fo=-1;function hn(n){return{current:n}}function Me(n){0>fo||(n.current=Bl[fo],Bl[fo]=null,fo--)}function Pe(n,r){fo++,Bl[fo]=n.current,n.current=r}var gn={},Xe=hn(gn),at=hn(!1),Dn=gn;function po(n,r){var l=n.type.contextTypes;if(!l)return gn;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===r)return d.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in l)m[y]=r[y];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=m),m}function ut(n){return n=n.childContextTypes,n!=null}function Si(){Me(at),Me(Xe)}function ip(n,r,l){if(Xe.current!==gn)throw Error(o(168));Pe(Xe,r),Pe(at,l)}function sp(n,r,l){var d=n.stateNode;if(r=r.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var m in d)if(!(m in r))throw Error(o(108,Te(n)||"Unknown",m));return b({},l,d)}function wi(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||gn,Dn=Xe.current,Pe(Xe,n),Pe(at,at.current),!0}function lp(n,r,l){var d=n.stateNode;if(!d)throw Error(o(169));l?(n=sp(n,r,Dn),d.__reactInternalMemoizedMergedChildContext=n,Me(at),Me(Xe),Pe(Xe,n)):Me(at),Pe(at,l)}var Xt=null,Ti=!1,zl=!1;function ap(n){Xt===null?Xt=[n]:Xt.push(n)}function tC(n){Ti=!0,ap(n)}function yn(){if(!zl&&Xt!==null){zl=!0;var n=0,r=Ie;try{var l=Xt;for(Ie=1;n<l.length;n++){var d=l[n];do d=d(!0);while(d!==null)}Xt=null,Ti=!1}catch(m){throw Xt!==null&&(Xt=Xt.slice(n+1)),cf(fl,yn),m}finally{Ie=r,zl=!1}}return null}var mo=[],ho=0,Ci=null,Ai=0,St=[],wt=0,Ln=null,Zt=1,jt="";function Fn(n,r){mo[ho++]=Ai,mo[ho++]=Ci,Ci=n,Ai=r}function up(n,r,l){St[wt++]=Zt,St[wt++]=jt,St[wt++]=Ln,Ln=n;var d=Zt;n=jt;var m=32-Rt(d)-1;d&=~(1<<m),l+=1;var y=32-Rt(r)+m;if(30<y){var S=m-m%5;y=(d&(1<<S)-1).toString(32),d>>=S,m-=S,Zt=1<<32-Rt(r)+m|l<<m|d,jt=y+n}else Zt=1<<y|l<<m|d,jt=n}function Ol(n){n.return!==null&&(Fn(n,1),up(n,1,0))}function Jl(n){for(;n===Ci;)Ci=mo[--ho],mo[ho]=null,Ai=mo[--ho],mo[ho]=null;for(;n===Ln;)Ln=St[--wt],St[wt]=null,jt=St[--wt],St[wt]=null,Zt=St[--wt],St[wt]=null}var ht=null,gt=null,De=!1,Dt=null;function cp(n,r){var l=xt(5,null,null,0);l.elementType="DELETED",l.stateNode=r,l.return=n,r=n.deletions,r===null?(n.deletions=[l],n.flags|=16):r.push(l)}function dp(n,r){switch(n.tag){case 5:var l=n.type;return r=r.nodeType!==1||l.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,ht=n,gt=mn(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,ht=n,gt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(l=Ln!==null?{id:Zt,overflow:jt}:null,n.memoizedState={dehydrated:r,treeContext:l,retryLane:1073741824},l=xt(18,null,null,0),l.stateNode=r,l.return=n,n.child=l,ht=n,gt=null,!0):!1;default:return!1}}function Wl(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Kl(n){if(De){var r=gt;if(r){var l=r;if(!dp(n,r)){if(Wl(n))throw Error(o(418));r=mn(l.nextSibling);var d=ht;r&&dp(n,r)?cp(d,l):(n.flags=n.flags&-4097|2,De=!1,ht=n)}}else{if(Wl(n))throw Error(o(418));n.flags=n.flags&-4097|2,De=!1,ht=n}}}function fp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ht=n}function xi(n){if(n!==ht)return!1;if(!De)return fp(n),De=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Gl(n.type,n.memoizedProps)),r&&(r=gt)){if(Wl(n))throw pp(),Error(o(418));for(;r;)cp(n,r),r=mn(r.nextSibling)}if(fp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(r===0){gt=mn(n.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++}n=n.nextSibling}gt=null}}else gt=ht?mn(n.stateNode.nextSibling):null;return!0}function pp(){for(var n=gt;n;)n=mn(n.nextSibling)}function go(){gt=ht=null,De=!1}function Yl(n){Dt===null?Dt=[n]:Dt.push(n)}var nC=G.ReactCurrentBatchConfig;function sr(n,r,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(o(309));var d=l.stateNode}if(!d)throw Error(o(147,n));var m=d,y=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===y?r.ref:(r=function(S){var C=m.refs;S===null?delete C[y]:C[y]=S},r._stringRef=y,r)}if(typeof n!="string")throw Error(o(284));if(!l._owner)throw Error(o(290,n))}return n}function Ii(n,r){throw n=Object.prototype.toString.call(r),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function mp(n){var r=n._init;return r(n._payload)}function hp(n){function r(k,I){if(n){var M=k.deletions;M===null?(k.deletions=[I],k.flags|=16):M.push(I)}}function l(k,I){if(!n)return null;for(;I!==null;)r(k,I),I=I.sibling;return null}function d(k,I){for(k=new Map;I!==null;)I.key!==null?k.set(I.key,I):k.set(I.index,I),I=I.sibling;return k}function m(k,I){return k=An(k,I),k.index=0,k.sibling=null,k}function y(k,I,M){return k.index=M,n?(M=k.alternate,M!==null?(M=M.index,M<I?(k.flags|=2,I):M):(k.flags|=2,I)):(k.flags|=1048576,I)}function S(k){return n&&k.alternate===null&&(k.flags|=2),k}function C(k,I,M,Y){return I===null||I.tag!==6?(I=qa(M,k.mode,Y),I.return=k,I):(I=m(I,M),I.return=k,I)}function x(k,I,M,Y){var ae=M.type;return ae===V?z(k,I,M.props.children,Y,M.key):I!==null&&(I.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===de&&mp(ae)===I.type)?(Y=m(I,M.props),Y.ref=sr(k,I,M),Y.return=k,Y):(Y=Xi(M.type,M.key,M.props,null,k.mode,Y),Y.ref=sr(k,I,M),Y.return=k,Y)}function D(k,I,M,Y){return I===null||I.tag!==4||I.stateNode.containerInfo!==M.containerInfo||I.stateNode.implementation!==M.implementation?(I=Ha(M,k.mode,Y),I.return=k,I):(I=m(I,M.children||[]),I.return=k,I)}function z(k,I,M,Y,ae){return I===null||I.tag!==7?(I=Bn(M,k.mode,Y,ae),I.return=k,I):(I=m(I,M),I.return=k,I)}function J(k,I,M){if(typeof I=="string"&&I!==""||typeof I=="number")return I=qa(""+I,k.mode,M),I.return=k,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case W:return M=Xi(I.type,I.key,I.props,null,k.mode,M),M.ref=sr(k,null,I),M.return=k,M;case U:return I=Ha(I,k.mode,M),I.return=k,I;case de:var Y=I._init;return J(k,Y(I._payload),M)}if(Fo(I)||le(I))return I=Bn(I,k.mode,M,null),I.return=k,I;Ii(k,I)}return null}function B(k,I,M,Y){var ae=I!==null?I.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return ae!==null?null:C(k,I,""+M,Y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case W:return M.key===ae?x(k,I,M,Y):null;case U:return M.key===ae?D(k,I,M,Y):null;case de:return ae=M._init,B(k,I,ae(M._payload),Y)}if(Fo(M)||le(M))return ae!==null?null:z(k,I,M,Y,null);Ii(k,M)}return null}function ee(k,I,M,Y,ae){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return k=k.get(M)||null,C(I,k,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case W:return k=k.get(Y.key===null?M:Y.key)||null,x(I,k,Y,ae);case U:return k=k.get(Y.key===null?M:Y.key)||null,D(I,k,Y,ae);case de:var ue=Y._init;return ee(k,I,M,ue(Y._payload),ae)}if(Fo(Y)||le(Y))return k=k.get(M)||null,z(I,k,Y,ae,null);Ii(I,Y)}return null}function re(k,I,M,Y){for(var ae=null,ue=null,ce=I,he=I=0,Je=null;ce!==null&&he<M.length;he++){ce.index>he?(Je=ce,ce=null):Je=ce.sibling;var xe=B(k,ce,M[he],Y);if(xe===null){ce===null&&(ce=Je);break}n&&ce&&xe.alternate===null&&r(k,ce),I=y(xe,I,he),ue===null?ae=xe:ue.sibling=xe,ue=xe,ce=Je}if(he===M.length)return l(k,ce),De&&Fn(k,he),ae;if(ce===null){for(;he<M.length;he++)ce=J(k,M[he],Y),ce!==null&&(I=y(ce,I,he),ue===null?ae=ce:ue.sibling=ce,ue=ce);return De&&Fn(k,he),ae}for(ce=d(k,ce);he<M.length;he++)Je=ee(ce,k,he,M[he],Y),Je!==null&&(n&&Je.alternate!==null&&ce.delete(Je.key===null?he:Je.key),I=y(Je,I,he),ue===null?ae=Je:ue.sibling=Je,ue=Je);return n&&ce.forEach(function(xn){return r(k,xn)}),De&&Fn(k,he),ae}function ie(k,I,M,Y){var ae=le(M);if(typeof ae!="function")throw Error(o(150));if(M=ae.call(M),M==null)throw Error(o(151));for(var ue=ae=null,ce=I,he=I=0,Je=null,xe=M.next();ce!==null&&!xe.done;he++,xe=M.next()){ce.index>he?(Je=ce,ce=null):Je=ce.sibling;var xn=B(k,ce,xe.value,Y);if(xn===null){ce===null&&(ce=Je);break}n&&ce&&xn.alternate===null&&r(k,ce),I=y(xn,I,he),ue===null?ae=xn:ue.sibling=xn,ue=xn,ce=Je}if(xe.done)return l(k,ce),De&&Fn(k,he),ae;if(ce===null){for(;!xe.done;he++,xe=M.next())xe=J(k,xe.value,Y),xe!==null&&(I=y(xe,I,he),ue===null?ae=xe:ue.sibling=xe,ue=xe);return De&&Fn(k,he),ae}for(ce=d(k,ce);!xe.done;he++,xe=M.next())xe=ee(ce,k,he,xe.value,Y),xe!==null&&(n&&xe.alternate!==null&&ce.delete(xe.key===null?he:xe.key),I=y(xe,I,he),ue===null?ae=xe:ue.sibling=xe,ue=xe);return n&&ce.forEach(function(FC){return r(k,FC)}),De&&Fn(k,he),ae}function Ge(k,I,M,Y){if(typeof M=="object"&&M!==null&&M.type===V&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case W:e:{for(var ae=M.key,ue=I;ue!==null;){if(ue.key===ae){if(ae=M.type,ae===V){if(ue.tag===7){l(k,ue.sibling),I=m(ue,M.props.children),I.return=k,k=I;break e}}else if(ue.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===de&&mp(ae)===ue.type){l(k,ue.sibling),I=m(ue,M.props),I.ref=sr(k,ue,M),I.return=k,k=I;break e}l(k,ue);break}else r(k,ue);ue=ue.sibling}M.type===V?(I=Bn(M.props.children,k.mode,Y,M.key),I.return=k,k=I):(Y=Xi(M.type,M.key,M.props,null,k.mode,Y),Y.ref=sr(k,I,M),Y.return=k,k=Y)}return S(k);case U:e:{for(ue=M.key;I!==null;){if(I.key===ue)if(I.tag===4&&I.stateNode.containerInfo===M.containerInfo&&I.stateNode.implementation===M.implementation){l(k,I.sibling),I=m(I,M.children||[]),I.return=k,k=I;break e}else{l(k,I);break}else r(k,I);I=I.sibling}I=Ha(M,k.mode,Y),I.return=k,k=I}return S(k);case de:return ue=M._init,Ge(k,I,ue(M._payload),Y)}if(Fo(M))return re(k,I,M,Y);if(le(M))return ie(k,I,M,Y);Ii(k,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,I!==null&&I.tag===6?(l(k,I.sibling),I=m(I,M),I.return=k,k=I):(l(k,I),I=qa(M,k.mode,Y),I.return=k,k=I),S(k)):l(k,I)}return Ge}var yo=hp(!0),gp=hp(!1),Ni=hn(null),Pi=null,vo=null,Ql=null;function Xl(){Ql=vo=Pi=null}function Zl(n){var r=Ni.current;Me(Ni),n._currentValue=r}function jl(n,r,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===l)break;n=n.return}}function Eo(n,r){Pi=n,Ql=vo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(ct=!0),n.firstContext=null)}function Tt(n){var r=n._currentValue;if(Ql!==n)if(n={context:n,memoizedValue:r,next:null},vo===null){if(Pi===null)throw Error(o(308));vo=n,Pi.dependencies={lanes:0,firstContext:n}}else vo=vo.next=n;return r}var bn=null;function ea(n){bn===null?bn=[n]:bn.push(n)}function yp(n,r,l,d){var m=r.interleaved;return m===null?(l.next=l,ea(r)):(l.next=m.next,m.next=l),r.interleaved=l,en(n,d)}function en(n,r){n.lanes|=r;var l=n.alternate;for(l!==null&&(l.lanes|=r),l=n,n=n.return;n!==null;)n.childLanes|=r,l=n.alternate,l!==null&&(l.childLanes|=r),l=n,n=n.return;return l.tag===3?l.stateNode:null}var vn=!1;function ta(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vp(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function tn(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function En(n,r,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Ce&2)!==0){var m=d.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),d.pending=r,en(n,l)}return m=d.interleaved,m===null?(r.next=r,ea(d)):(r.next=m.next,m.next=r),d.interleaved=r,en(n,l)}function ki(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194240)!==0)){var d=r.lanes;d&=n.pendingLanes,l|=d,r.lanes=l,hl(n,l)}}function Ep(n,r){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?m=y=S:y=y.next=S,l=l.next}while(l!==null);y===null?m=y=r:y=y.next=r}else m=y=r;l={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,effects:d.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}function Ri(n,r,l,d){var m=n.updateQueue;vn=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var x=C,D=x.next;x.next=null,S===null?y=D:S.next=D,S=x;var z=n.alternate;z!==null&&(z=z.updateQueue,C=z.lastBaseUpdate,C!==S&&(C===null?z.firstBaseUpdate=D:C.next=D,z.lastBaseUpdate=x))}if(y!==null){var J=m.baseState;S=0,z=D=x=null,C=y;do{var B=C.lane,ee=C.eventTime;if((d&B)===B){z!==null&&(z=z.next={eventTime:ee,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var re=n,ie=C;switch(B=r,ee=l,ie.tag){case 1:if(re=ie.payload,typeof re=="function"){J=re.call(ee,J,B);break e}J=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ie.payload,B=typeof re=="function"?re.call(ee,J,B):re,B==null)break e;J=b({},J,B);break e;case 2:vn=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,B=m.effects,B===null?m.effects=[C]:B.push(C))}else ee={eventTime:ee,lane:B,tag:C.tag,payload:C.payload,callback:C.callback,next:null},z===null?(D=z=ee,x=J):z=z.next=ee,S|=B;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;B=C,C=B.next,B.next=null,m.lastBaseUpdate=B,m.shared.pending=null}}while(!0);if(z===null&&(x=J),m.baseState=x,m.firstBaseUpdate=D,m.lastBaseUpdate=z,r=m.shared.interleaved,r!==null){m=r;do S|=m.lane,m=m.next;while(m!==r)}else y===null&&(m.shared.lanes=0);Gn|=S,n.lanes=S,n.memoizedState=J}}function _p(n,r,l){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var d=n[r],m=d.callback;if(m!==null){if(d.callback=null,d=l,typeof m!="function")throw Error(o(191,m));m.call(d)}}}var lr={},$t=hn(lr),ar=hn(lr),ur=hn(lr);function Un(n){if(n===lr)throw Error(o(174));return n}function na(n,r){switch(Pe(ur,r),Pe(ar,n),Pe($t,lr),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ol(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=ol(r,n)}Me($t),Pe($t,r)}function _o(){Me($t),Me(ar),Me(ur)}function Sp(n){Un(ur.current);var r=Un($t.current),l=ol(r,n.type);r!==l&&(Pe(ar,n),Pe($t,l))}function oa(n){ar.current===n&&(Me($t),Me(ar))}var Fe=hn(0);function Mi(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ra=[];function ia(){for(var n=0;n<ra.length;n++)ra[n]._workInProgressVersionPrimary=null;ra.length=0}var Di=G.ReactCurrentDispatcher,sa=G.ReactCurrentBatchConfig,Vn=0,be=null,He=null,ze=null,Li=!1,cr=!1,dr=0,oC=0;function Ze(){throw Error(o(321))}function la(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!Mt(n[l],r[l]))return!1;return!0}function aa(n,r,l,d,m,y){if(Vn=y,be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Di.current=n===null||n.memoizedState===null?lC:aC,n=l(d,m),cr){y=0;do{if(cr=!1,dr=0,25<=y)throw Error(o(301));y+=1,ze=He=null,r.updateQueue=null,Di.current=uC,n=l(d,m)}while(cr)}if(Di.current=Ui,r=He!==null&&He.next!==null,Vn=0,ze=He=be=null,Li=!1,r)throw Error(o(300));return n}function ua(){var n=dr!==0;return dr=0,n}function Bt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?be.memoizedState=ze=n:ze=ze.next=n,ze}function Ct(){if(He===null){var n=be.alternate;n=n!==null?n.memoizedState:null}else n=He.next;var r=ze===null?be.memoizedState:ze.next;if(r!==null)ze=r,He=n;else{if(n===null)throw Error(o(310));He=n,n={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},ze===null?be.memoizedState=ze=n:ze=ze.next=n}return ze}function fr(n,r){return typeof r=="function"?r(n):r}function ca(n){var r=Ct(),l=r.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=n;var d=He,m=d.baseQueue,y=l.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}d.baseQueue=m=y,l.pending=null}if(m!==null){y=m.next,d=d.baseState;var C=S=null,x=null,D=y;do{var z=D.lane;if((Vn&z)===z)x!==null&&(x=x.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),d=D.hasEagerState?D.eagerState:n(d,D.action);else{var J={lane:z,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};x===null?(C=x=J,S=d):x=x.next=J,be.lanes|=z,Gn|=z}D=D.next}while(D!==null&&D!==y);x===null?S=d:x.next=C,Mt(d,r.memoizedState)||(ct=!0),r.memoizedState=d,r.baseState=S,r.baseQueue=x,l.lastRenderedState=d}if(n=l.interleaved,n!==null){m=n;do y=m.lane,be.lanes|=y,Gn|=y,m=m.next;while(m!==n)}else m===null&&(l.lanes=0);return[r.memoizedState,l.dispatch]}function da(n){var r=Ct(),l=r.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=n;var d=l.dispatch,m=l.pending,y=r.memoizedState;if(m!==null){l.pending=null;var S=m=m.next;do y=n(y,S.action),S=S.next;while(S!==m);Mt(y,r.memoizedState)||(ct=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),l.lastRenderedState=y}return[y,d]}function wp(){}function Tp(n,r){var l=be,d=Ct(),m=r(),y=!Mt(d.memoizedState,m);if(y&&(d.memoizedState=m,ct=!0),d=d.queue,fa(xp.bind(null,l,d,n),[n]),d.getSnapshot!==r||y||ze!==null&&ze.memoizedState.tag&1){if(l.flags|=2048,pr(9,Ap.bind(null,l,d,m,r),void 0,null),Oe===null)throw Error(o(349));(Vn&30)!==0||Cp(l,r,m)}return m}function Cp(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=be.updateQueue,r===null?(r={lastEffect:null,stores:null},be.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function Ap(n,r,l,d){r.value=l,r.getSnapshot=d,Ip(r)&&Np(n)}function xp(n,r,l){return l(function(){Ip(r)&&Np(n)})}function Ip(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!Mt(n,l)}catch{return!0}}function Np(n){var r=en(n,1);r!==null&&Ut(r,n,1,-1)}function Pp(n){var r=Bt();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:n},r.queue=n,n=n.dispatch=sC.bind(null,be,n),[r.memoizedState,n]}function pr(n,r,l,d){return n={tag:n,create:r,destroy:l,deps:d,next:null},r=be.updateQueue,r===null?(r={lastEffect:null,stores:null},be.updateQueue=r,r.lastEffect=n.next=n):(l=r.lastEffect,l===null?r.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,r.lastEffect=n)),n}function kp(){return Ct().memoizedState}function Fi(n,r,l,d){var m=Bt();be.flags|=n,m.memoizedState=pr(1|r,l,void 0,d===void 0?null:d)}function bi(n,r,l,d){var m=Ct();d=d===void 0?null:d;var y=void 0;if(He!==null){var S=He.memoizedState;if(y=S.destroy,d!==null&&la(d,S.deps)){m.memoizedState=pr(r,l,y,d);return}}be.flags|=n,m.memoizedState=pr(1|r,l,y,d)}function Rp(n,r){return Fi(8390656,8,n,r)}function fa(n,r){return bi(2048,8,n,r)}function Mp(n,r){return bi(4,2,n,r)}function Dp(n,r){return bi(4,4,n,r)}function Lp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Fp(n,r,l){return l=l!=null?l.concat([n]):null,bi(4,4,Lp.bind(null,r,n),l)}function pa(){}function bp(n,r){var l=Ct();r=r===void 0?null:r;var d=l.memoizedState;return d!==null&&r!==null&&la(r,d[1])?d[0]:(l.memoizedState=[n,r],n)}function Up(n,r){var l=Ct();r=r===void 0?null:r;var d=l.memoizedState;return d!==null&&r!==null&&la(r,d[1])?d[0]:(n=n(),l.memoizedState=[n,r],n)}function Vp(n,r,l){return(Vn&21)===0?(n.baseState&&(n.baseState=!1,ct=!0),n.memoizedState=l):(Mt(l,r)||(l=mf(),be.lanes|=l,Gn|=l,n.baseState=!0),r)}function rC(n,r){var l=Ie;Ie=l!==0&&4>l?l:4,n(!0);var d=sa.transition;sa.transition={};try{n(!1),r()}finally{Ie=l,sa.transition=d}}function Gp(){return Ct().memoizedState}function iC(n,r,l){var d=Tn(n);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},qp(n))Hp(r,l);else if(l=yp(n,r,l,d),l!==null){var m=rt();Ut(l,n,d,m),$p(l,r,d)}}function sC(n,r,l){var d=Tn(n),m={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(qp(n))Hp(r,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var S=r.lastRenderedState,C=y(S,l);if(m.hasEagerState=!0,m.eagerState=C,Mt(C,S)){var x=r.interleaved;x===null?(m.next=m,ea(r)):(m.next=x.next,x.next=m),r.interleaved=m;return}}catch{}finally{}l=yp(n,r,m,d),l!==null&&(m=rt(),Ut(l,n,d,m),$p(l,r,d))}}function qp(n){var r=n.alternate;return n===be||r!==null&&r===be}function Hp(n,r){cr=Li=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function $p(n,r,l){if((l&4194240)!==0){var d=r.lanes;d&=n.pendingLanes,l|=d,r.lanes=l,hl(n,l)}}var Ui={readContext:Tt,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},lC={readContext:Tt,useCallback:function(n,r){return Bt().memoizedState=[n,r===void 0?null:r],n},useContext:Tt,useEffect:Rp,useImperativeHandle:function(n,r,l){return l=l!=null?l.concat([n]):null,Fi(4194308,4,Lp.bind(null,r,n),l)},useLayoutEffect:function(n,r){return Fi(4194308,4,n,r)},useInsertionEffect:function(n,r){return Fi(4,2,n,r)},useMemo:function(n,r){var l=Bt();return r=r===void 0?null:r,n=n(),l.memoizedState=[n,r],n},useReducer:function(n,r,l){var d=Bt();return r=l!==void 0?l(r):r,d.memoizedState=d.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},d.queue=n,n=n.dispatch=iC.bind(null,be,n),[d.memoizedState,n]},useRef:function(n){var r=Bt();return n={current:n},r.memoizedState=n},useState:Pp,useDebugValue:pa,useDeferredValue:function(n){return Bt().memoizedState=n},useTransition:function(){var n=Pp(!1),r=n[0];return n=rC.bind(null,n[1]),Bt().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,l){var d=be,m=Bt();if(De){if(l===void 0)throw Error(o(407));l=l()}else{if(l=r(),Oe===null)throw Error(o(349));(Vn&30)!==0||Cp(d,r,l)}m.memoizedState=l;var y={value:l,getSnapshot:r};return m.queue=y,Rp(xp.bind(null,d,y,n),[n]),d.flags|=2048,pr(9,Ap.bind(null,d,y,l,r),void 0,null),l},useId:function(){var n=Bt(),r=Oe.identifierPrefix;if(De){var l=jt,d=Zt;l=(d&~(1<<32-Rt(d)-1)).toString(32)+l,r=":"+r+"R"+l,l=dr++,0<l&&(r+="H"+l.toString(32)),r+=":"}else l=oC++,r=":"+r+"r"+l.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},aC={readContext:Tt,useCallback:bp,useContext:Tt,useEffect:fa,useImperativeHandle:Fp,useInsertionEffect:Mp,useLayoutEffect:Dp,useMemo:Up,useReducer:ca,useRef:kp,useState:function(){return ca(fr)},useDebugValue:pa,useDeferredValue:function(n){var r=Ct();return Vp(r,He.memoizedState,n)},useTransition:function(){var n=ca(fr)[0],r=Ct().memoizedState;return[n,r]},useMutableSource:wp,useSyncExternalStore:Tp,useId:Gp,unstable_isNewReconciler:!1},uC={readContext:Tt,useCallback:bp,useContext:Tt,useEffect:fa,useImperativeHandle:Fp,useInsertionEffect:Mp,useLayoutEffect:Dp,useMemo:Up,useReducer:da,useRef:kp,useState:function(){return da(fr)},useDebugValue:pa,useDeferredValue:function(n){var r=Ct();return He===null?r.memoizedState=n:Vp(r,He.memoizedState,n)},useTransition:function(){var n=da(fr)[0],r=Ct().memoizedState;return[n,r]},useMutableSource:wp,useSyncExternalStore:Tp,useId:Gp,unstable_isNewReconciler:!1};function Lt(n,r){if(n&&n.defaultProps){r=b({},r),n=n.defaultProps;for(var l in n)r[l]===void 0&&(r[l]=n[l]);return r}return r}function ma(n,r,l,d){r=n.memoizedState,l=l(d,r),l=l==null?r:b({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Vi={isMounted:function(n){return(n=n._reactInternals)?Rn(n)===n:!1},enqueueSetState:function(n,r,l){n=n._reactInternals;var d=rt(),m=Tn(n),y=tn(d,m);y.payload=r,l!=null&&(y.callback=l),r=En(n,y,m),r!==null&&(Ut(r,n,m,d),ki(r,n,m))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var d=rt(),m=Tn(n),y=tn(d,m);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=En(n,y,m),r!==null&&(Ut(r,n,m,d),ki(r,n,m))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=rt(),d=Tn(n),m=tn(l,d);m.tag=2,r!=null&&(m.callback=r),r=En(n,m,d),r!==null&&(Ut(r,n,d,l),ki(r,n,d))}};function Bp(n,r,l,d,m,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,S):r.prototype&&r.prototype.isPureReactComponent?!jo(l,d)||!jo(m,y):!0}function zp(n,r,l){var d=!1,m=gn,y=r.contextType;return typeof y=="object"&&y!==null?y=Tt(y):(m=ut(r)?Dn:Xe.current,d=r.contextTypes,y=(d=d!=null)?po(n,m):gn),r=new r(l,y),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Vi,n.stateNode=r,r._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=y),r}function Op(n,r,l,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==n&&Vi.enqueueReplaceState(r,r.state,null)}function ha(n,r,l,d){var m=n.stateNode;m.props=l,m.state=n.memoizedState,m.refs={},ta(n);var y=r.contextType;typeof y=="object"&&y!==null?m.context=Tt(y):(y=ut(r)?Dn:Xe.current,m.context=po(n,y)),m.state=n.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(ma(n,r,y,l),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(r=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),r!==m.state&&Vi.enqueueReplaceState(m,m.state,null),Ri(n,l,m,d),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function So(n,r){try{var l="",d=r;do l+=Ee(d),d=d.return;while(d);var m=l}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:r,stack:m,digest:null}}function ga(n,r,l){return{value:n,source:null,stack:l??null,digest:r??null}}function ya(n,r){try{console.error(r.value)}catch(l){setTimeout(function(){throw l})}}var cC=typeof WeakMap=="function"?WeakMap:Map;function Jp(n,r,l){l=tn(-1,l),l.tag=3,l.payload={element:null};var d=r.value;return l.callback=function(){Oi||(Oi=!0,Ma=d),ya(n,r)},l}function Wp(n,r,l){l=tn(-1,l),l.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var m=r.value;l.payload=function(){return d(m)},l.callback=function(){ya(n,r)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){ya(n,r),typeof d!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var S=r.stack;this.componentDidCatch(r.value,{componentStack:S!==null?S:""})}),l}function Kp(n,r,l){var d=n.pingCache;if(d===null){d=n.pingCache=new cC;var m=new Set;d.set(r,m)}else m=d.get(r),m===void 0&&(m=new Set,d.set(r,m));m.has(l)||(m.add(l),n=CC.bind(null,n,r,l),r.then(n,n))}function Yp(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Qp(n,r,l,d,m){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(r=tn(-1,1),r.tag=2,En(l,r,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=m,n)}var dC=G.ReactCurrentOwner,ct=!1;function ot(n,r,l,d){r.child=n===null?gp(r,null,l,d):yo(r,n.child,l,d)}function Xp(n,r,l,d,m){l=l.render;var y=r.ref;return Eo(r,m),d=aa(n,r,l,d,y,m),l=ua(),n!==null&&!ct?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~m,nn(n,r,m)):(De&&l&&Ol(r),r.flags|=1,ot(n,r,d,m),r.child)}function Zp(n,r,l,d,m){if(n===null){var y=l.type;return typeof y=="function"&&!Ga(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(r.tag=15,r.type=y,jp(n,r,y,d,m)):(n=Xi(l.type,null,d,r,r.mode,m),n.ref=r.ref,n.return=r,r.child=n)}if(y=n.child,(n.lanes&m)===0){var S=y.memoizedProps;if(l=l.compare,l=l!==null?l:jo,l(S,d)&&n.ref===r.ref)return nn(n,r,m)}return r.flags|=1,n=An(y,d),n.ref=r.ref,n.return=r,r.child=n}function jp(n,r,l,d,m){if(n!==null){var y=n.memoizedProps;if(jo(y,d)&&n.ref===r.ref)if(ct=!1,r.pendingProps=d=y,(n.lanes&m)!==0)(n.flags&131072)!==0&&(ct=!0);else return r.lanes=n.lanes,nn(n,r,m)}return va(n,r,l,d,m)}function em(n,r,l){var d=r.pendingProps,m=d.children,y=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(To,yt),yt|=l;else{if((l&1073741824)===0)return n=y!==null?y.baseLanes|l:l,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Pe(To,yt),yt|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,Pe(To,yt),yt|=d}else y!==null?(d=y.baseLanes|l,r.memoizedState=null):d=l,Pe(To,yt),yt|=d;return ot(n,r,m,l),r.child}function tm(n,r){var l=r.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(r.flags|=512,r.flags|=2097152)}function va(n,r,l,d,m){var y=ut(l)?Dn:Xe.current;return y=po(r,y),Eo(r,m),l=aa(n,r,l,d,y,m),d=ua(),n!==null&&!ct?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~m,nn(n,r,m)):(De&&d&&Ol(r),r.flags|=1,ot(n,r,l,m),r.child)}function nm(n,r,l,d,m){if(ut(l)){var y=!0;wi(r)}else y=!1;if(Eo(r,m),r.stateNode===null)qi(n,r),zp(r,l,d),ha(r,l,d,m),d=!0;else if(n===null){var S=r.stateNode,C=r.memoizedProps;S.props=C;var x=S.context,D=l.contextType;typeof D=="object"&&D!==null?D=Tt(D):(D=ut(l)?Dn:Xe.current,D=po(r,D));var z=l.getDerivedStateFromProps,J=typeof z=="function"||typeof S.getSnapshotBeforeUpdate=="function";J||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(C!==d||x!==D)&&Op(r,S,d,D),vn=!1;var B=r.memoizedState;S.state=B,Ri(r,d,S,m),x=r.memoizedState,C!==d||B!==x||at.current||vn?(typeof z=="function"&&(ma(r,l,z,d),x=r.memoizedState),(C=vn||Bp(r,l,C,d,B,x,D))?(J||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(r.flags|=4194308)):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=x),S.props=d,S.state=x,S.context=D,d=C):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{S=r.stateNode,vp(n,r),C=r.memoizedProps,D=r.type===r.elementType?C:Lt(r.type,C),S.props=D,J=r.pendingProps,B=S.context,x=l.contextType,typeof x=="object"&&x!==null?x=Tt(x):(x=ut(l)?Dn:Xe.current,x=po(r,x));var ee=l.getDerivedStateFromProps;(z=typeof ee=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(C!==J||B!==x)&&Op(r,S,d,x),vn=!1,B=r.memoizedState,S.state=B,Ri(r,d,S,m);var re=r.memoizedState;C!==J||B!==re||at.current||vn?(typeof ee=="function"&&(ma(r,l,ee,d),re=r.memoizedState),(D=vn||Bp(r,l,D,d,B,re,x)||!1)?(z||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,re,x),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,re,x)),typeof S.componentDidUpdate=="function"&&(r.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof S.componentDidUpdate!="function"||C===n.memoizedProps&&B===n.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&B===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=re),S.props=d,S.state=re,S.context=x,d=D):(typeof S.componentDidUpdate!="function"||C===n.memoizedProps&&B===n.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&B===n.memoizedState||(r.flags|=1024),d=!1)}return Ea(n,r,l,d,y,m)}function Ea(n,r,l,d,m,y){tm(n,r);var S=(r.flags&128)!==0;if(!d&&!S)return m&&lp(r,l,!1),nn(n,r,y);d=r.stateNode,dC.current=r;var C=S&&typeof l.getDerivedStateFromError!="function"?null:d.render();return r.flags|=1,n!==null&&S?(r.child=yo(r,n.child,null,y),r.child=yo(r,null,C,y)):ot(n,r,C,y),r.memoizedState=d.state,m&&lp(r,l,!0),r.child}function om(n){var r=n.stateNode;r.pendingContext?ip(n,r.pendingContext,r.pendingContext!==r.context):r.context&&ip(n,r.context,!1),na(n,r.containerInfo)}function rm(n,r,l,d,m){return go(),Yl(m),r.flags|=256,ot(n,r,l,d),r.child}var _a={dehydrated:null,treeContext:null,retryLane:0};function Sa(n){return{baseLanes:n,cachePool:null,transitions:null}}function im(n,r,l){var d=r.pendingProps,m=Fe.current,y=!1,S=(r.flags&128)!==0,C;if((C=S)||(C=n!==null&&n.memoizedState===null?!1:(m&2)!==0),C?(y=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),Pe(Fe,m&1),n===null)return Kl(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(S=d.children,n=d.fallback,y?(d=r.mode,y=r.child,S={mode:"hidden",children:S},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=S):y=Zi(S,d,0,null),n=Bn(n,d,l,null),y.return=r,n.return=r,y.sibling=n,r.child=y,r.child.memoizedState=Sa(l),r.memoizedState=_a,n):wa(r,S));if(m=n.memoizedState,m!==null&&(C=m.dehydrated,C!==null))return fC(n,r,S,d,C,m,l);if(y){y=d.fallback,S=r.mode,m=n.child,C=m.sibling;var x={mode:"hidden",children:d.children};return(S&1)===0&&r.child!==m?(d=r.child,d.childLanes=0,d.pendingProps=x,r.deletions=null):(d=An(m,x),d.subtreeFlags=m.subtreeFlags&14680064),C!==null?y=An(C,y):(y=Bn(y,S,l,null),y.flags|=2),y.return=r,d.return=r,d.sibling=y,r.child=d,d=y,y=r.child,S=n.child.memoizedState,S=S===null?Sa(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=n.childLanes&~l,r.memoizedState=_a,d}return y=n.child,n=y.sibling,d=An(y,{mode:"visible",children:d.children}),(r.mode&1)===0&&(d.lanes=l),d.return=r,d.sibling=null,n!==null&&(l=r.deletions,l===null?(r.deletions=[n],r.flags|=16):l.push(n)),r.child=d,r.memoizedState=null,d}function wa(n,r){return r=Zi({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Gi(n,r,l,d){return d!==null&&Yl(d),yo(r,n.child,null,l),n=wa(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function fC(n,r,l,d,m,y,S){if(l)return r.flags&256?(r.flags&=-257,d=ga(Error(o(422))),Gi(n,r,S,d)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(y=d.fallback,m=r.mode,d=Zi({mode:"visible",children:d.children},m,0,null),y=Bn(y,m,S,null),y.flags|=2,d.return=r,y.return=r,d.sibling=y,r.child=d,(r.mode&1)!==0&&yo(r,n.child,null,S),r.child.memoizedState=Sa(S),r.memoizedState=_a,y);if((r.mode&1)===0)return Gi(n,r,S,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var C=d.dgst;return d=C,y=Error(o(419)),d=ga(y,d,void 0),Gi(n,r,S,d)}if(C=(S&n.childLanes)!==0,ct||C){if(d=Oe,d!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|S))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,en(n,m),Ut(d,n,m,-1))}return Va(),d=ga(Error(o(421))),Gi(n,r,S,d)}return m.data==="$?"?(r.flags|=128,r.child=n.child,r=AC.bind(null,n),m._reactRetry=r,null):(n=y.treeContext,gt=mn(m.nextSibling),ht=r,De=!0,Dt=null,n!==null&&(St[wt++]=Zt,St[wt++]=jt,St[wt++]=Ln,Zt=n.id,jt=n.overflow,Ln=r),r=wa(r,d.children),r.flags|=4096,r)}function sm(n,r,l){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),jl(n.return,r,l)}function Ta(n,r,l,d,m){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:m}:(y.isBackwards=r,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=m)}function lm(n,r,l){var d=r.pendingProps,m=d.revealOrder,y=d.tail;if(ot(n,r,d.children,l),d=Fe.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sm(n,l,r);else if(n.tag===19)sm(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Pe(Fe,d),(r.mode&1)===0)r.memoizedState=null;else switch(m){case"forwards":for(l=r.child,m=null;l!==null;)n=l.alternate,n!==null&&Mi(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=r.child,r.child=null):(m=l.sibling,l.sibling=null),Ta(r,!1,m,l,y);break;case"backwards":for(l=null,m=r.child,r.child=null;m!==null;){if(n=m.alternate,n!==null&&Mi(n)===null){r.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}Ta(r,!0,l,null,y);break;case"together":Ta(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function qi(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function nn(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),Gn|=r.lanes,(l&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(o(153));if(r.child!==null){for(n=r.child,l=An(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=An(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function pC(n,r,l){switch(r.tag){case 3:om(r),go();break;case 5:Sp(r);break;case 1:ut(r.type)&&wi(r);break;case 4:na(r,r.stateNode.containerInfo);break;case 10:var d=r.type._context,m=r.memoizedProps.value;Pe(Ni,d._currentValue),d._currentValue=m;break;case 13:if(d=r.memoizedState,d!==null)return d.dehydrated!==null?(Pe(Fe,Fe.current&1),r.flags|=128,null):(l&r.child.childLanes)!==0?im(n,r,l):(Pe(Fe,Fe.current&1),n=nn(n,r,l),n!==null?n.sibling:null);Pe(Fe,Fe.current&1);break;case 19:if(d=(l&r.childLanes)!==0,(n.flags&128)!==0){if(d)return lm(n,r,l);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Pe(Fe,Fe.current),d)break;return null;case 22:case 23:return r.lanes=0,em(n,r,l)}return nn(n,r,l)}var am,Ca,um,cm;am=function(n,r){for(var l=r.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Ca=function(){},um=function(n,r,l,d){var m=n.memoizedProps;if(m!==d){n=r.stateNode,Un($t.current);var y=null;switch(l){case"input":m=js(n,m),d=js(n,d),y=[];break;case"select":m=b({},m,{value:void 0}),d=b({},d,{value:void 0}),y=[];break;case"textarea":m=nl(n,m),d=nl(n,d),y=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=Ei)}rl(l,d);var S;l=null;for(D in m)if(!d.hasOwnProperty(D)&&m.hasOwnProperty(D)&&m[D]!=null)if(D==="style"){var C=m[D];for(S in C)C.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(s.hasOwnProperty(D)?y||(y=[]):(y=y||[]).push(D,null));for(D in d){var x=d[D];if(C=m!=null?m[D]:void 0,d.hasOwnProperty(D)&&x!==C&&(x!=null||C!=null))if(D==="style")if(C){for(S in C)!C.hasOwnProperty(S)||x&&x.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in x)x.hasOwnProperty(S)&&C[S]!==x[S]&&(l||(l={}),l[S]=x[S])}else l||(y||(y=[]),y.push(D,l)),l=x;else D==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,C=C?C.__html:void 0,x!=null&&C!==x&&(y=y||[]).push(D,x)):D==="children"?typeof x!="string"&&typeof x!="number"||(y=y||[]).push(D,""+x):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(s.hasOwnProperty(D)?(x!=null&&D==="onScroll"&&Re("scroll",n),y||C===x||(y=[])):(y=y||[]).push(D,x))}l&&(y=y||[]).push("style",l);var D=y;(r.updateQueue=D)&&(r.flags|=4)}},cm=function(n,r,l,d){l!==d&&(r.flags|=4)};function mr(n,r){if(!De)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function je(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(r)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=d,n.childLanes=l,r}function mC(n,r,l){var d=r.pendingProps;switch(Jl(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(r),null;case 1:return ut(r.type)&&Si(),je(r),null;case 3:return d=r.stateNode,_o(),Me(at),Me(Xe),ia(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(xi(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Dt!==null&&(Fa(Dt),Dt=null))),Ca(n,r),je(r),null;case 5:oa(r);var m=Un(ur.current);if(l=r.type,n!==null&&r.stateNode!=null)um(n,r,l,d,m),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!d){if(r.stateNode===null)throw Error(o(166));return je(r),null}if(n=Un($t.current),xi(r)){d=r.stateNode,l=r.type;var y=r.memoizedProps;switch(d[Ht]=r,d[rr]=y,n=(r.mode&1)!==0,l){case"dialog":Re("cancel",d),Re("close",d);break;case"iframe":case"object":case"embed":Re("load",d);break;case"video":case"audio":for(m=0;m<tr.length;m++)Re(tr[m],d);break;case"source":Re("error",d);break;case"img":case"image":case"link":Re("error",d),Re("load",d);break;case"details":Re("toggle",d);break;case"input":Bd(d,y),Re("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Re("invalid",d);break;case"textarea":Jd(d,y),Re("invalid",d)}rl(l,y),m=null;for(var S in y)if(y.hasOwnProperty(S)){var C=y[S];S==="children"?typeof C=="string"?d.textContent!==C&&(y.suppressHydrationWarning!==!0&&vi(d.textContent,C,n),m=["children",C]):typeof C=="number"&&d.textContent!==""+C&&(y.suppressHydrationWarning!==!0&&vi(d.textContent,C,n),m=["children",""+C]):s.hasOwnProperty(S)&&C!=null&&S==="onScroll"&&Re("scroll",d)}switch(l){case"input":Yr(d),Od(d,y,!0);break;case"textarea":Yr(d),Kd(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Ei)}d=m,r.updateQueue=d,d!==null&&(r.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Yd(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=S.createElement(l,{is:d.is}):(n=S.createElement(l),l==="select"&&(S=n,d.multiple?S.multiple=!0:d.size&&(S.size=d.size))):n=S.createElementNS(n,l),n[Ht]=r,n[rr]=d,am(n,r,!1,!1),r.stateNode=n;e:{switch(S=il(l,d),l){case"dialog":Re("cancel",n),Re("close",n),m=d;break;case"iframe":case"object":case"embed":Re("load",n),m=d;break;case"video":case"audio":for(m=0;m<tr.length;m++)Re(tr[m],n);m=d;break;case"source":Re("error",n),m=d;break;case"img":case"image":case"link":Re("error",n),Re("load",n),m=d;break;case"details":Re("toggle",n),m=d;break;case"input":Bd(n,d),m=js(n,d),Re("invalid",n);break;case"option":m=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},m=b({},d,{value:void 0}),Re("invalid",n);break;case"textarea":Jd(n,d),m=nl(n,d),Re("invalid",n);break;default:m=d}rl(l,m),C=m;for(y in C)if(C.hasOwnProperty(y)){var x=C[y];y==="style"?Zd(n,x):y==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Qd(n,x)):y==="children"?typeof x=="string"?(l!=="textarea"||x!=="")&&bo(n,x):typeof x=="number"&&bo(n,""+x):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?x!=null&&y==="onScroll"&&Re("scroll",n):x!=null&&$(n,y,x,S))}switch(l){case"input":Yr(n),Od(n,d,!1);break;case"textarea":Yr(n),Kd(n);break;case"option":d.value!=null&&n.setAttribute("value",""+we(d.value));break;case"select":n.multiple=!!d.multiple,y=d.value,y!=null?eo(n,!!d.multiple,y,!1):d.defaultValue!=null&&eo(n,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=Ei)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return je(r),null;case 6:if(n&&r.stateNode!=null)cm(n,r,n.memoizedProps,d);else{if(typeof d!="string"&&r.stateNode===null)throw Error(o(166));if(l=Un(ur.current),Un($t.current),xi(r)){if(d=r.stateNode,l=r.memoizedProps,d[Ht]=r,(y=d.nodeValue!==l)&&(n=ht,n!==null))switch(n.tag){case 3:vi(d.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&vi(d.nodeValue,l,(n.mode&1)!==0)}y&&(r.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Ht]=r,r.stateNode=d}return je(r),null;case 13:if(Me(Fe),d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(De&&gt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)pp(),go(),r.flags|=98560,y=!1;else if(y=xi(r),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(o(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Ht]=r}else go(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;je(r),y=!1}else Dt!==null&&(Fa(Dt),Dt=null),y=!0;if(!y)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=l,r):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(Fe.current&1)!==0?$e===0&&($e=3):Va())),r.updateQueue!==null&&(r.flags|=4),je(r),null);case 4:return _o(),Ca(n,r),n===null&&nr(r.stateNode.containerInfo),je(r),null;case 10:return Zl(r.type._context),je(r),null;case 17:return ut(r.type)&&Si(),je(r),null;case 19:if(Me(Fe),y=r.memoizedState,y===null)return je(r),null;if(d=(r.flags&128)!==0,S=y.rendering,S===null)if(d)mr(y,!1);else{if($e!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(S=Mi(n),S!==null){for(r.flags|=128,mr(y,!1),d=S.updateQueue,d!==null&&(r.updateQueue=d,r.flags|=4),r.subtreeFlags=0,d=l,l=r.child;l!==null;)y=l,n=d,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,n=S.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Pe(Fe,Fe.current&1|2),r.child}n=n.sibling}y.tail!==null&&Ve()>Co&&(r.flags|=128,d=!0,mr(y,!1),r.lanes=4194304)}else{if(!d)if(n=Mi(S),n!==null){if(r.flags|=128,d=!0,l=n.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),mr(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!De)return je(r),null}else 2*Ve()-y.renderingStartTime>Co&&l!==1073741824&&(r.flags|=128,d=!0,mr(y,!1),r.lanes=4194304);y.isBackwards?(S.sibling=r.child,r.child=S):(l=y.last,l!==null?l.sibling=S:r.child=S,y.last=S)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=Ve(),r.sibling=null,l=Fe.current,Pe(Fe,d?l&1|2:l&1),r):(je(r),null);case 22:case 23:return Ua(),d=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(r.flags|=8192),d&&(r.mode&1)!==0?(yt&1073741824)!==0&&(je(r),r.subtreeFlags&6&&(r.flags|=8192)):je(r),null;case 24:return null;case 25:return null}throw Error(o(156,r.tag))}function hC(n,r){switch(Jl(r),r.tag){case 1:return ut(r.type)&&Si(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return _o(),Me(at),Me(Xe),ia(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return oa(r),null;case 13:if(Me(Fe),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(o(340));go()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Me(Fe),null;case 4:return _o(),null;case 10:return Zl(r.type._context),null;case 22:case 23:return Ua(),null;case 24:return null;default:return null}}var Hi=!1,et=!1,gC=typeof WeakSet=="function"?WeakSet:Set,oe=null;function wo(n,r){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Ue(n,r,d)}else l.current=null}function Aa(n,r,l){try{l()}catch(d){Ue(n,r,d)}}var dm=!1;function yC(n,r){if(Ul=li,n=Bf(),Pl(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var S=0,C=-1,x=-1,D=0,z=0,J=n,B=null;t:for(;;){for(var ee;J!==l||m!==0&&J.nodeType!==3||(C=S+m),J!==y||d!==0&&J.nodeType!==3||(x=S+d),J.nodeType===3&&(S+=J.nodeValue.length),(ee=J.firstChild)!==null;)B=J,J=ee;for(;;){if(J===n)break t;if(B===l&&++D===m&&(C=S),B===y&&++z===d&&(x=S),(ee=J.nextSibling)!==null)break;J=B,B=J.parentNode}J=ee}l=C===-1||x===-1?null:{start:C,end:x}}else l=null}l=l||{start:0,end:0}}else l=null;for(Vl={focusedElem:n,selectionRange:l},li=!1,oe=r;oe!==null;)if(r=oe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,oe=n;else for(;oe!==null;){r=oe;try{var re=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var ie=re.memoizedProps,Ge=re.memoizedState,k=r.stateNode,I=k.getSnapshotBeforeUpdate(r.elementType===r.type?ie:Lt(r.type,ie),Ge);k.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Y){Ue(r,r.return,Y)}if(n=r.sibling,n!==null){n.return=r.return,oe=n;break}oe=r.return}return re=dm,dm=!1,re}function hr(n,r,l){var d=r.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&n)===n){var y=m.destroy;m.destroy=void 0,y!==void 0&&Aa(r,l,y)}m=m.next}while(m!==d)}}function $i(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&n)===n){var d=l.create;l.destroy=d()}l=l.next}while(l!==r)}}function xa(n){var r=n.ref;if(r!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof r=="function"?r(n):r.current=n}}function fm(n){var r=n.alternate;r!==null&&(n.alternate=null,fm(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Ht],delete r[rr],delete r[$l],delete r[jT],delete r[eC])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function pm(n){return n.tag===5||n.tag===3||n.tag===4}function mm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ia(n,r,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?l.nodeType===8?l.parentNode.insertBefore(n,r):l.insertBefore(n,r):(l.nodeType===8?(r=l.parentNode,r.insertBefore(n,l)):(r=l,r.appendChild(n)),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Ei));else if(d!==4&&(n=n.child,n!==null))for(Ia(n,r,l),n=n.sibling;n!==null;)Ia(n,r,l),n=n.sibling}function Na(n,r,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Na(n,r,l),n=n.sibling;n!==null;)Na(n,r,l),n=n.sibling}var We=null,Ft=!1;function _n(n,r,l){for(l=l.child;l!==null;)hm(n,r,l),l=l.sibling}function hm(n,r,l){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(ti,l)}catch{}switch(l.tag){case 5:et||wo(l,r);case 6:var d=We,m=Ft;We=null,_n(n,r,l),We=d,Ft=m,We!==null&&(Ft?(n=We,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):We.removeChild(l.stateNode));break;case 18:We!==null&&(Ft?(n=We,l=l.stateNode,n.nodeType===8?Hl(n.parentNode,l):n.nodeType===1&&Hl(n,l),Wo(n)):Hl(We,l.stateNode));break;case 4:d=We,m=Ft,We=l.stateNode.containerInfo,Ft=!0,_n(n,r,l),We=d,Ft=m;break;case 0:case 11:case 14:case 15:if(!et&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var y=m,S=y.destroy;y=y.tag,S!==void 0&&((y&2)!==0||(y&4)!==0)&&Aa(l,r,S),m=m.next}while(m!==d)}_n(n,r,l);break;case 1:if(!et&&(wo(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(C){Ue(l,r,C)}_n(n,r,l);break;case 21:_n(n,r,l);break;case 22:l.mode&1?(et=(d=et)||l.memoizedState!==null,_n(n,r,l),et=d):_n(n,r,l);break;default:_n(n,r,l)}}function gm(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new gC),r.forEach(function(d){var m=xC.bind(null,n,d);l.has(d)||(l.add(d),d.then(m,m))})}}function bt(n,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];try{var y=n,S=r,C=S;e:for(;C!==null;){switch(C.tag){case 5:We=C.stateNode,Ft=!1;break e;case 3:We=C.stateNode.containerInfo,Ft=!0;break e;case 4:We=C.stateNode.containerInfo,Ft=!0;break e}C=C.return}if(We===null)throw Error(o(160));hm(y,S,m),We=null,Ft=!1;var x=m.alternate;x!==null&&(x.return=null),m.return=null}catch(D){Ue(m,r,D)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)ym(r,n),r=r.sibling}function ym(n,r){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(bt(r,n),zt(n),d&4){try{hr(3,n,n.return),$i(3,n)}catch(ie){Ue(n,n.return,ie)}try{hr(5,n,n.return)}catch(ie){Ue(n,n.return,ie)}}break;case 1:bt(r,n),zt(n),d&512&&l!==null&&wo(l,l.return);break;case 5:if(bt(r,n),zt(n),d&512&&l!==null&&wo(l,l.return),n.flags&32){var m=n.stateNode;try{bo(m,"")}catch(ie){Ue(n,n.return,ie)}}if(d&4&&(m=n.stateNode,m!=null)){var y=n.memoizedProps,S=l!==null?l.memoizedProps:y,C=n.type,x=n.updateQueue;if(n.updateQueue=null,x!==null)try{C==="input"&&y.type==="radio"&&y.name!=null&&zd(m,y),il(C,S);var D=il(C,y);for(S=0;S<x.length;S+=2){var z=x[S],J=x[S+1];z==="style"?Zd(m,J):z==="dangerouslySetInnerHTML"?Qd(m,J):z==="children"?bo(m,J):$(m,z,J,D)}switch(C){case"input":el(m,y);break;case"textarea":Wd(m,y);break;case"select":var B=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var ee=y.value;ee!=null?eo(m,!!y.multiple,ee,!1):B!==!!y.multiple&&(y.defaultValue!=null?eo(m,!!y.multiple,y.defaultValue,!0):eo(m,!!y.multiple,y.multiple?[]:"",!1))}m[rr]=y}catch(ie){Ue(n,n.return,ie)}}break;case 6:if(bt(r,n),zt(n),d&4){if(n.stateNode===null)throw Error(o(162));m=n.stateNode,y=n.memoizedProps;try{m.nodeValue=y}catch(ie){Ue(n,n.return,ie)}}break;case 3:if(bt(r,n),zt(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Wo(r.containerInfo)}catch(ie){Ue(n,n.return,ie)}break;case 4:bt(r,n),zt(n);break;case 13:bt(r,n),zt(n),m=n.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(Ra=Ve())),d&4&&gm(n);break;case 22:if(z=l!==null&&l.memoizedState!==null,n.mode&1?(et=(D=et)||z,bt(r,n),et=D):bt(r,n),zt(n),d&8192){if(D=n.memoizedState!==null,(n.stateNode.isHidden=D)&&!z&&(n.mode&1)!==0)for(oe=n,z=n.child;z!==null;){for(J=oe=z;oe!==null;){switch(B=oe,ee=B.child,B.tag){case 0:case 11:case 14:case 15:hr(4,B,B.return);break;case 1:wo(B,B.return);var re=B.stateNode;if(typeof re.componentWillUnmount=="function"){d=B,l=B.return;try{r=d,re.props=r.memoizedProps,re.state=r.memoizedState,re.componentWillUnmount()}catch(ie){Ue(d,l,ie)}}break;case 5:wo(B,B.return);break;case 22:if(B.memoizedState!==null){_m(J);continue}}ee!==null?(ee.return=B,oe=ee):_m(J)}z=z.sibling}e:for(z=null,J=n;;){if(J.tag===5){if(z===null){z=J;try{m=J.stateNode,D?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(C=J.stateNode,x=J.memoizedProps.style,S=x!=null&&x.hasOwnProperty("display")?x.display:null,C.style.display=Xd("display",S))}catch(ie){Ue(n,n.return,ie)}}}else if(J.tag===6){if(z===null)try{J.stateNode.nodeValue=D?"":J.memoizedProps}catch(ie){Ue(n,n.return,ie)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;z===J&&(z=null),J=J.return}z===J&&(z=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:bt(r,n),zt(n),d&4&&gm(n);break;case 21:break;default:bt(r,n),zt(n)}}function zt(n){var r=n.flags;if(r&2){try{e:{for(var l=n.return;l!==null;){if(pm(l)){var d=l;break e}l=l.return}throw Error(o(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(bo(m,""),d.flags&=-33);var y=mm(n);Na(n,y,m);break;case 3:case 4:var S=d.stateNode.containerInfo,C=mm(n);Ia(n,C,S);break;default:throw Error(o(161))}}catch(x){Ue(n,n.return,x)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function vC(n,r,l){oe=n,vm(n)}function vm(n,r,l){for(var d=(n.mode&1)!==0;oe!==null;){var m=oe,y=m.child;if(m.tag===22&&d){var S=m.memoizedState!==null||Hi;if(!S){var C=m.alternate,x=C!==null&&C.memoizedState!==null||et;C=Hi;var D=et;if(Hi=S,(et=x)&&!D)for(oe=m;oe!==null;)S=oe,x=S.child,S.tag===22&&S.memoizedState!==null?Sm(m):x!==null?(x.return=S,oe=x):Sm(m);for(;y!==null;)oe=y,vm(y),y=y.sibling;oe=m,Hi=C,et=D}Em(n)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,oe=y):Em(n)}}function Em(n){for(;oe!==null;){var r=oe;if((r.flags&8772)!==0){var l=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:et||$i(5,r);break;case 1:var d=r.stateNode;if(r.flags&4&&!et)if(l===null)d.componentDidMount();else{var m=r.elementType===r.type?l.memoizedProps:Lt(r.type,l.memoizedProps);d.componentDidUpdate(m,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=r.updateQueue;y!==null&&_p(r,y,d);break;case 3:var S=r.updateQueue;if(S!==null){if(l=null,r.child!==null)switch(r.child.tag){case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}_p(r,S,l)}break;case 5:var C=r.stateNode;if(l===null&&r.flags&4){l=C;var x=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&l.focus();break;case"img":x.src&&(l.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var D=r.alternate;if(D!==null){var z=D.memoizedState;if(z!==null){var J=z.dehydrated;J!==null&&Wo(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}et||r.flags&512&&xa(r)}catch(B){Ue(r,r.return,B)}}if(r===n){oe=null;break}if(l=r.sibling,l!==null){l.return=r.return,oe=l;break}oe=r.return}}function _m(n){for(;oe!==null;){var r=oe;if(r===n){oe=null;break}var l=r.sibling;if(l!==null){l.return=r.return,oe=l;break}oe=r.return}}function Sm(n){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var l=r.return;try{$i(4,r)}catch(x){Ue(r,l,x)}break;case 1:var d=r.stateNode;if(typeof d.componentDidMount=="function"){var m=r.return;try{d.componentDidMount()}catch(x){Ue(r,m,x)}}var y=r.return;try{xa(r)}catch(x){Ue(r,y,x)}break;case 5:var S=r.return;try{xa(r)}catch(x){Ue(r,S,x)}}}catch(x){Ue(r,r.return,x)}if(r===n){oe=null;break}var C=r.sibling;if(C!==null){C.return=r.return,oe=C;break}oe=r.return}}var EC=Math.ceil,Bi=G.ReactCurrentDispatcher,Pa=G.ReactCurrentOwner,At=G.ReactCurrentBatchConfig,Ce=0,Oe=null,qe=null,Ke=0,yt=0,To=hn(0),$e=0,gr=null,Gn=0,zi=0,ka=0,yr=null,dt=null,Ra=0,Co=1/0,on=null,Oi=!1,Ma=null,Sn=null,Ji=!1,wn=null,Wi=0,vr=0,Da=null,Ki=-1,Yi=0;function rt(){return(Ce&6)!==0?Ve():Ki!==-1?Ki:Ki=Ve()}function Tn(n){return(n.mode&1)===0?1:(Ce&2)!==0&&Ke!==0?Ke&-Ke:nC.transition!==null?(Yi===0&&(Yi=mf()),Yi):(n=Ie,n!==0||(n=window.event,n=n===void 0?16:Tf(n.type)),n)}function Ut(n,r,l,d){if(50<vr)throw vr=0,Da=null,Error(o(185));$o(n,l,d),((Ce&2)===0||n!==Oe)&&(n===Oe&&((Ce&2)===0&&(zi|=l),$e===4&&Cn(n,Ke)),ft(n,d),l===1&&Ce===0&&(r.mode&1)===0&&(Co=Ve()+500,Ti&&yn()))}function ft(n,r){var l=n.callbackNode;nT(n,r);var d=ri(n,n===Oe?Ke:0);if(d===0)l!==null&&df(l),n.callbackNode=null,n.callbackPriority=0;else if(r=d&-d,n.callbackPriority!==r){if(l!=null&&df(l),r===1)n.tag===0?tC(Tm.bind(null,n)):ap(Tm.bind(null,n)),XT(function(){(Ce&6)===0&&yn()}),l=null;else{switch(hf(d)){case 1:l=fl;break;case 4:l=ff;break;case 16:l=ei;break;case 536870912:l=pf;break;default:l=ei}l=Rm(l,wm.bind(null,n))}n.callbackPriority=r,n.callbackNode=l}}function wm(n,r){if(Ki=-1,Yi=0,(Ce&6)!==0)throw Error(o(327));var l=n.callbackNode;if(Ao()&&n.callbackNode!==l)return null;var d=ri(n,n===Oe?Ke:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||r)r=Qi(n,d);else{r=d;var m=Ce;Ce|=2;var y=Am();(Oe!==n||Ke!==r)&&(on=null,Co=Ve()+500,Hn(n,r));do try{wC();break}catch(C){Cm(n,C)}while(!0);Xl(),Bi.current=y,Ce=m,qe!==null?r=0:(Oe=null,Ke=0,r=$e)}if(r!==0){if(r===2&&(m=pl(n),m!==0&&(d=m,r=La(n,m))),r===1)throw l=gr,Hn(n,0),Cn(n,d),ft(n,Ve()),l;if(r===6)Cn(n,d);else{if(m=n.current.alternate,(d&30)===0&&!_C(m)&&(r=Qi(n,d),r===2&&(y=pl(n),y!==0&&(d=y,r=La(n,y))),r===1))throw l=gr,Hn(n,0),Cn(n,d),ft(n,Ve()),l;switch(n.finishedWork=m,n.finishedLanes=d,r){case 0:case 1:throw Error(o(345));case 2:$n(n,dt,on);break;case 3:if(Cn(n,d),(d&130023424)===d&&(r=Ra+500-Ve(),10<r)){if(ri(n,0)!==0)break;if(m=n.suspendedLanes,(m&d)!==d){rt(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=ql($n.bind(null,n,dt,on),r);break}$n(n,dt,on);break;case 4:if(Cn(n,d),(d&4194240)===d)break;for(r=n.eventTimes,m=-1;0<d;){var S=31-Rt(d);y=1<<S,S=r[S],S>m&&(m=S),d&=~y}if(d=m,d=Ve()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*EC(d/1960))-d,10<d){n.timeoutHandle=ql($n.bind(null,n,dt,on),d);break}$n(n,dt,on);break;case 5:$n(n,dt,on);break;default:throw Error(o(329))}}}return ft(n,Ve()),n.callbackNode===l?wm.bind(null,n):null}function La(n,r){var l=yr;return n.current.memoizedState.isDehydrated&&(Hn(n,r).flags|=256),n=Qi(n,r),n!==2&&(r=dt,dt=l,r!==null&&Fa(r)),n}function Fa(n){dt===null?dt=n:dt.push.apply(dt,n)}function _C(n){for(var r=n;;){if(r.flags&16384){var l=r.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var m=l[d],y=m.getSnapshot;m=m.value;try{if(!Mt(y(),m))return!1}catch{return!1}}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Cn(n,r){for(r&=~ka,r&=~zi,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var l=31-Rt(r),d=1<<l;n[l]=-1,r&=~d}}function Tm(n){if((Ce&6)!==0)throw Error(o(327));Ao();var r=ri(n,0);if((r&1)===0)return ft(n,Ve()),null;var l=Qi(n,r);if(n.tag!==0&&l===2){var d=pl(n);d!==0&&(r=d,l=La(n,d))}if(l===1)throw l=gr,Hn(n,0),Cn(n,r),ft(n,Ve()),l;if(l===6)throw Error(o(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,$n(n,dt,on),ft(n,Ve()),null}function ba(n,r){var l=Ce;Ce|=1;try{return n(r)}finally{Ce=l,Ce===0&&(Co=Ve()+500,Ti&&yn())}}function qn(n){wn!==null&&wn.tag===0&&(Ce&6)===0&&Ao();var r=Ce;Ce|=1;var l=At.transition,d=Ie;try{if(At.transition=null,Ie=1,n)return n()}finally{Ie=d,At.transition=l,Ce=r,(Ce&6)===0&&yn()}}function Ua(){yt=To.current,Me(To)}function Hn(n,r){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,QT(l)),qe!==null)for(l=qe.return;l!==null;){var d=l;switch(Jl(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Si();break;case 3:_o(),Me(at),Me(Xe),ia();break;case 5:oa(d);break;case 4:_o();break;case 13:Me(Fe);break;case 19:Me(Fe);break;case 10:Zl(d.type._context);break;case 22:case 23:Ua()}l=l.return}if(Oe=n,qe=n=An(n.current,null),Ke=yt=r,$e=0,gr=null,ka=zi=Gn=0,dt=yr=null,bn!==null){for(r=0;r<bn.length;r++)if(l=bn[r],d=l.interleaved,d!==null){l.interleaved=null;var m=d.next,y=l.pending;if(y!==null){var S=y.next;y.next=m,d.next=S}l.pending=d}bn=null}return n}function Cm(n,r){do{var l=qe;try{if(Xl(),Di.current=Ui,Li){for(var d=be.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Li=!1}if(Vn=0,ze=He=be=null,cr=!1,dr=0,Pa.current=null,l===null||l.return===null){$e=1,gr=r,qe=null;break}e:{var y=n,S=l.return,C=l,x=r;if(r=Ke,C.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var D=x,z=C,J=z.tag;if((z.mode&1)===0&&(J===0||J===11||J===15)){var B=z.alternate;B?(z.updateQueue=B.updateQueue,z.memoizedState=B.memoizedState,z.lanes=B.lanes):(z.updateQueue=null,z.memoizedState=null)}var ee=Yp(S);if(ee!==null){ee.flags&=-257,Qp(ee,S,C,y,r),ee.mode&1&&Kp(y,D,r),r=ee,x=D;var re=r.updateQueue;if(re===null){var ie=new Set;ie.add(x),r.updateQueue=ie}else re.add(x);break e}else{if((r&1)===0){Kp(y,D,r),Va();break e}x=Error(o(426))}}else if(De&&C.mode&1){var Ge=Yp(S);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),Qp(Ge,S,C,y,r),Yl(So(x,C));break e}}y=x=So(x,C),$e!==4&&($e=2),yr===null?yr=[y]:yr.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,r&=-r,y.lanes|=r;var k=Jp(y,x,r);Ep(y,k);break e;case 1:C=x;var I=y.type,M=y.stateNode;if((y.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Sn===null||!Sn.has(M)))){y.flags|=65536,r&=-r,y.lanes|=r;var Y=Wp(y,C,r);Ep(y,Y);break e}}y=y.return}while(y!==null)}Im(l)}catch(ae){r=ae,qe===l&&l!==null&&(qe=l=l.return);continue}break}while(!0)}function Am(){var n=Bi.current;return Bi.current=Ui,n===null?Ui:n}function Va(){($e===0||$e===3||$e===2)&&($e=4),Oe===null||(Gn&268435455)===0&&(zi&268435455)===0||Cn(Oe,Ke)}function Qi(n,r){var l=Ce;Ce|=2;var d=Am();(Oe!==n||Ke!==r)&&(on=null,Hn(n,r));do try{SC();break}catch(m){Cm(n,m)}while(!0);if(Xl(),Ce=l,Bi.current=d,qe!==null)throw Error(o(261));return Oe=null,Ke=0,$e}function SC(){for(;qe!==null;)xm(qe)}function wC(){for(;qe!==null&&!Ww();)xm(qe)}function xm(n){var r=km(n.alternate,n,yt);n.memoizedProps=n.pendingProps,r===null?Im(n):qe=r,Pa.current=null}function Im(n){var r=n;do{var l=r.alternate;if(n=r.return,(r.flags&32768)===0){if(l=mC(l,r,yt),l!==null){qe=l;return}}else{if(l=hC(l,r),l!==null){l.flags&=32767,qe=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{$e=6,qe=null;return}}if(r=r.sibling,r!==null){qe=r;return}qe=r=n}while(r!==null);$e===0&&($e=5)}function $n(n,r,l){var d=Ie,m=At.transition;try{At.transition=null,Ie=1,TC(n,r,l,d)}finally{At.transition=m,Ie=d}return null}function TC(n,r,l,d){do Ao();while(wn!==null);if((Ce&6)!==0)throw Error(o(327));l=n.finishedWork;var m=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(o(177));n.callbackNode=null,n.callbackPriority=0;var y=l.lanes|l.childLanes;if(oT(n,y),n===Oe&&(qe=Oe=null,Ke=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ji||(Ji=!0,Rm(ei,function(){return Ao(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=At.transition,At.transition=null;var S=Ie;Ie=1;var C=Ce;Ce|=4,Pa.current=null,yC(n,l),ym(l,n),BT(Vl),li=!!Ul,Vl=Ul=null,n.current=l,vC(l),Kw(),Ce=C,Ie=S,At.transition=y}else n.current=l;if(Ji&&(Ji=!1,wn=n,Wi=m),y=n.pendingLanes,y===0&&(Sn=null),Xw(l.stateNode),ft(n,Ve()),r!==null)for(d=n.onRecoverableError,l=0;l<r.length;l++)m=r[l],d(m.value,{componentStack:m.stack,digest:m.digest});if(Oi)throw Oi=!1,n=Ma,Ma=null,n;return(Wi&1)!==0&&n.tag!==0&&Ao(),y=n.pendingLanes,(y&1)!==0?n===Da?vr++:(vr=0,Da=n):vr=0,yn(),null}function Ao(){if(wn!==null){var n=hf(Wi),r=At.transition,l=Ie;try{if(At.transition=null,Ie=16>n?16:n,wn===null)var d=!1;else{if(n=wn,wn=null,Wi=0,(Ce&6)!==0)throw Error(o(331));var m=Ce;for(Ce|=4,oe=n.current;oe!==null;){var y=oe,S=y.child;if((oe.flags&16)!==0){var C=y.deletions;if(C!==null){for(var x=0;x<C.length;x++){var D=C[x];for(oe=D;oe!==null;){var z=oe;switch(z.tag){case 0:case 11:case 15:hr(8,z,y)}var J=z.child;if(J!==null)J.return=z,oe=J;else for(;oe!==null;){z=oe;var B=z.sibling,ee=z.return;if(fm(z),z===D){oe=null;break}if(B!==null){B.return=ee,oe=B;break}oe=ee}}}var re=y.alternate;if(re!==null){var ie=re.child;if(ie!==null){re.child=null;do{var Ge=ie.sibling;ie.sibling=null,ie=Ge}while(ie!==null)}}oe=y}}if((y.subtreeFlags&2064)!==0&&S!==null)S.return=y,oe=S;else e:for(;oe!==null;){if(y=oe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:hr(9,y,y.return)}var k=y.sibling;if(k!==null){k.return=y.return,oe=k;break e}oe=y.return}}var I=n.current;for(oe=I;oe!==null;){S=oe;var M=S.child;if((S.subtreeFlags&2064)!==0&&M!==null)M.return=S,oe=M;else e:for(S=I;oe!==null;){if(C=oe,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:$i(9,C)}}catch(ae){Ue(C,C.return,ae)}if(C===S){oe=null;break e}var Y=C.sibling;if(Y!==null){Y.return=C.return,oe=Y;break e}oe=C.return}}if(Ce=m,yn(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(ti,n)}catch{}d=!0}return d}finally{Ie=l,At.transition=r}}return!1}function Nm(n,r,l){r=So(l,r),r=Jp(n,r,1),n=En(n,r,1),r=rt(),n!==null&&($o(n,1,r),ft(n,r))}function Ue(n,r,l){if(n.tag===3)Nm(n,n,l);else for(;r!==null;){if(r.tag===3){Nm(r,n,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Sn===null||!Sn.has(d))){n=So(l,n),n=Wp(r,n,1),r=En(r,n,1),n=rt(),r!==null&&($o(r,1,n),ft(r,n));break}}r=r.return}}function CC(n,r,l){var d=n.pingCache;d!==null&&d.delete(r),r=rt(),n.pingedLanes|=n.suspendedLanes&l,Oe===n&&(Ke&l)===l&&($e===4||$e===3&&(Ke&130023424)===Ke&&500>Ve()-Ra?Hn(n,0):ka|=l),ft(n,r)}function Pm(n,r){r===0&&((n.mode&1)===0?r=1:(r=oi,oi<<=1,(oi&130023424)===0&&(oi=4194304)));var l=rt();n=en(n,r),n!==null&&($o(n,r,l),ft(n,l))}function AC(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),Pm(n,l)}function xC(n,r){var l=0;switch(n.tag){case 13:var d=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(o(314))}d!==null&&d.delete(r),Pm(n,l)}var km;km=function(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps||at.current)ct=!0;else{if((n.lanes&l)===0&&(r.flags&128)===0)return ct=!1,pC(n,r,l);ct=(n.flags&131072)!==0}else ct=!1,De&&(r.flags&1048576)!==0&&up(r,Ai,r.index);switch(r.lanes=0,r.tag){case 2:var d=r.type;qi(n,r),n=r.pendingProps;var m=po(r,Xe.current);Eo(r,l),m=aa(null,r,d,n,m,l);var y=ua();return r.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,ut(d)?(y=!0,wi(r)):y=!1,r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,ta(r),m.updater=Vi,r.stateNode=m,m._reactInternals=r,ha(r,d,n,l),r=Ea(null,r,d,!0,y,l)):(r.tag=0,De&&y&&Ol(r),ot(null,r,m,l),r=r.child),r;case 16:d=r.elementType;e:{switch(qi(n,r),n=r.pendingProps,m=d._init,d=m(d._payload),r.type=d,m=r.tag=NC(d),n=Lt(d,n),m){case 0:r=va(null,r,d,n,l);break e;case 1:r=nm(null,r,d,n,l);break e;case 11:r=Xp(null,r,d,n,l);break e;case 14:r=Zp(null,r,d,Lt(d.type,n),l);break e}throw Error(o(306,d,""))}return r;case 0:return d=r.type,m=r.pendingProps,m=r.elementType===d?m:Lt(d,m),va(n,r,d,m,l);case 1:return d=r.type,m=r.pendingProps,m=r.elementType===d?m:Lt(d,m),nm(n,r,d,m,l);case 3:e:{if(om(r),n===null)throw Error(o(387));d=r.pendingProps,y=r.memoizedState,m=y.element,vp(n,r),Ri(r,d,null,l);var S=r.memoizedState;if(d=S.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){m=So(Error(o(423)),r),r=rm(n,r,d,l,m);break e}else if(d!==m){m=So(Error(o(424)),r),r=rm(n,r,d,l,m);break e}else for(gt=mn(r.stateNode.containerInfo.firstChild),ht=r,De=!0,Dt=null,l=gp(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(go(),d===m){r=nn(n,r,l);break e}ot(n,r,d,l)}r=r.child}return r;case 5:return Sp(r),n===null&&Kl(r),d=r.type,m=r.pendingProps,y=n!==null?n.memoizedProps:null,S=m.children,Gl(d,m)?S=null:y!==null&&Gl(d,y)&&(r.flags|=32),tm(n,r),ot(n,r,S,l),r.child;case 6:return n===null&&Kl(r),null;case 13:return im(n,r,l);case 4:return na(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=yo(r,null,d,l):ot(n,r,d,l),r.child;case 11:return d=r.type,m=r.pendingProps,m=r.elementType===d?m:Lt(d,m),Xp(n,r,d,m,l);case 7:return ot(n,r,r.pendingProps,l),r.child;case 8:return ot(n,r,r.pendingProps.children,l),r.child;case 12:return ot(n,r,r.pendingProps.children,l),r.child;case 10:e:{if(d=r.type._context,m=r.pendingProps,y=r.memoizedProps,S=m.value,Pe(Ni,d._currentValue),d._currentValue=S,y!==null)if(Mt(y.value,S)){if(y.children===m.children&&!at.current){r=nn(n,r,l);break e}}else for(y=r.child,y!==null&&(y.return=r);y!==null;){var C=y.dependencies;if(C!==null){S=y.child;for(var x=C.firstContext;x!==null;){if(x.context===d){if(y.tag===1){x=tn(-1,l&-l),x.tag=2;var D=y.updateQueue;if(D!==null){D=D.shared;var z=D.pending;z===null?x.next=x:(x.next=z.next,z.next=x),D.pending=x}}y.lanes|=l,x=y.alternate,x!==null&&(x.lanes|=l),jl(y.return,l,r),C.lanes|=l;break}x=x.next}}else if(y.tag===10)S=y.type===r.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(o(341));S.lanes|=l,C=S.alternate,C!==null&&(C.lanes|=l),jl(S,l,r),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===r){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}ot(n,r,m.children,l),r=r.child}return r;case 9:return m=r.type,d=r.pendingProps.children,Eo(r,l),m=Tt(m),d=d(m),r.flags|=1,ot(n,r,d,l),r.child;case 14:return d=r.type,m=Lt(d,r.pendingProps),m=Lt(d.type,m),Zp(n,r,d,m,l);case 15:return jp(n,r,r.type,r.pendingProps,l);case 17:return d=r.type,m=r.pendingProps,m=r.elementType===d?m:Lt(d,m),qi(n,r),r.tag=1,ut(d)?(n=!0,wi(r)):n=!1,Eo(r,l),zp(r,d,m),ha(r,d,m,l),Ea(null,r,d,!0,n,l);case 19:return lm(n,r,l);case 22:return em(n,r,l)}throw Error(o(156,r.tag))};function Rm(n,r){return cf(n,r)}function IC(n,r,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(n,r,l,d){return new IC(n,r,l,d)}function Ga(n){return n=n.prototype,!(!n||!n.isReactComponent)}function NC(n){if(typeof n=="function")return Ga(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Q)return 11;if(n===pe)return 14}return 2}function An(n,r){var l=n.alternate;return l===null?(l=xt(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function Xi(n,r,l,d,m,y){var S=2;if(d=n,typeof n=="function")Ga(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case V:return Bn(l.children,m,y,r);case X:S=8,m|=8;break;case O:return n=xt(12,l,r,m|2),n.elementType=O,n.lanes=y,n;case q:return n=xt(13,l,r,m),n.elementType=q,n.lanes=y,n;case se:return n=xt(19,l,r,m),n.elementType=se,n.lanes=y,n;case ve:return Zi(l,m,y,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ne:S=10;break e;case ge:S=9;break e;case Q:S=11;break e;case pe:S=14;break e;case de:S=16,d=null;break e}throw Error(o(130,n==null?n:typeof n,""))}return r=xt(S,l,r,m),r.elementType=n,r.type=d,r.lanes=y,r}function Bn(n,r,l,d){return n=xt(7,n,d,r),n.lanes=l,n}function Zi(n,r,l,d){return n=xt(22,n,d,r),n.elementType=ve,n.lanes=l,n.stateNode={isHidden:!1},n}function qa(n,r,l){return n=xt(6,n,null,r),n.lanes=l,n}function Ha(n,r,l){return r=xt(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function PC(n,r,l,d,m){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ml(0),this.expirationTimes=ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ml(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function $a(n,r,l,d,m,y,S,C,x){return n=new PC(n,r,l,C,x),r===1?(r=1,y===!0&&(r|=8)):r=0,y=xt(3,null,null,r),n.current=y,y.stateNode=n,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},ta(y),n}function kC(n,r,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:d==null?null:""+d,children:n,containerInfo:r,implementation:l}}function Mm(n){if(!n)return gn;n=n._reactInternals;e:{if(Rn(n)!==n||n.tag!==1)throw Error(o(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(ut(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(o(171))}if(n.tag===1){var l=n.type;if(ut(l))return sp(n,l,r)}return r}function Dm(n,r,l,d,m,y,S,C,x){return n=$a(l,d,!0,n,m,y,S,C,x),n.context=Mm(null),l=n.current,d=rt(),m=Tn(l),y=tn(d,m),y.callback=r??null,En(l,y,m),n.current.lanes=m,$o(n,m,d),ft(n,d),n}function ji(n,r,l,d){var m=r.current,y=rt(),S=Tn(m);return l=Mm(l),r.context===null?r.context=l:r.pendingContext=l,r=tn(y,S),r.payload={element:n},d=d===void 0?null:d,d!==null&&(r.callback=d),n=En(m,r,S),n!==null&&(Ut(n,m,S,y),ki(n,m,S)),S}function es(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Lm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function Ba(n,r){Lm(n,r),(n=n.alternate)&&Lm(n,r)}function RC(){return null}var Fm=typeof reportError=="function"?reportError:function(n){console.error(n)};function za(n){this._internalRoot=n}ts.prototype.render=za.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(o(409));ji(n,r,null,null)},ts.prototype.unmount=za.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;qn(function(){ji(null,n,null,null)}),r[Qt]=null}};function ts(n){this._internalRoot=n}ts.prototype.unstable_scheduleHydration=function(n){if(n){var r=vf();n={blockedOn:null,target:n,priority:r};for(var l=0;l<dn.length&&r!==0&&r<dn[l].priority;l++);dn.splice(l,0,n),l===0&&Sf(n)}};function Oa(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ns(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bm(){}function MC(n,r,l,d,m){if(m){if(typeof d=="function"){var y=d;d=function(){var D=es(S);y.call(D)}}var S=Dm(r,d,n,0,null,!1,!1,"",bm);return n._reactRootContainer=S,n[Qt]=S.current,nr(n.nodeType===8?n.parentNode:n),qn(),S}for(;m=n.lastChild;)n.removeChild(m);if(typeof d=="function"){var C=d;d=function(){var D=es(x);C.call(D)}}var x=$a(n,0,!1,null,null,!1,!1,"",bm);return n._reactRootContainer=x,n[Qt]=x.current,nr(n.nodeType===8?n.parentNode:n),qn(function(){ji(r,x,l,d)}),x}function os(n,r,l,d,m){var y=l._reactRootContainer;if(y){var S=y;if(typeof m=="function"){var C=m;m=function(){var x=es(S);C.call(x)}}ji(r,S,n,m)}else S=MC(l,r,n,m,d);return es(S)}gf=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var l=Ho(r.pendingLanes);l!==0&&(hl(r,l|1),ft(r,Ve()),(Ce&6)===0&&(Co=Ve()+500,yn()))}break;case 13:qn(function(){var d=en(n,1);if(d!==null){var m=rt();Ut(d,n,1,m)}}),Ba(n,1)}},gl=function(n){if(n.tag===13){var r=en(n,134217728);if(r!==null){var l=rt();Ut(r,n,134217728,l)}Ba(n,134217728)}},yf=function(n){if(n.tag===13){var r=Tn(n),l=en(n,r);if(l!==null){var d=rt();Ut(l,n,r,d)}Ba(n,r)}},vf=function(){return Ie},Ef=function(n,r){var l=Ie;try{return Ie=n,r()}finally{Ie=l}},al=function(n,r,l){switch(r){case"input":if(el(n,l),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==n&&d.form===n.form){var m=_i(d);if(!m)throw Error(o(90));$d(d),el(d,m)}}}break;case"textarea":Wd(n,l);break;case"select":r=l.value,r!=null&&eo(n,!!l.multiple,r,!1)}},nf=ba,of=qn;var DC={usingClientEntryPoint:!1,Events:[ir,co,_i,ef,tf,ba]},Er={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LC={bundleType:Er.bundleType,version:Er.version,rendererPackageName:Er.rendererPackageName,rendererConfig:Er.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=af(n),n===null?null:n.stateNode},findFiberByHostInstance:Er.findFiberByHostInstance||RC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rs.isDisabled&&rs.supportsFiber)try{ti=rs.inject(LC),qt=rs}catch{}}return st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DC,st.createPortal=function(n,r){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oa(r))throw Error(o(200));return kC(n,r,null,l)},st.createRoot=function(n,r){if(!Oa(n))throw Error(o(299));var l=!1,d="",m=Fm;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),r=$a(n,1,!1,null,null,l,!1,d,m),n[Qt]=r.current,nr(n.nodeType===8?n.parentNode:n),new za(r)},st.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=af(r),n=n===null?null:n.stateNode,n},st.flushSync=function(n){return qn(n)},st.hydrate=function(n,r,l){if(!ns(r))throw Error(o(200));return os(null,n,r,!0,l)},st.hydrateRoot=function(n,r,l){if(!Oa(n))throw Error(o(405));var d=l!=null&&l.hydratedSources||null,m=!1,y="",S=Fm;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),r=Dm(r,null,n,1,l??null,m,!1,y,S),n[Qt]=r.current,nr(n),d)for(n=0;n<d.length;n++)l=d[n],m=l._getVersion,m=m(l._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[l,m]:r.mutableSourceEagerHydrationData.push(l,m);return new ts(r)},st.render=function(n,r,l){if(!ns(r))throw Error(o(200));return os(null,n,r,!1,l)},st.unmountComponentAtNode=function(n){if(!ns(n))throw Error(o(40));return n._reactRootContainer?(qn(function(){os(null,null,n,!1,function(){n._reactRootContainer=null,n[Qt]=null})}),!0):!1},st.unstable_batchedUpdates=ba,st.unstable_renderSubtreeIntoContainer=function(n,r,l,d){if(!ns(l))throw Error(o(200));if(n==null||n._reactInternals===void 0)throw Error(o(38));return os(n,r,l,!1,d)},st.version="18.3.1-next-f1338f8080-20240426",st}var du;function pg(){if(du)return Ts.exports;du=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ts.exports=fg(),Ts.exports}var fu;function mg(){if(fu)return xr;fu=1;var t=pg();return xr.createRoot=t.createRoot,xr.hydrateRoot=t.hydrateRoot,xr}var hg=mg();const gg=It(hg),Gt=({text:t})=>w.jsx("span",{title:t,className:"inline-flex items-center cursor-help opacity-30 hover:opacity-70 transition-opacity ml-1",children:w.jsx(No,{size:10})}),yg=({settings:t,isDark:e,onUpdateSettings:o})=>{const[i,s]=fe.useState(!1),[c,f]=fe.useState({[vt.GEMINI]:!1,[vt.OPENAI]:!1,[vt.ANTHROPIC]:!1}),p=lu(t),g=Object.entries(t.aiApiKeys||{}).filter(([,E])=>E).length,h=E=>{f(_=>({..._,[E]:!_[E]}))},v=(E,_)=>{o({aiApiKeys:{...t.aiApiKeys,[E]:_||void 0}})};return w.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[w.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[w.jsxs("button",{onClick:()=>s(!i),className:"w-full flex items-center justify-between px-1",children:[w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest flex items-center cursor-pointer",children:[w.jsx(Nh,{size:10,className:"mr-1"}),"AI Providers",w.jsx(Gt,{text:"Configure API keys for AI-powered features like prompt optimization"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:`text-[9px] font-black uppercase ${p?"text-emerald-500":"text-amber-500"}`,children:p?`${g} Configured`:"Not Set"}),w.jsx(ou,{size:14,className:`transition-transform duration-200 ${i?"rotate-180":""}`})]})]}),i&&w.jsxs("div",{className:"space-y-3 pt-2 animate-in slide-in-from-top-1 duration-200",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest ml-1",children:"Preferred Provider"}),w.jsx("select",{value:t.preferredAIProvider||vt.GEMINI,onChange:E=>o({preferredAIProvider:E.target.value}),className:`w-full p-2 rounded-md border text-[10px] font-black uppercase transition-all appearance-none outline-none ${e?"bg-black/40 border-white/10 focus:border-blue-500/50":"bg-white border-slate-200 shadow-sm"}`,children:Object.entries(su).map(([E,_])=>w.jsx("option",{value:E,children:_.label},E))})]}),Object.entries(su).map(([E,_])=>{var N;const T=E,P=((N=t.aiApiKeys)==null?void 0:N[T])||"",R=c[T];return w.jsxs("div",{className:"space-y-1",children:[w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest ml-1 flex items-center gap-1",children:[_.label,P&&w.jsx("span",{className:"text-emerald-500",children:""})]}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:R?"text":"password",value:P,onChange:F=>v(T,F.target.value),placeholder:`Enter your ${_.label} API key...`,className:`w-full p-2 pr-10 rounded-md border text-xs outline-none ${e?"bg-black/40 border-white/10 focus:border-blue-500/50":"bg-white border-slate-200"}`}),w.jsx("button",{type:"button",onClick:()=>h(T),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-40 hover:opacity-100 transition-opacity",title:R?"Hide API key":"Show API key",children:R?w.jsx(Sh,{size:14}):w.jsx(wh,{size:14})})]}),w.jsx("p",{className:"text-[8px] opacity-30 ml-1",children:_.description})]},E)}),!p&&w.jsx("p",{className:"text-[9px] text-amber-500/80 px-1",children:"Add at least one API key to enable AI prompt optimization"})]})]}),w.jsx("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:w.jsxs("div",{className:"flex items-center justify-between px-1",children:[w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest flex items-center",children:["Interface Theme",w.jsx(Gt,{text:"Switch between dark and light appearance"})]}),w.jsxs("button",{onClick:()=>o({theme:e?Po.LIGHT:Po.DARK}),title:e?"Switch to light mode":"Switch to dark mode",className:`p-2 rounded-md transition-all flex items-center gap-2 text-[10px] font-black uppercase border ${e?"bg-white/5 border-white/10":"bg-slate-100 border-slate-200"}`,children:[e?w.jsx(Bh,{size:12,className:"text-amber-400"}):w.jsx(Mh,{size:12,className:"text-blue-500"}),e?"Switch to Light":"Switch to Dark"]})]})}),w.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest ml-1 flex items-center",children:["Active Synthesis Model",w.jsx(Gt,{text:"Flash 2.0 is faster, Imagen 3 produces higher quality images"})]}),w.jsxs("select",{value:t.primaryModel,onChange:E=>o({primaryModel:E.target.value}),className:`w-full p-2 rounded-md border text-[10px] font-black uppercase transition-all appearance-none outline-none ${e?"bg-black/40 border-white/10 focus:border-blue-500/50":"bg-white border-slate-200 shadow-sm"}`,children:[w.jsx("option",{value:wr.FLASH,children:"Flash 2.0 (High Speed)"}),w.jsx("option",{value:wr.PRO,children:"Imagen 3 (High Fidelity)"})]})]}),w.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest ml-1 flex items-center",children:["Default Tool",w.jsx(Gt,{text:"The Gemini tool to use for new prompts (Image, Video, Canvas, etc.)"})]}),w.jsx("select",{value:t.defaultTool||Le.IMAGE,onChange:E=>o({defaultTool:E.target.value}),className:`w-full p-2 rounded-md border text-[10px] font-black uppercase transition-all appearance-none outline-none ${e?"bg-black/40 border-white/10 focus:border-blue-500/50":"bg-white border-slate-200 shadow-sm"}`,children:Object.entries(In).map(([E,_])=>w.jsxs("option",{value:E,children:[_.icon," ",_.label," - ",_.description]},E))})]}),w.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[w.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[w.jsx("div",{children:w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest flex items-center",children:["Tool Sequence",w.jsx(Gt,{text:"Cycle through different tools for each prompt (e.g., Image  Video  Canvas  repeat)"})]})}),w.jsx("button",{onClick:()=>o({useToolSequence:!t.useToolSequence}),title:t.useToolSequence?"Disable tool sequence":"Enable tool sequence cycling",className:`w-10 h-5 rounded-full transition-all relative ${t.useToolSequence?"bg-blue-600":"bg-white/10"}`,children:w.jsx("div",{className:`absolute w-4 h-4 rounded-full bg-white top-0.5 transition-all shadow-md ${t.useToolSequence?"left-5":"left-0.5"}`})})]}),w.jsxs("div",{className:`flex flex-wrap gap-1 p-2 rounded-md border min-h-[40px] transition-opacity ${e?"bg-black/40 border-white/10":"bg-white border-slate-200"} ${t.useToolSequence?"":"opacity-40"}`,children:[(t.toolSequence||[]).map((E,_)=>{var T,P;return w.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md text-[10px] font-bold ${e?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600"}`,children:[w.jsx("span",{children:((T=In[E])==null?void 0:T.icon)||"?"}),w.jsx("span",{children:((P=In[E])==null?void 0:P.label)||E}),t.useToolSequence&&w.jsx("button",{onClick:()=>{const R=[...t.toolSequence||[]];R.splice(_,1),o({toolSequence:R.length>0?R:[Le.IMAGE]})},title:"Remove from sequence",className:"ml-1 opacity-50 hover:opacity-100",children:w.jsx(rn,{size:10})})]},_)}),(t.toolSequence||[]).length===0&&w.jsx("span",{className:"text-[10px] opacity-40",children:"No tools in sequence"})]}),t.useToolSequence&&w.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(In).filter(([E])=>E!==Le.NONE).map(([E,_])=>w.jsx("button",{onClick:()=>{o({toolSequence:[...t.toolSequence||[],E]})},title:`Add ${_.label} to sequence`,className:`px-2 py-1 rounded-md text-[9px] font-bold transition-all ${e?"bg-white/5 hover:bg-white/10 border border-white/10":"bg-slate-100 hover:bg-slate-200"}`,children:_.icon},E))})]}),w.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest ml-1 flex items-center",children:["Global Prefix",w.jsx(Gt,{text:"Text automatically added before every prompt (e.g., 'High quality, detailed')"})]}),w.jsx("input",{value:t.prefix,onChange:E=>o({prefix:E.target.value}),placeholder:"Text to prepend to all prompts...",className:`w-full p-2 rounded-md border text-xs outline-none ${e?"bg-black/40 border-white/10":"bg-white border-slate-200"}`})]}),w.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest ml-1 flex items-center",children:["Global Suffix",w.jsx(Gt,{text:"Text automatically added after every prompt (e.g., '4K resolution, cinematic')"})]}),w.jsx("input",{value:t.suffix,onChange:E=>o({suffix:E.target.value}),placeholder:"Text to append to all prompts...",className:`w-full p-2 rounded-md border text-xs outline-none ${e?"bg-black/40 border-white/10":"bg-white border-slate-200"}`})]}),w.jsx("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:w.jsxs("div",{className:"flex items-center justify-between px-1",children:[w.jsx("div",{children:w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest flex items-center",children:["Sidebar Position",w.jsx(Gt,{text:"Choose which side of the screen to show the Nano Flow panel"})]})}),w.jsxs("button",{onClick:()=>o({position:t.position===Jt.LEFT?Jt.RIGHT:Jt.LEFT}),title:t.position===Jt.LEFT?"Move panel to right side":"Move panel to left side",className:`p-2 rounded-md transition-all flex items-center gap-2 text-[10px] font-black uppercase border ${e?"bg-white/5 border-white/10":"bg-slate-100 border-slate-200"}`,children:[t.position===Jt.LEFT?w.jsx(Dh,{size:12,className:"text-blue-500"}):w.jsx(Lh,{size:12,className:"text-blue-500"}),t.position===Jt.LEFT?"Left Side":"Right Side"]})]})}),w.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[w.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[w.jsx("div",{children:w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest flex items-center",children:["Negative Prompts",w.jsx(Gt,{text:"Elements to avoid in images: blurry, extra fingers, watermarks, etc."})]})}),w.jsx("button",{onClick:()=>o({globalNegativesEnabled:!t.globalNegativesEnabled}),title:t.globalNegativesEnabled?"Disable negative prompts":"Enable negative prompts",className:`w-10 h-5 rounded-full transition-all relative ${t.globalNegativesEnabled?"bg-blue-600":"bg-white/10"}`,children:w.jsx("div",{className:`absolute w-4 h-4 rounded-full bg-white top-0.5 transition-all shadow-md ${t.globalNegativesEnabled?"left-5":"left-0.5"}`})})]}),w.jsx("textarea",{value:t.globalNegatives,onChange:E=>o({globalNegatives:E.target.value}),placeholder:"Things to avoid in all generations...",disabled:!t.globalNegativesEnabled,className:`w-full p-2 rounded-md border text-xs outline-none min-h-[60px] transition-opacity ${e?"bg-black/40 border-white/10":"bg-white border-slate-200"} ${t.globalNegativesEnabled?"":"opacity-40"}`})]}),w.jsx("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:w.jsxs("div",{className:"flex items-center justify-between px-1",children:[w.jsx("div",{children:w.jsxs("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest flex items-center",children:["Drip Feed Mode",w.jsx(Gt,{text:"Adds random delays between prompts to avoid rate limiting"})]})}),w.jsx("button",{onClick:()=>o({dripFeed:!t.dripFeed}),title:t.dripFeed?"Disable random delays":"Enable random delays between prompts",className:`w-10 h-5 rounded-full transition-all relative ${t.dripFeed?"bg-blue-600":"bg-white/10"}`,children:w.jsx("div",{className:`absolute w-4 h-4 rounded-full bg-white top-0.5 transition-all shadow-md ${t.dripFeed?"left-5":"left-0.5"}`})})]})})]})},vg=({text:t})=>w.jsx("span",{title:t,className:"inline-flex items-center cursor-help opacity-30 hover:opacity-70 transition-opacity ml-1",children:w.jsx(No,{size:10})}),Eg=({folders:t,isDark:e,hasAIKey:o,onCreateFolder:i,onDeleteFolder:s,onToggleFolder:c,onUseTemplate:f,onDeleteTemplate:p,onSaveTemplate:g,onImproveTemplate:h,onImproveFolder:v})=>{const[E,_]=fe.useState(!1),[T,P]=fe.useState(""),[R,N]=fe.useState(new Set),[F,H]=fe.useState(null),$=fe.useRef(null),G=()=>{T.trim()&&(i(T.trim()),P(""),_(!1))},W=(Q,q)=>{q.stopPropagation(),confirm("Delete folder and all templates inside?")&&s(Q)},U=(Q,q,se)=>{se.stopPropagation(),confirm("Delete this template?")&&p(Q,q)},V=(Q,q,se)=>{if(se&&(se.stopPropagation(),se.preventDefault()),q){const pe=t.find(ve=>ve.id===Q),de=pe==null?void 0:pe.templates.find(ve=>ve.id===q);de&&H({folderId:Q,template:{...de}})}else H({folderId:Q,template:{id:Math.random().toString(36).substr(2,9),name:"",text:"",createdAt:Date.now(),lastEditedAt:Date.now(),timesUsed:0,images:[]}})},X=()=>{!F||!F.template.name||(g(F.folderId,F.template),H(null))},O=async(Q,q,se)=>{se.stopPropagation(),N(pe=>new Set(pe).add(q));try{await h(Q,q)}finally{N(pe=>{const de=new Set(pe);return de.delete(q),de})}},ne=async(Q,q)=>{q.stopPropagation();const se=t.find(de=>de.id===Q);if(!se)return;const pe=se.templates.map(de=>de.id);N(de=>new Set([...Array.from(de),...pe,Q]));try{await v(Q)}finally{N(de=>{const ve=new Set(de);return pe.forEach(K=>ve.delete(K)),ve.delete(Q),ve})}},ge=Q=>{Array.from(Q.target.files||[]).forEach(se=>{const pe=new FileReader;pe.onload=de=>{var K;const ve=(K=de.target)==null?void 0:K.result;F&&H(le=>le?{...le,template:{...le.template,images:[...le.template.images||[],ve]}}:null)},pe.readAsDataURL(se)}),Q.target.value=""};return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-2 animate-in fade-in duration-300",children:[w.jsxs("div",{className:"flex items-center justify-between px-1",children:[w.jsxs("span",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest flex items-center",children:["Collections",w.jsx(vg,{text:"Organize your favorite prompts into folders. Use AI to improve them!"})]}),w.jsx("button",{onClick:()=>_(!0),title:"Create new folder",className:"p-1.5 rounded-md bg-blue-500/10 text-blue-500 hover:bg-blue-600 hover:text-white transition-all shadow-sm",children:w.jsx(Ch,{size:14})})]}),w.jsxs("div",{className:"space-y-2",children:[t.map(Q=>w.jsxs("div",{className:"space-y-1",children:[w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsxs("button",{onClick:()=>c(Q.id),className:`flex-1 flex items-center gap-2 p-2 rounded-md border text-xs font-black transition-all ${e?"bg-white/5 border-white/5 hover:bg-white/10":"bg-slate-50 border-slate-100 hover:bg-slate-100"}`,children:[w.jsx(Ah,{size:14,className:"text-blue-500"}),w.jsx("span",{className:"flex-1 text-left",children:Q.name}),w.jsx(ou,{size:14,className:`transition-transform duration-300 ${Q.isOpen?"rotate-180":""}`})]}),w.jsx("button",{onClick:q=>o&&ne(Q.id,q),disabled:!o||R.has(Q.id),title:o?"Improve all prompts in folder":"Configure an AI API key in Settings to enable prompt optimization",className:`p-2 rounded-md transition-all ${o?R.has(Q.id)?"bg-amber-500 text-white animate-pulse":"bg-amber-500/10 text-amber-500/60 hover:bg-amber-600 hover:text-white":"bg-white/5 text-white/20 cursor-not-allowed"}`,children:R.has(Q.id)?w.jsx(iu,{size:14,className:"animate-spin"}):w.jsx(Ss,{size:14})}),w.jsx("button",{onClick:q=>W(Q.id,q),title:"Delete folder",className:"p-2 rounded-md bg-red-500/10 text-red-500/60 hover:bg-red-600 hover:text-white transition-all",children:w.jsx(Sr,{size:14})})]}),Q.isOpen&&w.jsxs("div",{className:"space-y-1 mt-1 animate-in slide-in-from-top-1",children:[Q.templates.map(q=>w.jsx("div",{className:`group flex flex-col p-2 rounded-md border shadow-sm transition-all ${e?"bg-white/2 border-white/5 hover:border-blue-500/30":"bg-white border-slate-50"}`,children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>f(Q.id,q.id),children:[w.jsx("p",{className:"text-[10px] font-black text-blue-500 truncate",children:q.name}),w.jsxs("p",{className:"text-[9px] opacity-40 truncate",children:['"',q.text,'"']})]}),w.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[w.jsx("button",{onClick:se=>o&&O(Q.id,q.id,se),disabled:!o||R.has(q.id),title:o?"Enhance with AI":"Configure an AI API key in Settings to enable prompt optimization",className:`p-1 rounded-md transition-all ${o?R.has(q.id)?"bg-amber-500 text-white animate-pulse":"hover:bg-amber-500/20 text-amber-500":"text-white/20 cursor-not-allowed"}`,children:R.has(q.id)?w.jsx(iu,{size:12,className:"animate-spin"}):w.jsx(Ss,{size:12})}),w.jsx("button",{onClick:se=>V(Q.id,q.id,se),title:"Edit template",className:"p-1 rounded-md hover:bg-blue-500/20",children:w.jsx(Uh,{size:12})}),w.jsx("button",{onClick:se=>U(Q.id,q.id,se),title:"Delete template",className:"p-1 rounded-md hover:bg-red-500/20 text-red-500",children:w.jsx(Sr,{size:12})}),w.jsx("button",{onClick:()=>f(Q.id,q.id),title:"Add to queue",className:"p-1 rounded-md bg-blue-600 text-white shadow-lg",children:w.jsx(Gh,{size:12})})]})]})},q.id)),w.jsx("button",{onClick:q=>V(Q.id,void 0,q),title:"Create new template",className:"w-full p-2 rounded-md border-2 border-dashed border-white/5 text-[9px] font-black uppercase opacity-20 hover:opacity-100 transition-all",children:"New Style"})]})]},Q.id)),t.length===0&&w.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-10 gap-2 border-2 border-dashed border-white/5 rounded-md",children:[w.jsx(ys,{size:24}),w.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Library Empty"})]})]})]}),E&&w.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/80 backdrop-blur-md p-2",children:w.jsxs("div",{className:`max-w-md w-full p-2 rounded-md border shadow-2xl ${e?"glass-panel border-white/10":"bg-white border-slate-200"}`,children:[w.jsxs("div",{className:"flex items-center justify-between p-2",children:[w.jsx("h2",{className:"text-sm font-black",children:"New Folder"}),w.jsx("button",{onClick:()=>_(!1),title:"Close",className:"p-1 hover:bg-white/5 rounded-md transition-all",children:w.jsx(rn,{size:18})})]}),w.jsxs("div",{className:"p-2 space-y-2",children:[w.jsx("input",{autoFocus:!0,value:T,onChange:Q=>P(Q.target.value),onKeyDown:Q=>Q.key==="Enter"&&G(),placeholder:"Folder Name",className:`w-full p-2 rounded-md outline-none border text-xs font-bold ${e?"bg-black/40 border-white/10":"bg-slate-50 border-slate-200"}`}),w.jsx("button",{onClick:G,className:"w-full p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-md font-black text-xs",children:"Create"})]})]})}),F&&w.jsx("div",{className:"fixed inset-0 z-[900] flex items-center justify-center bg-black/80 backdrop-blur-md p-2",children:w.jsxs("div",{className:`max-w-xl w-full p-2 rounded-md border shadow-2xl ${e?"glass-panel border-white/10":"bg-white border-slate-200"}`,children:[w.jsxs("div",{className:"flex items-center justify-between p-2",children:[w.jsx("h2",{className:"text-sm font-black",children:F.template.createdAt?"Refine Prompt":"New Library Entry"}),w.jsx("button",{onClick:()=>H(null),title:"Close",className:"p-1 hover:bg-white/5 rounded-md",children:w.jsx(rn,{size:18})})]}),w.jsxs("div",{className:"p-2 space-y-3",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase opacity-40 ml-1",children:"Template Title"}),w.jsx("input",{autoFocus:!0,value:F.template.name,onChange:Q=>H({...F,template:{...F.template,name:Q.target.value}}),placeholder:"e.g. Dreamy Portrait",className:`w-full p-2 rounded-md outline-none border font-bold text-xs ${e?"bg-black/40 border-white/10":"bg-slate-50 border-slate-200"}`})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase opacity-40 ml-1",children:"Logic / Modifiers"}),w.jsx("textarea",{value:F.template.text,onChange:Q=>H({...F,template:{...F.template,text:Q.target.value}}),placeholder:"Add instructions...",className:`w-full p-2 rounded-md outline-none border min-h-[100px] text-xs ${e?"bg-black/40 border-white/10":"bg-slate-50 border-slate-200"}`})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[10px] font-black uppercase opacity-40 ml-1",children:"Assets"}),w.jsxs("div",{onClick:()=>{var Q;return(Q=$.current)==null?void 0:Q.click()},className:`p-2 rounded-md border-2 border-dashed transition-all cursor-pointer flex flex-wrap gap-1 min-h-[80px] items-center justify-center ${e?"bg-white/5 border-white/10 hover:border-blue-500/50":"bg-slate-50 border-slate-200 hover:border-blue-500/50"}`,children:[w.jsx("input",{ref:$,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:ge}),!F.template.images||F.template.images.length===0?w.jsxs("div",{className:"flex flex-col items-center gap-1 opacity-20",children:[w.jsx(_s,{size:20}),w.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Select Files"})]}):F.template.images.map((Q,q)=>w.jsxs("div",{className:"relative group/asset",onClick:se=>se.stopPropagation(),children:[w.jsx("img",{src:Q,className:"w-12 h-12 rounded-md object-cover border border-white/10 shadow-md",alt:"ref"}),w.jsx("button",{onClick:()=>{var se;return H({...F,template:{...F.template,images:(se=F.template.images)==null?void 0:se.filter((pe,de)=>de!==q)}})},title:"Remove image",className:"absolute -top-1.5 -right-1.5 bg-red-600 text-white rounded-md p-1 shadow-lg scale-75 hover:scale-100 transition-transform",children:w.jsx(rn,{size:8})})]},q))]})]}),w.jsxs("button",{onClick:X,title:"Save template",className:"w-full p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-md font-black text-xs flex items-center justify-center gap-2 shadow-lg",children:[w.jsx(qh,{size:14})," Save Template"]})]})]})})]})},ke={textInput:'.ql-editor[contenteditable="true"]',textInputAlt:'rich-textarea .ql-editor[contenteditable="true"]',textInputAlt2:'div[role="textbox"][contenteditable="true"]',textInputAlt3:'.textarea[contenteditable="true"]',toolboxButton:'button[aria-label=""]',toolboxButtonAlt:"button.toolbox-drawer-button",toolboxButtonAlt2:".toolbox-drawer-button-with-label",toolboxButtonAlt3:'button[aria-label="Tools"]',submitButton:'button[aria-label=" "]',submitButtonAlt:'button[aria-label="Submit prompt"]',submitButtonAlt2:'button[aria-label="Send message"]',submitButtonAlt3:'button[data-test-id="send-button"]',submitButtonAlt4:".send-button",uploadButton:'button[aria-label="   "]',uploadButtonAlt:'button[aria-label="Open upload file menu"]',uploadButtonAlt2:".upload-button",uploadButtonAlt3:'button[data-test-id="upload-button"]',fileInput:'input[type="file"]',thinkingAvatar:".bard-avatar.thinking",processingState:".processing-state_container--processing",processingButton:".processing-state_button--processing"},_g={[Le.NONE]:{jfExtHebrew:"",jfExtEnglish:"",textPatterns:[]},[Le.IMAGE]:{jfExtHebrew:" ",jfExtEnglish:"Image creation",textPatterns:[" ","Image creation","Create image","Generate image"]},[Le.VIDEO]:{jfExtHebrew:" ",jfExtEnglish:"Video creation",textPatterns:[" ","Video creation","Veo","Create video"]},[Le.CANVAS]:{jfExtHebrew:"canvas",jfExtEnglish:"canvas",textPatterns:["Canvas","canvas"]},[Le.DEEP_RESEARCH]:{jfExtHebrew:"deep research",jfExtEnglish:"deep research",textPatterns:["Deep Research","deep research"," "]},[Le.LEARNING]:{jfExtHebrew:"  ",jfExtEnglish:"personalized learning",textPatterns:["  ","Personalized learning","Learning"]},[Le.VISUAL_LAYOUT]:{jfExtHebrew:" ",jfExtEnglish:"visual layout",textPatterns:[" ","Visual layout","Layout"]}};function ko(...t){for(const e of t)try{const o=document.querySelector(e);if(o)return console.log("[Nano Flow] Found element with selector:",e),o}catch{}return null}function lt(t){return new Promise(e=>setTimeout(e,t))}function Sg(t,e){const o=t.split(","),i=o[0].match(/:(.*?);/),s=i?i[1]:"image/png",c=o.length>1?o[1]:o[0],f=atob(c),p=new Uint8Array(f.length);for(let g=0;g<f.length;g++)p[g]=f.charCodeAt(g);return new File([p],e,{type:s})}async function wg(t){if(!t||t.length===0)return!0;console.log("[Nano Flow] Uploading",t.length,"image(s)...");let e=ko(ke.uploadButton,ke.uploadButtonAlt,ke.uploadButtonAlt2,ke.uploadButtonAlt3);if(!e){const p=document.querySelectorAll('mat-icon[fonticon="add_2"], mat-icon[fonticon="add"], mat-icon[data-mat-icon-name="add"]');for(const g of p){const h=g.closest("button");if(h){e=h,console.log("[Nano Flow] Found upload button by add icon");break}}}if(!e){const p=document.querySelectorAll("button");for(const g of p){const h=(g.getAttribute("aria-label")||"").toLowerCase();if(h.includes("upload")||h.includes("file")||h.includes("")||h.includes("")){e=g,console.log("[Nano Flow] Found upload button by aria-label:",h);break}}}e?(e.click(),await lt(500)):console.error("[Nano Flow] Upload button not found, trying to find file input directly");let o=document.querySelector(ke.fileInput);if(!o){const p=document.querySelectorAll('input[type="file"]');for(const g of p){const h=g.getAttribute("accept")||"";if(h.includes("image")||h==="*/*"||!h){o=g,console.log("[Nano Flow] Found file input with accept:",h);break}}}if(!o)return console.error("[Nano Flow] File input not found"),!1;const i=t.map((p,g)=>Sg(p,`image_${g+1}.png`)),s=new DataTransfer;i.forEach(p=>s.items.add(p)),o.files=s.files;const c=new Event("change",{bubbles:!0});o.dispatchEvent(c);const f=new Event("input",{bubbles:!0});return o.dispatchEvent(f),await lt(1e3),console.log("[Nano Flow] Images uploaded successfully"),!0}async function Tg(t){var c;console.log("[Nano Flow] Pasting prompt:",t.substring(0,50)+"...");const e=ko(ke.textInput,ke.textInputAlt,ke.textInputAlt2,ke.textInputAlt3);if(!e)return console.error("[Nano Flow] Text input not found. Available elements:"),console.log("[Nano Flow] contenteditable elements:",document.querySelectorAll('[contenteditable="true"]')),console.log("[Nano Flow] textbox elements:",document.querySelectorAll('[role="textbox"]')),!1;const o=e;o.focus(),await lt(100),o.innerHTML="",await lt(50);const i=document.createElement("p");i.textContent=t,o.appendChild(i);const s=new InputEvent("input",{bubbles:!0,cancelable:!0,inputType:"insertText",data:t});o.dispatchEvent(s),o.dispatchEvent(new Event("input",{bubbles:!0})),o.dispatchEvent(new Event("change",{bubbles:!0}));try{const f=window.getSelection(),p=document.createRange();p.selectNodeContents(o),f==null||f.removeAllRanges(),f==null||f.addRange(p),document.execCommand("insertText",!1,t)}catch(f){console.log("[Nano Flow] execCommand fallback failed:",f)}return await lt(200),o.classList.remove("ql-blank"),console.log("[Nano Flow] Prompt pasted successfully. Editor content:",(c=o.textContent)==null?void 0:c.substring(0,50)),!0}async function Cg(){console.log("[Nano Flow] Opening toolbox...");let t=ko(ke.toolboxButton,ke.toolboxButtonAlt,ke.toolboxButtonAlt2,ke.toolboxButtonAlt3);if(!t){const e=document.querySelectorAll("button");for(const o of e){const i=o.getAttribute("aria-label")||"",s=o.className||"";if(i.includes("")||i.includes("Tools")||s.includes("toolbox-drawer-button")){t=o,console.log("[Nano Flow] Found toolbox by fallback search");break}}}if(!t){const e=document.querySelectorAll('mat-icon[fonticon="page_info"]');for(const o of e){const i=o.closest("button");if(i){t=i,console.log("[Nano Flow] Found toolbox by icon");break}}}return t?(t.click(),await lt(600),console.log("[Nano Flow] Toolbox opened"),!0):(console.error("[Nano Flow] Toolbox button not found"),!1)}async function pu(t){var s,c;if(t===Le.NONE)return console.log("[Nano Flow] No tool selected, using regular chat"),!0;console.log("[Nano Flow] Selecting tool:",t),await Cg()||console.warn("[Nano Flow] Failed to open toolbox, trying to find tool button directly"),await lt(500);const o=_g[t];let i=null;if(i=document.querySelector(`button[jf-ext-button-ct*="${o.jfExtHebrew}" i]`),!i&&o.jfExtEnglish&&(i=document.querySelector(`button[jf-ext-button-ct*="${o.jfExtEnglish}" i]`)),!i){const f=document.querySelectorAll("button");for(const p of f){const g=((s=p.textContent)==null?void 0:s.trim().toLowerCase())||"";for(const h of o.textPatterns)if(g.includes(h.toLowerCase())){i=p,console.log("[Nano Flow] Found tool button by text:",g.substring(0,30));break}if(i)break}}if(!i){const f=document.querySelectorAll(".toolbox-drawer-item-list-button");for(const p of f){const g=((c=p.textContent)==null?void 0:c.trim().toLowerCase())||"";for(const h of o.textPatterns)if(g.includes(h.toLowerCase())){i=p,console.log("[Nano Flow] Found tool button by class:",g.substring(0,30));break}if(i)break}}if(!i&&t===Le.IMAGE){const f=document.querySelectorAll('img[src*="image"], img[src*="boq-bard"]');for(const p of f){const g=p.closest("button");if(g){i=g,console.log("[Nano Flow] Found image button by img src");break}}}if(!i){console.error("[Nano Flow] Tool button not found for:",t);const f=document.querySelectorAll("button");return console.log("[Nano Flow] Available buttons:",f.length),f.forEach((p,g)=>{var h,v;(h=p.textContent)!=null&&h.trim()&&console.log(`[Nano Flow] Button ${g}:`,(v=p.textContent)==null?void 0:v.substring(0,50))}),!1}return i.click(),await lt(400),console.log("[Nano Flow] Tool selected:",t),!0}async function mu(){var e;console.log("[Nano Flow] Submitting prompt...");let t=ko(ke.submitButton,ke.submitButtonAlt,ke.submitButtonAlt2,ke.submitButtonAlt3,ke.submitButtonAlt4);if(!t){const o=document.querySelectorAll('mat-icon[fonticon="send"], mat-icon[data-mat-icon-name="send"]');for(const i of o){const s=i.closest("button");if(s&&!s.disabled){t=s,console.log("[Nano Flow] Found submit by send icon");break}}}if(!t){const o=document.querySelectorAll("button:not([disabled])");for(const i of o){const s=(i.getAttribute("aria-label")||"").toLowerCase();if(s.includes("send")||s.includes("submit")||s.includes("")||s.includes("")){t=i,console.log("[Nano Flow] Found submit by aria-label:",s);break}}}if(!t){const o=document.querySelectorAll("button:not([disabled])");for(const i of o){const s=((e=i.textContent)==null?void 0:e.toLowerCase())||"";if(s==="send"||s.includes("")){t=i,console.log("[Nano Flow] Found submit by text");break}}}if(!t){console.log("[Nano Flow] Submit button not found, trying Enter key...");const o=ko(ke.textInput,ke.textInputAlt,ke.textInputAlt2,ke.textInputAlt3);if(o){o.focus();const i=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});o.dispatchEvent(i);const s=new KeyboardEvent("keypress",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0});o.dispatchEvent(s);const c=new KeyboardEvent("keyup",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0});return o.dispatchEvent(c),await lt(500),console.log("[Nano Flow] Submitted via Enter key"),!0}return console.error("[Nano Flow] Could not submit - no button or input found"),!1}return t.click(),await lt(300),console.log("[Nano Flow] Prompt submitted via button"),!0}function hu(){return document.querySelector(ke.thinkingAvatar)?(console.log("[Nano Flow] Gemini thinking - avatar indicator present"),!0):document.querySelector(ke.processingState)?(console.log("[Nano Flow] Gemini thinking - processing state present"),!0):document.querySelector(ke.processingButton)?(console.log("[Nano Flow] Gemini thinking - processing button present"),!0):document.querySelector('[data-loading="true"], [aria-busy="true"]')?(console.log("[Nano Flow] Gemini thinking - generic loading indicator present"),!0):!1}async function Ag(t=18e4){console.log("[Nano Flow] Waiting for generation to complete..."),await lt(2e3);const e=Date.now();let o=0;for(;Date.now()-e<t;){const i=hu();if(Date.now()-o>5e3){const s=Math.round((Date.now()-e)/1e3);console.log(`[Nano Flow] Waiting... ${s}s elapsed, thinking: ${i}`),o=Date.now()}if(!i&&(await lt(1e3),!hu())){const s=document.querySelectorAll(".response-container img, .generated-image, img[alt*='Generated'], img[src*='blob:']");if(s.length>0)return console.log("[Nano Flow] Generation complete - images found:",s.length),!0;const c=document.querySelector(".model-response-text, .response-text, .response-content");if(c&&c.textContent&&c.textContent.length>20)return console.log("[Nano Flow] Generation complete - response text found"),!0;if(Date.now()-e>5e3)return console.log("[Nano Flow] Generation appears complete - no thinking indicators"),!0}await lt(1e3)}return console.log("[Nano Flow] Generation timeout reached after",Math.round(t/1e3),"seconds"),!0}async function xg(t,e=Le.IMAGE,o){try{if(e!==Le.NONE&&(await pu(e)||console.warn("[Nano Flow] Could not select tool:",e,"- continuing anyway...")),o&&o.length>0&&(console.log("[Nano Flow] Uploading reference images:",o.length),await wg(o)||console.warn("[Nano Flow] Could not upload images, continuing with text only..."),await lt(500)),!await Tg(t))throw new Error("Failed to paste prompt");if(!await mu())throw new Error("Failed to submit prompt");return await Ag(),!0}catch(i){return console.error("[Nano Flow] Error processing prompt:",i),!1}}const Ig={init(){console.log("[Nano Flow] Automation module initializing..."),chrome.runtime.sendMessage({type:Vt.CONTENT_SCRIPT_READY}).catch(()=>{}),chrome.runtime.onMessage.addListener((t,e,o)=>(console.log("[Nano Flow] Received message:",t.type),(async()=>{var s;switch(t.type){case Vt.PASTE_PROMPT:{const c=t.payload;return console.log("[Nano Flow] Processing prompt with tool:",c.tool||Le.IMAGE,"and",((s=c.images)==null?void 0:s.length)||0,"images"),{success:await xg(c.prompt,c.tool||Le.IMAGE,c.images)}}case Vt.ENABLE_IMAGE_CREATION:return{success:await pu(Le.IMAGE)};case Vt.SUBMIT_PROMPT:return{success:await mu()};default:return{success:!1,error:"Unknown message type"}}})().then(o).catch(s=>{console.error("[Nano Flow] Message handler error:",s),o({success:!1,error:s instanceof Error?s.message:"Unknown error"})}),!0)),document.addEventListener("keydown",t=>{(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.key==="g"&&(t.preventDefault(),window.dispatchEvent(new CustomEvent("nano-flow-toggle-sidebar")))}),console.log("[Nano Flow] Automation module initialized")}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ng,Pg;function kg(){return{geminiUrl:Ng,vertexUrl:Pg}}function Rg(t,e,o,i){var s,c;if(!(t!=null&&t.baseUrl)){const f=kg();return e?(s=f.vertexUrl)!==null&&s!==void 0?s:o:(c=f.geminiUrl)!==null&&c!==void 0?c:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wt{}function j(t,e){const o=/\{([^}]+)\}/g;return t.replace(o,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const c=e[s];return c!=null?String(c):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function u(t,e,o){for(let c=0;c<e.length-1;c++){const f=e[c];if(f.endsWith("[]")){const p=f.slice(0,-2);if(!(p in t))if(Array.isArray(o))t[p]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(t[p])){const g=t[p];if(Array.isArray(o))for(let h=0;h<g.length;h++){const v=g[h];u(v,e.slice(c+1),o[h])}else for(const h of g)u(h,e.slice(c+1),o)}return}else if(f.endsWith("[0]")){const p=f.slice(0,-3);p in t||(t[p]=[{}]);const g=t[p];u(g[0],e.slice(c+1),o);return}(!t[f]||typeof t[f]!="object")&&(t[f]={}),t=t[f]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===s)return;if(typeof s=="object"&&typeof o=="object"&&s!==null&&o!==null)Object.assign(s,o);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(t,o):t[i]=o}function a(t,e,o=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return o;const s=e[i];if(s.endsWith("[]")){const c=s.slice(0,-2);if(c in t){const f=t[c];return Array.isArray(f)?f.map(p=>a(p,e.slice(i+1),o)):o}else return o}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return o;throw i}}function Mg(t,e){for(const[o,i]of Object.entries(e)){const s=o.split("."),c=i.split("."),f=new Set;let p=-1;for(let g=0;g<s.length;g++)if(s[g]==="*"){p=g;break}if(p!==-1&&c.length>p)for(let g=p;g<c.length;g++){const h=c[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&f.add(h)}xs(t,s,c,0,f)}}function xs(t,e,o,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const c=e[i];if(c.endsWith("[]")){const f=c.slice(0,-2),p=t;if(f in p&&Array.isArray(p[f]))for(const g of p[f])xs(g,e,o,i+1,s)}else if(c==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const f=t,p=Object.keys(f).filter(h=>!h.startsWith("_")&&!s.has(h)),g={};for(const h of p)g[h]=f[h];for(const[h,v]of Object.entries(g)){const E=[];for(const _ of o.slice(i))_==="*"?E.push(h):E.push(_);u(f,E,v)}for(const h of p)delete f[h]}}else{const f=t;c in f&&xs(f[c],e,o,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Is(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dg(t){const e={},o=a(t,["operationName"]);o!=null&&u(e,["operationName"],o);const i=a(t,["resourceName"]);return i!=null&&u(e,["_url","resourceName"],i),e}function Lg(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=a(t,["done"]);s!=null&&u(e,["done"],s);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response","generateVideoResponse"]);return f!=null&&u(e,["response"],bg(f)),e}function Fg(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=a(t,["done"]);s!=null&&u(e,["done"],s);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response"]);return f!=null&&u(e,["response"],Ug(f)),e}function bg(t){const e={},o=a(t,["generatedSamples"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>Vg(f))),u(e,["generatedVideos"],c)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function Ug(t){const e={},o=a(t,["videos"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>Gg(f))),u(e,["generatedVideos"],c)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function Vg(t){const e={},o=a(t,["video"]);return o!=null&&u(e,["video"],Og(o)),e}function Gg(t){const e={},o=a(t,["_self"]);return o!=null&&u(e,["video"],Jg(o)),e}function qg(t){const e={},o=a(t,["operationName"]);return o!=null&&u(e,["_url","operationName"],o),e}function Hg(t){const e={},o=a(t,["operationName"]);return o!=null&&u(e,["_url","operationName"],o),e}function $g(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=a(t,["done"]);s!=null&&u(e,["done"],s);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response"]);return f!=null&&u(e,["response"],Bg(f)),e}function Bg(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["parent"]);i!=null&&u(e,["parent"],i);const s=a(t,["documentName"]);return s!=null&&u(e,["documentName"],s),e}function gu(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=a(t,["done"]);s!=null&&u(e,["done"],s);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response"]);return f!=null&&u(e,["response"],zg(f)),e}function zg(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["parent"]);i!=null&&u(e,["parent"],i);const s=a(t,["documentName"]);return s!=null&&u(e,["documentName"],s),e}function Og(t){const e={},o=a(t,["uri"]);o!=null&&u(e,["uri"],o);const i=a(t,["encodedVideo"]);i!=null&&u(e,["videoBytes"],Is(i));const s=a(t,["encoding"]);return s!=null&&u(e,["mimeType"],s),e}function Jg(t){const e={},o=a(t,["gcsUri"]);o!=null&&u(e,["uri"],o);const i=a(t,["bytesBase64Encoded"]);i!=null&&u(e,["videoBytes"],Is(i));const s=a(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yu;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(yu||(yu={}));var vu;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(vu||(vu={}));var Eu;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Eu||(Eu={}));var sn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(sn||(sn={}));var _u;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(_u||(_u={}));var Su;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Su||(Su={}));var wu;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(wu||(wu={}));var Tu;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Tu||(Tu={}));var Cu;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Cu||(Cu={}));var Au;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Au||(Au={}));var xu;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(xu||(xu={}));var Iu;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Iu||(Iu={}));var Nu;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Nu||(Nu={}));var Pu;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Pu||(Pu={}));var ku;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ku||(ku={}));var Ru;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ru||(Ru={}));var Mu;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Mu||(Mu={}));var Du;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Du||(Du={}));var Lu;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Lu||(Lu={}));var Ir;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ir||(Ir={}));var Fu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Fu||(Fu={}));var bu;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(bu||(bu={}));var Uu;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Uu||(Uu={}));var Ns;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ns||(Ns={}));var Vu;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Vu||(Vu={}));var Gu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Gu||(Gu={}));var qu;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(qu||(qu={}));var Hu;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Hu||(Hu={}));var $u;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})($u||($u={}));var Bu;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Bu||(Bu={}));var zu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(zu||(zu={}));var Ou;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ou||(Ou={}));var Ju;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ju||(Ju={}));var Wu;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Wu||(Wu={}));var Ku;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ku||(Ku={}));var Yu;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Yu||(Yu={}));var Qu;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Qu||(Qu={}));var Xu;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Xu||(Xu={}));var Zu;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Zu||(Zu={}));var ju;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ju||(ju={}));var ec;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ec||(ec={}));var tc;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(tc||(tc={}));var nc;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(nc||(nc={}));var oc;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(oc||(oc={}));var rc;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(rc||(rc={}));var ic;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(ic||(ic={}));var sc;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(sc||(sc={}));var lc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(lc||(lc={}));var ac;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ac||(ac={}));var uc;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(uc||(uc={}));var cc;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(cc||(cc={}));var dc;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(dc||(dc={}));var fc;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(fc||(fc={}));var pc;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(pc||(pc={}));var mc;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(mc||(mc={}));var Jn;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Jn||(Jn={}));class Ps{constructor(e){const o={};for(const i of e.headers.entries())o[i[0]]=i[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ro{get text(){var e,o,i,s,c,f,p,g;if(((s=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const E=[];for(const _ of(g=(p=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)!==null&&g!==void 0?g:[]){for(const[T,P]of Object.entries(_))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(P!==null||P!==void 0)&&E.push(T);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;v=!0,h+=_.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,o,i,s,c,f,p,g;if(((s=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const E of(g=(p=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)!==null&&g!==void 0?g:[]){for(const[_,T]of Object.entries(E))_!=="inlineData"&&(T!==null||T!==void 0)&&v.push(_);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,o,i,s,c,f,p,g;if(((s=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(p=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,o,i,s,c,f,p,g,h;if(((s=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(p=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,o,i,s,c,f,p,g,h;if(((s=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(p=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class hc{}class gc{}class Wg{}class Kg{}class Yg{}class Qg{}class yc{}class vc{}class Ec{}class Xg{}class Nr{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const i=new Nr;let s;const c=e;return o?s=Fg(c):s=Lg(c),Object.assign(i,s),i}}class _c{}class Sc{}class wc{}class Tc{}class Zg{}class jg{}class ey{}class ks{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const i=new ks,c=$g(e);return Object.assign(i,c),i}}class ty{}class ny{}class oy{}class Cc{}class ry{get text(){var e,o,i;let s="",c=!1;const f=[];for(const p of(i=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(p))g!=="text"&&g!=="thought"&&h!==null&&f.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;c=!0,s+=p.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?s:void 0}get data(){var e,o,i;let s="";const c=[];for(const f of(i=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&i!==void 0?i:[]){for(const[p,g]of Object.entries(f))p!=="inlineData"&&g!==null&&c.push(p);f.inlineData&&typeof f.inlineData.data=="string"&&(s+=atob(f.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class iy{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Rs{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const i=new Rs,c=gu(e);return Object.assign(i,c),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ae(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Ac(t,e){const o=Ae(t,e);return o?o.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}`:o.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${o}`:o:""}function xc(t){return Array.isArray(t)?t.map(e=>Pr(e)):[Pr(t)]}function Pr(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ic(t){const e=Pr(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Nc(t){const e=Pr(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pc(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function kc(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Pc(e)):[Pc(t)]}function Ms(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Rc(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Mc(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Qe(t){if(t==null)throw new Error("ContentUnion is required");return Ms(t)?t:{role:"user",parts:kc(t)}}function Ds(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const i=Qe(o);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const o=Qe(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>Qe(o)):[Qe(e)]}function Et(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Rc(t)||Mc(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Qe(t)]}const e=[],o=[],i=Ms(t[0]);for(const s of t){const c=Ms(s);if(c!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)e.push(s);else{if(Rc(s)||Mc(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(s)}}return i||e.push({role:"user",parts:kc(o)}),e}function sy(t,e){t.includes("null")&&(e.nullable=!0);const o=t.filter(i=>i!=="null");if(o.length===1)e.type=Object.values(sn).includes(o[0].toUpperCase())?o[0].toUpperCase():sn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of o)e.anyOf.push({type:Object.values(sn).includes(i.toUpperCase())?i.toUpperCase():sn.TYPE_UNSPECIFIED})}}function Wn(t){const e={},o=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=t.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(e.nullable=!0,t=c[1]):c[1].type==="null"&&(e.nullable=!0,t=c[0])),t.type instanceof Array&&sy(t.type,e);for(const[f,p]of Object.entries(t))if(p!=null)if(f=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(sn).includes(p.toUpperCase())?p.toUpperCase():sn.TYPE_UNSPECIFIED}else if(o.includes(f))e[f]=Wn(p);else if(i.includes(f)){const g=[];for(const h of p){if(h.type=="null"){e.nullable=!0;continue}g.push(Wn(h))}e[f]=g}else if(s.includes(f)){const g={};for(const[h,v]of Object.entries(p))g[h]=Wn(v);e[f]=g}else{if(f==="additionalProperties")continue;e[f]=p}return e}function Ls(t){return Wn(t)}function Fs(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function bs(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Kn(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Wn(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Wn(e.response));return t}function Yn(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of t)e.push(o);return e}function ly(t,e,o,i=1){const s=!e.startsWith(`${o}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}/${e}`:e:s?`${o}/${e}`:e}function Kt(t,e){if(typeof e!="string")throw new Error("name must be a string");return ly(t,e,"cachedContents")}function Dc(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ln(t){return Is(t)}function ay(t){return t!=null&&typeof t=="object"&&"name"in t}function uy(t){return t!=null&&typeof t=="object"&&"video"in t}function cy(t){return t!=null&&typeof t=="object"&&"uri"in t}function Lc(t){var e;let o;if(ay(t)&&(o=t.name),!(cy(t)&&(o=t.uri,o===void 0))&&!(uy(t)&&(o=(e=t.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof t=="string"&&(o=t),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const s=o.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${o}`);o=s[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function Fc(t,e){let o;return t.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function bc(t){for(const e of["models","tunedModels","publisherModels"])if(dy(t,e))return t[e];return[]}function dy(t,e){return t!==null&&typeof t=="object"&&e in t}function fy(t,e={}){const o=t,i={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(i.responseJsonSchema=o.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function py(t,e={}){const o=[],i=new Set;for(const s of t){const c=s.name;if(i.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);i.add(c);const f=fy(s,e);f.functionDeclarations&&o.push(...f.functionDeclarations)}return{functionDeclarations:o}}function Uc(t,e){let o;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))o={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))o={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))o={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:e}}else o=e;const i=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,s=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function my(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Vc(t){if(typeof t!="object"||t===null)return{};const e=t,o=e.inlinedResponses;if(typeof o!="object"||o===null)return t;const s=o.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let c=!1;for(const f of s){if(typeof f!="object"||f===null)continue;const g=f.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){c=!0;break}}return c&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Qn(t,e){const o=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function Gc(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hy(t){const e={},o=a(t,["responsesFile"]);o!=null&&u(e,["fileName"],o);const i=a(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>Yy(f))),u(e,["inlinedResponses"],c)}const s=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["inlinedEmbedContentResponses"],c)}return e}function gy(t){const e={},o=a(t,["predictionsFormat"]);o!=null&&u(e,["format"],o);const i=a(t,["gcsDestination","outputUriPrefix"]);i!=null&&u(e,["gcsUri"],i);const s=a(t,["bigqueryDestination","outputUri"]);return s!=null&&u(e,["bigqueryUri"],s),e}function yy(t){const e={},o=a(t,["format"]);o!=null&&u(e,["predictionsFormat"],o);const i=a(t,["gcsUri"]);i!=null&&u(e,["gcsDestination","outputUriPrefix"],i);const s=a(t,["bigqueryUri"]);if(s!=null&&u(e,["bigqueryDestination","outputUri"],s),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function kr(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata","displayName"]);i!=null&&u(e,["displayName"],i);const s=a(t,["metadata","state"]);s!=null&&u(e,["state"],Gc(s));const c=a(t,["metadata","createTime"]);c!=null&&u(e,["createTime"],c);const f=a(t,["metadata","endTime"]);f!=null&&u(e,["endTime"],f);const p=a(t,["metadata","updateTime"]);p!=null&&u(e,["updateTime"],p);const g=a(t,["metadata","model"]);g!=null&&u(e,["model"],g);const h=a(t,["metadata","output"]);return h!=null&&u(e,["dest"],hy(Vc(h))),e}function Us(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const s=a(t,["state"]);s!=null&&u(e,["state"],Gc(s));const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["createTime"]);f!=null&&u(e,["createTime"],f);const p=a(t,["startTime"]);p!=null&&u(e,["startTime"],p);const g=a(t,["endTime"]);g!=null&&u(e,["endTime"],g);const h=a(t,["updateTime"]);h!=null&&u(e,["updateTime"],h);const v=a(t,["model"]);v!=null&&u(e,["model"],v);const E=a(t,["inputConfig"]);E!=null&&u(e,["src"],vy(E));const _=a(t,["outputConfig"]);_!=null&&u(e,["dest"],gy(Vc(_)));const T=a(t,["completionStats"]);return T!=null&&u(e,["completionStats"],T),e}function vy(t){const e={},o=a(t,["instancesFormat"]);o!=null&&u(e,["format"],o);const i=a(t,["gcsSource","uris"]);i!=null&&u(e,["gcsUri"],i);const s=a(t,["bigquerySource","inputUri"]);return s!=null&&u(e,["bigqueryUri"],s),e}function Ey(t,e){const o={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=a(e,["fileName"]);i!=null&&u(o,["fileName"],i);const s=a(e,["inlinedRequests"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>Ky(t,f))),u(o,["requests","requests"],c)}return o}function _y(t){const e={},o=a(t,["format"]);o!=null&&u(e,["instancesFormat"],o);const i=a(t,["gcsUri"]);i!=null&&u(e,["gcsSource","uris"],i);const s=a(t,["bigqueryUri"]);if(s!=null&&u(e,["bigquerySource","inputUri"],s),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Sy(t){const e={},o=a(t,["data"]);if(o!=null&&u(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function wy(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Qn(t,i)),o}function Ty(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Qn(t,i)),o}function Cy(t){const e={},o=a(t,["content"]);o!=null&&u(e,["content"],o);const i=a(t,["citationMetadata"]);i!=null&&u(e,["citationMetadata"],Ay(i));const s=a(t,["tokenCount"]);s!=null&&u(e,["tokenCount"],s);const c=a(t,["finishReason"]);c!=null&&u(e,["finishReason"],c);const f=a(t,["avgLogprobs"]);f!=null&&u(e,["avgLogprobs"],f);const p=a(t,["groundingMetadata"]);p!=null&&u(e,["groundingMetadata"],p);const g=a(t,["index"]);g!=null&&u(e,["index"],g);const h=a(t,["logprobsResult"]);h!=null&&u(e,["logprobsResult"],h);const v=a(t,["safetyRatings"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),u(e,["safetyRatings"],_)}const E=a(t,["urlContextMetadata"]);return E!=null&&u(e,["urlContextMetadata"],E),e}function Ay(t){const e={},o=a(t,["citationSources"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["citations"],i)}return e}function qc(t){const e={},o=a(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>n0(c))),u(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&u(e,["role"],i),e}function xy(t,e){const o={},i=a(t,["displayName"]);if(e!==void 0&&i!=null&&u(e,["batch","displayName"],i),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function Iy(t,e){const o={},i=a(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=a(t,["dest"]);return e!==void 0&&s!=null&&u(e,["outputConfig"],yy(my(s))),o}function Hc(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["src"]);s!=null&&u(o,["batch","inputConfig"],Ey(t,Uc(t,s)));const c=a(e,["config"]);return c!=null&&xy(c,o),o}function Ny(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["model"],Ae(t,i));const s=a(e,["src"]);s!=null&&u(o,["inputConfig"],_y(Uc(t,s)));const c=a(e,["config"]);return c!=null&&Iy(c,o),o}function Py(t,e){const o={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&u(e,["batch","displayName"],i),o}function ky(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["src"]);s!=null&&u(o,["batch","inputConfig"],Uy(t,s));const c=a(e,["config"]);return c!=null&&Py(c,o),o}function Ry(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Qn(t,i)),o}function My(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Qn(t,i)),o}function Dy(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["name"]);i!=null&&u(e,["name"],i);const s=a(t,["done"]);s!=null&&u(e,["done"],s);const c=a(t,["error"]);return c!=null&&u(e,["error"],c),e}function Ly(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["name"]);i!=null&&u(e,["name"],i);const s=a(t,["done"]);s!=null&&u(e,["done"],s);const c=a(t,["error"]);return c!=null&&u(e,["error"],c),e}function Fy(t,e){const o={},i=a(e,["contents"]);if(i!=null){let c=Ds(t,i);Array.isArray(c)&&(c=c.map(f=>f)),u(o,["requests[]","request","content"],c)}const s=a(e,["config"]);return s!=null&&(u(o,["_self"],by(s,o)),Mg(o,{"requests[].*":"requests[].request.*"})),o}function by(t,e){const o={},i=a(t,["taskType"]);e!==void 0&&i!=null&&u(e,["requests[]","taskType"],i);const s=a(t,["title"]);e!==void 0&&s!=null&&u(e,["requests[]","title"],s);const c=a(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&u(e,["requests[]","outputDimensionality"],c),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Uy(t,e){const o={},i=a(e,["fileName"]);i!=null&&u(o,["file_name"],i);const s=a(e,["inlinedRequests"]);return s!=null&&u(o,["requests"],Fy(t,s)),o}function Vy(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Gy(t){const e={},o=a(t,["id"]);o!=null&&u(e,["id"],o);const i=a(t,["args"]);i!=null&&u(e,["args"],i);const s=a(t,["name"]);if(s!=null&&u(e,["name"],s),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qy(t){const e={},o=a(t,["mode"]);o!=null&&u(e,["mode"],o);const i=a(t,["allowedFunctionNames"]);if(i!=null&&u(e,["allowedFunctionNames"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Hy(t,e,o){const i={},s=a(e,["systemInstruction"]);o!==void 0&&s!=null&&u(o,["systemInstruction"],qc(Qe(s)));const c=a(e,["temperature"]);c!=null&&u(i,["temperature"],c);const f=a(e,["topP"]);f!=null&&u(i,["topP"],f);const p=a(e,["topK"]);p!=null&&u(i,["topK"],p);const g=a(e,["candidateCount"]);g!=null&&u(i,["candidateCount"],g);const h=a(e,["maxOutputTokens"]);h!=null&&u(i,["maxOutputTokens"],h);const v=a(e,["stopSequences"]);v!=null&&u(i,["stopSequences"],v);const E=a(e,["responseLogprobs"]);E!=null&&u(i,["responseLogprobs"],E);const _=a(e,["logprobs"]);_!=null&&u(i,["logprobs"],_);const T=a(e,["presencePenalty"]);T!=null&&u(i,["presencePenalty"],T);const P=a(e,["frequencyPenalty"]);P!=null&&u(i,["frequencyPenalty"],P);const R=a(e,["seed"]);R!=null&&u(i,["seed"],R);const N=a(e,["responseMimeType"]);N!=null&&u(i,["responseMimeType"],N);const F=a(e,["responseSchema"]);F!=null&&u(i,["responseSchema"],Ls(F));const H=a(e,["responseJsonSchema"]);if(H!=null&&u(i,["responseJsonSchema"],H),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=a(e,["safetySettings"]);if(o!==void 0&&$!=null){let q=$;Array.isArray(q)&&(q=q.map(se=>o0(se))),u(o,["safetySettings"],q)}const G=a(e,["tools"]);if(o!==void 0&&G!=null){let q=Yn(G);Array.isArray(q)&&(q=q.map(se=>i0(Kn(se)))),u(o,["tools"],q)}const W=a(e,["toolConfig"]);if(o!==void 0&&W!=null&&u(o,["toolConfig"],r0(W)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=a(e,["cachedContent"]);o!==void 0&&U!=null&&u(o,["cachedContent"],Kt(t,U));const V=a(e,["responseModalities"]);V!=null&&u(i,["responseModalities"],V);const X=a(e,["mediaResolution"]);X!=null&&u(i,["mediaResolution"],X);const O=a(e,["speechConfig"]);if(O!=null&&u(i,["speechConfig"],Fs(O)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ne=a(e,["thinkingConfig"]);ne!=null&&u(i,["thinkingConfig"],ne);const ge=a(e,["imageConfig"]);ge!=null&&u(i,["imageConfig"],Wy(ge));const Q=a(e,["enableEnhancedCivicAnswers"]);return Q!=null&&u(i,["enableEnhancedCivicAnswers"],Q),i}function $y(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>Cy(h))),u(e,["candidates"],g)}const s=a(t,["modelVersion"]);s!=null&&u(e,["modelVersion"],s);const c=a(t,["promptFeedback"]);c!=null&&u(e,["promptFeedback"],c);const f=a(t,["responseId"]);f!=null&&u(e,["responseId"],f);const p=a(t,["usageMetadata"]);return p!=null&&u(e,["usageMetadata"],p),e}function By(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Qn(t,i)),o}function zy(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Qn(t,i)),o}function Oy(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&u(e,["enableWidget"],o),e}function Jy(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&u(e,["timeRangeFilter"],o),e}function Wy(t){const e={},o=a(t,["aspectRatio"]);o!=null&&u(e,["aspectRatio"],o);const i=a(t,["imageSize"]);if(i!=null&&u(e,["imageSize"],i),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Ky(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["request","model"],Ae(t,i));const s=a(e,["contents"]);if(s!=null){let p=Et(s);Array.isArray(p)&&(p=p.map(g=>qc(g))),u(o,["request","contents"],p)}const c=a(e,["metadata"]);c!=null&&u(o,["metadata"],c);const f=a(e,["config"]);return f!=null&&u(o,["request","generationConfig"],Hy(t,f,a(o,["request"],{}))),o}function Yy(t){const e={},o=a(t,["response"]);o!=null&&u(e,["response"],$y(o));const i=a(t,["error"]);return i!=null&&u(e,["error"],i),e}function Qy(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);if(e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function Xy(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const c=a(t,["filter"]);return e!==void 0&&c!=null&&u(e,["_query","filter"],c),o}function Zy(t){const e={},o=a(t,["config"]);return o!=null&&Qy(o,e),e}function jy(t){const e={},o=a(t,["config"]);return o!=null&&Xy(o,e),e}function e0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=a(t,["operations"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>kr(f))),u(e,["batchJobs"],c)}return e}function t0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=a(t,["batchPredictionJobs"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>Us(f))),u(e,["batchJobs"],c)}return e}function n0(t){const e={},o=a(t,["mediaResolution"]);o!=null&&u(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&u(e,["codeExecutionResult"],i);const s=a(t,["executableCode"]);s!=null&&u(e,["executableCode"],s);const c=a(t,["fileData"]);c!=null&&u(e,["fileData"],Vy(c));const f=a(t,["functionCall"]);f!=null&&u(e,["functionCall"],Gy(f));const p=a(t,["functionResponse"]);p!=null&&u(e,["functionResponse"],p);const g=a(t,["inlineData"]);g!=null&&u(e,["inlineData"],Sy(g));const h=a(t,["text"]);h!=null&&u(e,["text"],h);const v=a(t,["thought"]);v!=null&&u(e,["thought"],v);const E=a(t,["thoughtSignature"]);E!=null&&u(e,["thoughtSignature"],E);const _=a(t,["videoMetadata"]);return _!=null&&u(e,["videoMetadata"],_),e}function o0(t){const e={},o=a(t,["category"]);if(o!=null&&u(e,["category"],o),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function r0(t){const e={},o=a(t,["functionCallingConfig"]);o!=null&&u(e,["functionCallingConfig"],qy(o));const i=a(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],i),e}function i0(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),u(e,["functionDeclarations"],v)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const s=a(t,["computerUse"]);s!=null&&u(e,["computerUse"],s);const c=a(t,["fileSearch"]);c!=null&&u(e,["fileSearch"],c);const f=a(t,["codeExecution"]);if(f!=null&&u(e,["codeExecution"],f),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=a(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],Oy(p));const g=a(t,["googleSearch"]);g!=null&&u(e,["googleSearch"],Jy(g));const h=a(t,["urlContext"]);return h!=null&&u(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Yt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Yt||(Yt={}));class Pn{constructor(e,o,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,i,s)}init(e,o,i){var s,c;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let f={config:{}};!i||Object.keys(i).length===0?f={config:{}}:typeof i=="object"?f=Object.assign({},i):f=i,f.config&&(f.config.pageToken=o.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(c=(s=f.config)===null||s===void 0?void 0:s.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s0 extends Wt{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Pn(Yt.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(e){const o=Hc(this.apiClient,e),i=o._url,s=j("{model}:batchGenerateContent",i),p=o.batch.inputConfig.requests,g=p.requests,h=[];for(const v of g){const E=Object.assign({},v);if(E.systemInstruction){const _=E.systemInstruction;delete E.systemInstruction;const T=E.request;T.systemInstruction=_,E.request=T}h.push(E)}return p.requests=h,delete o.config,delete o._url,delete o._query,{path:s,body:o}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,o){const i=o?Object.assign({},o):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const c=this.getGcsUri(e),f=this.getBigqueryUri(e);if(c)c.endsWith(".jsonl")?i.dest=`${c.slice(0,-6)}/dest`:i.dest=`${c}_dest_${s}`;else if(f)i.dest=`${f}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Ny(this.apiClient,e);return p=j("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>Us(v))}else{const h=Hc(this.apiClient,e);return p=j("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>kr(v))}}async createEmbeddingsInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=ky(this.apiClient,e);return c=j("{model}:asyncBatchEmbedContent",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>kr(g))}}async get(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=zy(this.apiClient,e);return p=j("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>Us(v))}else{const h=By(this.apiClient,e);return p=j("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>kr(v))}}async cancel(e){var o,i,s,c;let f="",p={};if(this.apiClient.isVertexAI()){const g=Ty(this.apiClient,e);f=j("batchPredictionJobs/{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=wy(this.apiClient,e);f=j("batches/{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=jy(e);return p=j("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=t0(v),_=new Cc;return Object.assign(_,E),_})}else{const h=Zy(e);return p=j("batches",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=e0(v),_=new Cc;return Object.assign(_,E),_})}}async delete(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=My(this.apiClient,e);return p=j("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>Ly(v))}else{const h=Ry(this.apiClient,e);return p=j("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>Dy(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l0(t){const e={},o=a(t,["data"]);if(o!=null&&u(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function $c(t){const e={},o=a(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>k0(c))),u(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&u(e,["role"],i),e}function a0(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const s=a(t,["expireTime"]);e!==void 0&&s!=null&&u(e,["expireTime"],s);const c=a(t,["displayName"]);e!==void 0&&c!=null&&u(e,["displayName"],c);const f=a(t,["contents"]);if(e!==void 0&&f!=null){let v=Et(f);Array.isArray(v)&&(v=v.map(E=>$c(E))),u(e,["contents"],v)}const p=a(t,["systemInstruction"]);e!==void 0&&p!=null&&u(e,["systemInstruction"],$c(Qe(p)));const g=a(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>M0(E))),u(e,["tools"],v)}const h=a(t,["toolConfig"]);if(e!==void 0&&h!=null&&u(e,["toolConfig"],R0(h)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function u0(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const s=a(t,["expireTime"]);e!==void 0&&s!=null&&u(e,["expireTime"],s);const c=a(t,["displayName"]);e!==void 0&&c!=null&&u(e,["displayName"],c);const f=a(t,["contents"]);if(e!==void 0&&f!=null){let E=Et(f);Array.isArray(E)&&(E=E.map(_=>_)),u(e,["contents"],E)}const p=a(t,["systemInstruction"]);e!==void 0&&p!=null&&u(e,["systemInstruction"],Qe(p));const g=a(t,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(_=>D0(_))),u(e,["tools"],E)}const h=a(t,["toolConfig"]);e!==void 0&&h!=null&&u(e,["toolConfig"],h);const v=a(t,["kmsKeyName"]);return e!==void 0&&v!=null&&u(e,["encryption_spec","kmsKeyName"],v),o}function c0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["model"],Ac(t,i));const s=a(e,["config"]);return s!=null&&a0(s,o),o}function d0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["model"],Ac(t,i));const s=a(e,["config"]);return s!=null&&u0(s,o),o}function f0(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Kt(t,i)),o}function p0(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Kt(t,i)),o}function m0(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function h0(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function g0(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function y0(t){const e={},o=a(t,["id"]);o!=null&&u(e,["id"],o);const i=a(t,["args"]);i!=null&&u(e,["args"],i);const s=a(t,["name"]);if(s!=null&&u(e,["name"],s),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function v0(t){const e={},o=a(t,["mode"]);o!=null&&u(e,["mode"],o);const i=a(t,["allowedFunctionNames"]);if(i!=null&&u(e,["allowedFunctionNames"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function E0(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=a(t,["description"]);o!=null&&u(e,["description"],o);const i=a(t,["name"]);i!=null&&u(e,["name"],i);const s=a(t,["parameters"]);s!=null&&u(e,["parameters"],s);const c=a(t,["parametersJsonSchema"]);c!=null&&u(e,["parametersJsonSchema"],c);const f=a(t,["response"]);f!=null&&u(e,["response"],f);const p=a(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function _0(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Kt(t,i)),o}function S0(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Kt(t,i)),o}function w0(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&u(e,["enableWidget"],o),e}function T0(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&u(e,["timeRangeFilter"],o),e}function C0(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),o}function A0(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),o}function x0(t){const e={},o=a(t,["config"]);return o!=null&&C0(o,e),e}function I0(t){const e={},o=a(t,["config"]);return o!=null&&A0(o,e),e}function N0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=a(t,["cachedContents"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["cachedContents"],c)}return e}function P0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=a(t,["cachedContents"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["cachedContents"],c)}return e}function k0(t){const e={},o=a(t,["mediaResolution"]);o!=null&&u(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&u(e,["codeExecutionResult"],i);const s=a(t,["executableCode"]);s!=null&&u(e,["executableCode"],s);const c=a(t,["fileData"]);c!=null&&u(e,["fileData"],g0(c));const f=a(t,["functionCall"]);f!=null&&u(e,["functionCall"],y0(f));const p=a(t,["functionResponse"]);p!=null&&u(e,["functionResponse"],p);const g=a(t,["inlineData"]);g!=null&&u(e,["inlineData"],l0(g));const h=a(t,["text"]);h!=null&&u(e,["text"],h);const v=a(t,["thought"]);v!=null&&u(e,["thought"],v);const E=a(t,["thoughtSignature"]);E!=null&&u(e,["thoughtSignature"],E);const _=a(t,["videoMetadata"]);return _!=null&&u(e,["videoMetadata"],_),e}function R0(t){const e={},o=a(t,["functionCallingConfig"]);o!=null&&u(e,["functionCallingConfig"],v0(o));const i=a(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],i),e}function M0(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),u(e,["functionDeclarations"],v)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const s=a(t,["computerUse"]);s!=null&&u(e,["computerUse"],s);const c=a(t,["fileSearch"]);c!=null&&u(e,["fileSearch"],c);const f=a(t,["codeExecution"]);if(f!=null&&u(e,["codeExecution"],f),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=a(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],w0(p));const g=a(t,["googleSearch"]);g!=null&&u(e,["googleSearch"],T0(g));const h=a(t,["urlContext"]);return h!=null&&u(e,["urlContext"],h),e}function D0(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let E=o;Array.isArray(E)&&(E=E.map(_=>E0(_))),u(e,["functionDeclarations"],E)}const i=a(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const s=a(t,["googleSearchRetrieval"]);s!=null&&u(e,["googleSearchRetrieval"],s);const c=a(t,["computerUse"]);if(c!=null&&u(e,["computerUse"],c),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=a(t,["codeExecution"]);f!=null&&u(e,["codeExecution"],f);const p=a(t,["enterpriseWebSearch"]);p!=null&&u(e,["enterpriseWebSearch"],p);const g=a(t,["googleMaps"]);g!=null&&u(e,["googleMaps"],g);const h=a(t,["googleSearch"]);h!=null&&u(e,["googleSearch"],h);const v=a(t,["urlContext"]);return v!=null&&u(e,["urlContext"],v),e}function L0(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const s=a(t,["expireTime"]);return e!==void 0&&s!=null&&u(e,["expireTime"],s),o}function F0(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const s=a(t,["expireTime"]);return e!==void 0&&s!=null&&u(e,["expireTime"],s),o}function b0(t,e){const o={},i=a(e,["name"]);i!=null&&u(o,["_url","name"],Kt(t,i));const s=a(e,["config"]);return s!=null&&L0(s,o),o}function U0(t,e){const o={},i=a(e,["name"]);i!=null&&u(o,["_url","name"],Kt(t,i));const s=a(e,["config"]);return s!=null&&F0(s,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V0 extends Wt{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Pn(Yt.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(o),o)}async create(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=d0(this.apiClient,e);return p=j("cachedContents",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const h=c0(this.apiClient,e);return p=j("cachedContents",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async get(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=S0(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const h=_0(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async delete(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=p0(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=h0(v),_=new wc;return Object.assign(_,E),_})}else{const h=f0(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=m0(v),_=new wc;return Object.assign(_,E),_})}}async update(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=U0(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const h=b0(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async listInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=I0(e);return p=j("cachedContents",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=P0(v),_=new Tc;return Object.assign(_,E),_})}else{const h=x0(e);return p=j("cachedContents",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=N0(v),_=new Tc;return Object.assign(_,E),_})}}}function Rr(t,e){var o={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(o[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(o[i[s]]=t[i[s]]);return o}function Bc(t){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&t[e],i=0;if(o)return o.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ye(t){return this instanceof ye?(this.v=t,this):new ye(t)}function Nt(t,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=o.apply(t,e||[]),s,c=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",f),s[Symbol.asyncIterator]=function(){return this},s;function f(T){return function(P){return Promise.resolve(P).then(T,E)}}function p(T,P){i[T]&&(s[T]=function(R){return new Promise(function(N,F){c.push([T,R,N,F])>1||g(T,R)})},P&&(s[T]=P(s[T])))}function g(T,P){try{h(i[T](P))}catch(R){_(c[0][3],R)}}function h(T){T.value instanceof ye?Promise.resolve(T.value.v).then(v,E):_(c[0][2],T)}function v(T){g("next",T)}function E(T){g("throw",T)}function _(T,P){T(P),c.shift(),c.length&&g(c[0][0],c[0][1])}}function Pt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],o;return e?e.call(t):(t=typeof Bc=="function"?Bc(t):t[Symbol.iterator](),o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o);function i(c){o[c]=t[c]&&function(f){return new Promise(function(p,g){f=t[c](f),s(p,g,f.done,f.value)})}}function s(c,f,p,g){Promise.resolve(g).then(function(h){c({value:h,done:p})},f)}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G0(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const o=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:zc(o)}function zc(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function q0(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Oc(t){if(t===void 0||t.length===0)return[];const e=[],o=t.length;let i=0;for(;i<o;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let c=!0;for(;i<o&&t[i].role==="model";)s.push(t[i]),c&&!zc(t[i])&&(c=!1),i++;c?e.push(...s):e.pop()}return e}class H0{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new $0(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class $0{constructor(e,o,i,s={},c=[]){this.apiClient=e,this.modelsModule=o,this.model=i,this.config=s,this.history=c,this.sendPromise=Promise.resolve(),q0(c)}async sendMessage(e){var o;await this.sendPromise;const i=Qe(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var c,f,p;const g=await s,h=(f=(c=g.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content,v=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let _=[];v!=null&&(_=(p=v.slice(E))!==null&&p!==void 0?p:[]);const T=h?[h]:[];this.recordHistory(i,T,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var o;await this.sendPromise;const i=Qe(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const c=await s;return this.processStreamResponse(c,i)}getHistory(e=!1){const o=e?Oc(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){return Nt(this,arguments,function*(){var s,c,f,p,g,h;const v=[];try{for(var E=!0,_=Pt(e),T;T=yield ye(_.next()),s=T.done,!s;E=!0){p=T.value,E=!1;const P=p;if(G0(P)){const R=(h=(g=P.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;R!==void 0&&v.push(R)}yield yield ye(P)}}catch(P){c={error:P}}finally{try{!E&&!s&&(f=_.return)&&(yield ye(f.call(_)))}finally{if(c)throw c.error}}this.recordHistory(o,v)})}recordHistory(e,o,i){let s=[];o.length>0&&o.every(c=>c.role!==void 0)?s=o:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Oc(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mr extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Mr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B0(t){const e={},o=a(t,["file"]);return o!=null&&u(e,["file"],o),e}function z0(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function O0(t){const e={},o=a(t,["name"]);return o!=null&&u(e,["_url","file"],Lc(o)),e}function J0(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function W0(t){const e={},o=a(t,["name"]);return o!=null&&u(e,["_url","file"],Lc(o)),e}function K0(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),o}function Y0(t){const e={},o=a(t,["config"]);return o!=null&&K0(o,e),e}function Q0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=a(t,["files"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["files"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X0 extends Wt{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Pn(Yt.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>o)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Y0(e);return c=j("files",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const h=Q0(g),v=new ty;return Object.assign(v,h),v})}}async createInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=B0(e);return c=j("upload/v1beta/files",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=z0(g),v=new ny;return Object.assign(v,h),v})}}async get(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=W0(e);return c=j("files/{file}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=O0(e);return c=j("files/{file}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const h=J0(g),v=new oy;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dr(t){const e={},o=a(t,["data"]);if(o!=null&&u(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Z0(t){const e={},o=a(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>mv(c))),u(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&u(e,["role"],i),e}function j0(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function ev(t){const e={},o=a(t,["id"]);o!=null&&u(e,["id"],o);const i=a(t,["args"]);i!=null&&u(e,["args"],i);const s=a(t,["name"]);if(s!=null&&u(e,["name"],s),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tv(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=a(t,["description"]);o!=null&&u(e,["description"],o);const i=a(t,["name"]);i!=null&&u(e,["name"],i);const s=a(t,["parameters"]);s!=null&&u(e,["parameters"],s);const c=a(t,["parametersJsonSchema"]);c!=null&&u(e,["parametersJsonSchema"],c);const f=a(t,["response"]);f!=null&&u(e,["response"],f);const p=a(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function nv(t){const e={},o=a(t,["modelSelectionConfig"]);o!=null&&u(e,["modelConfig"],o);const i=a(t,["responseJsonSchema"]);i!=null&&u(e,["responseJsonSchema"],i);const s=a(t,["audioTimestamp"]);s!=null&&u(e,["audioTimestamp"],s);const c=a(t,["candidateCount"]);c!=null&&u(e,["candidateCount"],c);const f=a(t,["enableAffectiveDialog"]);f!=null&&u(e,["enableAffectiveDialog"],f);const p=a(t,["frequencyPenalty"]);p!=null&&u(e,["frequencyPenalty"],p);const g=a(t,["logprobs"]);g!=null&&u(e,["logprobs"],g);const h=a(t,["maxOutputTokens"]);h!=null&&u(e,["maxOutputTokens"],h);const v=a(t,["mediaResolution"]);v!=null&&u(e,["mediaResolution"],v);const E=a(t,["presencePenalty"]);E!=null&&u(e,["presencePenalty"],E);const _=a(t,["responseLogprobs"]);_!=null&&u(e,["responseLogprobs"],_);const T=a(t,["responseMimeType"]);T!=null&&u(e,["responseMimeType"],T);const P=a(t,["responseModalities"]);P!=null&&u(e,["responseModalities"],P);const R=a(t,["responseSchema"]);R!=null&&u(e,["responseSchema"],R);const N=a(t,["routingConfig"]);N!=null&&u(e,["routingConfig"],N);const F=a(t,["seed"]);F!=null&&u(e,["seed"],F);const H=a(t,["speechConfig"]);H!=null&&u(e,["speechConfig"],H);const $=a(t,["stopSequences"]);$!=null&&u(e,["stopSequences"],$);const G=a(t,["temperature"]);G!=null&&u(e,["temperature"],G);const W=a(t,["thinkingConfig"]);W!=null&&u(e,["thinkingConfig"],W);const U=a(t,["topK"]);U!=null&&u(e,["topK"],U);const V=a(t,["topP"]);if(V!=null&&u(e,["topP"],V),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ov(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&u(e,["enableWidget"],o),e}function rv(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&u(e,["timeRangeFilter"],o),e}function iv(t,e){const o={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],i);const s=a(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const c=a(t,["temperature"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","temperature"],c);const f=a(t,["topP"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","topP"],f);const p=a(t,["topK"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","topK"],p);const g=a(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const h=a(t,["mediaResolution"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","mediaResolution"],h);const v=a(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const E=a(t,["speechConfig"]);e!==void 0&&E!=null&&u(e,["setup","generationConfig","speechConfig"],bs(E));const _=a(t,["thinkingConfig"]);e!==void 0&&_!=null&&u(e,["setup","generationConfig","thinkingConfig"],_);const T=a(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],T);const P=a(t,["systemInstruction"]);e!==void 0&&P!=null&&u(e,["setup","systemInstruction"],Z0(Qe(P)));const R=a(t,["tools"]);if(e!==void 0&&R!=null){let U=Yn(R);Array.isArray(U)&&(U=U.map(V=>gv(Kn(V)))),u(e,["setup","tools"],U)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&u(e,["setup","sessionResumption"],hv(N));const F=a(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&u(e,["setup","inputAudioTranscription"],F);const H=a(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&u(e,["setup","outputAudioTranscription"],H);const $=a(t,["realtimeInputConfig"]);e!==void 0&&$!=null&&u(e,["setup","realtimeInputConfig"],$);const G=a(t,["contextWindowCompression"]);e!==void 0&&G!=null&&u(e,["setup","contextWindowCompression"],G);const W=a(t,["proactivity"]);if(e!==void 0&&W!=null&&u(e,["setup","proactivity"],W),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function sv(t,e){const o={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],nv(i));const s=a(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const c=a(t,["temperature"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","temperature"],c);const f=a(t,["topP"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","topP"],f);const p=a(t,["topK"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","topK"],p);const g=a(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const h=a(t,["mediaResolution"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","mediaResolution"],h);const v=a(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const E=a(t,["speechConfig"]);e!==void 0&&E!=null&&u(e,["setup","generationConfig","speechConfig"],bs(E));const _=a(t,["thinkingConfig"]);e!==void 0&&_!=null&&u(e,["setup","generationConfig","thinkingConfig"],_);const T=a(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],T);const P=a(t,["systemInstruction"]);e!==void 0&&P!=null&&u(e,["setup","systemInstruction"],Qe(P));const R=a(t,["tools"]);if(e!==void 0&&R!=null){let V=Yn(R);Array.isArray(V)&&(V=V.map(X=>yv(Kn(X)))),u(e,["setup","tools"],V)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&u(e,["setup","sessionResumption"],N);const F=a(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&u(e,["setup","inputAudioTranscription"],F);const H=a(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&u(e,["setup","outputAudioTranscription"],H);const $=a(t,["realtimeInputConfig"]);e!==void 0&&$!=null&&u(e,["setup","realtimeInputConfig"],$);const G=a(t,["contextWindowCompression"]);e!==void 0&&G!=null&&u(e,["setup","contextWindowCompression"],G);const W=a(t,["proactivity"]);e!==void 0&&W!=null&&u(e,["setup","proactivity"],W);const U=a(t,["explicitVadSignal"]);return e!==void 0&&U!=null&&u(e,["setup","explicitVadSignal"],U),o}function lv(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["setup","model"],Ae(t,i));const s=a(e,["config"]);return s!=null&&u(o,["config"],iv(s,o)),o}function av(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["setup","model"],Ae(t,i));const s=a(e,["config"]);return s!=null&&u(o,["config"],sv(s,o)),o}function uv(t){const e={},o=a(t,["musicGenerationConfig"]);return o!=null&&u(e,["musicGenerationConfig"],o),e}function cv(t){const e={},o=a(t,["weightedPrompts"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["weightedPrompts"],i)}return e}function dv(t){const e={},o=a(t,["media"]);if(o!=null){let h=xc(o);Array.isArray(h)&&(h=h.map(v=>Dr(v))),u(e,["mediaChunks"],h)}const i=a(t,["audio"]);i!=null&&u(e,["audio"],Dr(Nc(i)));const s=a(t,["audioStreamEnd"]);s!=null&&u(e,["audioStreamEnd"],s);const c=a(t,["video"]);c!=null&&u(e,["video"],Dr(Ic(c)));const f=a(t,["text"]);f!=null&&u(e,["text"],f);const p=a(t,["activityStart"]);p!=null&&u(e,["activityStart"],p);const g=a(t,["activityEnd"]);return g!=null&&u(e,["activityEnd"],g),e}function fv(t){const e={},o=a(t,["media"]);if(o!=null){let h=xc(o);Array.isArray(h)&&(h=h.map(v=>v)),u(e,["mediaChunks"],h)}const i=a(t,["audio"]);i!=null&&u(e,["audio"],Nc(i));const s=a(t,["audioStreamEnd"]);s!=null&&u(e,["audioStreamEnd"],s);const c=a(t,["video"]);c!=null&&u(e,["video"],Ic(c));const f=a(t,["text"]);f!=null&&u(e,["text"],f);const p=a(t,["activityStart"]);p!=null&&u(e,["activityStart"],p);const g=a(t,["activityEnd"]);return g!=null&&u(e,["activityEnd"],g),e}function pv(t){const e={},o=a(t,["setupComplete"]);o!=null&&u(e,["setupComplete"],o);const i=a(t,["serverContent"]);i!=null&&u(e,["serverContent"],i);const s=a(t,["toolCall"]);s!=null&&u(e,["toolCall"],s);const c=a(t,["toolCallCancellation"]);c!=null&&u(e,["toolCallCancellation"],c);const f=a(t,["usageMetadata"]);f!=null&&u(e,["usageMetadata"],vv(f));const p=a(t,["goAway"]);p!=null&&u(e,["goAway"],p);const g=a(t,["sessionResumptionUpdate"]);g!=null&&u(e,["sessionResumptionUpdate"],g);const h=a(t,["voiceActivityDetectionSignal"]);return h!=null&&u(e,["voiceActivityDetectionSignal"],h),e}function mv(t){const e={},o=a(t,["mediaResolution"]);o!=null&&u(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&u(e,["codeExecutionResult"],i);const s=a(t,["executableCode"]);s!=null&&u(e,["executableCode"],s);const c=a(t,["fileData"]);c!=null&&u(e,["fileData"],j0(c));const f=a(t,["functionCall"]);f!=null&&u(e,["functionCall"],ev(f));const p=a(t,["functionResponse"]);p!=null&&u(e,["functionResponse"],p);const g=a(t,["inlineData"]);g!=null&&u(e,["inlineData"],Dr(g));const h=a(t,["text"]);h!=null&&u(e,["text"],h);const v=a(t,["thought"]);v!=null&&u(e,["thought"],v);const E=a(t,["thoughtSignature"]);E!=null&&u(e,["thoughtSignature"],E);const _=a(t,["videoMetadata"]);return _!=null&&u(e,["videoMetadata"],_),e}function hv(t){const e={},o=a(t,["handle"]);if(o!=null&&u(e,["handle"],o),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gv(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),u(e,["functionDeclarations"],v)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const s=a(t,["computerUse"]);s!=null&&u(e,["computerUse"],s);const c=a(t,["fileSearch"]);c!=null&&u(e,["fileSearch"],c);const f=a(t,["codeExecution"]);if(f!=null&&u(e,["codeExecution"],f),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=a(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],ov(p));const g=a(t,["googleSearch"]);g!=null&&u(e,["googleSearch"],rv(g));const h=a(t,["urlContext"]);return h!=null&&u(e,["urlContext"],h),e}function yv(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let E=o;Array.isArray(E)&&(E=E.map(_=>tv(_))),u(e,["functionDeclarations"],E)}const i=a(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const s=a(t,["googleSearchRetrieval"]);s!=null&&u(e,["googleSearchRetrieval"],s);const c=a(t,["computerUse"]);if(c!=null&&u(e,["computerUse"],c),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=a(t,["codeExecution"]);f!=null&&u(e,["codeExecution"],f);const p=a(t,["enterpriseWebSearch"]);p!=null&&u(e,["enterpriseWebSearch"],p);const g=a(t,["googleMaps"]);g!=null&&u(e,["googleMaps"],g);const h=a(t,["googleSearch"]);h!=null&&u(e,["googleSearch"],h);const v=a(t,["urlContext"]);return v!=null&&u(e,["urlContext"],v),e}function vv(t){const e={},o=a(t,["promptTokenCount"]);o!=null&&u(e,["promptTokenCount"],o);const i=a(t,["cachedContentTokenCount"]);i!=null&&u(e,["cachedContentTokenCount"],i);const s=a(t,["candidatesTokenCount"]);s!=null&&u(e,["responseTokenCount"],s);const c=a(t,["toolUsePromptTokenCount"]);c!=null&&u(e,["toolUsePromptTokenCount"],c);const f=a(t,["thoughtsTokenCount"]);f!=null&&u(e,["thoughtsTokenCount"],f);const p=a(t,["totalTokenCount"]);p!=null&&u(e,["totalTokenCount"],p);const g=a(t,["promptTokensDetails"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(P=>P)),u(e,["promptTokensDetails"],T)}const h=a(t,["cacheTokensDetails"]);if(h!=null){let T=h;Array.isArray(T)&&(T=T.map(P=>P)),u(e,["cacheTokensDetails"],T)}const v=a(t,["candidatesTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(P=>P)),u(e,["responseTokensDetails"],T)}const E=a(t,["toolUsePromptTokensDetails"]);if(E!=null){let T=E;Array.isArray(T)&&(T=T.map(P=>P)),u(e,["toolUsePromptTokensDetails"],T)}const _=a(t,["trafficType"]);return _!=null&&u(e,["trafficType"],_),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ev(t){const e={},o=a(t,["data"]);if(o!=null&&u(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function _v(t){const e={},o=a(t,["content"]);o!=null&&u(e,["content"],o);const i=a(t,["citationMetadata"]);i!=null&&u(e,["citationMetadata"],Sv(i));const s=a(t,["tokenCount"]);s!=null&&u(e,["tokenCount"],s);const c=a(t,["finishReason"]);c!=null&&u(e,["finishReason"],c);const f=a(t,["avgLogprobs"]);f!=null&&u(e,["avgLogprobs"],f);const p=a(t,["groundingMetadata"]);p!=null&&u(e,["groundingMetadata"],p);const g=a(t,["index"]);g!=null&&u(e,["index"],g);const h=a(t,["logprobsResult"]);h!=null&&u(e,["logprobsResult"],h);const v=a(t,["safetyRatings"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),u(e,["safetyRatings"],_)}const E=a(t,["urlContextMetadata"]);return E!=null&&u(e,["urlContextMetadata"],E),e}function Sv(t){const e={},o=a(t,["citationSources"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["citations"],i)}return e}function wv(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["contents"]);if(s!=null){let c=Et(s);Array.isArray(c)&&(c=c.map(f=>f)),u(o,["contents"],c)}return o}function Tv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>c)),u(e,["tokensInfo"],s)}return e}function Cv(t){const e={},o=a(t,["values"]);o!=null&&u(e,["values"],o);const i=a(t,["statistics"]);return i!=null&&u(e,["statistics"],Av(i)),e}function Av(t){const e={},o=a(t,["truncated"]);o!=null&&u(e,["truncated"],o);const i=a(t,["token_count"]);return i!=null&&u(e,["tokenCount"],i),e}function Lr(t){const e={},o=a(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>LE(c))),u(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&u(e,["role"],i),e}function xv(t){const e={},o=a(t,["controlType"]);o!=null&&u(e,["controlType"],o);const i=a(t,["enableControlImageComputation"]);return i!=null&&u(e,["computeControl"],i),e}function Iv(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Nv(t,e){const o={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&u(e,["systemInstruction"],Qe(i));const s=a(t,["tools"]);if(e!==void 0&&s!=null){let f=s;Array.isArray(f)&&(f=f.map(p=>jc(p))),u(e,["tools"],f)}const c=a(t,["generationConfig"]);return e!==void 0&&c!=null&&u(e,["generationConfig"],EE(c)),o}function Pv(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["contents"]);if(s!=null){let f=Et(s);Array.isArray(f)&&(f=f.map(p=>Lr(p))),u(o,["contents"],f)}const c=a(e,["config"]);return c!=null&&Iv(c),o}function kv(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["contents"]);if(s!=null){let f=Et(s);Array.isArray(f)&&(f=f.map(p=>p)),u(o,["contents"],f)}const c=a(e,["config"]);return c!=null&&Nv(c,o),o}function Rv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["totalTokens"]);i!=null&&u(e,["totalTokens"],i);const s=a(t,["cachedContentTokenCount"]);return s!=null&&u(e,["cachedContentTokenCount"],s),e}function Mv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["totalTokens"]);return i!=null&&u(e,["totalTokens"],i),e}function Dv(t,e){const o={},i=a(e,["model"]);return i!=null&&u(o,["_url","name"],Ae(t,i)),o}function Lv(t,e){const o={},i=a(e,["model"]);return i!=null&&u(o,["_url","name"],Ae(t,i)),o}function Fv(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function bv(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function Uv(t,e){const o={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=a(t,["negativePrompt"]);e!==void 0&&s!=null&&u(e,["parameters","negativePrompt"],s);const c=a(t,["numberOfImages"]);e!==void 0&&c!=null&&u(e,["parameters","sampleCount"],c);const f=a(t,["aspectRatio"]);e!==void 0&&f!=null&&u(e,["parameters","aspectRatio"],f);const p=a(t,["guidanceScale"]);e!==void 0&&p!=null&&u(e,["parameters","guidanceScale"],p);const g=a(t,["seed"]);e!==void 0&&g!=null&&u(e,["parameters","seed"],g);const h=a(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&u(e,["parameters","safetySetting"],h);const v=a(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const E=a(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&u(e,["parameters","includeSafetyAttributes"],E);const _=a(t,["includeRaiReason"]);e!==void 0&&_!=null&&u(e,["parameters","includeRaiReason"],_);const T=a(t,["language"]);e!==void 0&&T!=null&&u(e,["parameters","language"],T);const P=a(t,["outputMimeType"]);e!==void 0&&P!=null&&u(e,["parameters","outputOptions","mimeType"],P);const R=a(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&u(e,["parameters","outputOptions","compressionQuality"],R);const N=a(t,["addWatermark"]);e!==void 0&&N!=null&&u(e,["parameters","addWatermark"],N);const F=a(t,["labels"]);e!==void 0&&F!=null&&u(e,["labels"],F);const H=a(t,["editMode"]);e!==void 0&&H!=null&&u(e,["parameters","editMode"],H);const $=a(t,["baseSteps"]);return e!==void 0&&$!=null&&u(e,["parameters","editConfig","baseSteps"],$),o}function Vv(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["prompt"]);s!=null&&u(o,["instances[0]","prompt"],s);const c=a(e,["referenceImages"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>qE(g))),u(o,["instances[0]","referenceImages"],p)}const f=a(e,["config"]);return f!=null&&Uv(f,o),o}function Gv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>Fr(c))),u(e,["generatedImages"],s)}return e}function qv(t,e){const o={},i=a(t,["taskType"]);e!==void 0&&i!=null&&u(e,["requests[]","taskType"],i);const s=a(t,["title"]);e!==void 0&&s!=null&&u(e,["requests[]","title"],s);const c=a(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&u(e,["requests[]","outputDimensionality"],c),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Hv(t,e){const o={},i=a(t,["taskType"]);e!==void 0&&i!=null&&u(e,["instances[]","task_type"],i);const s=a(t,["title"]);e!==void 0&&s!=null&&u(e,["instances[]","title"],s);const c=a(t,["outputDimensionality"]);e!==void 0&&c!=null&&u(e,["parameters","outputDimensionality"],c);const f=a(t,["mimeType"]);e!==void 0&&f!=null&&u(e,["instances[]","mimeType"],f);const p=a(t,["autoTruncate"]);return e!==void 0&&p!=null&&u(e,["parameters","autoTruncate"],p),o}function $v(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["contents"]);if(s!=null){let p=Ds(t,s);Array.isArray(p)&&(p=p.map(g=>g)),u(o,["requests[]","content"],p)}const c=a(e,["config"]);c!=null&&qv(c,o);const f=a(e,["model"]);return f!==void 0&&u(o,["requests[]","model"],Ae(t,f)),o}function Bv(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["contents"]);if(s!=null){let f=Ds(t,s);Array.isArray(f)&&(f=f.map(p=>p)),u(o,["instances[]","content"],f)}const c=a(e,["config"]);return c!=null&&Hv(c,o),o}function zv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["embeddings"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["embeddings"],c)}const s=a(t,["metadata"]);return s!=null&&u(e,["metadata"],s),e}function Ov(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["predictions[]","embeddings"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>Cv(f))),u(e,["embeddings"],c)}const s=a(t,["metadata"]);return s!=null&&u(e,["metadata"],s),e}function Jv(t){const e={},o=a(t,["endpoint"]);o!=null&&u(e,["name"],o);const i=a(t,["deployedModelId"]);return i!=null&&u(e,["deployedModelId"],i),e}function Wv(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Kv(t){const e={},o=a(t,["id"]);o!=null&&u(e,["id"],o);const i=a(t,["args"]);i!=null&&u(e,["args"],i);const s=a(t,["name"]);if(s!=null&&u(e,["name"],s),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Yv(t){const e={},o=a(t,["mode"]);o!=null&&u(e,["mode"],o);const i=a(t,["allowedFunctionNames"]);if(i!=null&&u(e,["allowedFunctionNames"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Qv(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=a(t,["description"]);o!=null&&u(e,["description"],o);const i=a(t,["name"]);i!=null&&u(e,["name"],i);const s=a(t,["parameters"]);s!=null&&u(e,["parameters"],s);const c=a(t,["parametersJsonSchema"]);c!=null&&u(e,["parametersJsonSchema"],c);const f=a(t,["response"]);f!=null&&u(e,["response"],f);const p=a(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function Xv(t,e,o){const i={},s=a(e,["systemInstruction"]);o!==void 0&&s!=null&&u(o,["systemInstruction"],Lr(Qe(s)));const c=a(e,["temperature"]);c!=null&&u(i,["temperature"],c);const f=a(e,["topP"]);f!=null&&u(i,["topP"],f);const p=a(e,["topK"]);p!=null&&u(i,["topK"],p);const g=a(e,["candidateCount"]);g!=null&&u(i,["candidateCount"],g);const h=a(e,["maxOutputTokens"]);h!=null&&u(i,["maxOutputTokens"],h);const v=a(e,["stopSequences"]);v!=null&&u(i,["stopSequences"],v);const E=a(e,["responseLogprobs"]);E!=null&&u(i,["responseLogprobs"],E);const _=a(e,["logprobs"]);_!=null&&u(i,["logprobs"],_);const T=a(e,["presencePenalty"]);T!=null&&u(i,["presencePenalty"],T);const P=a(e,["frequencyPenalty"]);P!=null&&u(i,["frequencyPenalty"],P);const R=a(e,["seed"]);R!=null&&u(i,["seed"],R);const N=a(e,["responseMimeType"]);N!=null&&u(i,["responseMimeType"],N);const F=a(e,["responseSchema"]);F!=null&&u(i,["responseSchema"],Ls(F));const H=a(e,["responseJsonSchema"]);if(H!=null&&u(i,["responseJsonSchema"],H),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const $=a(e,["safetySettings"]);if(o!==void 0&&$!=null){let q=$;Array.isArray(q)&&(q=q.map(se=>HE(se))),u(o,["safetySettings"],q)}const G=a(e,["tools"]);if(o!==void 0&&G!=null){let q=Yn(G);Array.isArray(q)&&(q=q.map(se=>KE(Kn(se)))),u(o,["tools"],q)}const W=a(e,["toolConfig"]);if(o!==void 0&&W!=null&&u(o,["toolConfig"],WE(W)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=a(e,["cachedContent"]);o!==void 0&&U!=null&&u(o,["cachedContent"],Kt(t,U));const V=a(e,["responseModalities"]);V!=null&&u(i,["responseModalities"],V);const X=a(e,["mediaResolution"]);X!=null&&u(i,["mediaResolution"],X);const O=a(e,["speechConfig"]);if(O!=null&&u(i,["speechConfig"],Fs(O)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ne=a(e,["thinkingConfig"]);ne!=null&&u(i,["thinkingConfig"],ne);const ge=a(e,["imageConfig"]);ge!=null&&u(i,["imageConfig"],CE(ge));const Q=a(e,["enableEnhancedCivicAnswers"]);return Q!=null&&u(i,["enableEnhancedCivicAnswers"],Q),i}function Zv(t,e,o){const i={},s=a(e,["systemInstruction"]);o!==void 0&&s!=null&&u(o,["systemInstruction"],Qe(s));const c=a(e,["temperature"]);c!=null&&u(i,["temperature"],c);const f=a(e,["topP"]);f!=null&&u(i,["topP"],f);const p=a(e,["topK"]);p!=null&&u(i,["topK"],p);const g=a(e,["candidateCount"]);g!=null&&u(i,["candidateCount"],g);const h=a(e,["maxOutputTokens"]);h!=null&&u(i,["maxOutputTokens"],h);const v=a(e,["stopSequences"]);v!=null&&u(i,["stopSequences"],v);const E=a(e,["responseLogprobs"]);E!=null&&u(i,["responseLogprobs"],E);const _=a(e,["logprobs"]);_!=null&&u(i,["logprobs"],_);const T=a(e,["presencePenalty"]);T!=null&&u(i,["presencePenalty"],T);const P=a(e,["frequencyPenalty"]);P!=null&&u(i,["frequencyPenalty"],P);const R=a(e,["seed"]);R!=null&&u(i,["seed"],R);const N=a(e,["responseMimeType"]);N!=null&&u(i,["responseMimeType"],N);const F=a(e,["responseSchema"]);F!=null&&u(i,["responseSchema"],Ls(F));const H=a(e,["responseJsonSchema"]);H!=null&&u(i,["responseJsonSchema"],H);const $=a(e,["routingConfig"]);$!=null&&u(i,["routingConfig"],$);const G=a(e,["modelSelectionConfig"]);G!=null&&u(i,["modelConfig"],G);const W=a(e,["safetySettings"]);if(o!==void 0&&W!=null){let de=W;Array.isArray(de)&&(de=de.map(ve=>ve)),u(o,["safetySettings"],de)}const U=a(e,["tools"]);if(o!==void 0&&U!=null){let de=Yn(U);Array.isArray(de)&&(de=de.map(ve=>jc(Kn(ve)))),u(o,["tools"],de)}const V=a(e,["toolConfig"]);o!==void 0&&V!=null&&u(o,["toolConfig"],V);const X=a(e,["labels"]);o!==void 0&&X!=null&&u(o,["labels"],X);const O=a(e,["cachedContent"]);o!==void 0&&O!=null&&u(o,["cachedContent"],Kt(t,O));const ne=a(e,["responseModalities"]);ne!=null&&u(i,["responseModalities"],ne);const ge=a(e,["mediaResolution"]);ge!=null&&u(i,["mediaResolution"],ge);const Q=a(e,["speechConfig"]);Q!=null&&u(i,["speechConfig"],Fs(Q));const q=a(e,["audioTimestamp"]);q!=null&&u(i,["audioTimestamp"],q);const se=a(e,["thinkingConfig"]);se!=null&&u(i,["thinkingConfig"],se);const pe=a(e,["imageConfig"]);if(pe!=null&&u(i,["imageConfig"],AE(pe)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function Jc(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["contents"]);if(s!=null){let f=Et(s);Array.isArray(f)&&(f=f.map(p=>Lr(p))),u(o,["contents"],f)}const c=a(e,["config"]);return c!=null&&u(o,["generationConfig"],Xv(t,c,o)),o}function Wc(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["contents"]);if(s!=null){let f=Et(s);Array.isArray(f)&&(f=f.map(p=>p)),u(o,["contents"],f)}const c=a(e,["config"]);return c!=null&&u(o,["generationConfig"],Zv(t,c,o)),o}function Kc(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>_v(h))),u(e,["candidates"],g)}const s=a(t,["modelVersion"]);s!=null&&u(e,["modelVersion"],s);const c=a(t,["promptFeedback"]);c!=null&&u(e,["promptFeedback"],c);const f=a(t,["responseId"]);f!=null&&u(e,["responseId"],f);const p=a(t,["usageMetadata"]);return p!=null&&u(e,["usageMetadata"],p),e}function Yc(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),u(e,["candidates"],h)}const s=a(t,["createTime"]);s!=null&&u(e,["createTime"],s);const c=a(t,["modelVersion"]);c!=null&&u(e,["modelVersion"],c);const f=a(t,["promptFeedback"]);f!=null&&u(e,["promptFeedback"],f);const p=a(t,["responseId"]);p!=null&&u(e,["responseId"],p);const g=a(t,["usageMetadata"]);return g!=null&&u(e,["usageMetadata"],g),e}function jv(t,e){const o={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const c=a(t,["guidanceScale"]);if(e!==void 0&&c!=null&&u(e,["parameters","guidanceScale"],c),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const p=a(t,["personGeneration"]);e!==void 0&&p!=null&&u(e,["parameters","personGeneration"],p);const g=a(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&u(e,["parameters","includeSafetyAttributes"],g);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&u(e,["parameters","includeRaiReason"],h);const v=a(t,["language"]);e!==void 0&&v!=null&&u(e,["parameters","language"],v);const E=a(t,["outputMimeType"]);e!==void 0&&E!=null&&u(e,["parameters","outputOptions","mimeType"],E);const _=a(t,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&u(e,["parameters","outputOptions","compressionQuality"],_),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=a(t,["imageSize"]);if(e!==void 0&&T!=null&&u(e,["parameters","sampleImageSize"],T),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function eE(t,e){const o={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=a(t,["negativePrompt"]);e!==void 0&&s!=null&&u(e,["parameters","negativePrompt"],s);const c=a(t,["numberOfImages"]);e!==void 0&&c!=null&&u(e,["parameters","sampleCount"],c);const f=a(t,["aspectRatio"]);e!==void 0&&f!=null&&u(e,["parameters","aspectRatio"],f);const p=a(t,["guidanceScale"]);e!==void 0&&p!=null&&u(e,["parameters","guidanceScale"],p);const g=a(t,["seed"]);e!==void 0&&g!=null&&u(e,["parameters","seed"],g);const h=a(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&u(e,["parameters","safetySetting"],h);const v=a(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const E=a(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&u(e,["parameters","includeSafetyAttributes"],E);const _=a(t,["includeRaiReason"]);e!==void 0&&_!=null&&u(e,["parameters","includeRaiReason"],_);const T=a(t,["language"]);e!==void 0&&T!=null&&u(e,["parameters","language"],T);const P=a(t,["outputMimeType"]);e!==void 0&&P!=null&&u(e,["parameters","outputOptions","mimeType"],P);const R=a(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&u(e,["parameters","outputOptions","compressionQuality"],R);const N=a(t,["addWatermark"]);e!==void 0&&N!=null&&u(e,["parameters","addWatermark"],N);const F=a(t,["labels"]);e!==void 0&&F!=null&&u(e,["labels"],F);const H=a(t,["imageSize"]);e!==void 0&&H!=null&&u(e,["parameters","sampleImageSize"],H);const $=a(t,["enhancePrompt"]);return e!==void 0&&$!=null&&u(e,["parameters","enhancePrompt"],$),o}function tE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["prompt"]);s!=null&&u(o,["instances[0]","prompt"],s);const c=a(e,["config"]);return c!=null&&jv(c,o),o}function nE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["prompt"]);s!=null&&u(o,["instances[0]","prompt"],s);const c=a(e,["config"]);return c!=null&&eE(c,o),o}function oE(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["predictions"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>hE(f))),u(e,["generatedImages"],c)}const s=a(t,["positivePromptSafetyAttributes"]);return s!=null&&u(e,["positivePromptSafetyAttributes"],Xc(s)),e}function rE(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["predictions"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>Fr(f))),u(e,["generatedImages"],c)}const s=a(t,["positivePromptSafetyAttributes"]);return s!=null&&u(e,["positivePromptSafetyAttributes"],Zc(s)),e}function iE(t,e){const o={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=a(t,["durationSeconds"]);if(e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=a(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const f=a(t,["resolution"]);e!==void 0&&f!=null&&u(e,["parameters","resolution"],f);const p=a(t,["personGeneration"]);if(e!==void 0&&p!=null&&u(e,["parameters","personGeneration"],p),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=a(t,["negativePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","negativePrompt"],g);const h=a(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&u(e,["parameters","enhancePrompt"],h),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=a(t,["lastFrame"]);e!==void 0&&v!=null&&u(e,["instances[0]","lastFrame"],br(v));const E=a(t,["referenceImages"]);if(e!==void 0&&E!=null){let _=E;Array.isArray(_)&&(_=_.map(T=>l_(T))),u(e,["instances[0]","referenceImages"],_)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function sE(t,e){const o={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=a(t,["outputGcsUri"]);e!==void 0&&s!=null&&u(e,["parameters","storageUri"],s);const c=a(t,["fps"]);e!==void 0&&c!=null&&u(e,["parameters","fps"],c);const f=a(t,["durationSeconds"]);e!==void 0&&f!=null&&u(e,["parameters","durationSeconds"],f);const p=a(t,["seed"]);e!==void 0&&p!=null&&u(e,["parameters","seed"],p);const g=a(t,["aspectRatio"]);e!==void 0&&g!=null&&u(e,["parameters","aspectRatio"],g);const h=a(t,["resolution"]);e!==void 0&&h!=null&&u(e,["parameters","resolution"],h);const v=a(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const E=a(t,["pubsubTopic"]);e!==void 0&&E!=null&&u(e,["parameters","pubsubTopic"],E);const _=a(t,["negativePrompt"]);e!==void 0&&_!=null&&u(e,["parameters","negativePrompt"],_);const T=a(t,["enhancePrompt"]);e!==void 0&&T!=null&&u(e,["parameters","enhancePrompt"],T);const P=a(t,["generateAudio"]);e!==void 0&&P!=null&&u(e,["parameters","generateAudio"],P);const R=a(t,["lastFrame"]);e!==void 0&&R!=null&&u(e,["instances[0]","lastFrame"],kt(R));const N=a(t,["referenceImages"]);if(e!==void 0&&N!=null){let $=N;Array.isArray($)&&($=$.map(G=>a_(G))),u(e,["instances[0]","referenceImages"],$)}const F=a(t,["mask"]);e!==void 0&&F!=null&&u(e,["instances[0]","mask"],s_(F));const H=a(t,["compressionQuality"]);return e!==void 0&&H!=null&&u(e,["parameters","compressionQuality"],H),o}function lE(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=a(t,["done"]);s!=null&&u(e,["done"],s);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response","generateVideoResponse"]);return f!=null&&u(e,["response"],dE(f)),e}function aE(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=a(t,["done"]);s!=null&&u(e,["done"],s);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response"]);return f!=null&&u(e,["response"],fE(f)),e}function uE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["prompt"]);s!=null&&u(o,["instances[0]","prompt"],s);const c=a(e,["image"]);c!=null&&u(o,["instances[0]","image"],br(c));const f=a(e,["video"]);f!=null&&u(o,["instances[0]","video"],ed(f));const p=a(e,["source"]);p!=null&&pE(p,o);const g=a(e,["config"]);return g!=null&&iE(g,o),o}function cE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["prompt"]);s!=null&&u(o,["instances[0]","prompt"],s);const c=a(e,["image"]);c!=null&&u(o,["instances[0]","image"],kt(c));const f=a(e,["video"]);f!=null&&u(o,["instances[0]","video"],td(f));const p=a(e,["source"]);p!=null&&mE(p,o);const g=a(e,["config"]);return g!=null&&sE(g,o),o}function dE(t){const e={},o=a(t,["generatedSamples"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>yE(f))),u(e,["generatedVideos"],c)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function fE(t){const e={},o=a(t,["videos"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>vE(f))),u(e,["generatedVideos"],c)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const s=a(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function pE(t,e){const o={},i=a(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const s=a(t,["image"]);e!==void 0&&s!=null&&u(e,["instances[0]","image"],br(s));const c=a(t,["video"]);return e!==void 0&&c!=null&&u(e,["instances[0]","video"],ed(c)),o}function mE(t,e){const o={},i=a(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const s=a(t,["image"]);e!==void 0&&s!=null&&u(e,["instances[0]","image"],kt(s));const c=a(t,["video"]);return e!==void 0&&c!=null&&u(e,["instances[0]","video"],td(c)),o}function hE(t){const e={},o=a(t,["_self"]);o!=null&&u(e,["image"],xE(o));const i=a(t,["raiFilteredReason"]);i!=null&&u(e,["raiFilteredReason"],i);const s=a(t,["_self"]);return s!=null&&u(e,["safetyAttributes"],Xc(s)),e}function Fr(t){const e={},o=a(t,["_self"]);o!=null&&u(e,["image"],Qc(o));const i=a(t,["raiFilteredReason"]);i!=null&&u(e,["raiFilteredReason"],i);const s=a(t,["_self"]);s!=null&&u(e,["safetyAttributes"],Zc(s));const c=a(t,["prompt"]);return c!=null&&u(e,["enhancedPrompt"],c),e}function gE(t){const e={},o=a(t,["_self"]);o!=null&&u(e,["mask"],Qc(o));const i=a(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>c)),u(e,["labels"],s)}return e}function yE(t){const e={},o=a(t,["video"]);return o!=null&&u(e,["video"],r_(o)),e}function vE(t){const e={},o=a(t,["_self"]);return o!=null&&u(e,["video"],i_(o)),e}function EE(t){const e={},o=a(t,["modelSelectionConfig"]);o!=null&&u(e,["modelConfig"],o);const i=a(t,["responseJsonSchema"]);i!=null&&u(e,["responseJsonSchema"],i);const s=a(t,["audioTimestamp"]);s!=null&&u(e,["audioTimestamp"],s);const c=a(t,["candidateCount"]);c!=null&&u(e,["candidateCount"],c);const f=a(t,["enableAffectiveDialog"]);f!=null&&u(e,["enableAffectiveDialog"],f);const p=a(t,["frequencyPenalty"]);p!=null&&u(e,["frequencyPenalty"],p);const g=a(t,["logprobs"]);g!=null&&u(e,["logprobs"],g);const h=a(t,["maxOutputTokens"]);h!=null&&u(e,["maxOutputTokens"],h);const v=a(t,["mediaResolution"]);v!=null&&u(e,["mediaResolution"],v);const E=a(t,["presencePenalty"]);E!=null&&u(e,["presencePenalty"],E);const _=a(t,["responseLogprobs"]);_!=null&&u(e,["responseLogprobs"],_);const T=a(t,["responseMimeType"]);T!=null&&u(e,["responseMimeType"],T);const P=a(t,["responseModalities"]);P!=null&&u(e,["responseModalities"],P);const R=a(t,["responseSchema"]);R!=null&&u(e,["responseSchema"],R);const N=a(t,["routingConfig"]);N!=null&&u(e,["routingConfig"],N);const F=a(t,["seed"]);F!=null&&u(e,["seed"],F);const H=a(t,["speechConfig"]);H!=null&&u(e,["speechConfig"],H);const $=a(t,["stopSequences"]);$!=null&&u(e,["stopSequences"],$);const G=a(t,["temperature"]);G!=null&&u(e,["temperature"],G);const W=a(t,["thinkingConfig"]);W!=null&&u(e,["thinkingConfig"],W);const U=a(t,["topK"]);U!=null&&u(e,["topK"],U);const V=a(t,["topP"]);if(V!=null&&u(e,["topP"],V),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _E(t,e){const o={},i=a(e,["model"]);return i!=null&&u(o,["_url","name"],Ae(t,i)),o}function SE(t,e){const o={},i=a(e,["model"]);return i!=null&&u(o,["_url","name"],Ae(t,i)),o}function wE(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&u(e,["enableWidget"],o),e}function TE(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&u(e,["timeRangeFilter"],o),e}function CE(t){const e={},o=a(t,["aspectRatio"]);o!=null&&u(e,["aspectRatio"],o);const i=a(t,["imageSize"]);if(i!=null&&u(e,["imageSize"],i),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function AE(t){const e={},o=a(t,["aspectRatio"]);o!=null&&u(e,["aspectRatio"],o);const i=a(t,["imageSize"]);i!=null&&u(e,["imageSize"],i);const s=a(t,["outputMimeType"]);s!=null&&u(e,["imageOutputOptions","mimeType"],s);const c=a(t,["outputCompressionQuality"]);return c!=null&&u(e,["imageOutputOptions","compressionQuality"],c),e}function xE(t){const e={},o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["imageBytes"],ln(o));const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Qc(t){const e={},o=a(t,["gcsUri"]);o!=null&&u(e,["gcsUri"],o);const i=a(t,["bytesBase64Encoded"]);i!=null&&u(e,["imageBytes"],ln(i));const s=a(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function br(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=a(t,["imageBytes"]);o!=null&&u(e,["bytesBase64Encoded"],ln(o));const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function kt(t){const e={},o=a(t,["gcsUri"]);o!=null&&u(e,["gcsUri"],o);const i=a(t,["imageBytes"]);i!=null&&u(e,["bytesBase64Encoded"],ln(i));const s=a(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function IE(t,e,o){const i={},s=a(e,["pageSize"]);o!==void 0&&s!=null&&u(o,["_query","pageSize"],s);const c=a(e,["pageToken"]);o!==void 0&&c!=null&&u(o,["_query","pageToken"],c);const f=a(e,["filter"]);o!==void 0&&f!=null&&u(o,["_query","filter"],f);const p=a(e,["queryBase"]);return o!==void 0&&p!=null&&u(o,["_url","models_url"],Fc(t,p)),i}function NE(t,e,o){const i={},s=a(e,["pageSize"]);o!==void 0&&s!=null&&u(o,["_query","pageSize"],s);const c=a(e,["pageToken"]);o!==void 0&&c!=null&&u(o,["_query","pageToken"],c);const f=a(e,["filter"]);o!==void 0&&f!=null&&u(o,["_query","filter"],f);const p=a(e,["queryBase"]);return o!==void 0&&p!=null&&u(o,["_url","models_url"],Fc(t,p)),i}function PE(t,e){const o={},i=a(e,["config"]);return i!=null&&IE(t,i,o),o}function kE(t,e){const o={},i=a(e,["config"]);return i!=null&&NE(t,i,o),o}function RE(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=a(t,["_self"]);if(s!=null){let c=bc(s);Array.isArray(c)&&(c=c.map(f=>Vs(f))),u(e,["models"],c)}return e}function ME(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=a(t,["_self"]);if(s!=null){let c=bc(s);Array.isArray(c)&&(c=c.map(f=>Gs(f))),u(e,["models"],c)}return e}function DE(t){const e={},o=a(t,["maskMode"]);o!=null&&u(e,["maskMode"],o);const i=a(t,["segmentationClasses"]);i!=null&&u(e,["maskClasses"],i);const s=a(t,["maskDilation"]);return s!=null&&u(e,["dilation"],s),e}function Vs(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const s=a(t,["description"]);s!=null&&u(e,["description"],s);const c=a(t,["version"]);c!=null&&u(e,["version"],c);const f=a(t,["_self"]);f!=null&&u(e,["tunedModelInfo"],YE(f));const p=a(t,["inputTokenLimit"]);p!=null&&u(e,["inputTokenLimit"],p);const g=a(t,["outputTokenLimit"]);g!=null&&u(e,["outputTokenLimit"],g);const h=a(t,["supportedGenerationMethods"]);h!=null&&u(e,["supportedActions"],h);const v=a(t,["temperature"]);v!=null&&u(e,["temperature"],v);const E=a(t,["maxTemperature"]);E!=null&&u(e,["maxTemperature"],E);const _=a(t,["topP"]);_!=null&&u(e,["topP"],_);const T=a(t,["topK"]);T!=null&&u(e,["topK"],T);const P=a(t,["thinking"]);return P!=null&&u(e,["thinking"],P),e}function Gs(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const s=a(t,["description"]);s!=null&&u(e,["description"],s);const c=a(t,["versionId"]);c!=null&&u(e,["version"],c);const f=a(t,["deployedModels"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(_=>Jv(_))),u(e,["endpoints"],E)}const p=a(t,["labels"]);p!=null&&u(e,["labels"],p);const g=a(t,["_self"]);g!=null&&u(e,["tunedModelInfo"],QE(g));const h=a(t,["defaultCheckpointId"]);h!=null&&u(e,["defaultCheckpointId"],h);const v=a(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(_=>_)),u(e,["checkpoints"],E)}return e}function LE(t){const e={},o=a(t,["mediaResolution"]);o!=null&&u(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&u(e,["codeExecutionResult"],i);const s=a(t,["executableCode"]);s!=null&&u(e,["executableCode"],s);const c=a(t,["fileData"]);c!=null&&u(e,["fileData"],Wv(c));const f=a(t,["functionCall"]);f!=null&&u(e,["functionCall"],Kv(f));const p=a(t,["functionResponse"]);p!=null&&u(e,["functionResponse"],p);const g=a(t,["inlineData"]);g!=null&&u(e,["inlineData"],Ev(g));const h=a(t,["text"]);h!=null&&u(e,["text"],h);const v=a(t,["thought"]);v!=null&&u(e,["thought"],v);const E=a(t,["thoughtSignature"]);E!=null&&u(e,["thoughtSignature"],E);const _=a(t,["videoMetadata"]);return _!=null&&u(e,["videoMetadata"],_),e}function FE(t){const e={},o=a(t,["productImage"]);return o!=null&&u(e,["image"],kt(o)),e}function bE(t,e){const o={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=a(t,["baseSteps"]);e!==void 0&&s!=null&&u(e,["parameters","baseSteps"],s);const c=a(t,["outputGcsUri"]);e!==void 0&&c!=null&&u(e,["parameters","storageUri"],c);const f=a(t,["seed"]);e!==void 0&&f!=null&&u(e,["parameters","seed"],f);const p=a(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&u(e,["parameters","safetySetting"],p);const g=a(t,["personGeneration"]);e!==void 0&&g!=null&&u(e,["parameters","personGeneration"],g);const h=a(t,["addWatermark"]);e!==void 0&&h!=null&&u(e,["parameters","addWatermark"],h);const v=a(t,["outputMimeType"]);e!==void 0&&v!=null&&u(e,["parameters","outputOptions","mimeType"],v);const E=a(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&u(e,["parameters","outputOptions","compressionQuality"],E);const _=a(t,["enhancePrompt"]);e!==void 0&&_!=null&&u(e,["parameters","enhancePrompt"],_);const T=a(t,["labels"]);return e!==void 0&&T!=null&&u(e,["labels"],T),o}function UE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["source"]);s!=null&&GE(s,o);const c=a(e,["config"]);return c!=null&&bE(c,o),o}function VE(t){const e={},o=a(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Fr(s))),u(e,["generatedImages"],i)}return e}function GE(t,e){const o={},i=a(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const s=a(t,["personImage"]);e!==void 0&&s!=null&&u(e,["instances[0]","personImage","image"],kt(s));const c=a(t,["productImages"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>FE(p))),u(e,["instances[0]","productImages"],f)}return o}function qE(t){const e={},o=a(t,["referenceImage"]);o!=null&&u(e,["referenceImage"],kt(o));const i=a(t,["referenceId"]);i!=null&&u(e,["referenceId"],i);const s=a(t,["referenceType"]);s!=null&&u(e,["referenceType"],s);const c=a(t,["maskImageConfig"]);c!=null&&u(e,["maskImageConfig"],DE(c));const f=a(t,["controlImageConfig"]);f!=null&&u(e,["controlImageConfig"],xv(f));const p=a(t,["styleImageConfig"]);p!=null&&u(e,["styleImageConfig"],p);const g=a(t,["subjectImageConfig"]);return g!=null&&u(e,["subjectImageConfig"],g),e}function Xc(t){const e={},o=a(t,["safetyAttributes","categories"]);o!=null&&u(e,["categories"],o);const i=a(t,["safetyAttributes","scores"]);i!=null&&u(e,["scores"],i);const s=a(t,["contentType"]);return s!=null&&u(e,["contentType"],s),e}function Zc(t){const e={},o=a(t,["safetyAttributes","categories"]);o!=null&&u(e,["categories"],o);const i=a(t,["safetyAttributes","scores"]);i!=null&&u(e,["scores"],i);const s=a(t,["contentType"]);return s!=null&&u(e,["contentType"],s),e}function HE(t){const e={},o=a(t,["category"]);if(o!=null&&u(e,["category"],o),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function $E(t){const e={},o=a(t,["image"]);return o!=null&&u(e,["image"],kt(o)),e}function BE(t,e){const o={},i=a(t,["mode"]);e!==void 0&&i!=null&&u(e,["parameters","mode"],i);const s=a(t,["maxPredictions"]);e!==void 0&&s!=null&&u(e,["parameters","maxPredictions"],s);const c=a(t,["confidenceThreshold"]);e!==void 0&&c!=null&&u(e,["parameters","confidenceThreshold"],c);const f=a(t,["maskDilation"]);e!==void 0&&f!=null&&u(e,["parameters","maskDilation"],f);const p=a(t,["binaryColorThreshold"]);e!==void 0&&p!=null&&u(e,["parameters","binaryColorThreshold"],p);const g=a(t,["labels"]);return e!==void 0&&g!=null&&u(e,["labels"],g),o}function zE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["source"]);s!=null&&JE(s,o);const c=a(e,["config"]);return c!=null&&BE(c,o),o}function OE(t){const e={},o=a(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>gE(s))),u(e,["generatedMasks"],i)}return e}function JE(t,e){const o={},i=a(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const s=a(t,["image"]);e!==void 0&&s!=null&&u(e,["instances[0]","image"],kt(s));const c=a(t,["scribbleImage"]);return e!==void 0&&c!=null&&u(e,["instances[0]","scribble"],$E(c)),o}function WE(t){const e={},o=a(t,["functionCallingConfig"]);o!=null&&u(e,["functionCallingConfig"],Yv(o));const i=a(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],i),e}function KE(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),u(e,["functionDeclarations"],v)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const s=a(t,["computerUse"]);s!=null&&u(e,["computerUse"],s);const c=a(t,["fileSearch"]);c!=null&&u(e,["fileSearch"],c);const f=a(t,["codeExecution"]);if(f!=null&&u(e,["codeExecution"],f),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=a(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],wE(p));const g=a(t,["googleSearch"]);g!=null&&u(e,["googleSearch"],TE(g));const h=a(t,["urlContext"]);return h!=null&&u(e,["urlContext"],h),e}function jc(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let E=o;Array.isArray(E)&&(E=E.map(_=>Qv(_))),u(e,["functionDeclarations"],E)}const i=a(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const s=a(t,["googleSearchRetrieval"]);s!=null&&u(e,["googleSearchRetrieval"],s);const c=a(t,["computerUse"]);if(c!=null&&u(e,["computerUse"],c),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=a(t,["codeExecution"]);f!=null&&u(e,["codeExecution"],f);const p=a(t,["enterpriseWebSearch"]);p!=null&&u(e,["enterpriseWebSearch"],p);const g=a(t,["googleMaps"]);g!=null&&u(e,["googleMaps"],g);const h=a(t,["googleSearch"]);h!=null&&u(e,["googleSearch"],h);const v=a(t,["urlContext"]);return v!=null&&u(e,["urlContext"],v),e}function YE(t){const e={},o=a(t,["baseModel"]);o!=null&&u(e,["baseModel"],o);const i=a(t,["createTime"]);i!=null&&u(e,["createTime"],i);const s=a(t,["updateTime"]);return s!=null&&u(e,["updateTime"],s),e}function QE(t){const e={},o=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&u(e,["baseModel"],o);const i=a(t,["createTime"]);i!=null&&u(e,["createTime"],i);const s=a(t,["updateTime"]);return s!=null&&u(e,["updateTime"],s),e}function XE(t,e){const o={},i=a(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=a(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);const c=a(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&u(e,["defaultCheckpointId"],c),o}function ZE(t,e){const o={},i=a(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=a(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);const c=a(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&u(e,["defaultCheckpointId"],c),o}function jE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","name"],Ae(t,i));const s=a(e,["config"]);return s!=null&&XE(s,o),o}function e_(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["config"]);return s!=null&&ZE(s,o),o}function t_(t,e){const o={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&u(e,["parameters","safetySetting"],s);const c=a(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const f=a(t,["includeRaiReason"]);e!==void 0&&f!=null&&u(e,["parameters","includeRaiReason"],f);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","mimeType"],p);const g=a(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g);const h=a(t,["enhanceInputImage"]);e!==void 0&&h!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],h);const v=a(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=a(t,["labels"]);e!==void 0&&E!=null&&u(e,["labels"],E);const _=a(t,["numberOfImages"]);e!==void 0&&_!=null&&u(e,["parameters","sampleCount"],_);const T=a(t,["mode"]);return e!==void 0&&T!=null&&u(e,["parameters","mode"],T),o}function n_(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],Ae(t,i));const s=a(e,["image"]);s!=null&&u(o,["instances[0]","image"],kt(s));const c=a(e,["upscaleFactor"]);c!=null&&u(o,["parameters","upscaleConfig","upscaleFactor"],c);const f=a(e,["config"]);return f!=null&&t_(f,o),o}function o_(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>Fr(c))),u(e,["generatedImages"],s)}return e}function r_(t){const e={},o=a(t,["uri"]);o!=null&&u(e,["uri"],o);const i=a(t,["encodedVideo"]);i!=null&&u(e,["videoBytes"],ln(i));const s=a(t,["encoding"]);return s!=null&&u(e,["mimeType"],s),e}function i_(t){const e={},o=a(t,["gcsUri"]);o!=null&&u(e,["uri"],o);const i=a(t,["bytesBase64Encoded"]);i!=null&&u(e,["videoBytes"],ln(i));const s=a(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function s_(t){const e={},o=a(t,["image"]);o!=null&&u(e,["_self"],kt(o));const i=a(t,["maskMode"]);return i!=null&&u(e,["maskMode"],i),e}function l_(t){const e={},o=a(t,["image"]);o!=null&&u(e,["image"],br(o));const i=a(t,["referenceType"]);return i!=null&&u(e,["referenceType"],i),e}function a_(t){const e={},o=a(t,["image"]);o!=null&&u(e,["image"],kt(o));const i=a(t,["referenceType"]);return i!=null&&u(e,["referenceType"],i),e}function ed(t){const e={},o=a(t,["uri"]);o!=null&&u(e,["uri"],o);const i=a(t,["videoBytes"]);i!=null&&u(e,["encodedVideo"],ln(i));const s=a(t,["mimeType"]);return s!=null&&u(e,["encoding"],s),e}function td(t){const e={},o=a(t,["uri"]);o!=null&&u(e,["gcsUri"],o);const i=a(t,["videoBytes"]);i!=null&&u(e,["bytesBase64Encoded"],ln(i));const s=a(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u_(t,e){const o={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&u(e,["displayName"],i),o}function c_(t){const e={},o=a(t,["config"]);return o!=null&&u_(o,e),e}function d_(t,e){const o={},i=a(t,["force"]);return e!==void 0&&i!=null&&u(e,["_query","force"],i),o}function f_(t){const e={},o=a(t,["name"]);o!=null&&u(e,["_url","name"],o);const i=a(t,["config"]);return i!=null&&d_(i,e),e}function p_(t){const e={},o=a(t,["name"]);return o!=null&&u(e,["_url","name"],o),e}function m_(t,e){const o={},i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["customMetadata"],c)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&u(e,["chunkingConfig"],s),o}function h_(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=a(t,["done"]);s!=null&&u(e,["done"],s);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response"]);return f!=null&&u(e,["response"],y_(f)),e}function g_(t){const e={},o=a(t,["fileSearchStoreName"]);o!=null&&u(e,["_url","file_search_store_name"],o);const i=a(t,["fileName"]);i!=null&&u(e,["fileName"],i);const s=a(t,["config"]);return s!=null&&m_(s,e),e}function y_(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["parent"]);i!=null&&u(e,["parent"],i);const s=a(t,["documentName"]);return s!=null&&u(e,["documentName"],s),e}function v_(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),o}function E_(t){const e={},o=a(t,["config"]);return o!=null&&v_(o,e),e}function __(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=a(t,["fileSearchStores"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["fileSearchStores"],c)}return e}function nd(t,e){const o={},i=a(t,["mimeType"]);e!==void 0&&i!=null&&u(e,["mimeType"],i);const s=a(t,["displayName"]);e!==void 0&&s!=null&&u(e,["displayName"],s);const c=a(t,["customMetadata"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>g)),u(e,["customMetadata"],p)}const f=a(t,["chunkingConfig"]);return e!==void 0&&f!=null&&u(e,["chunkingConfig"],f),o}function S_(t){const e={},o=a(t,["fileSearchStoreName"]);o!=null&&u(e,["_url","file_search_store_name"],o);const i=a(t,["config"]);return i!=null&&nd(i,e),e}function w_(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T_="Content-Type",C_="X-Server-Timeout",A_="User-Agent",qs="x-goog-api-client",x_="google-genai-sdk/1.34.0",I_="v1beta1",N_="v1beta";class P_{constructor(e){var o,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:I_,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:N_,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,i){const s=[this.getRequestUrlInternal(o)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,o,i);if(e.queryParams)for(const[f,p]of Object.entries(e.queryParams))s.searchParams.append(f,String(p));let c={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=e.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,o,s.toString(),e.abortSignal),this.unaryApiCall(s,c,e.httpMethod)}patchHttpOptions(e,o){const i=JSON.parse(JSON.stringify(e));for(const[s,c]of Object.entries(o))typeof c=="object"?i[s]=Object.assign(Object.assign({},i[s]),c):c!==void 0&&(i[s]=c);return i}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,o,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let c={};return c.body=e.body,c=await this.includeExtraHttpOptionsToRequestInit(c,o,s.toString(),e.abortSignal),this.streamApiCall(s,c,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,i,s){if(o&&o.timeout||s){const c=new AbortController,f=c.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const p=setTimeout(()=>c.abort(),o.timeout);p&&typeof p.unref=="function"&&p.unref()}s&&s.addEventListener("abort",()=>{c.abort()}),e.signal=f}return o&&o.extraBody!==null&&k_(e,o.extraBody),e.headers=await this.getHeadersInternal(o,i),e}async unaryApiCall(e,o,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:i})).then(async s=>(await od(s),new Ps(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,o,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:i})).then(async s=>(await od(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Nt(this,arguments,function*(){var i;const s=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),c=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let f="";const p="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield ye(s.read());if(h){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=c.decode(v,{stream:!0});try{const P=JSON.parse(E);if("error"in P){const R=JSON.parse(JSON.stringify(P.error)),N=R.status,F=R.code,H=`got status: ${N}. ${JSON.stringify(P)}`;if(F>=400&&F<600)throw new Mr({message:H,status:F})}}catch(P){if(P.name==="ApiError")throw P}f+=E;let _=-1,T=0;for(;;){_=-1,T=0;for(const N of g){const F=f.indexOf(N);F!==-1&&(_===-1||F<_)&&(_=F,T=N.length)}if(_===-1)break;const P=f.substring(0,_);f=f.substring(_+T);const R=P.trim();if(R.startsWith(p)){const N=R.substring(p.length).trim();try{const F=new Response(N,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ye(new Ps(F))}catch(F){throw new Error(`exception parsing stream chunk ${N}. ${F}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},o=x_+" "+this.clientOptions.userAgentExtra;return e[A_]=o,e[qs]=o,e[T_]="application/json",e}async getHeadersInternal(e,o){const i=new Headers;if(e&&e.headers){for(const[s,c]of Object.entries(e.headers))i.append(s,c);e.timeout&&e.timeout>0&&i.append(C_,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,o),i}getFileName(e){var o;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(o=i.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),i}async uploadFile(e,o){var i;const s={};o!=null&&(s.mimeType=o.mimeType,s.name=o.name,s.displayName=o.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const c=this.clientOptions.uploader,f=await c.stat(e);s.sizeBytes=String(f.size);const p=(i=o==null?void 0:o.mimeType)!==null&&i!==void 0?i:f.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=p;const g={file:s},h=this.getFileName(e),v=j("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(v,s.sizeBytes,s.mimeType,h,g,o==null?void 0:o.httpOptions);return c.upload(e,E,this)}async uploadFileToFileSearchStore(e,o,i){var s;const c=this.clientOptions.uploader,f=await c.stat(o),p=String(f.size),g=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:f.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(o),E={};i!=null&&nd(i,E);const _=await this.fetchUploadUrl(h,p,g,v,E,i==null?void 0:i.httpOptions);return c.uploadToFileSearchStore(o,_,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o,i,s,c,f){var p;let g={};f?g=f:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(c),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(p=h==null?void 0:h.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function od(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const o=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw o>=400&&o<600?new Mr({message:s,status:o}):new Error(s)}}function k_(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof t.body=="string"&&t.body.length>0)try{const c=JSON.parse(t.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))o=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(c,f){const p=Object.assign({},c);for(const g in f)if(Object.prototype.hasOwnProperty.call(f,g)){const h=f[g],v=p[g];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?p[g]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),p[g]=h)}return p}const s=i(o,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R_="mcp_used/unknown";let M_=!1;function rd(t){for(const e of t)if(D_(e)||typeof e=="object"&&"inputSchema"in e)return!0;return M_}function id(t){var e;const o=(e=t[qs])!==null&&e!==void 0?e:"";t[qs]=(o+` ${R_}`).trimStart()}function D_(t){return t!==null&&typeof t=="object"&&t instanceof Hs}function L_(t){return Nt(this,arguments,function*(o,i=100){let s,c=0;for(;c<i;){const f=yield ye(o.listTools({cursor:s}));for(const p of f.tools)yield yield ye(p),c++;if(!f.nextCursor)break;s=f.nextCursor}})}class Hs{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new Hs(e,o)}async initialize(){var e,o,i,s;if(this.mcpTools.length>0)return;const c={},f=[];for(const v of this.mcpClients)try{for(var p=!0,g=(o=void 0,Pt(L_(v))),h;h=await g.next(),e=h.done,!e;p=!0){s=h.value,p=!1;const E=s;f.push(E);const _=E.name;if(c[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);c[_]=v}}catch(E){o={error:E}}finally{try{!p&&!e&&(i=g.return)&&await i.call(g)}finally{if(o)throw o.error}}this.mcpTools=f,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),py(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const f=await s.callTool({name:i.name,arguments:i.args},void 0,c);o.push({functionResponse:{name:i.name,response:f.isError?{error:f}:f}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function F_(t,e,o){const i=new iy;let s;o.data instanceof Blob?s=JSON.parse(await o.data.text()):s=JSON.parse(o.data),Object.assign(i,s),e(i)}class b_{constructor(e,o,i){this.apiClient=e,this.auth=o,this.webSocketFactory=i}async connect(e){var o,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),f=G_(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),g=`${s}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${p}`;let h=()=>{};const v=new Promise($=>{h=$}),E=e.callbacks,_=function(){h({})},T=this.apiClient,P={onopen:_,onmessage:$=>{F_(T,E.onmessage,$)},onerror:(o=E==null?void 0:E.onerror)!==null&&o!==void 0?o:function($){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function($){}},R=this.webSocketFactory.create(g,V_(f),P);R.connect(),await v;const H={setup:{model:Ae(this.apiClient,e.model)}};return R.send(JSON.stringify(H)),new U_(R,this.apiClient)}}class U_{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=cv(e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=uv(e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const o={playbackControl:e};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Jn.PLAY)}pause(){this.sendPlaybackControl(Jn.PAUSE)}stop(){this.sendPlaybackControl(Jn.STOP)}resetContext(){this.sendPlaybackControl(Jn.RESET_CONTEXT)}close(){this.conn.close()}}function V_(t){const e={};return t.forEach((o,i)=>{e[i]=o}),e}function G_(t){const e=new Headers;for(const[o,i]of Object.entries(t))e.append(o,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q_="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function H_(t,e,o){const i=new ry;let s;o.data instanceof Blob?s=await o.data.text():o.data instanceof ArrayBuffer?s=new TextDecoder().decode(o.data):s=o.data;const c=JSON.parse(s);if(t.isVertexAI()){const f=pv(c);Object.assign(i,f)}else Object.assign(i,c);e(i)}class $_{constructor(e,o,i){this.apiClient=e,this.auth=o,this.webSocketFactory=i,this.music=new b_(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,i,s,c,f,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&rd(e.config.tools)&&id(E);const _=J_(E);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,v);else{const O=this.apiClient.getApiKey();let ne="BidiGenerateContent",ge="key";O!=null&&O.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ne="BidiGenerateContentConstrained",ge="access_token"),v=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ne}?${ge}=${O}`}let T=()=>{};const P=new Promise(O=>{T=O}),R=e.callbacks,N=function(){var O;(O=R==null?void 0:R.onopen)===null||O===void 0||O.call(R),T({})},F=this.apiClient,H={onopen:N,onmessage:O=>{H_(F,R.onmessage,O)},onerror:(o=R==null?void 0:R.onerror)!==null&&o!==void 0?o:function(O){},onclose:(i=R==null?void 0:R.onclose)!==null&&i!==void 0?i:function(O){}},$=this.webSocketFactory.create(v,O_(_),H);$.connect(),await P;let G=Ae(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const O=this.apiClient.getProject(),ne=this.apiClient.getLocation();G=`projects/${O}/locations/${ne}/`+G}let W={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ir.AUDIO]}:e.config.responseModalities=[Ir.AUDIO]),!((c=e.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(p=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&p!==void 0?p:[],V=[];for(const O of U)if(this.isCallableTool(O)){const ne=O;V.push(await ne.tool())}else V.push(O);V.length>0&&(e.config.tools=V);const X={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=av(this.apiClient,X):W=lv(this.apiClient,X),delete W.config,$.send(JSON.stringify(W)),new z_($,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const B_={turnComplete:!0};class z_{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let i=[];try{i=Et(o.turns),e.isVertexAI()||(i=i.map(s=>Lr(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:i,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let i=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?i=o.functionResponses:i=[o.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const c of i){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!e.isVertexAI()&&!("id"in c))throw new Error(q_)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},B_),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:fv(e)}:o={realtimeInput:dv(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function O_(t){const e={};return t.forEach((o,i)=>{e[i]=o}),e}function J_(t){const e=new Headers;for(const[o,i]of Object.entries(t))e.append(o,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sd=10;function ld(t){var e,o,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const f of(o=t==null?void 0:t.tools)!==null&&o!==void 0?o:[])if(Xn(f)){s=!0;break}if(!s)return!0;const c=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function Xn(t){return"callTool"in t&&typeof t.callTool=="function"}function W_(t){var e,o,i;return(i=(o=(e=t.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(s=>Xn(s)))!==null&&i!==void 0?i:!1}function ad(t){var e;const o=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,s)=>{if(Xn(i))return;const c=i;c.functionDeclarations&&c.functionDeclarations.length>0&&o.push(s)}),o}function ud(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K_ extends Wt{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var i,s,c,f,p;const g=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!W_(o)||ld(o.config))return await this.generateContentInternal(g);const h=ad(o);if(h.length>0){const R=h.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${R}.`)}let v,E;const _=Et(g.contents),T=(c=(s=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&c!==void 0?c:sd;let P=0;for(;P<T&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const R=v.candidates[0].content,N=[];for(const F of(p=(f=o.config)===null||f===void 0?void 0:f.tools)!==null&&p!==void 0?p:[])if(Xn(F)){const $=await F.callTool(v.functionCalls);N.push(...$)}P++,E={role:"user",parts:N},g.contents=Et(g.contents),g.contents.push(R),g.contents.push(E),ud(g.config)&&(_.push(R),_.push(E))}return ud(g.config)&&(v.automaticFunctionCallingHistory=_),v},this.generateContentStream=async o=>{var i,s,c,f,p;if(this.maybeMoveToResponseJsonSchem(o),ld(o.config)){const E=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(E)}const g=ad(o);if(g.length>0){const E=g.map(_=>`tools[${_}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(c=(s=(i=o==null?void 0:o.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||c===void 0?void 0:c.streamFunctionCallArguments,v=(p=(f=o==null?void 0:o.config)===null||f===void 0?void 0:f.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(i=>{var s;let c;const f=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((s=g==null?void 0:g.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?c=g==null?void 0:g.safetyAttributes:f.push(g);let p;return c?p={generatedImages:f,positivePromptSafetyAttributes:c,sdkHttpResponse:i.sdkHttpResponse}:p={generatedImages:f,sdkHttpResponse:i.sdkHttpResponse},p}),this.list=async o=>{var i;const f={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((i=f.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new Pn(Yt.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(f),f)},this.editImage=async o=>{const i={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(i.referenceImages=o.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async o=>{let i={numberOfImages:1,mode:"upscale"};o.config&&(i=Object.assign(Object.assign({},i),o.config));const s={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async o=>{var i,s,c,f,p,g;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=o.video)===null||i===void 0)&&i.uri&&(!((s=o.video)===null||s===void 0)&&s.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((f=(c=o.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.uri&&(!((g=(p=o.source)===null||p===void 0?void 0:p.video)===null||g===void 0)&&g.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,i,s;const c=(o=e.config)===null||o===void 0?void 0:o.tools;if(!c)return e;const f=await Promise.all(c.map(async g=>Xn(g)?await g.tool():g)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:f})};if(p.config.tools=f,e.config&&e.config.tools&&rd(e.config.tools)){const g=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),id(h),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return p}async initAfcToolsMap(e){var o,i,s;const c=new Map;for(const f of(i=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&i!==void 0?i:[])if(Xn(f)){const p=f,g=await p.tool();for(const h of(s=g.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(c.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);c.set(h.name,p)}}return c}async processAfcStream(e){var o,i,s;const c=(s=(i=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:sd;let f=!1,p=0;const g=await this.initAfcToolsMap(e);return(function(h,v,E){return Nt(this,arguments,function*(){for(var _,T,P,R,N,F;p<c;){f&&(p++,f=!1);const W=yield ye(h.processParamsMaybeAddMcpUsage(E)),U=yield ye(h.generateContentStreamInternal(W)),V=[],X=[];try{for(var H=!0,$=(T=void 0,Pt(U)),G;G=yield ye($.next()),_=G.done,!_;H=!0){R=G.value,H=!1;const O=R;if(yield yield ye(O),O.candidates&&(!((N=O.candidates[0])===null||N===void 0)&&N.content)){X.push(O.candidates[0].content);for(const ne of(F=O.candidates[0].content.parts)!==null&&F!==void 0?F:[])if(p<c&&ne.functionCall){if(!ne.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ne.functionCall.name)){const ge=yield ye(v.get(ne.functionCall.name).callTool([ne.functionCall]));V.push(...ge)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ne.functionCall.name}`)}}}}catch(O){T={error:O}}finally{try{!H&&!_&&(P=$.return)&&(yield ye(P.call($)))}finally{if(T)throw T.error}}if(V.length>0){f=!0;const O=new Ro;O.candidates=[{content:{role:"user",parts:V}}],yield yield ye(O);const ne=[];ne.push(...X),ne.push({role:"user",parts:V});const ge=Et(E.contents).concat(ne);E.contents=ge}else break}})})(this,g,e)}async generateContentInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Wc(this.apiClient,e);return p=j("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=Yc(v),_=new Ro;return Object.assign(_,E),_})}else{const h=Jc(this.apiClient,e);return p=j("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=Kc(v),_=new Ro;return Object.assign(_,E),_})}}async generateContentStreamInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Wc(this.apiClient,e);return p=j("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.requestStream({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),f.then(function(E){return Nt(this,arguments,function*(){var _,T,P,R;try{for(var N=!0,F=Pt(E),H;H=yield ye(F.next()),_=H.done,!_;N=!0){R=H.value,N=!1;const $=R,G=Yc(yield ye($.json()));G.sdkHttpResponse={headers:$.headers};const W=new Ro;Object.assign(W,G),yield yield ye(W)}}catch($){T={error:$}}finally{try{!N&&!_&&(P=F.return)&&(yield ye(P.call(F)))}finally{if(T)throw T.error}}})})}else{const h=Jc(this.apiClient,e);return p=j("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.requestStream({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}),f.then(function(E){return Nt(this,arguments,function*(){var _,T,P,R;try{for(var N=!0,F=Pt(E),H;H=yield ye(F.next()),_=H.done,!_;N=!0){R=H.value,N=!1;const $=R,G=Kc(yield ye($.json()));G.sdkHttpResponse={headers:$.headers};const W=new Ro;Object.assign(W,G),yield yield ye(W)}}catch($){T={error:$}}finally{try{!N&&!_&&(P=F.return)&&(yield ye(P.call(F)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Bv(this.apiClient,e);return p=j("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=Ov(v),_=new hc;return Object.assign(_,E),_})}else{const h=$v(this.apiClient,e);return p=j("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=zv(v),_=new hc;return Object.assign(_,E),_})}}async generateImagesInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=nE(this.apiClient,e);return p=j("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=rE(v),_=new gc;return Object.assign(_,E),_})}else{const h=tE(this.apiClient,e);return p=j("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=oE(v),_=new gc;return Object.assign(_,E),_})}}async editImageInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=Vv(this.apiClient,e);return c=j("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const h=Gv(g),v=new Wg;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=n_(this.apiClient,e);return c=j("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const h=o_(g),v=new Kg;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=UE(this.apiClient,e);return c=j("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=VE(g),v=new Yg;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=zE(this.apiClient,e);return c=j("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=OE(g),v=new Qg;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=SE(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>Gs(v))}else{const h=_E(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>Vs(v))}}async listInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=kE(this.apiClient,e);return p=j("{models_url}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=ME(v),_=new yc;return Object.assign(_,E),_})}else{const h=PE(this.apiClient,e);return p=j("{models_url}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=RE(v),_=new yc;return Object.assign(_,E),_})}}async update(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=e_(this.apiClient,e);return p=j("{model}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>Gs(v))}else{const h=jE(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>Vs(v))}}async delete(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Lv(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=bv(v),_=new vc;return Object.assign(_,E),_})}else{const h=Dv(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=Fv(v),_=new vc;return Object.assign(_,E),_})}}async countTokens(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=kv(this.apiClient,e);return p=j("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=Mv(v),_=new Ec;return Object.assign(_,E),_})}else{const h=Pv(this.apiClient,e);return p=j("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=Rv(v),_=new Ec;return Object.assign(_,E),_})}}async computeTokens(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=wv(this.apiClient,e);return c=j("{model}:computeTokens",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const h=Tv(g),v=new Xg;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=cE(this.apiClient,e);return p=j("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>{const E=aE(v),_=new Nr;return Object.assign(_,E),_})}else{const h=uE(this.apiClient,e);return p=j("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>{const E=lE(v),_=new Nr;return Object.assign(_,E),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y_ extends Wt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,i=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=o.name.split("/operations/")[0];let c;i&&"httpOptions"in i&&(c=i.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:s,config:{httpOptions:c}});return o._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:o.name,config:i});return o._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const o=e.operation,i=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=o.name.split("/operations/")[0];let c;i&&"httpOptions"in i&&(c=i.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:s,config:{httpOptions:c}});return o._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:o.name,config:i});return o._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Hg(e);return p=j("{operationName}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f}else{const h=qg(e);return p=j("{operationName}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f}}async fetchPredictVideosOperationInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=Dg(e);return c=j("{resourceName}:fetchPredictOperation",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q_(t){const e={},o=a(t,["data"]);if(o!=null&&u(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function X_(t){const e={},o=a(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(c=>sS(c))),u(e,["parts"],s)}const i=a(t,["role"]);return i!=null&&u(e,["role"],i),e}function Z_(t,e,o){const i={},s=a(e,["expireTime"]);o!==void 0&&s!=null&&u(o,["expireTime"],s);const c=a(e,["newSessionExpireTime"]);o!==void 0&&c!=null&&u(o,["newSessionExpireTime"],c);const f=a(e,["uses"]);o!==void 0&&f!=null&&u(o,["uses"],f);const p=a(e,["liveConnectConstraints"]);o!==void 0&&p!=null&&u(o,["bidiGenerateContentSetup"],iS(t,p));const g=a(e,["lockAdditionalFields"]);return o!==void 0&&g!=null&&u(o,["fieldMask"],g),i}function j_(t,e){const o={},i=a(e,["config"]);return i!=null&&u(o,["config"],Z_(t,i,o)),o}function eS(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function tS(t){const e={},o=a(t,["id"]);o!=null&&u(e,["id"],o);const i=a(t,["args"]);i!=null&&u(e,["args"],i);const s=a(t,["name"]);if(s!=null&&u(e,["name"],s),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nS(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&u(e,["enableWidget"],o),e}function oS(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&u(e,["timeRangeFilter"],o),e}function rS(t,e){const o={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],i);const s=a(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const c=a(t,["temperature"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","temperature"],c);const f=a(t,["topP"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","topP"],f);const p=a(t,["topK"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","topK"],p);const g=a(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const h=a(t,["mediaResolution"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","mediaResolution"],h);const v=a(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const E=a(t,["speechConfig"]);e!==void 0&&E!=null&&u(e,["setup","generationConfig","speechConfig"],bs(E));const _=a(t,["thinkingConfig"]);e!==void 0&&_!=null&&u(e,["setup","generationConfig","thinkingConfig"],_);const T=a(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],T);const P=a(t,["systemInstruction"]);e!==void 0&&P!=null&&u(e,["setup","systemInstruction"],X_(Qe(P)));const R=a(t,["tools"]);if(e!==void 0&&R!=null){let U=Yn(R);Array.isArray(U)&&(U=U.map(V=>aS(Kn(V)))),u(e,["setup","tools"],U)}const N=a(t,["sessionResumption"]);e!==void 0&&N!=null&&u(e,["setup","sessionResumption"],lS(N));const F=a(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&u(e,["setup","inputAudioTranscription"],F);const H=a(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&u(e,["setup","outputAudioTranscription"],H);const $=a(t,["realtimeInputConfig"]);e!==void 0&&$!=null&&u(e,["setup","realtimeInputConfig"],$);const G=a(t,["contextWindowCompression"]);e!==void 0&&G!=null&&u(e,["setup","contextWindowCompression"],G);const W=a(t,["proactivity"]);if(e!==void 0&&W!=null&&u(e,["setup","proactivity"],W),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function iS(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["setup","model"],Ae(t,i));const s=a(e,["config"]);return s!=null&&u(o,["config"],rS(s,o)),o}function sS(t){const e={},o=a(t,["mediaResolution"]);o!=null&&u(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&u(e,["codeExecutionResult"],i);const s=a(t,["executableCode"]);s!=null&&u(e,["executableCode"],s);const c=a(t,["fileData"]);c!=null&&u(e,["fileData"],eS(c));const f=a(t,["functionCall"]);f!=null&&u(e,["functionCall"],tS(f));const p=a(t,["functionResponse"]);p!=null&&u(e,["functionResponse"],p);const g=a(t,["inlineData"]);g!=null&&u(e,["inlineData"],Q_(g));const h=a(t,["text"]);h!=null&&u(e,["text"],h);const v=a(t,["thought"]);v!=null&&u(e,["thought"],v);const E=a(t,["thoughtSignature"]);E!=null&&u(e,["thoughtSignature"],E);const _=a(t,["videoMetadata"]);return _!=null&&u(e,["videoMetadata"],_),e}function lS(t){const e={},o=a(t,["handle"]);if(o!=null&&u(e,["handle"],o),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function aS(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),u(e,["functionDeclarations"],v)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const s=a(t,["computerUse"]);s!=null&&u(e,["computerUse"],s);const c=a(t,["fileSearch"]);c!=null&&u(e,["fileSearch"],c);const f=a(t,["codeExecution"]);if(f!=null&&u(e,["codeExecution"],f),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=a(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],nS(p));const g=a(t,["googleSearch"]);g!=null&&u(e,["googleSearch"],oS(g));const h=a(t,["urlContext"]);return h!=null&&u(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uS(t){const e=[];for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const i=t[o];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(c=>`${o}.${c}`);e.push(...s)}else e.push(o)}return e.join(",")}function cS(t,e){let o=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const c=i.setup;typeof c=="object"&&c!==null?(t.bidiGenerateContentSetup=c,o=c):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(o){const c=uS(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)c?t.fieldMask=c:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const f=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];s.length>0&&(p=s.map(h=>f.includes(h)?`generationConfig.${h}`:h));const g=[];c&&g.push(c),p.length>0&&g.push(...p),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class dS extends Wt{constructor(e){super(),this.apiClient=e}async create(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=j_(this.apiClient,e);c=j("auth_tokens",p._url),f=p._query,delete p.config,delete p._url,delete p._query;const g=cS(p,e.config);return s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fS(t,e){const o={},i=a(t,["force"]);return e!==void 0&&i!=null&&u(e,["_query","force"],i),o}function pS(t){const e={},o=a(t,["name"]);o!=null&&u(e,["_url","name"],o);const i=a(t,["config"]);return i!=null&&fS(i,e),e}function mS(t){const e={},o=a(t,["name"]);return o!=null&&u(e,["_url","name"],o),e}function hS(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=a(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),o}function gS(t){const e={},o=a(t,["parent"]);o!=null&&u(e,["_url","parent"],o);const i=a(t,["config"]);return i!=null&&hS(i,e),e}function yS(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=a(t,["documents"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["documents"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vS extends Wt{constructor(e){super(),this.apiClient=e,this.list=async o=>new Pn(Yt.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:o.parent,config:i.config}),await this.listInternal(o),o)}async get(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=mS(e);return c=j("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var o,i;let s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=pS(e);s=j("{name}",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=gS(e);return c=j("{parent}/documents",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=yS(g),v=new Zg;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ES extends Wt{constructor(e,o=new vS(e)){super(),this.apiClient=e,this.documents=o,this.list=async(i={})=>new Pn(Yt.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=c_(e);return c=j("fileSearchStores",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async get(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=p_(e);return c=j("{name}",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>g)}}async delete(e){var o,i;let s="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=f_(e);s=j("{name}",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:s,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=E_(e);return c=j("fileSearchStores",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=__(g),v=new jg;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=S_(e);return c=j("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=w_(g),v=new ey;return Object.assign(v,h),v})}}async importFile(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=g_(e);return c=j("{file_search_store_name}:importFile",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const h=h_(g),v=new ks;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let cd=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return cd=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),o=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^o()&15>>+i/4).toString(16))};const _S=()=>cd();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $s(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Bs=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _t extends Error{}class tt extends _t{constructor(e,o,i,s){super(`${tt.makeMessage(e,o,i)}`),this.status=e,this.headers=s,this.error=o}static makeMessage(e,o,i){const s=o!=null&&o.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):i;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,o,i,s){if(!e||!s)return new Ur({message:i,cause:Bs(o)});const c=o;return e===400?new fd(e,c,i,s):e===401?new pd(e,c,i,s):e===403?new md(e,c,i,s):e===404?new hd(e,c,i,s):e===409?new gd(e,c,i,s):e===422?new yd(e,c,i,s):e===429?new vd(e,c,i,s):e>=500?new Ed(e,c,i,s):new tt(e,c,i,s)}}class zs extends tt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ur extends tt{constructor({message:e,cause:o}){super(void 0,void 0,e||"Connection error.",void 0),o&&(this.cause=o)}}class dd extends Ur{constructor({message:e}={}){super({message:e??"Request timed out."})}}class fd extends tt{}class pd extends tt{}class md extends tt{}class hd extends tt{}class gd extends tt{}class yd extends tt{}class vd extends tt{}class Ed extends tt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SS=/^[a-z][a-z0-9+.-]*:/i,wS=t=>SS.test(t);let Os=t=>(Os=Array.isArray,Os(t));const _d=Os;function TS(t){if(!t)return!0;for(const e in t)return!1;return!0}function CS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const AS=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _t(`${t} must be an integer`);if(e<0)throw new _t(`${t} must be a positive integer`);return e},xS=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IS=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zn="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NS(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const PS=()=>{var t,e,o,i,s;const c=NS();if(c==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zn,"X-Stainless-OS":wd(Deno.build.os),"X-Stainless-Arch":Sd(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(c==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zn,"X-Stainless-OS":wd((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":Sd((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const f=kS();return f?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${f.browser}`,"X-Stainless-Runtime-Version":f.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function kS(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:o}of t){const i=o.exec(navigator.userAgent);if(i){const s=i[1]||0,c=i[2]||0,f=i[3]||0;return{browser:e,version:`${s}.${c}.${f}`}}}return null}const Sd=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",wd=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Vr;const RS=()=>Vr??(Vr=PS());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MS(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Td(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function DS(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Td({start(){},async pull(o){const{done:i,value:s}=await e.next();i?o.close():o.enqueue(s)},async cancel(){var o;await((o=e.return)===null||o===void 0?void 0:o.call(e))}})}function Cd(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const o=await e.read();return o!=null&&o.done&&e.releaseLock(),o}catch(o){throw e.releaseLock(),o}},async return(){const o=e.cancel();return e.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function LS(t){var e,o;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((o=(e=t[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(e));return}const i=t.getReader(),s=i.cancel();i.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FS=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ad=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,o=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Js(t,e,o){return Ad(),new File(t,e??"unknown_file",o)}function bS(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const US=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xd=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",VS=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&xd(t),GS=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function qS(t,e,o){if(Ad(),t=await t,VS(t))return t instanceof File?t:Js([await t.arrayBuffer()],t.name);if(GS(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Js(await Ws(s),e,o)}const i=await Ws(t);if(e||(e=bS(t)),!(o!=null&&o.type)){const s=i.find(c=>typeof c=="object"&&"type"in c&&c.type);typeof s=="string"&&(o=Object.assign(Object.assign({},o),{type:s}))}return Js(i,e,o)}async function Ws(t){var e,o,i,s,c;let f=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)f.push(t);else if(xd(t))f.push(t instanceof Blob?t:await t.arrayBuffer());else if(US(t))try{for(var p=!0,g=Pt(t),h;h=await g.next(),e=h.done,!e;p=!0){s=h.value,p=!1;const v=s;f.push(...await Ws(v))}}catch(v){o={error:v}}finally{try{!p&&!e&&(i=g.return)&&await i.call(g)}finally{if(o)throw o.error}}else{const v=(c=t==null?void 0:t.constructor)===null||c===void 0?void 0:c.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${HS(t)}`)}return f}function HS(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(o=>`"${o}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Id{constructor(e){this._client=e}}Id._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nd(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Pd=Object.freeze(Object.create(null)),Gr=((t=Nd)=>(function(o,...i){if(o.length===1)return o[0];let s=!1;const c=[],f=o.reduce((v,E,_)=>{var T,P,R;/[?#]/.test(E)&&(s=!0);const N=i[_];let F=(s?encodeURIComponent:t)(""+N);return _!==i.length&&(N==null||typeof N=="object"&&N.toString===((R=Object.getPrototypeOf((P=Object.getPrototypeOf((T=N.hasOwnProperty)!==null&&T!==void 0?T:Pd))!==null&&P!==void 0?P:Pd))===null||R===void 0?void 0:R.toString))&&(F=N+"",c.push({start:v.length+E.length,length:F.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),v+E+(_===i.length?"":F)},""),p=f.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(p))!==null;)c.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(c.sort((v,E)=>v.start-E.start),c.length>0){let v=0;const E=c.reduce((_,T)=>{const P=" ".repeat(T.start-v),R="^".repeat(T.length);return v=T.start+T.length,_+P+R},"");throw new _t(`Path parameters result in path with invalid segments:
${c.map(_=>_.error).join(`
`)}
${f}
${E}`)}return f}))(Nd);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kd extends Id{create(e,o){var i;const{api_version:s=this._client.apiVersion}=e,c=Rr(e,["api_version"]);if("model"in c&&"agent_config"in c)throw new _t("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in c&&"generation_config"in c)throw new _t("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Gr`/${s}/interactions`,Object.assign(Object.assign({body:c},o),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,o={},i){const{api_version:s=this._client.apiVersion}=o??{};return this._client.delete(Gr`/${s}/interactions/${e}`,i)}cancel(e,o={},i){const{api_version:s=this._client.apiVersion}=o??{};return this._client.post(Gr`/${s}/interactions/${e}/cancel`,i)}get(e,o={},i){var s;const c=o??{},{api_version:f=this._client.apiVersion}=c,p=Rr(c,["api_version"]);return this._client.get(Gr`/${f}/interactions/${e}`,Object.assign(Object.assign({query:p},i),{stream:(s=o==null?void 0:o.stream)!==null&&s!==void 0?s:!1}))}}kd._key=Object.freeze(["interactions"]);class Rd extends kd{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $S(t){let e=0;for(const s of t)e+=s.length;const o=new Uint8Array(e);let i=0;for(const s of t)o.set(s,i),i+=s.length;return o}let qr;function Ks(t){let e;return(qr??(e=new globalThis.TextEncoder,qr=e.encode.bind(e)))(t)}let Hr;function Md(t){let e;return(Hr??(e=new globalThis.TextDecoder,Hr=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $r{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const o=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ks(e):e;this.buffer=$S([this.buffer,o]);const i=[];let s;for(;(s=BS(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){i.push(Md(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const c=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,f=Md(this.buffer.subarray(0,c));i.push(f),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}$r.NEWLINE_CHARS=new Set([`
`,"\r"]),$r.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function BS(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function zS(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Br={off:0,error:200,warn:300,info:400,debug:500},Dd=(t,e,o)=>{if(t){if(CS(Br,t))return t;nt(o).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Br))}`)}};function Mo(){}function zr(t,e,o){return!e||Br[t]>Br[o]?Mo:e[t].bind(e)}const OS={error:Mo,warn:Mo,info:Mo,debug:Mo};let Ld=new WeakMap;function nt(t){var e;const o=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!o)return OS;const s=Ld.get(o);if(s&&s[0]===i)return s[1];const c={error:zr("error",o,i),warn:zr("warn",o,i),info:zr("info",o,i),debug:zr("debug",o,i)};return Ld.set(o,[i,c]),c}const kn=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,o])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jn{constructor(e,o,i){this.iterator=e,this.controller=o,this.client=i}static fromSSEResponse(e,o,i){let s=!1;const c=i?nt(i):console;function f(){return Nt(this,arguments,function*(){var g,h,v,E;if(s)throw new _t("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let _=!1;try{try{for(var T=!0,P=Pt(JS(e,o)),R;R=yield ye(P.next()),g=R.done,!g;T=!0){E=R.value,T=!1;const N=E;if(!_)if(N.data.startsWith("[DONE]")){_=!0;continue}else try{yield yield ye(JSON.parse(N.data))}catch(F){throw c.error("Could not parse message into JSON:",N.data),c.error("From chunk:",N.raw),F}}}catch(N){h={error:N}}finally{try{!T&&!g&&(v=P.return)&&(yield ye(v.call(P)))}finally{if(h)throw h.error}}_=!0}catch(N){if($s(N))return yield ye(void 0);throw N}finally{_||o.abort()}})}return new jn(f,o,i)}static fromReadableStream(e,o,i){let s=!1;function c(){return Nt(this,arguments,function*(){var g,h,v,E;const _=new $r,T=Cd(e);try{for(var P=!0,R=Pt(T),N;N=yield ye(R.next()),g=N.done,!g;P=!0){E=N.value,P=!1;const F=E;for(const H of _.decode(F))yield yield ye(H)}}catch(F){h={error:F}}finally{try{!P&&!g&&(v=R.return)&&(yield ye(v.call(R)))}finally{if(h)throw h.error}}for(const F of _.flush())yield yield ye(F)})}function f(){return Nt(this,arguments,function*(){var g,h,v,E;if(s)throw new _t("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let _=!1;try{try{for(var T=!0,P=Pt(c()),R;R=yield ye(P.next()),g=R.done,!g;T=!0){E=R.value,T=!1;const N=E;_||N&&(yield yield ye(JSON.parse(N)))}}catch(N){h={error:N}}finally{try{!T&&!g&&(v=P.return)&&(yield ye(v.call(P)))}finally{if(h)throw h.error}}_=!0}catch(N){if($s(N))return yield ye(void 0);throw N}finally{_||o.abort()}})}return new jn(f,o,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],o=[],i=this.iterator(),s=c=>({next:()=>{if(c.length===0){const f=i.next();e.push(f),o.push(f)}return c.shift()}});return[new jn(()=>s(e),this.controller,this.client),new jn(()=>s(o),this.controller,this.client)]}toReadableStream(){const e=this;let o;return Td({async start(){o=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:c}=await o.next();if(c)return i.close();const f=Ks(JSON.stringify(s)+`
`);i.enqueue(f)}catch(s){i.error(s)}},async cancel(){var i;await((i=o.return)===null||i===void 0?void 0:i.call(o))}})}}function JS(t,e){return Nt(this,arguments,function*(){var i,s,c,f;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _t("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _t("Attempted to iterate over a response with no body");const p=new KS,g=new $r,h=Cd(t.body);try{for(var v=!0,E=Pt(WS(h)),_;_=yield ye(E.next()),i=_.done,!i;v=!0){f=_.value,v=!1;const T=f;for(const P of g.decode(T)){const R=p.decode(P);R&&(yield yield ye(R))}}}catch(T){s={error:T}}finally{try{!v&&!i&&(c=E.return)&&(yield ye(c.call(E)))}finally{if(s)throw s.error}}for(const T of g.flush()){const P=p.decode(T);P&&(yield yield ye(P))}})}function WS(t){return Nt(this,arguments,function*(){var o,i,s,c;let f=new Uint8Array;try{for(var p=!0,g=Pt(t),h;h=yield ye(g.next()),o=h.done,!o;p=!0){c=h.value,p=!1;const v=c;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Ks(v):v;let _=new Uint8Array(f.length+E.length);_.set(f),_.set(E,f.length),f=_;let T;for(;(T=zS(f))!==-1;)yield yield ye(f.slice(0,T)),f=f.slice(T)}}catch(v){i={error:v}}finally{try{!p&&!o&&(s=g.return)&&(yield ye(s.call(g)))}finally{if(i)throw i.error}}f.length>0&&(yield yield ye(f))})}class KS{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(e),e.startsWith(":"))return null;let[o,i,s]=YS(e,":");return s.startsWith(" ")&&(s=s.substring(1)),o==="event"?this.event=s:o==="data"&&this.data.push(s),null}}function YS(t,e){const o=t.indexOf(e);return o!==-1?[t.substring(0,o),e,t.substring(o+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function QS(t,e){const{response:o,requestLogID:i,retryOfRequestLogID:s,startTime:c}=e,f=await(async()=>{var p;if(e.options.stream)return nt(t).debug("response",o.status,o.url,o.headers,o.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(o,e.controller,t):jn.fromSSEResponse(o,e.controller,t);if(o.status===204)return null;if(e.options.__binaryResponse)return o;const g=o.headers.get("content-type"),h=(p=g==null?void 0:g.split(";")[0])===null||p===void 0?void 0:p.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await o.json():await o.text()})();return nt(t).debug(`[${i}] response parsed`,kn({retryOfRequestLogID:s,url:o.url,status:o.status,body:f,durationMs:Date.now()-c})),f}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ys extends Promise{constructor(e,o,i=QS){super(s=>{s(null)}),this.responsePromise=o,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Ys(this.client,this.responsePromise,async(o,i)=>e(await this.parseResponse(o,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,o){return this.parse().then(e,o)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fd=Symbol("brand.privateNullableHeaders");function*XS(t){if(!t)return;if(Fd in t){const{values:i,nulls:s}=t;yield*i.entries();for(const c of s)yield[c,null];return}let e=!1,o;t instanceof Headers?o=t.entries():_d(t)?o=t:(e=!0,o=Object.entries(t??{}));for(let i of o){const s=i[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const c=_d(i[1])?i[1]:[i[1]];let f=!1;for(const p of c)p!==void 0&&(e&&!f&&(f=!0,yield[s,null]),yield[s,p])}}const Do=t=>{const e=new Headers,o=new Set;for(const i of t){const s=new Set;for(const[c,f]of XS(i)){const p=c.toLowerCase();s.has(p)||(e.delete(c),s.add(p)),f===null?(e.delete(c),o.add(p)):(e.append(c,f),o.delete(p))}}return{[Fd]:!0,values:e,nulls:o}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qs=t=>{var e,o,i,s,c,f;if(typeof globalThis.process<"u")return(i=(o=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||o===void 0?void 0:o.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(f=(c=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||c===void 0?void 0:c.call(s,t))===null||f===void 0?void 0:f.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bd;class Or{constructor(e){var o,i,s,c,f,p,g,{baseURL:h=Qs("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(o=Qs("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:E="v1beta"}=e,_=Rr(e,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:v,apiVersion:E},_),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(i=T.timeout)!==null&&i!==void 0?i:Or.DEFAULT_TIMEOUT,this.logger=(s=T.logger)!==null&&s!==void 0?s:console;const P="warn";this.logLevel=P,this.logLevel=(f=(c=Dd(T.logLevel,"ClientOptions.logLevel",this))!==null&&c!==void 0?c:Dd(Qs("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&f!==void 0?f:P,this.fetchOptions=T.fetchOptions,this.maxRetries=(p=T.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(g=T.fetch)!==null&&g!==void 0?g:MS(),this.encoder=FS,this._options=T,this.apiKey=v,this.apiVersion=E,this.clientAdapter=T.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:o}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const o=Do([e.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return Do([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Do([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([o,i])=>typeof i<"u").map(([o,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(o)}=`;throw new _t(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Zn}`}defaultIdempotencyKey(){return`stainless-node-retry-${_S()}`}makeStatusError(e,o,i,s){return tt.generate(e,o,i,s)}buildURL(e,o,i){const s=!this.baseURLOverridden()&&i||this.baseURL,c=wS(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),f=this.defaultQuery();return TS(f)||(o=Object.assign(Object.assign({},f),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(c.search=this.stringifyQuery(o)),c.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const o=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(e,{url:o,options:i}){}get(e,o){return this.methodRequest("get",e,o)}post(e,o){return this.methodRequest("post",e,o)}patch(e,o){return this.methodRequest("patch",e,o)}put(e,o){return this.methodRequest("put",e,o)}delete(e,o){return this.methodRequest("delete",e,o)}methodRequest(e,o,i){return this.request(Promise.resolve(i).then(s=>Object.assign({method:e,path:o},s)))}request(e,o=null){return new Ys(this,this.makeRequest(e,o,void 0))}async makeRequest(e,o,i){var s,c,f;const p=await e,g=(s=p.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o==null&&(o=g),await this.prepareOptions(p);const{req:h,url:v,timeout:E}=await this.buildRequest(p,{retryCount:g-o});await this.prepareRequest(h,{url:v,options:p});const _="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=i===void 0?"":`, retryOf: ${i}`,P=Date.now();if(nt(this).debug(`[${_}] sending request`,kn({retryOfRequestLogID:i,method:p.method,url:v,options:p,headers:h.headers})),!((c=p.signal)===null||c===void 0)&&c.aborted)throw new zs;const R=new AbortController,N=await this.fetchWithTimeout(v,h,E,R).catch(Bs),F=Date.now();if(N instanceof globalThis.Error){const $=`retrying, ${o} attempts remaining`;if(!((f=p.signal)===null||f===void 0)&&f.aborted)throw new zs;const G=$s(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(o)return nt(this).info(`[${_}] connection ${G?"timed out":"failed"} - ${$}`),nt(this).debug(`[${_}] connection ${G?"timed out":"failed"} (${$})`,kn({retryOfRequestLogID:i,url:v,durationMs:F-P,message:N.message})),this.retryRequest(p,o,i??_);throw nt(this).info(`[${_}] connection ${G?"timed out":"failed"} - error; no more retries left`),nt(this).debug(`[${_}] connection ${G?"timed out":"failed"} (error; no more retries left)`,kn({retryOfRequestLogID:i,url:v,durationMs:F-P,message:N.message})),G?new dd:new Ur({cause:N})}const H=`[${_}${T}] ${h.method} ${v} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${F-P}ms`;if(!N.ok){const $=await this.shouldRetry(N);if(o&&$){const O=`retrying, ${o} attempts remaining`;return await LS(N.body),nt(this).info(`${H} - ${O}`),nt(this).debug(`[${_}] response error (${O})`,kn({retryOfRequestLogID:i,url:N.url,status:N.status,headers:N.headers,durationMs:F-P})),this.retryRequest(p,o,i??_,N.headers)}const G=$?"error; no more retries left":"error; not retryable";nt(this).info(`${H} - ${G}`);const W=await N.text().catch(O=>Bs(O).message),U=xS(W),V=U?void 0:W;throw nt(this).debug(`[${_}] response error (${G})`,kn({retryOfRequestLogID:i,url:N.url,status:N.status,headers:N.headers,message:V,durationMs:Date.now()-P})),this.makeStatusError(N.status,U,V,N.headers)}return nt(this).info(H),nt(this).debug(`[${_}] response start`,kn({retryOfRequestLogID:i,url:N.url,status:N.status,headers:N.headers,durationMs:F-P})),{response:N,options:p,controller:R,requestLogID:_,retryOfRequestLogID:i,startTime:P}}async fetchWithTimeout(e,o,i,s){const c=o||{},{signal:f,method:p}=c,g=Rr(c,["signal","method"]);f&&f.addEventListener("abort",()=>s.abort());const h=setTimeout(()=>s.abort(),i),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,E=Object.assign(Object.assign(Object.assign({signal:s.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);p&&(E.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(h)}}async shouldRetry(e){const o=e.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,o,i,s){var c;let f;const p=s==null?void 0:s.get("retry-after-ms");if(p){const h=parseFloat(p);Number.isNaN(h)||(f=h)}const g=s==null?void 0:s.get("retry-after");if(g&&!f){const h=parseFloat(g);Number.isNaN(h)?f=Date.parse(g)-Date.now():f=h*1e3}if(!(f&&0<=f&&f<6e4)){const h=(c=e.maxRetries)!==null&&c!==void 0?c:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(o,h)}return await IS(f),this.makeRequest(e,o-1,i)}calculateDefaultRetryTimeoutMillis(e,o){const c=o-e,f=Math.min(.5*Math.pow(2,c),8),p=1-Math.random()*.25;return f*p*1e3}async buildRequest(e,{retryCount:o=0}={}){var i,s,c;const f=Object.assign({},e),{method:p,path:g,query:h,defaultBaseURL:v}=f,E=this.buildURL(g,h,v);"timeout"in f&&AS("timeout",f.timeout),f.timeout=(i=f.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:_,body:T}=this.buildBody({options:f}),P=await this.buildHeaders({options:e,method:p,bodyHeaders:_,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:P},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(c=f.fetchOptions)!==null&&c!==void 0?c:{}),url:E,timeout:f.timeout}}async buildHeaders({options:e,method:o,bodyHeaders:i,retryCount:s}){let c={};this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const f=await this.authHeaders(e);let p=Do([c,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),RS()),this._options.defaultHeaders,i,e.headers,f]);return this.validateHeaders(p),p.values}buildBody({options:{body:e,headers:o}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Do([o]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:DS(e)}:this.encoder({body:e,headers:i})}}Or.DEFAULT_TIMEOUT=6e4;class Be extends Or{constructor(){super(...arguments),this.interactions=new Rd(this)}}bd=Be,Be.GeminiNextGenAPIClient=bd,Be.GeminiNextGenAPIClientError=_t,Be.APIError=tt,Be.APIConnectionError=Ur,Be.APIConnectionTimeoutError=dd,Be.APIUserAbortError=zs,Be.NotFoundError=hd,Be.ConflictError=gd,Be.RateLimitError=vd,Be.BadRequestError=fd,Be.AuthenticationError=pd,Be.InternalServerError=Ed,Be.PermissionDeniedError=md,Be.UnprocessableEntityError=yd,Be.toFile=qS,Be.Interactions=Rd;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZS(t,e){const o={},i=a(t,["name"]);return i!=null&&u(o,["_url","name"],i),o}function jS(t,e){const o={},i=a(t,["name"]);return i!=null&&u(o,["_url","name"],i),o}function ew(t,e){const o={},i=a(t,["sdkHttpResponse"]);return i!=null&&u(o,["sdkHttpResponse"],i),o}function tw(t,e){const o={},i=a(t,["sdkHttpResponse"]);return i!=null&&u(o,["sdkHttpResponse"],i),o}function nw(t,e,o){const i={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=a(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&u(e,["displayName"],s),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=a(t,["epochCount"]);e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","epochCount"],c);const f=a(t,["learningRateMultiplier"]);if(f!=null&&u(i,["tuningTask","hyperparameters","learningRateMultiplier"],f),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const p=a(t,["batchSize"]);e!==void 0&&p!=null&&u(e,["tuningTask","hyperparameters","batchSize"],p);const g=a(t,["learningRate"]);if(e!==void 0&&g!=null&&u(e,["tuningTask","hyperparameters","learningRate"],g),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function ow(t,e,o){const i={};let s=a(o,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const T=a(t,["validationDataset"]);e!==void 0&&T!=null&&u(e,["supervisedTuningSpec"],Vd(T))}else if(s==="PREFERENCE_TUNING"){const T=a(t,["validationDataset"]);e!==void 0&&T!=null&&u(e,["preferenceOptimizationSpec"],Vd(T))}const c=a(t,["tunedModelDisplayName"]);e!==void 0&&c!=null&&u(e,["tunedModelDisplayName"],c);const f=a(t,["description"]);e!==void 0&&f!=null&&u(e,["description"],f);let p=a(o,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const T=a(t,["epochCount"]);e!==void 0&&T!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(p==="PREFERENCE_TUNING"){const T=a(t,["epochCount"]);e!==void 0&&T!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let g=a(o,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const T=a(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(g==="PREFERENCE_TUNING"){const T=a(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let h=a(o,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const T=a(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(h==="PREFERENCE_TUNING"){const T=a(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&u(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let v=a(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const T=a(t,["adapterSize"]);e!==void 0&&T!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(v==="PREFERENCE_TUNING"){const T=a(t,["adapterSize"]);e!==void 0&&T!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=a(t,["labels"]);e!==void 0&&E!=null&&u(e,["labels"],E);const _=a(t,["beta"]);return e!==void 0&&_!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","beta"],_),i}function rw(t,e){const o={},i=a(t,["baseModel"]);i!=null&&u(o,["baseModel"],i);const s=a(t,["preTunedModel"]);s!=null&&u(o,["preTunedModel"],s);const c=a(t,["trainingDataset"]);c!=null&&hw(c);const f=a(t,["config"]);return f!=null&&nw(f,o),o}function iw(t,e){const o={},i=a(t,["baseModel"]);i!=null&&u(o,["baseModel"],i);const s=a(t,["preTunedModel"]);s!=null&&u(o,["preTunedModel"],s);const c=a(t,["trainingDataset"]);c!=null&&gw(c,o,e);const f=a(t,["config"]);return f!=null&&ow(f,o,e),o}function sw(t,e){const o={},i=a(t,["name"]);return i!=null&&u(o,["_url","name"],i),o}function lw(t,e){const o={},i=a(t,["name"]);return i!=null&&u(o,["_url","name"],i),o}function aw(t,e,o){const i={},s=a(t,["pageSize"]);e!==void 0&&s!=null&&u(e,["_query","pageSize"],s);const c=a(t,["pageToken"]);e!==void 0&&c!=null&&u(e,["_query","pageToken"],c);const f=a(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function uw(t,e,o){const i={},s=a(t,["pageSize"]);e!==void 0&&s!=null&&u(e,["_query","pageSize"],s);const c=a(t,["pageToken"]);e!==void 0&&c!=null&&u(e,["_query","pageToken"],c);const f=a(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function cw(t,e){const o={},i=a(t,["config"]);return i!=null&&aw(i,o),o}function dw(t,e){const o={},i=a(t,["config"]);return i!=null&&uw(i,o),o}function fw(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&u(o,["sdkHttpResponse"],i);const s=a(t,["nextPageToken"]);s!=null&&u(o,["nextPageToken"],s);const c=a(t,["tunedModels"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>Ud(p))),u(o,["tuningJobs"],f)}return o}function pw(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&u(o,["sdkHttpResponse"],i);const s=a(t,["nextPageToken"]);s!=null&&u(o,["nextPageToken"],s);const c=a(t,["tuningJobs"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>Xs(p))),u(o,["tuningJobs"],f)}return o}function mw(t,e){const o={},i=a(t,["name"]);i!=null&&u(o,["model"],i);const s=a(t,["name"]);return s!=null&&u(o,["endpoint"],s),o}function hw(t,e){const o={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=a(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(c=>c)),u(o,["examples","examples"],s)}return o}function gw(t,e,o){const i={};let s=a(o,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const f=a(t,["gcsUri"]);e!==void 0&&f!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(s==="PREFERENCE_TUNING"){const f=a(t,["gcsUri"]);e!==void 0&&f!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}let c=a(o,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const f=a(t,["vertexDatasetResource"]);e!==void 0&&f!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(c==="PREFERENCE_TUNING"){const f=a(t,["vertexDatasetResource"]);e!==void 0&&f!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Ud(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&u(o,["sdkHttpResponse"],i);const s=a(t,["name"]);s!=null&&u(o,["name"],s);const c=a(t,["state"]);c!=null&&u(o,["state"],Dc(c));const f=a(t,["createTime"]);f!=null&&u(o,["createTime"],f);const p=a(t,["tuningTask","startTime"]);p!=null&&u(o,["startTime"],p);const g=a(t,["tuningTask","completeTime"]);g!=null&&u(o,["endTime"],g);const h=a(t,["updateTime"]);h!=null&&u(o,["updateTime"],h);const v=a(t,["description"]);v!=null&&u(o,["description"],v);const E=a(t,["baseModel"]);E!=null&&u(o,["baseModel"],E);const _=a(t,["_self"]);return _!=null&&u(o,["tunedModel"],mw(_)),o}function Xs(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&u(o,["sdkHttpResponse"],i);const s=a(t,["name"]);s!=null&&u(o,["name"],s);const c=a(t,["state"]);c!=null&&u(o,["state"],Dc(c));const f=a(t,["createTime"]);f!=null&&u(o,["createTime"],f);const p=a(t,["startTime"]);p!=null&&u(o,["startTime"],p);const g=a(t,["endTime"]);g!=null&&u(o,["endTime"],g);const h=a(t,["updateTime"]);h!=null&&u(o,["updateTime"],h);const v=a(t,["error"]);v!=null&&u(o,["error"],v);const E=a(t,["description"]);E!=null&&u(o,["description"],E);const _=a(t,["baseModel"]);_!=null&&u(o,["baseModel"],_);const T=a(t,["tunedModel"]);T!=null&&u(o,["tunedModel"],T);const P=a(t,["preTunedModel"]);P!=null&&u(o,["preTunedModel"],P);const R=a(t,["supervisedTuningSpec"]);R!=null&&u(o,["supervisedTuningSpec"],R);const N=a(t,["preferenceOptimizationSpec"]);N!=null&&u(o,["preferenceOptimizationSpec"],N);const F=a(t,["tuningDataStats"]);F!=null&&u(o,["tuningDataStats"],F);const H=a(t,["encryptionSpec"]);H!=null&&u(o,["encryptionSpec"],H);const $=a(t,["partnerModelTuningSpec"]);$!=null&&u(o,["partnerModelTuningSpec"],$);const G=a(t,["customBaseModel"]);G!=null&&u(o,["customBaseModel"],G);const W=a(t,["experiment"]);W!=null&&u(o,["experiment"],W);const U=a(t,["labels"]);U!=null&&u(o,["labels"],U);const V=a(t,["outputUri"]);V!=null&&u(o,["outputUri"],V);const X=a(t,["pipelineJob"]);X!=null&&u(o,["pipelineJob"],X);const O=a(t,["serviceAccount"]);O!=null&&u(o,["serviceAccount"],O);const ne=a(t,["tunedModelDisplayName"]);ne!=null&&u(o,["tunedModelDisplayName"],ne);const ge=a(t,["veoTuningSpec"]);return ge!=null&&u(o,["veoTuningSpec"],ge),o}function yw(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&u(o,["sdkHttpResponse"],i);const s=a(t,["name"]);s!=null&&u(o,["name"],s);const c=a(t,["metadata"]);c!=null&&u(o,["metadata"],c);const f=a(t,["done"]);f!=null&&u(o,["done"],f);const p=a(t,["error"]);return p!=null&&u(o,["error"],p),o}function Vd(t,e){const o={},i=a(t,["gcsUri"]);i!=null&&u(o,["validationDatasetUri"],i);const s=a(t,["vertexDatasetResource"]);return s!=null&&u(o,["validationDatasetUri"],s),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vw extends Wt{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Pn(Yt.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var i;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const s={tunedModelName:o.baseModel};!((i=o.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=o.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},o),{preTunedModel:s});return c.baseModel=void 0,await this.tuneInternal(c)}else{const s=Object.assign({},o);return await this.tuneInternal(s)}else{const s=Object.assign({},o),c=await this.tuneMldevInternal(s);let f="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?f=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(f=c.name.split("/operations/")[0]),{name:f,state:Ns.JOB_STATE_QUEUED}}}}async getInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=lw(e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>Xs(v))}else{const h=sw(e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>Ud(v))}}async listInternal(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=dw(e);return p=j("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=pw(v),_=new _c;return Object.assign(_,E),_})}else{const h=cw(e);return p=j("tunedModels",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=fw(v),_=new _c;return Object.assign(_,E),_})}}async cancel(e){var o,i,s,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=jS(e);return p=j("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=tw(v),_=new Sc;return Object.assign(_,E),_})}else{const h=ZS(e);return p=j("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=ew(v),_=new Sc;return Object.assign(_,E),_})}}async tuneInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI()){const p=iw(e,e);return c=j("tuningJobs",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>Xs(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,i;let s,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=rw(e);return c=j("tunedModels",p._url),f=p._query,delete p._url,delete p._query,s=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>yw(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ew{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const _w=1024*1024*8,Sw=3,ww=1e3,Tw=2,Jr="x-goog-upload-status";async function Cw(t,e,o){var i;const s=await Gd(t,e,o),c=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[Jr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function Aw(t,e,o){var i;const s=await Gd(t,e,o),c=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[Jr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const f=gu(c),p=new Rs;return Object.assign(p,f),p}async function Gd(t,e,o){var i,s;let c=0,f=0,p=new Ps(new Response),g="upload";for(c=t.size;f<c;){const h=Math.min(_w,c-f),v=t.slice(f,f+h);f+h>=c&&(g+=", finalize");let E=0,_=ww;for(;E<Sw&&(p=await o.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(f),"Content-Length":String(h)}}}),!(!((i=p==null?void 0:p.headers)===null||i===void 0)&&i[Jr]));)E++,await Iw(_),_=_*Tw;if(f+=h,((s=p==null?void 0:p.headers)===null||s===void 0?void 0:s[Jr])!=="active")break;if(c<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function xw(t){return{size:t.size,type:t.type}}function Iw(t){return new Promise(e=>setTimeout(e,t))}class Nw{async upload(e,o,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Cw(e,o,i)}async uploadToFileSearchStore(e,o,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Aw(e,o,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xw(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pw{create(e,o,i){return new kw(e,o,i)}}class kw{constructor(e,o,i){this.url=e,this.headers=o,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qd="x-goog-api-key";class Rw{constructor(e){this.apiKey=e}async addAuthHeaders(e,o){if(e.get(qd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(qd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mw="gl-node/";class Dw{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new Be({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=o.interactions,this._interactions}constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const i=Rg(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new Rw(this.apiKey);this.apiClient=new P_({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Mw+"web",uploader:new Nw,downloader:new Ew}),this.models=new K_(this.apiClient),this.live=new $_(this.apiClient,s,new Pw),this.batches=new s0(this.apiClient),this.chats=new H0(this.models,this.apiClient),this.caches=new V0(this.apiClient),this.files=new X0(this.apiClient),this.operations=new Y_(this.apiClient),this.authTokens=new dS(this.apiClient),this.tunings=new vw(this.apiClient),this.fileSearchStores=new ES(this.apiClient)}}const Zs="You are a professional prompt engineer. Your task is to take a simple image generation prompt and expand it to be more precise, descriptive, and high-quality, ensuring it yields better results in models like Midjourney or Gemini. Keep the core intent but add stylistic details, lighting, and composition. Return ONLY the improved prompt text, nothing else.";async function Lw(t,e){return(await new Dw({apiKey:e}).models.generateContent({model:"gemini-2.0-flash",contents:`${Zs}

Input: "${t}"`})).text||t}async function Fw(t,e){var s,c,f,p,g;const o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:Zs},{role:"user",content:`Input: "${t}"`}],max_tokens:1024,temperature:.7})});if(!o.ok){const h=await o.json().catch(()=>({error:{message:"Unknown error"}}));throw new Error(((s=h.error)==null?void 0:s.message)||`OpenAI API error: ${o.status}`)}return((g=(p=(f=(c=(await o.json()).choices)==null?void 0:c[0])==null?void 0:f.message)==null?void 0:p.content)==null?void 0:g.trim())||t}async function bw(t,e){var c,f,p;const o=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-3-5-haiku-latest",max_tokens:1024,system:Zs,messages:[{role:"user",content:`Input: "${t}"`}]})});if(!o.ok){const g=await o.json().catch(()=>({error:{message:"Unknown error"}}));throw new Error(((c=g.error)==null?void 0:c.message)||`Anthropic API error: ${o.status}`)}const s=(f=(await o.json()).content)==null?void 0:f[0];return(s==null?void 0:s.type)==="text"&&((p=s.text)==null?void 0:p.trim())||t}async function Hd(t,e){const o=tg(e);if(!o)throw new Error("No AI API key configured. Please set up an API key in Settings to use prompt optimization.");const{provider:i,key:s}=o;try{switch(i){case vt.GEMINI:return await Lw(t,s);case vt.OPENAI:return await Fw(t,s);case vt.ANTHROPIC:return await bw(t,s);default:throw new Error(`Unsupported AI provider: ${i}`)}}catch(c){const f=c instanceof Error?c.message:"Unknown error";throw console.error(`AI Prompt Improvement Error (${i}):`,c),f.includes("quota")||f.includes("rate")?new Error(`${i} API quota exceeded. Please try again later.`):f.includes("invalid")||f.includes("Invalid")||f.includes("401")?new Error(`Invalid ${i} API key. Please check your settings.`):c}}function Uw(){const[t,e]=fe.useState([]),[o,i]=fe.useState([]),[s,c]=fe.useState(ws),[f,p]=fe.useState(!1),[g,h]=fe.useState("queue"),[v,E]=fe.useState(0),[_,T]=fe.useState(!1),[P,R]=fe.useState(!1),[N,F]=fe.useState(!1),H=s.theme===Po.DARK,$=s.position===Jt.LEFT;fe.useEffect(()=>{(async()=>{const[A,L,Z,te]=await Promise.all([Yh(),Qh(),Zh(),jh()]);e(A),c(L),i(Z),T(!te)})()},[]),fe.useEffect(()=>ng(A=>{A[it.QUEUE]&&e(A[it.QUEUE].newValue||[]),A[it.SETTINGS]&&c(A[it.SETTINGS].newValue||ws),A[it.FOLDERS]&&i(A[it.FOLDERS].newValue||[])}),[]),fe.useEffect(()=>{const b=A=>{A.type===Vt.PROCESS_QUEUE?p(!0):A.type===Vt.STOP_PROCESSING?p(!1):A.type===Vt.UPDATE_QUEUE&&e(A.payload)};return chrome.runtime.onMessage.addListener(b),()=>chrome.runtime.onMessage.removeListener(b)},[]),fe.useEffect(()=>{let b;return f?b=setInterval(()=>E(A=>A+100),100):E(0),()=>clearInterval(b)},[f]);const G=fe.useCallback(b=>{var L;let A=`${s.prefix} ${b} ${s.suffix}`.trim();return s.globalNegativesEnabled&&((L=s.globalNegatives)!=null&&L.trim())&&(A+=`. NOT ${s.globalNegatives.trim()}`),A},[s.prefix,s.suffix,s.globalNegatives,s.globalNegativesEnabled]),W=fe.useCallback(async(b,A,L,Z)=>{const me=(b||"").split(/[,\n]/).map(we=>we.trim()).filter(we=>we!=="").map(we=>{const Ne=A?`${we} ${A}`:we;return{id:Math.random().toString(36).substr(2,9),originalPrompt:we,finalPrompt:G(Ne),status:Ye.IDLE,tool:Z||s.defaultTool,images:L&&L.length>0?[...L]:void 0}}),Te=[...t,...me];e(Te),await Ar(Te)},[t,G,s.defaultTool]),U=fe.useCallback(async b=>{const A=t.filter(L=>L.id!==b);e(A),await Ar(A)},[t]),V=fe.useCallback(async()=>{const b=t.filter(A=>A.status!==Ye.COMPLETED);e(b),await Ar(b)},[t]),X=fe.useCallback(async b=>{const A=b.map(Z=>{const te=Z.modifier?`${Z.prompt} ${Z.modifier}`:Z.prompt;return{id:Math.random().toString(36).substr(2,9),originalPrompt:Z.prompt,finalPrompt:G(te),status:Ye.IDLE}}),L=[...t,...A];e(L),await Ar(L)},[t,G]),O=fe.useCallback(async()=>{f?(await chrome.runtime.sendMessage({type:Vt.STOP_PROCESSING}),p(!1)):(await chrome.runtime.sendMessage({type:Vt.PROCESS_QUEUE}),p(!0))},[f]),ne=fe.useCallback(async b=>{const A={...s,...b};c(A),await Xh(A)},[s]),ge=fe.useCallback(async b=>{const A={id:Math.random().toString(36).substr(2,9),name:b,templates:[],isOpen:!0},L=[...o,A];i(L),await Nn(L)},[o]),Q=fe.useCallback(async b=>{const A=o.filter(L=>L.id!==b);i(A),await Nn(A)},[o]),q=fe.useCallback(async b=>{const A=o.map(L=>L.id===b?{...L,isOpen:!L.isOpen}:L);i(A),await Nn(A)},[o]),se=fe.useCallback((b,A)=>{const L=o.find(te=>te.id===b),Z=L==null?void 0:L.templates.find(te=>te.id===A);Z&&(W(Z.text,void 0,Z.images),h("queue"))},[o,W]),pe=fe.useCallback(async(b,A)=>{const L=o.map(Z=>Z.id===b?{...Z,templates:Z.templates.filter(te=>te.id!==A)}:Z);i(L),await Nn(L)},[o]),de=fe.useCallback(async(b,A)=>{const L=o.map(Z=>{if(Z.id===b){const te=Z.templates.findIndex(me=>me.id===A.id),Ee={id:A.id||Math.random().toString(36).substr(2,9),name:A.name||"Unnamed",text:A.text||"",createdAt:A.createdAt||Date.now(),lastEditedAt:Date.now(),timesUsed:A.timesUsed||0,images:A.images||[]};if(te>-1){const me=[...Z.templates];return me[te]=Ee,{...Z,templates:me}}else return{...Z,templates:[...Z.templates,Ee]}}return Z});i(L),await Nn(L)},[o]),ve=fe.useCallback(async(b,A)=>{const L=o.find(te=>te.id===b),Z=L==null?void 0:L.templates.find(te=>te.id===A);if(Z){const te=await Hd(Z.text,s),Ee=o.map(me=>me.id===b?{...me,templates:me.templates.map(Te=>Te.id===A?{...Te,text:te,lastEditedAt:Date.now()}:Te)}:me);i(Ee),await Nn(Ee)}},[o,s]),K=fe.useCallback(async b=>{const A=o.find(te=>te.id===b);if(!A)return;const L=await Promise.all(A.templates.map(async te=>{const Ee=await Hd(te.text,s);return{...te,text:Ee,lastEditedAt:Date.now()}})),Z=o.map(te=>te.id===b?{...te,templates:L}:te);i(Z),await Nn(Z)},[o,s]),le=fe.useCallback(async()=>{await eg(!0),T(!1)},[]);return N?w.jsx("div",{className:`nano-flow-collapsed ${$?"nano-flow-left":"nano-flow-right"}`,style:{position:"fixed",top:"50%",transform:"translateY(-50%)",[$?"left":"right"]:"0",zIndex:999999,pointerEvents:"auto"},children:w.jsx("button",{onClick:()=>F(!1),title:"Open Nano Flow panel",className:`p-2 rounded-md shadow-lg transition-all ${H?"bg-[#1a1a1a] text-white border border-white/10":"bg-white text-slate-800 border border-slate-200"}`,style:{borderRadius:$?"0 8px 8px 0":"8px 0 0 8px"},children:w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx(Es,{size:16,className:"text-blue-500"}),w.jsx(Ih,{size:12,className:"opacity-50"})]})})}):w.jsx("div",{className:`nano-flow-sidebar ${$?"nano-flow-left":"nano-flow-right"}`,style:{position:"fixed",top:0,bottom:0,[$?"left":"right"]:0,width:"320px",zIndex:999999,display:"flex",flexDirection:"column",pointerEvents:"auto"},children:w.jsxs("div",{className:`flex flex-col h-full overflow-hidden transition-colors duration-500 ${H?"bg-[#0a0a0a] text-white":"bg-[#f8fafc] text-[#1e293b]"}`,style:{borderLeft:$?"none":`1px solid ${H?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}`,borderRight:$?`1px solid ${H?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}`:"none"},children:[_&&w.jsx(rg,{onComplete:le,isDark:H}),w.jsx(og,{isOpen:P,isDark:H,onClose:()=>R(!1),onUpload:X}),w.jsxs("div",{className:`p-2 flex items-center justify-between border-b ${H?"border-white/10 bg-white/5":"border-slate-100 bg-slate-50"}`,children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"p-1 rounded-md bg-blue-600 shadow-lg shadow-blue-600/20",children:w.jsx(Es,{size:16,className:"text-white"})}),w.jsx("h1",{className:"text-sm font-black tracking-tight",children:"Nano Flow"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[f&&w.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-blue-500/10 rounded-md border border-blue-500/20",children:[w.jsx(_h,{size:10,className:"text-blue-500 animate-spin"}),w.jsxs("span",{className:"text-[10px] font-black text-blue-500",children:[(v/1e3).toFixed(1),"s"]})]}),w.jsx("button",{onClick:()=>F(!0),title:"Minimize panel",className:`p-1 rounded opacity-50 hover:opacity-100 transition-opacity ${H?"hover:bg-white/10":"hover:bg-black/5"}`,children:w.jsx(rn,{size:14})})]})]}),w.jsx("nav",{className:`flex border-b overflow-hidden ${H?"border-white/5 bg-white/2":"border-slate-100"}`,children:[{id:"queue",icon:vs,label:"Queue",tooltip:"Add prompts and process them in batch through Gemini"},{id:"templates",icon:ys,label:"Templates",tooltip:"Save your favorite prompts and improve them with AI"},{id:"settings",icon:$h,label:"Settings",tooltip:"Configure API key, prefixes, negatives, and more"}].map(b=>w.jsxs("button",{onClick:()=>h(b.id),className:`flex-1 py-3 text-[8px] font-black uppercase tracking-widest flex flex-col items-center gap-1 transition-all relative group ${g===b.id?"text-blue-500":"opacity-40 hover:opacity-100"}`,children:[w.jsxs("div",{className:"flex items-center gap-0.5",children:[w.jsx(b.icon,{size:14}),w.jsx(No,{size:8,className:"opacity-0 group-hover:opacity-50 transition-opacity",title:b.tooltip})]}),w.jsx("span",{className:"truncate w-full text-center px-1",children:b.label}),g===b.id&&w.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-blue-500 rounded-t-md"})]},b.id))}),w.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar p-2",children:[g==="queue"&&w.jsx(ug,{queue:t,isDark:H,defaultTool:s.defaultTool,onAddToQueue:W,onRemoveFromQueue:U,onOpenCsvDialog:()=>R(!0)}),g==="templates"&&w.jsx(Eg,{folders:o,isDark:H,hasAIKey:lu(s),onCreateFolder:ge,onDeleteFolder:Q,onToggleFolder:q,onUseTemplate:se,onDeleteTemplate:pe,onSaveTemplate:de,onImproveTemplate:ve,onImproveFolder:K}),g==="settings"&&w.jsx(yg,{settings:s,isDark:H,onUpdateSettings:ne})]}),w.jsxs("div",{className:`p-2 border-t space-y-2 ${H?"bg-black/80 border-white/10 backdrop-blur-xl":"bg-slate-50 border-slate-200"}`,children:[w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:V,title:"Clear completed items",className:"flex-1 p-2 rounded-md border text-[10px] font-black uppercase hover:bg-red-500 hover:text-white transition-all border-white/10",children:w.jsx(Sr,{size:14,className:"mx-auto"})}),w.jsxs("button",{onClick:O,disabled:t.length===0,title:f?"Stop processing queue":"Start processing queue",className:`flex-[4] p-2 rounded-md flex items-center justify-center gap-2 text-xs font-black uppercase shadow-xl transition-all active:scale-[0.98] ${f?"bg-amber-500 shadow-amber-500/30":"bg-blue-600 shadow-blue-600/30"} text-white disabled:opacity-30`,children:[f?w.jsx(Fh,{size:16,fill:"currentColor"}):w.jsx(Vh,{size:16,fill:"currentColor"}),f?"Stop":"Start"]})]}),t.filter(b=>b.status===Ye.COMPLETED).length>0&&w.jsx("div",{className:"flex gap-1 overflow-x-auto no-scrollbar py-1",children:t.filter(b=>b.status===Ye.COMPLETED).slice(-5).map(b=>{var L,Z,te,Ee;const A=((Z=(L=b.results)==null?void 0:L.flash)==null?void 0:Z.url)||((Ee=(te=b.results)==null?void 0:te.pro)==null?void 0:Ee.url);return A?w.jsxs("div",{className:"relative group shrink-0",children:[w.jsx("img",{src:A,className:"w-12 h-12 rounded-md object-cover border border-white/10",alt:"Result"}),w.jsx("button",{onClick:()=>{const me=document.createElement("a");me.href=A,me.download=`nano_flow_${b.id}.png`,me.click()},title:"Download image",className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center rounded-md",children:w.jsx(ru,{size:12,className:"text-white"})})]},b.id):null})})]})]})})}const Vw={matches:["https://gemini.google.com/*"],runAt:"document_idle",cssInjectionMode:"ui",async main(t){console.log("[Nano Flow] Content script with UI loaded on gemini.google.com"),Ig.init(),(await oh(t,{name:"nano-flow-sidebar",position:"overlay",onMount:o=>{o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.right="0",o.style.bottom="0",o.style.pointerEvents="none",o.style.zIndex="999998";const i=gg.createRoot(o);return i.render(w.jsx(Uw,{})),i},onRemove:o=>{o==null||o.unmount()}})).mount(),console.log("[Nano Flow] Sidebar UI injected into page")}};function MA(){}function Wr(t,...e){}const Gw={debug:(...t)=>Wr(console.debug,...t),log:(...t)=>Wr(console.log,...t),warn:(...t)=>Wr(console.warn,...t),error:(...t)=>Wr(console.error,...t)};return(async()=>{try{const{main:t,...e}=Vw,o=new as("gemini",e);return await t(o)}catch(t){throw Gw.error('The content script "gemini" crashed on startup!',t),t}})()})();
gemini;

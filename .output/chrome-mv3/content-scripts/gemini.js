var gemini=(function(){"use strict";var vw=Object.defineProperty;var Ew=(Hn,wt,Bt)=>wt in Hn?vw(Hn,wt,{enumerable:!0,configurable:!0,writable:!0,value:Bt}):Hn[wt]=Bt;var qn=(Hn,wt,Bt)=>Ew(Hn,typeof wt!="symbol"?wt+"":wt,Bt);function Hn(t){return t}function wt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bt={exports:{}},Rm=Bt.exports,qa;function km(){return qa||(qa=1,(function(t,e){(function(o,i){i(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Rm,function(o){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)o.exports=globalThis.browser;else{const i="The message port closed before a response was received.",l=c=>{const f={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(f).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class p extends WeakMap{constructor(U,ee=void 0){super(ee),this.createItem=U}get(U){return this.has(U)||this.set(U,this.createItem(U)),super.get(U)}}const g=L=>L&&typeof L=="object"&&typeof L.then=="function",h=(L,U)=>(...ee)=>{c.runtime.lastError?L.reject(new Error(c.runtime.lastError.message)):U.singleCallbackArg||ee.length<=1&&U.singleCallbackArg!==!1?L.resolve(ee[0]):L.resolve(ee)},v=L=>L==1?"argument":"arguments",E=(L,U)=>function(K,...ae){if(ae.length<U.minArgs)throw new Error(`Expected at least ${U.minArgs} ${v(U.minArgs)} for ${L}(), got ${ae.length}`);if(ae.length>U.maxArgs)throw new Error(`Expected at most ${U.maxArgs} ${v(U.maxArgs)} for ${L}(), got ${ae.length}`);return new Promise((W,te)=>{if(U.fallbackToNoCallback)try{K[L](...ae,h({resolve:W,reject:te},U))}catch($){console.warn(`${L} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,$),K[L](...ae),U.fallbackToNoCallback=!1,U.noCallback=!0,W()}else U.noCallback?(K[L](...ae),W()):K[L](...ae,h({resolve:W,reject:te},U))})},_=(L,U,ee)=>new Proxy(U,{apply(K,ae,W){return ee.call(ae,L,...W)}});let w=Function.call.bind(Object.prototype.hasOwnProperty);const k=(L,U={},ee={})=>{let K=Object.create(null),ae={has(te,$){return $ in L||$ in K},get(te,$,fe){if($ in K)return K[$];if(!($ in L))return;let pe=L[$];if(typeof pe=="function")if(typeof U[$]=="function")pe=_(L,L[$],U[$]);else if(w(ee,$)){let Ee=E($,ee[$]);pe=_(L,L[$],Ee)}else pe=pe.bind(L);else if(typeof pe=="object"&&pe!==null&&(w(U,$)||w(ee,$)))pe=k(pe,U[$],ee[$]);else if(w(ee,"*"))pe=k(pe,U[$],ee["*"]);else return Object.defineProperty(K,$,{configurable:!0,enumerable:!0,get(){return L[$]},set(Ee){L[$]=Ee}}),pe;return K[$]=pe,pe},set(te,$,fe,pe){return $ in K?K[$]=fe:L[$]=fe,!0},defineProperty(te,$,fe){return Reflect.defineProperty(K,$,fe)},deleteProperty(te,$){return Reflect.deleteProperty(K,$)}},W=Object.create(L);return new Proxy(W,ae)},M=L=>({addListener(U,ee,...K){U.addListener(L.get(ee),...K)},hasListener(U,ee){return U.hasListener(L.get(ee))},removeListener(U,ee){U.removeListener(L.get(ee))}}),I=new p(L=>typeof L!="function"?L:function(ee){const K=k(ee,{},{getContent:{minArgs:0,maxArgs:0}});L(K)}),F=new p(L=>typeof L!="function"?L:function(ee,K,ae){let W=!1,te,$=new Promise(Te=>{te=function(Y){W=!0,Te(Y)}}),fe;try{fe=L(ee,K,te)}catch(Te){fe=Promise.reject(Te)}const pe=fe!==!0&&g(fe);if(fe!==!0&&!pe&&!W)return!1;const Ee=Te=>{Te.then(Y=>{ae(Y)},Y=>{let de;Y&&(Y instanceof Error||typeof Y.message=="string")?de=Y.message:de="An unexpected error occurred",ae({__mozWebExtensionPolyfillReject__:!0,message:de})}).catch(Y=>{console.error("Failed to send onMessage rejected reply",Y)})};return Ee(pe?fe:$),!0}),J=({reject:L,resolve:U},ee)=>{c.runtime.lastError?c.runtime.lastError.message===i?U():L(new Error(c.runtime.lastError.message)):ee&&ee.__mozWebExtensionPolyfillReject__?L(new Error(ee.message)):U(ee)},b=(L,U,ee,...K)=>{if(K.length<U.minArgs)throw new Error(`Expected at least ${U.minArgs} ${v(U.minArgs)} for ${L}(), got ${K.length}`);if(K.length>U.maxArgs)throw new Error(`Expected at most ${U.maxArgs} ${v(U.maxArgs)} for ${L}(), got ${K.length}`);return new Promise((ae,W)=>{const te=J.bind(null,{resolve:ae,reject:W});K.push(te),ee.sendMessage(...K)})},q={devtools:{network:{onRequestFinished:M(I)}},runtime:{onMessage:M(F),onMessageExternal:M(F),sendMessage:b.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:b.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},X={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return f.privacy={network:{"*":X},services:{"*":X},websites:{"*":X}},k(c,q,f)};o.exports=l(chrome)}})})(Bt)),Bt.exports}var Pm=km();const Co=wt(Pm);function gr(t,...e){}const es={debug:(...t)=>gr(console.debug,...t),log:(...t)=>gr(console.log,...t),warn:(...t)=>gr(console.warn,...t),error:(...t)=>gr(console.error,...t)},zr=class zr extends Event{constructor(e,o){super(zr.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=o}};qn(zr,"EVENT_NAME",ns("wxt:locationchange"));let ts=zr;function ns(t){var e;return`${(e=Co==null?void 0:Co.runtime)==null?void 0:e.id}:gemini:${t}`}function Mm(t){let e,o;return{run(){e==null&&(o=new URL(location.href),e=t.setInterval(()=>{let i=new URL(location.href);i.href!==o.href&&(window.dispatchEvent(new ts(i,o)),o=i)},1e3))}}}const ko=class ko{constructor(e,o){qn(this,"isTopFrame",window.self===window.top);qn(this,"abortController");qn(this,"locationWatcher",Mm(this));qn(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=o,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return Co.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,o){const i=setInterval(()=>{this.isValid&&e()},o);return this.onInvalidated(()=>clearInterval(i)),i}setTimeout(e,o){const i=setTimeout(()=>{this.isValid&&e()},o);return this.onInvalidated(()=>clearTimeout(i)),i}requestAnimationFrame(e){const o=requestAnimationFrame((...i)=>{this.isValid&&e(...i)});return this.onInvalidated(()=>cancelAnimationFrame(o)),o}requestIdleCallback(e,o){const i=requestIdleCallback((...l)=>{this.signal.aborted||e(...l)},o);return this.onInvalidated(()=>cancelIdleCallback(i)),i}addEventListener(e,o,i,l){var c;o==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(c=e.addEventListener)==null||c.call(e,o.startsWith("wxt:")?ns(o):o,i,{...l,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),es.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:ko.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var c,f,p;const o=((c=e.data)==null?void 0:c.type)===ko.SCRIPT_STARTED_MESSAGE_TYPE,i=((f=e.data)==null?void 0:f.contentScriptName)===this.contentScriptName,l=!this.receivedMessageIds.has((p=e.data)==null?void 0:p.messageId);return o&&i&&l}listenForNewerScripts(e){let o=!0;const i=l=>{if(this.verifyScriptStartedEvent(l)){this.receivedMessageIds.add(l.data.messageId);const c=o;if(o=!1,c&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",i),this.onInvalidated(()=>removeEventListener("message",i))}};qn(ko,"SCRIPT_STARTED_MESSAGE_TYPE",ns("wxt:content-script-started"));let os=ko;const Dm=Symbol("null");let Fm=0;class Lm extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[o,i]of e)this.set(o,i)}}_getPublicKeys(e,o=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const i=this._getPrivateKey(e,o);let l;return i&&this._publicKeys.has(i)?l=this._publicKeys.get(i):o&&(l=[...e],this._publicKeys.set(i,l)),{privateKey:i,publicKey:l}}_getPrivateKey(e,o=!1){const i=[];for(let l of e){l===null&&(l=Dm);const c=typeof l=="object"||typeof l=="function"?"_objectHashes":typeof l=="symbol"?"_symbolHashes":!1;if(!c)i.push(l);else if(this[c].has(l))i.push(this[c].get(l));else if(o){const f=`@@mkm-ref-${Fm++}@@`;this[c].set(l,f),i.push(f)}else return!1}return JSON.stringify(i)}set(e,o){const{publicKey:i}=this._getPublicKeys(e,!0);return super.set(i,o)}get(e){const{publicKey:o}=this._getPublicKeys(e);return super.get(o)}has(e){const{publicKey:o}=this._getPublicKeys(e);return super.has(o)}delete(e){const{publicKey:o,privateKey:i}=this._getPublicKeys(e);return!!(o&&super.delete(o)&&this._publicKeys.delete(i))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}function rs(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function is(t,e,o=".",i){if(!rs(e))return is(t,{},o,i);const l=Object.assign({},e);for(const c in t){if(c==="__proto__"||c==="constructor")continue;const f=t[c];f!=null&&(i&&i(l,c,f,o)||(Array.isArray(f)&&Array.isArray(l[c])?l[c]=[...f,...l[c]]:rs(f)&&rs(l[c])?l[c]=is(f,l[c],(o?`${o}.`:"")+c.toString(),i):l[c]=f))}return l}function Um(t){return(...e)=>e.reduce((o,i)=>is(o,i,"",t),{})}const bm=Um(),Ha=t=>t!==null?{isDetected:!0,result:t}:{isDetected:!1},Vm=t=>t===null?{isDetected:!0,result:null}:{isDetected:!1},Gm=()=>({target:globalThis.document,unifyProcess:!0,detector:Ha,observeConfigs:{childList:!0,subtree:!0,attributes:!0},signal:void 0,customMatcher:void 0}),qm=(t,e)=>bm(t,e),ss=new Lm;function Hm(t){const{defaultOptions:e}=t;return(o,i)=>{const{target:l,unifyProcess:c,observeConfigs:f,detector:p,signal:g,customMatcher:h}=qm(i,e),v=[o,l,c,f,p,g,h],E=ss.get(v);if(c&&E)return E;const _=new Promise(async(w,k)=>{if(g!=null&&g.aborted)return k(g.reason);const M=new MutationObserver(async F=>{for(const J of F){if(g!=null&&g.aborted){M.disconnect();break}const b=await Ba({selector:o,target:l,detector:p,customMatcher:h});if(b.isDetected){M.disconnect(),w(b.result);break}}});g==null||g.addEventListener("abort",()=>(M.disconnect(),k(g.reason)),{once:!0});const I=await Ba({selector:o,target:l,detector:p,customMatcher:h});if(I.isDetected)return w(I.result);M.observe(l,f)}).finally(()=>{ss.delete(v)});return ss.set(v,_),_}}async function Ba({target:t,selector:e,detector:o,customMatcher:i}){const l=i?i(e):t.querySelector(e);return await o(l)}const Bm=Hm({defaultOptions:Gm()});var ls,$a;function $m(){if($a)return ls;$a=1;var t=/^[a-z](?:[\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-(?:[\x2D\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,e=function(o){return t.test(o)};return ls=e,ls}var zm=$m();const Om=wt(zm);var Jm=(t,e,o)=>new Promise((i,l)=>{var c=g=>{try{p(o.next(g))}catch(h){l(h)}},f=g=>{try{p(o.throw(g))}catch(h){l(h)}},p=g=>g.done?i(g.value):Promise.resolve(g.value).then(c,f);p((o=o.apply(t,e)).next())}),Wm=["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"];function Km(t){return Jm(this,null,function*(){const{name:e,mode:o="closed",css:i,isolateEvents:l=!1}=t;if(!Wm.includes(e)&&!Om(e))throw Error(`"${e}" cannot have a shadow root attached to it. It must be two words and kebab-case, with a few exceptions. See https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow#elements_you_can_attach_a_shadow_to`);const c=document.createElement(e),f=c.attachShadow({mode:o}),p=document.createElement("html"),g=document.createElement("body"),h=document.createElement("head");if(i){const v=document.createElement("style");"url"in i?v.textContent=yield fetch(i.url).then(E=>E.text()):v.textContent=i.textContent,h.appendChild(v)}return p.appendChild(h),p.appendChild(g),f.appendChild(p),l&&(Array.isArray(l)?l:["keydown","keyup","keypress"]).forEach(E=>{g.addEventListener(E,_=>_.stopPropagation())}),{parentElement:c,shadow:f,isolatedElement:g}})}async function Ym(t,e){var v;const o=[e.css??""];if(((v=t.options)==null?void 0:v.cssInjectionMode)==="ui"){const E=await eh();o.push(E.replaceAll(":root",":host"))}const{isolatedElement:i,parentElement:l,shadow:c}=await Km({name:e.name,css:{textContent:o.join(`
`).trim()},mode:e.mode??"open",isolateEvents:e.isolateEvents});l.setAttribute("data-wxt-shadow-root","");let f;const p=()=>{Xm(l,e),Qm(l,c.querySelector("html"),e),f=e.onMount(i,c,l)},g=()=>{var E;for((E=e.onRemove)==null||E.call(e,f),l.remove();i.lastChild;)i.removeChild(i.lastChild);f=void 0},h=Zm({mount:p,remove:g},e);return t.onInvalidated(g),{shadow:c,shadowHost:l,uiContainer:i,...h,get mounted(){return f}}}function Qm(t,e,o){var i,l;o.position!=="inline"&&(o.zIndex!=null&&(t.style.zIndex=String(o.zIndex)),t.style.overflow="visible",t.style.position="relative",t.style.width="0",t.style.height="0",t.style.display="block",e&&(o.position==="overlay"?(e.style.position="absolute",(i=o.alignment)!=null&&i.startsWith("bottom-")?e.style.bottom="0":e.style.top="0",(l=o.alignment)!=null&&l.endsWith("-right")?e.style.right="0":e.style.left="0"):(e.style.position="fixed",e.style.top="0",e.style.bottom="0",e.style.left="0",e.style.right="0")))}function as(t){if(t.anchor==null)return document.body;let e=typeof t.anchor=="function"?t.anchor():t.anchor;return typeof e=="string"?e.startsWith("/")?document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue??void 0:document.querySelector(e)??void 0:e??void 0}function Xm(t,e){var i,l;const o=as(e);if(o==null)throw Error("Failed to mount content script UI: could not find anchor element");switch(e.append){case void 0:case"last":o.append(t);break;case"first":o.prepend(t);break;case"replace":o.replaceWith(t);break;case"after":(i=o.parentElement)==null||i.insertBefore(t,o.nextElementSibling);break;case"before":(l=o.parentElement)==null||l.insertBefore(t,o);break;default:e.append(o,t);break}}function Zm(t,e){let o;const i=()=>{o==null||o.stopAutoMount(),o=void 0},l=()=>{t.mount()},c=t.remove;return{mount:l,remove:()=>{i(),t.remove()},autoMount:g=>{o&&es.warn("autoMount is already set."),o=jm({mount:l,unmount:c,stopAutoMount:i},{...e,...g})}}}function jm(t,e){const o=new AbortController,i="explicit_stop_auto_mount",l=()=>{var p;o.abort(i),(p=e.onStop)==null||p.call(e)};let c=typeof e.anchor=="function"?e.anchor():e.anchor;if(c instanceof Element)throw Error("autoMount and Element anchor option cannot be combined. Avoid passing `Element` directly or `() => Element` to the anchor.");async function f(p){let g=!!as(e);for(g&&t.mount();!o.signal.aborted;)try{g=!!await Bm(p??"body",{customMatcher:()=>as(e)??null,detector:g?Vm:Ha,signal:o.signal}),g?t.mount():(t.unmount(),e.once&&t.stopAutoMount())}catch(h){if(o.signal.aborted&&o.signal.reason===i)break;throw h}}return f(c),{stopAutoMount:l}}async function eh(){const t=Co.runtime.getURL("/content-scripts/gemini.css");try{return await(await fetch(t)).text()}catch(e){return es.warn(`Failed to load styles @ ${t}. Did you forget to import the stylesheet in your entrypoint?`,e),""}}var us={exports:{}},wo={},cs={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var za;function th(){if(za)return Ce;za=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function _(N){return N===null||typeof N!="object"?null:(N=E&&N[E]||N["@@iterator"],typeof N=="function"?N:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,M={};function I(N,V,z){this.props=N,this.context=V,this.refs=M,this.updater=z||w}I.prototype.isReactComponent={},I.prototype.setState=function(N,V){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,V,"setState")},I.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function F(){}F.prototype=I.prototype;function J(N,V,z){this.props=N,this.context=V,this.refs=M,this.updater=z||w}var b=J.prototype=new F;b.constructor=J,k(b,I.prototype),b.isPureReactComponent=!0;var q=Array.isArray,X=Object.prototype.hasOwnProperty,L={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function ee(N,V,z){var B,Z={},re=null,ce=null;if(V!=null)for(B in V.ref!==void 0&&(ce=V.ref),V.key!==void 0&&(re=""+V.key),V)X.call(V,B)&&!U.hasOwnProperty(B)&&(Z[B]=V[B]);var _e=arguments.length-2;if(_e===1)Z.children=z;else if(1<_e){for(var Se=Array(_e),Pe=0;Pe<_e;Pe++)Se[Pe]=arguments[Pe+2];Z.children=Se}if(N&&N.defaultProps)for(B in _e=N.defaultProps,_e)Z[B]===void 0&&(Z[B]=_e[B]);return{$$typeof:t,type:N,key:re,ref:ce,props:Z,_owner:L.current}}function K(N,V){return{$$typeof:t,type:N.type,key:V,ref:N.ref,props:N.props,_owner:N._owner}}function ae(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function W(N){var V={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(z){return V[z]})}var te=/\/+/g;function $(N,V){return typeof N=="object"&&N!==null&&N.key!=null?W(""+N.key):V.toString(36)}function fe(N,V,z,B,Z){var re=typeof N;(re==="undefined"||re==="boolean")&&(N=null);var ce=!1;if(N===null)ce=!0;else switch(re){case"string":case"number":ce=!0;break;case"object":switch(N.$$typeof){case t:case e:ce=!0}}if(ce)return ce=N,Z=Z(ce),N=B===""?"."+$(ce,0):B,q(Z)?(z="",N!=null&&(z=N.replace(te,"$&/")+"/"),fe(Z,V,z,"",function(Pe){return Pe})):Z!=null&&(ae(Z)&&(Z=K(Z,z+(!Z.key||ce&&ce.key===Z.key?"":(""+Z.key).replace(te,"$&/")+"/")+N)),V.push(Z)),1;if(ce=0,B=B===""?".":B+":",q(N))for(var _e=0;_e<N.length;_e++){re=N[_e];var Se=B+$(re,_e);ce+=fe(re,V,z,Se,Z)}else if(Se=_(N),typeof Se=="function")for(N=Se.call(N),_e=0;!(re=N.next()).done;)re=re.value,Se=B+$(re,_e++),ce+=fe(re,V,z,Se,Z);else if(re==="object")throw V=String(N),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return ce}function pe(N,V,z){if(N==null)return N;var B=[],Z=0;return fe(N,B,"","",function(re){return V.call(z,re,Z++)}),B}function Ee(N){if(N._status===-1){var V=N._result;V=V(),V.then(function(z){(N._status===0||N._status===-1)&&(N._status=1,N._result=z)},function(z){(N._status===0||N._status===-1)&&(N._status=2,N._result=z)}),N._status===-1&&(N._status=0,N._result=V)}if(N._status===1)return N._result.default;throw N._result}var Te={current:null},Y={transition:null},de={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:Y,ReactCurrentOwner:L};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:pe,forEach:function(N,V,z){pe(N,function(){V.apply(this,arguments)},z)},count:function(N){var V=0;return pe(N,function(){V++}),V},toArray:function(N){return pe(N,function(V){return V})||[]},only:function(N){if(!ae(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ce.Component=I,Ce.Fragment=o,Ce.Profiler=l,Ce.PureComponent=J,Ce.StrictMode=i,Ce.Suspense=g,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Ce.act=oe,Ce.cloneElement=function(N,V,z){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var B=k({},N.props),Z=N.key,re=N.ref,ce=N._owner;if(V!=null){if(V.ref!==void 0&&(re=V.ref,ce=L.current),V.key!==void 0&&(Z=""+V.key),N.type&&N.type.defaultProps)var _e=N.type.defaultProps;for(Se in V)X.call(V,Se)&&!U.hasOwnProperty(Se)&&(B[Se]=V[Se]===void 0&&_e!==void 0?_e[Se]:V[Se])}var Se=arguments.length-2;if(Se===1)B.children=z;else if(1<Se){_e=Array(Se);for(var Pe=0;Pe<Se;Pe++)_e[Pe]=arguments[Pe+2];B.children=_e}return{$$typeof:t,type:N.type,key:Z,ref:re,props:B,_owner:ce}},Ce.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:c,_context:N},N.Consumer=N},Ce.createElement=ee,Ce.createFactory=function(N){var V=ee.bind(null,N);return V.type=N,V},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(N){return{$$typeof:p,render:N}},Ce.isValidElement=ae,Ce.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:Ee}},Ce.memo=function(N,V){return{$$typeof:h,type:N,compare:V===void 0?null:V}},Ce.startTransition=function(N){var V=Y.transition;Y.transition={};try{N()}finally{Y.transition=V}},Ce.unstable_act=oe,Ce.useCallback=function(N,V){return Te.current.useCallback(N,V)},Ce.useContext=function(N){return Te.current.useContext(N)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(N){return Te.current.useDeferredValue(N)},Ce.useEffect=function(N,V){return Te.current.useEffect(N,V)},Ce.useId=function(){return Te.current.useId()},Ce.useImperativeHandle=function(N,V,z){return Te.current.useImperativeHandle(N,V,z)},Ce.useInsertionEffect=function(N,V){return Te.current.useInsertionEffect(N,V)},Ce.useLayoutEffect=function(N,V){return Te.current.useLayoutEffect(N,V)},Ce.useMemo=function(N,V){return Te.current.useMemo(N,V)},Ce.useReducer=function(N,V,z){return Te.current.useReducer(N,V,z)},Ce.useRef=function(N){return Te.current.useRef(N)},Ce.useState=function(N){return Te.current.useState(N)},Ce.useSyncExternalStore=function(N,V,z){return Te.current.useSyncExternalStore(N,V,z)},Ce.useTransition=function(){return Te.current.useTransition()},Ce.version="18.3.1",Ce}var Oa;function ds(){return Oa||(Oa=1,cs.exports=th()),cs.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja;function nh(){if(Ja)return wo;Ja=1;var t=ds(),e=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,h){var v,E={},_=null,w=null;h!==void 0&&(_=""+h),g.key!==void 0&&(_=""+g.key),g.ref!==void 0&&(w=g.ref);for(v in g)i.call(g,v)&&!c.hasOwnProperty(v)&&(E[v]=g[v]);if(p&&p.defaultProps)for(v in g=p.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:p,key:_,ref:w,props:E,_owner:l.current}}return wo.Fragment=o,wo.jsx=f,wo.jsxs=f,wo}var Wa;function oh(){return Wa||(Wa=1,us.exports=nh()),us.exports}var T=oh(),ge=ds();/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ih=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,o,i)=>i?i.toUpperCase():o.toLowerCase()),Ka=t=>{const e=ih(t);return e.charAt(0).toUpperCase()+e.slice(1)},Ya=(...t)=>t.filter((e,o,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===o).join(" ").trim(),sh=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=ge.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:f,...p},g)=>ge.createElement("svg",{ref:g,...lh,width:e,height:e,stroke:t,strokeWidth:i?Number(o)*24/Number(e):o,className:Ya("lucide",l),...!c&&!sh(p)&&{"aria-hidden":"true"},...p},[...f.map(([h,v])=>ge.createElement(h,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(t,e)=>{const o=ge.forwardRef(({className:i,...l},c)=>ge.createElement(ah,{ref:c,iconNode:e,className:Ya(`lucide-${rh(Ka(t))}`,`lucide-${t}`,i),...l}));return o.displayName=Ka(t),o};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=we("book-marked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=we("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=we("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=we("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=we("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=we("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=we("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=we("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=we("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=we("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=we("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=we("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=we("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=we("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=we("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=we("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=we("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=we("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=we("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=we("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=we("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=we("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=we("panel-right",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=we("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=we("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=we("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=we("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=we("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=we("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=we("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=we("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=we("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=we("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=we("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=we("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=we("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=we("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=we("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var At=(t=>(t.IDLE="IDLE",t.PROCESSING="PROCESSING",t.COMPLETED="COMPLETED",t.FAILED="FAILED",t.PAUSED="PAUSED",t))(At||{}),tn=(t=>(t.LEFT="LEFT",t.RIGHT="RIGHT",t))(tn||{}),vr=(t=>(t.FLASH="gemini-2.0-flash-preview-image-generation",t.PRO="imagen-3.0-generate-002",t))(vr||{}),Ao=(t=>(t.LIGHT="LIGHT",t.DARK="DARK",t))(Ao||{}),Ut=(t=>(t.GET_QUEUE="GET_QUEUE",t.UPDATE_QUEUE="UPDATE_QUEUE",t.GET_SETTINGS="GET_SETTINGS",t.UPDATE_SETTINGS="UPDATE_SETTINGS",t.GET_FOLDERS="GET_FOLDERS",t.UPDATE_FOLDERS="UPDATE_FOLDERS",t.PROCESS_QUEUE="PROCESS_QUEUE",t.STOP_PROCESSING="STOP_PROCESSING",t.GENERATE_IMAGE="GENERATE_IMAGE",t.OPEN_SIDE_PANEL="OPEN_SIDE_PANEL",t.PASTE_PROMPT="PASTE_PROMPT",t.ENABLE_IMAGE_CREATION="ENABLE_IMAGE_CREATION",t.SUBMIT_PROMPT="SUBMIT_PROMPT",t.PROMPT_SUBMITTED="PROMPT_SUBMITTED",t.GENERATION_COMPLETE="GENERATION_COMPLETE",t.CONTENT_SCRIPT_READY="CONTENT_SCRIPT_READY",t))(Ut||{});const rt={QUEUE:"nano_flow_queue",SETTINGS:"nano_flow_settings",FOLDERS:"nano_flow_folders",ONBOARDING_COMPLETE:"nano_flow_onboarding_complete"},ys={prefix:"",suffix:"",position:tn.LEFT,primaryModel:vr.FLASH,dripFeed:!1,autoCaption:!0,globalNegatives:"extra fingers, deformed limbs, blurry, low resolution",globalNegativesEnabled:!0,theme:Ao.DARK},bh=[{id:"1",name:"Cinematic",isOpen:!0,templates:[{id:"t1",name:"8K Realistic",text:"hyper-realistic, 8k resolution, cinematic lighting",createdAt:Date.now(),lastEditedAt:Date.now(),timesUsed:0,images:[]}]},{id:"2",name:"Anime",isOpen:!1,templates:[{id:"t2",name:"Studio Ghibli",text:"hand-drawn anime style, ghibli aesthetics, soft colors",createdAt:Date.now(),lastEditedAt:Date.now(),timesUsed:0,images:[]}]}];async function Er(t){try{return(await chrome.storage.local.get(t))[t]??null}catch(e){return console.error(`Error getting ${t} from storage:`,e),null}}async function _r(t,e){try{return await chrome.storage.local.set({[t]:e}),!0}catch(o){return console.error(`Error setting ${t} in storage:`,o),!1}}async function Vh(){return await Er(rt.QUEUE)??[]}async function Sr(t){return _r(rt.QUEUE,t)}async function ja(){const t=await Er(rt.SETTINGS);return{...ys,...t}}async function Gh(t){return _r(rt.SETTINGS,t)}async function qh(){return await Er(rt.FOLDERS)??bh}async function wn(t){return _r(rt.FOLDERS,t)}async function Hh(){return await Er(rt.ONBOARDING_COMPLETE)??!1}async function Bh(t){return _r(rt.ONBOARDING_COMPLETE,t)}async function $h(){return(await ja()).apiKey}function zh(t){const e=(o,i)=>{i==="local"&&t(o)};return chrome.storage.onChanged.addListener(e),()=>{chrome.storage.onChanged.removeListener(e)}}const Oh=({isOpen:t,isDark:e,currentKey:o,onClose:i,onSave:l})=>{const[c,f]=ge.useState(o||""),[p,g]=ge.useState(!1),h=()=>{c.trim()&&(l(c.trim()),i())};return t?T.jsx("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center bg-black/80 backdrop-blur-md p-2",children:T.jsxs("div",{className:`max-w-md w-full p-2 rounded-md border shadow-2xl ${e?"glass-panel border-white/10":"bg-white border-slate-200"}`,children:[T.jsxs("div",{className:"flex items-center justify-between p-2",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Xa,{size:18,className:"text-blue-500"}),T.jsx("h2",{className:"text-sm font-black",children:"API Key Configuration"})]}),T.jsx("button",{onClick:i,className:"p-1 hover:bg-white/5 rounded-md transition-all",children:T.jsx(en,{size:18})})]}),T.jsxs("div",{className:"p-2 space-y-3",children:[T.jsxs("div",{className:`p-2 rounded-md border text-[10px] leading-tight ${e?"bg-white/5 border-white/5 opacity-70":"bg-slate-50 border-slate-100"}`,children:[T.jsx("p",{className:"mb-2",children:"Get your Gemini API key from Google AI Studio. Your key is stored locally and never sent to external servers."}),T.jsxs("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",children:["Get API Key ",T.jsx(hh,{size:10})]})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-[10px] font-black uppercase opacity-40 ml-1",children:"Gemini API Key"}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:p?"text":"password",value:c,onChange:v=>f(v.target.value),placeholder:"AIzaSy...",className:`w-full p-2 pr-10 rounded-md outline-none border font-mono text-xs ${e?"bg-black/40 border-white/10":"bg-slate-50 border-slate-200"}`}),T.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 opacity-40 hover:opacity-100",children:p?T.jsx(gh,{size:14}):T.jsx(yh,{size:14})})]})]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:i,className:`flex-1 p-2 rounded-md font-black text-xs border ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:"Cancel"}),T.jsx("button",{onClick:h,disabled:!c.trim(),className:"flex-1 p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-md font-black text-xs shadow-lg disabled:opacity-50",children:"Save Key"})]})]})]})}):null},Jh=({isOpen:t,isDark:e,onClose:o,onUpload:i})=>{const l=ge.useRef(null),c=()=>{const p=`Prompt,Template Modifier
A cyberpunk city,hyper-realistic 8k resolution
A majestic dragon,anime studio ghibli style
A cozy cabin,winter forest background`,g=new Blob([p],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a"),v=URL.createObjectURL(g);h.setAttribute("href",v),h.setAttribute("download","nano_flow_template.csv"),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(v)},f=p=>{var v;const g=(v=p.target.files)==null?void 0:v[0];if(!g)return;const h=new FileReader;h.onload=E=>{var M;const w=((M=E.target)==null?void 0:M.result).split(`
`),k=[];w.forEach(I=>{var q,X;const F=I.split(","),J=(q=F[0])==null?void 0:q.trim(),b=(X=F[1])==null?void 0:X.trim();J&&J.toLowerCase()!=="prompt"&&k.push({prompt:J,modifier:b})}),i(k),o()},h.readAsText(g),l.current&&(l.current.value="")};return t?T.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center bg-black/80 backdrop-blur-md p-2",children:T.jsxs("div",{className:`max-w-md w-full p-2 rounded-md border shadow-2xl ${e?"glass-panel border-white/10":"bg-white border-slate-200"}`,children:[T.jsxs("div",{className:"flex items-center justify-between p-2",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(vh,{size:18,className:"text-blue-500"}),T.jsx("h2",{className:"text-sm font-black",children:"Import Batch"})]}),T.jsx("button",{onClick:o,className:"p-1 hover:bg-white/5 rounded-md transition-all",children:T.jsx(en,{size:18})})]}),T.jsxs("div",{className:"p-2 space-y-2",children:[T.jsxs("div",{className:`p-2 rounded-md border text-[10px] leading-tight ${e?"bg-white/5 border-white/5 opacity-70":"bg-slate-50 border-slate-100"}`,children:[T.jsxs("div",{className:"flex items-center gap-1 font-black uppercase tracking-widest mb-1",children:[T.jsx(Th,{size:10})," CSV Guide"]}),"Format: Prompt, Modifiers (Optional)."]}),T.jsxs("button",{onClick:c,className:`w-full p-2 rounded-md font-black text-xs flex items-center justify-center gap-2 border ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[T.jsx(Qa,{size:16})," Get Template"]}),T.jsxs("button",{onClick:()=>{var p;return(p=l.current)==null?void 0:p.click()},className:"w-full p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-md font-black text-xs flex items-center justify-center gap-2 shadow-lg",children:[T.jsx(hs,{size:16})," Upload CSV"]}),T.jsx("input",{ref:l,type:"file",accept:".csv",className:"hidden",onChange:f})]})]})}):null},Wh=({onComplete:t,isDark:e})=>{const[o,i]=ge.useState(0),l=[{title:"Welcome to Nano Flow",description:"A high-performance bulk image generation engine designed to unlock Gemini's creative potential at scale.",icon:T.jsx(ms,{className:"text-blue-500",size:40})},{title:"The Queue Engine",description:"Paste dozens of prompts or upload a CSV. Use the selection toolbar to weight specific words for the AI.",icon:T.jsx(ps,{className:"text-amber-500",size:40})},{title:"Style Library",description:"Manage custom modifiers, instructions, and reference assets in folders. Apply them to your queue in one click.",icon:T.jsx(fs,{className:"text-emerald-500",size:40})},{title:"AI Prompt Optimization",description:"Use the magic wand icons to let Gemini analyze and improve your library prompts automatically for better results.",icon:T.jsx(gs,{className:"text-amber-400",size:40})},{title:"Flash vs Pro",description:"Toggle between ultra-fast Flash 2.0 and high-fidelity Imagen 3 models in your application settings.",icon:T.jsx(Uh,{className:"text-purple-500",size:40})}];return T.jsx("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/80 backdrop-blur-md p-2",children:T.jsx("div",{className:`max-w-md w-full p-6 rounded-md border shadow-2xl animate-in fade-in zoom-in-95 duration-300 ${e?"glass-panel border-white/10":"bg-white border-slate-200"}`,children:T.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[T.jsx("div",{className:"p-3 bg-white/5 rounded-md shadow-inner border border-white/5 mb-2",children:l[o].icon}),T.jsx("h2",{className:"text-xl font-black tracking-tight",children:l[o].title}),T.jsx("p",{className:"text-sm opacity-60 leading-relaxed font-medium min-h-[60px]",children:l[o].description}),T.jsx("div",{className:"flex gap-1 mb-4",children:l.map((c,f)=>T.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${o===f?"bg-blue-500 w-4":"bg-white/10"}`},f))}),T.jsxs("div",{className:"w-full flex gap-2",children:[o>0?T.jsxs("button",{onClick:()=>i(c=>c-1),className:"flex-1 p-2 rounded-md border border-white/10 text-[10px] font-black uppercase tracking-widest hover:bg-white/5 transition-all flex items-center justify-center gap-2",children:[T.jsx(dh,{size:14})," Back"]}):T.jsx("button",{onClick:t,className:"flex-1 p-2 rounded-md border border-white/10 text-[10px] font-black uppercase opacity-40 hover:opacity-100 transition-all",children:"Skip"}),o<l.length-1?T.jsxs("button",{onClick:()=>i(c=>c+1),className:"flex-[2] p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-md font-black text-[10px] uppercase tracking-widest shadow-lg shadow-blue-600/20 flex items-center justify-center gap-2",children:["Next ",T.jsx(fh,{size:14})]}):T.jsxs("button",{onClick:t,className:"flex-[2] p-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-md font-black text-[10px] uppercase tracking-widest shadow-lg shadow-emerald-600/20 flex items-center justify-center gap-2",children:["Get Started ",T.jsx(ph,{size:14})]})]})]})})})},Kh={[At.IDLE]:"bg-gray-500/20 text-gray-400",[At.PROCESSING]:"bg-blue-500/20 text-blue-400 animate-pulse",[At.COMPLETED]:"bg-emerald-500/20 text-emerald-400",[At.FAILED]:"bg-red-500/20 text-red-400",[At.PAUSED]:"bg-amber-500/20 text-amber-400"},Yh=({status:t})=>T.jsx("div",{className:`px-2 py-0.5 rounded-md text-[9px] font-black uppercase tracking-widest flex items-center gap-1 ${Kh[t]}`,children:t}),Qh=({queue:t,isDark:e,onAddToQueue:o,onRemoveFromQueue:i,onOpenCsvDialog:l})=>{const[c,f]=ge.useState(""),[p,g]=ge.useState([]),[h,v]=ge.useState(null),E=ge.useRef(null),_=ge.useRef(null),w=()=>{if(E.current){const F=E.current.selectionStart,J=E.current.selectionEnd,b=E.current.value.substring(F,J);b.trim().length>0?v({start:F,end:J,text:b}):v(null)}},k=F=>{if(!h||!E.current)return;const{start:J,end:b,text:q}=h,X=E.current.value;let L="";switch(F){case"standard":L=`(${q}:1.2)`;break;case"heavy":L=`((${q}:1.5))`;break;case"ultra":L=`(((${q}:1.8)))`;break;case"echo":L=`${q}... ${q}`;break}const U=X.substring(0,J)+L+X.substring(b);f(U),v(null),E.current.focus()},M=F=>{Array.from(F.target.files||[]).forEach(b=>{const q=new FileReader;q.onload=X=>{var U;const L=(U=X.target)==null?void 0:U.result;g(ee=>[...ee,L])},q.readAsDataURL(b)}),F.target.value=""},I=()=>{o(c,void 0,p),f(""),g([])};return T.jsxs("div",{className:"space-y-2 animate-in fade-in duration-300",children:[T.jsxs("div",{className:"flex items-center justify-between px-1",children:[T.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest opacity-40",children:"New Prompt"}),T.jsxs("div",{className:"flex gap-1",children:[T.jsx("button",{onClick:()=>{var F;return(F=_.current)==null?void 0:F.click()},className:`p-1.5 rounded-md border transition-all ${e?"bg-white/5 border-white/10":"bg-white border-slate-200 shadow-sm"} ${p.length>0?"text-blue-500 bg-blue-500/10 border-blue-500/30":"opacity-40 hover:opacity-100"}`,children:T.jsx(uh,{size:14})}),T.jsx("button",{onClick:l,className:`p-1.5 rounded-md border transition-all ${e?"bg-white/5 border-white/10":"bg-white border-slate-200 shadow-sm"} opacity-40 hover:opacity-100`,children:T.jsx(hs,{size:14})}),T.jsx("input",{ref:_,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:M})]})]}),T.jsxs("div",{className:"relative",children:[T.jsx("textarea",{ref:E,value:c,onChange:F=>f(F.target.value),onSelect:w,placeholder:"Enter image instructions...",className:`w-full p-2 text-xs min-h-[140px] rounded-md border outline-none transition-all no-scrollbar leading-relaxed ${e?"bg-black/40 border-white/10 focus:border-blue-500/50":"bg-slate-50 border-slate-200 focus:border-blue-500/50 shadow-inner"}`}),h&&T.jsxs("div",{className:"absolute top-0 right-0 -translate-y-full mb-1 flex gap-1 p-1 bg-blue-600 rounded-md shadow-2xl animate-in fade-in slide-in-from-bottom-1 z-50",children:[T.jsx("button",{onClick:()=>k("standard"),title:"Focus",className:"p-1 hover:bg-white/10 rounded-md",children:T.jsx(Lh,{size:12})}),T.jsx("button",{onClick:()=>k("heavy"),title:"Emphasis",className:"p-1 hover:bg-white/10 rounded-md",children:T.jsx(Ch,{size:12})}),T.jsx("button",{onClick:()=>k("echo"),title:"Highlight",className:"p-1 hover:bg-white/10 rounded-md",children:T.jsx(Fh,{size:12})}),T.jsx("button",{onClick:()=>v(null),className:"p-1 hover:bg-white/10 rounded-md border-l border-white/20",children:T.jsx(en,{size:12})})]}),p.length>0&&T.jsx("div",{className:"absolute left-1 bottom-1 flex gap-1 p-1 bg-black/60 rounded-md overflow-x-auto max-w-[160px] no-scrollbar",children:p.map((F,J)=>T.jsxs("div",{className:"relative shrink-0",children:[T.jsx("img",{src:F,className:"w-8 h-8 rounded-md object-cover",alt:"ref"}),T.jsx("button",{onClick:()=>g(b=>b.filter((q,X)=>X!==J)),className:"absolute -top-1 -right-1 bg-red-600 text-white rounded-md p-0.5",children:T.jsx(en,{size:6})})]},J))}),T.jsx("button",{onClick:I,className:"absolute right-2 bottom-2 bg-blue-600 text-white px-3 py-1 rounded-md text-[10px] font-black uppercase shadow-lg shadow-blue-600/30 active:scale-95 transition-all",children:"Add to Queue"})]}),T.jsx("div",{className:"pt-2 space-y-1",children:t.length===0?T.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-10 gap-2 border-2 border-dashed border-white/5 rounded-md",children:[T.jsx(ps,{size:24}),T.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Queue Empty"})]}):t.map(F=>T.jsxs("div",{className:`p-2 rounded-md border group transition-all ${e?"bg-white/2 border-white/5":"bg-white border-slate-100 shadow-sm"}`,children:[T.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T.jsx(Yh,{status:F.status}),T.jsx("button",{onClick:()=>i(F.id),className:"opacity-0 group-hover:opacity-100 text-red-500/40 hover:text-red-500 transition-all p-1",children:T.jsx(yr,{size:12})})]}),T.jsxs("p",{className:"text-[10px] font-medium leading-tight line-clamp-2 opacity-80",children:['"',F.originalPrompt,'"']}),F.images&&F.images.length>0&&T.jsx("div",{className:"flex gap-1 mt-2",children:F.images.slice(0,4).map((J,b)=>T.jsx("img",{src:J,className:"w-6 h-6 rounded-md object-cover border border-white/5",alt:"ref"},b))})]},F.id))})]})};var Tr={},vs={exports:{}},it={},Es={exports:{}},_s={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eu;function Xh(){return eu||(eu=1,(function(t){function e(Y,de){var oe=Y.length;Y.push(de);e:for(;0<oe;){var N=oe-1>>>1,V=Y[N];if(0<l(V,de))Y[N]=de,Y[oe]=V,oe=N;else break e}}function o(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var de=Y[0],oe=Y.pop();if(oe!==de){Y[0]=oe;e:for(var N=0,V=Y.length,z=V>>>1;N<z;){var B=2*(N+1)-1,Z=Y[B],re=B+1,ce=Y[re];if(0>l(Z,oe))re<V&&0>l(ce,Z)?(Y[N]=ce,Y[re]=oe,N=re):(Y[N]=Z,Y[B]=oe,N=B);else if(re<V&&0>l(ce,oe))Y[N]=ce,Y[re]=oe,N=re;else break e}}return de}function l(Y,de){var oe=Y.sortIndex-de.sortIndex;return oe!==0?oe:Y.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var g=[],h=[],v=1,E=null,_=3,w=!1,k=!1,M=!1,I=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var de=o(h);de!==null;){if(de.callback===null)i(h);else if(de.startTime<=Y)i(h),de.sortIndex=de.expirationTime,e(g,de);else break;de=o(h)}}function q(Y){if(M=!1,b(Y),!k)if(o(g)!==null)k=!0,Ee(X);else{var de=o(h);de!==null&&Te(q,de.startTime-Y)}}function X(Y,de){k=!1,M&&(M=!1,F(ee),ee=-1),w=!0;var oe=_;try{for(b(de),E=o(g);E!==null&&(!(E.expirationTime>de)||Y&&!W());){var N=E.callback;if(typeof N=="function"){E.callback=null,_=E.priorityLevel;var V=N(E.expirationTime<=de);de=t.unstable_now(),typeof V=="function"?E.callback=V:E===o(g)&&i(g),b(de)}else i(g);E=o(g)}if(E!==null)var z=!0;else{var B=o(h);B!==null&&Te(q,B.startTime-de),z=!1}return z}finally{E=null,_=oe,w=!1}}var L=!1,U=null,ee=-1,K=5,ae=-1;function W(){return!(t.unstable_now()-ae<K)}function te(){if(U!==null){var Y=t.unstable_now();ae=Y;var de=!0;try{de=U(!0,Y)}finally{de?$():(L=!1,U=null)}}else L=!1}var $;if(typeof J=="function")$=function(){J(te)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,pe=fe.port2;fe.port1.onmessage=te,$=function(){pe.postMessage(null)}}else $=function(){I(te,0)};function Ee(Y){U=Y,L||(L=!0,$())}function Te(Y,de){ee=I(function(){Y(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){k||w||(k=!0,Ee(X))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return o(g)},t.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var de=3;break;default:de=_}var oe=_;_=de;try{return Y()}finally{_=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,de){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var oe=_;_=Y;try{return de()}finally{_=oe}},t.unstable_scheduleCallback=function(Y,de,oe){var N=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?N+oe:N):oe=N,Y){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=oe+V,Y={id:v++,callback:de,priorityLevel:Y,startTime:oe,expirationTime:V,sortIndex:-1},oe>N?(Y.sortIndex=oe,e(h,Y),o(g)===null&&Y===o(h)&&(M?(F(ee),ee=-1):M=!0,Te(q,oe-N))):(Y.sortIndex=V,e(g,Y),k||w||(k=!0,Ee(X))),Y},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(Y){var de=_;return function(){var oe=_;_=de;try{return Y.apply(this,arguments)}finally{_=oe}}}})(_s)),_s}var tu;function Zh(){return tu||(tu=1,Es.exports=Xh()),Es.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nu;function jh(){if(nu)return it;nu=1;var t=ds(),e=Zh();function o(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function c(n,r){f(n,r),f(n+"Capture",r)}function f(n,r){for(l[n]=r,n=0;n<r.length;n++)i.add(r[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function _(n){return g.call(E,n)?!0:g.call(v,n)?!1:h.test(n)?E[n]=!0:(v[n]=!0,!1)}function w(n,r,s,d){if(s!==null&&s.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return d?!1:s!==null?!s.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k(n,r,s,d){if(r===null||typeof r>"u"||w(n,r,s,d))return!0;if(d)return!1;if(s!==null)switch(s.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function M(n,r,s,d,m,y,S){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=s,this.propertyName=n,this.type=r,this.sanitizeURL=y,this.removeEmptyString=S}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){I[n]=new M(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];I[r]=new M(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){I[n]=new M(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){I[n]=new M(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){I[n]=new M(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){I[n]=new M(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){I[n]=new M(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){I[n]=new M(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){I[n]=new M(n,5,!1,n.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function J(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(F,J);I[r]=new M(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(F,J);I[r]=new M(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(F,J);I[r]=new M(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){I[n]=new M(n,1,!1,n.toLowerCase(),null,!1,!1)}),I.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){I[n]=new M(n,1,!1,n.toLowerCase(),null,!0,!0)});function b(n,r,s,d){var m=I.hasOwnProperty(r)?I[r]:null;(m!==null?m.type!==0:d||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(k(r,s,m,d)&&(s=null),d||m===null?_(r)&&(s===null?n.removeAttribute(r):n.setAttribute(r,""+s)):m.mustUseProperty?n[m.propertyName]=s===null?m.type===3?!1:"":s:(r=m.attributeName,d=m.attributeNamespace,s===null?n.removeAttribute(r):(m=m.type,s=m===3||m===4&&s===!0?"":""+s,d?n.setAttributeNS(d,r,s):n.setAttribute(r,s))))}var q=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),L=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),W=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),Y=Symbol.iterator;function de(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,N;function V(n){if(N===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+n}var z=!1;function B(n,r){if(!n||z)return"";z=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(D){var d=D}Reflect.construct(n,[],r)}else{try{r.call()}catch(D){d=D}n.call(r.prototype)}else{try{throw Error()}catch(D){d=D}n()}}catch(D){if(D&&d&&typeof D.stack=="string"){for(var m=D.stack.split(`
`),y=d.stack.split(`
`),S=m.length-1,C=y.length-1;1<=S&&0<=C&&m[S]!==y[C];)C--;for(;1<=S&&0<=C;S--,C--)if(m[S]!==y[C]){if(S!==1||C!==1)do if(S--,C--,0>C||m[S]!==y[C]){var A=`
`+m[S].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=S&&0<=C);break}}}finally{z=!1,Error.prepareStackTrace=s}return(n=n?n.displayName||n.name:"")?V(n):""}function Z(n){switch(n.tag){case 5:return V(n.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return n=B(n.type,!1),n;case 11:return n=B(n.type.render,!1),n;case 1:return n=B(n.type,!0),n;default:return""}}function re(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case U:return"Fragment";case L:return"Portal";case K:return"Profiler";case ee:return"StrictMode";case $:return"Suspense";case fe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case W:return(n.displayName||"Context")+".Consumer";case ae:return(n._context.displayName||"Context")+".Provider";case te:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case pe:return r=n.displayName||null,r!==null?r:re(n.type)||"Memo";case Ee:r=n._payload,n=n._init;try{return re(n(r))}catch{}}return null}function ce(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(r);case 8:return r===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function _e(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Se(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Pe(n){var r=Se(n)?"checked":"value",s=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),d=""+n[r];if(!n.hasOwnProperty(r)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var m=s.get,y=s.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return m.call(this)},set:function(S){d=""+S,y.call(this,S)}}),Object.defineProperty(n,r,{enumerable:s.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Qn(n){n._valueTracker||(n._valueTracker=Pe(n))}function Fd(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var s=r.getValue(),d="";return n&&(d=Se(n)?n.checked?"true":"false":n.value),n=d,n!==s?(r.setValue(n),!0):!1}function Or(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ws(n,r){var s=r.checked;return oe({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??n._wrapperState.initialChecked})}function Ld(n,r){var s=r.defaultValue==null?"":r.defaultValue,d=r.checked!=null?r.checked:r.defaultChecked;s=_e(r.value!=null?r.value:s),n._wrapperState={initialChecked:d,initialValue:s,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ud(n,r){r=r.checked,r!=null&&b(n,"checked",r,!1)}function Ks(n,r){Ud(n,r);var s=_e(r.value),d=r.type;if(s!=null)d==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+s):n.value!==""+s&&(n.value=""+s);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Ys(n,r.type,s):r.hasOwnProperty("defaultValue")&&Ys(n,r.type,_e(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function bd(n,r,s){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var d=r.type;if(!(d!=="submit"&&d!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,s||r===n.value||(n.value=r),n.defaultValue=r}s=n.name,s!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,s!==""&&(n.name=s)}function Ys(n,r,s){(r!=="number"||Or(n.ownerDocument)!==n)&&(s==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+s&&(n.defaultValue=""+s))}var Po=Array.isArray;function Xn(n,r,s,d){if(n=n.options,r){r={};for(var m=0;m<s.length;m++)r["$"+s[m]]=!0;for(s=0;s<n.length;s++)m=r.hasOwnProperty("$"+n[s].value),n[s].selected!==m&&(n[s].selected=m),m&&d&&(n[s].defaultSelected=!0)}else{for(s=""+_e(s),r=null,m=0;m<n.length;m++){if(n[m].value===s){n[m].selected=!0,d&&(n[m].defaultSelected=!0);return}r!==null||n[m].disabled||(r=n[m])}r!==null&&(r.selected=!0)}}function Qs(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(o(91));return oe({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Vd(n,r){var s=r.value;if(s==null){if(s=r.children,r=r.defaultValue,s!=null){if(r!=null)throw Error(o(92));if(Po(s)){if(1<s.length)throw Error(o(93));s=s[0]}r=s}r==null&&(r=""),s=r}n._wrapperState={initialValue:_e(s)}}function Gd(n,r){var s=_e(r.value),d=_e(r.defaultValue);s!=null&&(s=""+s,s!==n.value&&(n.value=s),r.defaultValue==null&&n.defaultValue!==s&&(n.defaultValue=s)),d!=null&&(n.defaultValue=""+d)}function qd(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Hd(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xs(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Hd(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Jr,Bd=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,s,d,m){MSApp.execUnsafeLocalFunction(function(){return n(r,s,d,m)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Jr=Jr||document.createElement("div"),Jr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Jr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Mo(n,r){if(r){var s=n.firstChild;if(s&&s===n.lastChild&&s.nodeType===3){s.nodeValue=r;return}}n.textContent=r}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TT=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(n){TT.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Do[r]=Do[n]})});function $d(n,r,s){return r==null||typeof r=="boolean"||r===""?"":s||typeof r!="number"||r===0||Do.hasOwnProperty(n)&&Do[n]?(""+r).trim():r+"px"}function zd(n,r){n=n.style;for(var s in r)if(r.hasOwnProperty(s)){var d=s.indexOf("--")===0,m=$d(s,r[s],d);s==="float"&&(s="cssFloat"),d?n.setProperty(s,m):n[s]=m}}var CT=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zs(n,r){if(r){if(CT[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(o(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(o(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(o(61))}if(r.style!=null&&typeof r.style!="object")throw Error(o(62))}}function js(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var el=null;function tl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var nl=null,Zn=null,jn=null;function Od(n){if(n=tr(n)){if(typeof nl!="function")throw Error(o(280));var r=n.stateNode;r&&(r=hi(r),nl(n.stateNode,n.type,r))}}function Jd(n){Zn?jn?jn.push(n):jn=[n]:Zn=n}function Wd(){if(Zn){var n=Zn,r=jn;if(jn=Zn=null,Od(n),r)for(n=0;n<r.length;n++)Od(r[n])}}function Kd(n,r){return n(r)}function Yd(){}var ol=!1;function Qd(n,r,s){if(ol)return n(r,s);ol=!0;try{return Kd(n,r,s)}finally{ol=!1,(Zn!==null||jn!==null)&&(Yd(),Wd())}}function Fo(n,r){var s=n.stateNode;if(s===null)return null;var d=hi(s);if(d===null)return null;s=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(s&&typeof s!="function")throw Error(o(231,r,typeof s));return s}var rl=!1;if(p)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){rl=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{rl=!1}function wT(n,r,s,d,m,y,S,C,A){var D=Array.prototype.slice.call(arguments,3);try{r.apply(s,D)}catch(H){this.onError(H)}}var Uo=!1,Wr=null,Kr=!1,il=null,AT={onError:function(n){Uo=!0,Wr=n}};function xT(n,r,s,d,m,y,S,C,A){Uo=!1,Wr=null,wT.apply(AT,arguments)}function IT(n,r,s,d,m,y,S,C,A){if(xT.apply(this,arguments),Uo){if(Uo){var D=Wr;Uo=!1,Wr=null}else throw Error(o(198));Kr||(Kr=!0,il=D)}}function In(n){var r=n,s=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(s=r.return),n=r.return;while(n)}return r.tag===3?s:null}function Xd(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Zd(n){if(In(n)!==n)throw Error(o(188))}function NT(n){var r=n.alternate;if(!r){if(r=In(n),r===null)throw Error(o(188));return r!==n?null:n}for(var s=n,d=r;;){var m=s.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){s=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===s)return Zd(m),n;if(y===d)return Zd(m),r;y=y.sibling}throw Error(o(188))}if(s.return!==d.return)s=m,d=y;else{for(var S=!1,C=m.child;C;){if(C===s){S=!0,s=m,d=y;break}if(C===d){S=!0,d=m,s=y;break}C=C.sibling}if(!S){for(C=y.child;C;){if(C===s){S=!0,s=y,d=m;break}if(C===d){S=!0,d=y,s=m;break}C=C.sibling}if(!S)throw Error(o(189))}}if(s.alternate!==d)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?n:r}function jd(n){return n=NT(n),n!==null?ef(n):null}function ef(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=ef(n);if(r!==null)return r;n=n.sibling}return null}var tf=e.unstable_scheduleCallback,nf=e.unstable_cancelCallback,RT=e.unstable_shouldYield,kT=e.unstable_requestPaint,Ve=e.unstable_now,PT=e.unstable_getCurrentPriorityLevel,sl=e.unstable_ImmediatePriority,of=e.unstable_UserBlockingPriority,Yr=e.unstable_NormalPriority,MT=e.unstable_LowPriority,rf=e.unstable_IdlePriority,Qr=null,bt=null;function DT(n){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Qr,n,void 0,(n.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:UT,FT=Math.log,LT=Math.LN2;function UT(n){return n>>>=0,n===0?32:31-(FT(n)/LT|0)|0}var Xr=64,Zr=4194304;function bo(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function jr(n,r){var s=n.pendingLanes;if(s===0)return 0;var d=0,m=n.suspendedLanes,y=n.pingedLanes,S=s&268435455;if(S!==0){var C=S&~m;C!==0?d=bo(C):(y&=S,y!==0&&(d=bo(y)))}else S=s&~m,S!==0?d=bo(S):y!==0&&(d=bo(y));if(d===0)return 0;if(r!==0&&r!==d&&(r&m)===0&&(m=d&-d,y=r&-r,m>=y||m===16&&(y&4194240)!==0))return r;if((d&4)!==0&&(d|=s&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=d;0<r;)s=31-Rt(r),m=1<<s,d|=n[s],r&=~m;return d}function bT(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VT(n,r){for(var s=n.suspendedLanes,d=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes;0<y;){var S=31-Rt(y),C=1<<S,A=m[S];A===-1?((C&s)===0||(C&d)!==0)&&(m[S]=bT(C,r)):A<=r&&(n.expiredLanes|=C),y&=~C}}function ll(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function sf(){var n=Xr;return Xr<<=1,(Xr&4194240)===0&&(Xr=64),n}function al(n){for(var r=[],s=0;31>s;s++)r.push(n);return r}function Vo(n,r,s){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Rt(r),n[r]=s}function GT(n,r){var s=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<s;){var m=31-Rt(s),y=1<<m;r[m]=0,d[m]=-1,n[m]=-1,s&=~y}}function ul(n,r){var s=n.entangledLanes|=r;for(n=n.entanglements;s;){var d=31-Rt(s),m=1<<d;m&r|n[d]&r&&(n[d]|=r),s&=~m}}var Ne=0;function lf(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var af,cl,uf,cf,df,dl=!1,ei=[],rn=null,sn=null,ln=null,Go=new Map,qo=new Map,an=[],qT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ff(n,r){switch(n){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":Go.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(r.pointerId)}}function Ho(n,r,s,d,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:r,domEventName:s,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},r!==null&&(r=tr(r),r!==null&&cl(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),n)}function HT(n,r,s,d,m){switch(r){case"focusin":return rn=Ho(rn,n,r,s,d,m),!0;case"dragenter":return sn=Ho(sn,n,r,s,d,m),!0;case"mouseover":return ln=Ho(ln,n,r,s,d,m),!0;case"pointerover":var y=m.pointerId;return Go.set(y,Ho(Go.get(y)||null,n,r,s,d,m)),!0;case"gotpointercapture":return y=m.pointerId,qo.set(y,Ho(qo.get(y)||null,n,r,s,d,m)),!0}return!1}function pf(n){var r=Nn(n.target);if(r!==null){var s=In(r);if(s!==null){if(r=s.tag,r===13){if(r=Xd(s),r!==null){n.blockedOn=r,df(n.priority,function(){uf(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){n.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ti(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var s=pl(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(s===null){s=n.nativeEvent;var d=new s.constructor(s.type,s);el=d,s.target.dispatchEvent(d),el=null}else return r=tr(s),r!==null&&cl(r),n.blockedOn=s,!1;r.shift()}return!0}function mf(n,r,s){ti(n)&&s.delete(r)}function BT(){dl=!1,rn!==null&&ti(rn)&&(rn=null),sn!==null&&ti(sn)&&(sn=null),ln!==null&&ti(ln)&&(ln=null),Go.forEach(mf),qo.forEach(mf)}function Bo(n,r){n.blockedOn===r&&(n.blockedOn=null,dl||(dl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,BT)))}function $o(n){function r(m){return Bo(m,n)}if(0<ei.length){Bo(ei[0],n);for(var s=1;s<ei.length;s++){var d=ei[s];d.blockedOn===n&&(d.blockedOn=null)}}for(rn!==null&&Bo(rn,n),sn!==null&&Bo(sn,n),ln!==null&&Bo(ln,n),Go.forEach(r),qo.forEach(r),s=0;s<an.length;s++)d=an[s],d.blockedOn===n&&(d.blockedOn=null);for(;0<an.length&&(s=an[0],s.blockedOn===null);)pf(s),s.blockedOn===null&&an.shift()}var eo=q.ReactCurrentBatchConfig,ni=!0;function $T(n,r,s,d){var m=Ne,y=eo.transition;eo.transition=null;try{Ne=1,fl(n,r,s,d)}finally{Ne=m,eo.transition=y}}function zT(n,r,s,d){var m=Ne,y=eo.transition;eo.transition=null;try{Ne=4,fl(n,r,s,d)}finally{Ne=m,eo.transition=y}}function fl(n,r,s,d){if(ni){var m=pl(n,r,s,d);if(m===null)kl(n,r,d,oi,s),ff(n,d);else if(HT(m,n,r,s,d))d.stopPropagation();else if(ff(n,d),r&4&&-1<qT.indexOf(n)){for(;m!==null;){var y=tr(m);if(y!==null&&af(y),y=pl(n,r,s,d),y===null&&kl(n,r,d,oi,s),y===m)break;m=y}m!==null&&d.stopPropagation()}else kl(n,r,d,null,s)}}var oi=null;function pl(n,r,s,d){if(oi=null,n=tl(d),n=Nn(n),n!==null)if(r=In(n),r===null)n=null;else if(s=r.tag,s===13){if(n=Xd(r),n!==null)return n;n=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return oi=n,null}function hf(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PT()){case sl:return 1;case of:return 4;case Yr:case MT:return 16;case rf:return 536870912;default:return 16}default:return 16}}var un=null,ml=null,ri=null;function gf(){if(ri)return ri;var n,r=ml,s=r.length,d,m="value"in un?un.value:un.textContent,y=m.length;for(n=0;n<s&&r[n]===m[n];n++);var S=s-n;for(d=1;d<=S&&r[s-d]===m[y-d];d++);return ri=m.slice(n,1<d?1-d:void 0)}function ii(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function si(){return!0}function yf(){return!1}function ft(n){function r(s,d,m,y,S){this._reactName=s,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(s=n[C],this[C]=s?s(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?si:yf,this.isPropagationStopped=yf,this}return oe(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),r}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=ft(to),zo=oe({},to,{view:0,detail:0}),OT=ft(zo),gl,yl,Oo,li=oe({},zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:El,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Oo&&(Oo&&n.type==="mousemove"?(gl=n.screenX-Oo.screenX,yl=n.screenY-Oo.screenY):yl=gl=0,Oo=n),gl)},movementY:function(n){return"movementY"in n?n.movementY:yl}}),vf=ft(li),JT=oe({},li,{dataTransfer:0}),WT=ft(JT),KT=oe({},zo,{relatedTarget:0}),vl=ft(KT),YT=oe({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),QT=ft(YT),XT=oe({},to,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ZT=ft(XT),jT=oe({},to,{data:0}),Ef=ft(jT),eC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oC(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=nC[n])?!!r[n]:!1}function El(){return oC}var rC=oe({},zo,{key:function(n){if(n.key){var r=eC[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ii(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tC[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:El,charCode:function(n){return n.type==="keypress"?ii(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ii(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),iC=ft(rC),sC=oe({},li,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_f=ft(sC),lC=oe({},zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:El}),aC=ft(lC),uC=oe({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),cC=ft(uC),dC=oe({},li,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fC=ft(dC),pC=[9,13,27,32],_l=p&&"CompositionEvent"in window,Jo=null;p&&"documentMode"in document&&(Jo=document.documentMode);var mC=p&&"TextEvent"in window&&!Jo,Sf=p&&(!_l||Jo&&8<Jo&&11>=Jo),Tf=" ",Cf=!1;function wf(n,r){switch(n){case"keyup":return pC.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Af(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var no=!1;function hC(n,r){switch(n){case"compositionend":return Af(r);case"keypress":return r.which!==32?null:(Cf=!0,Tf);case"textInput":return n=r.data,n===Tf&&Cf?null:n;default:return null}}function gC(n,r){if(no)return n==="compositionend"||!_l&&wf(n,r)?(n=gf(),ri=ml=un=null,no=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Sf&&r.locale!=="ko"?null:r.data;default:return null}}var yC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!yC[n.type]:r==="textarea"}function If(n,r,s,d){Jd(d),r=fi(r,"onChange"),0<r.length&&(s=new hl("onChange","change",null,s,d),n.push({event:s,listeners:r}))}var Wo=null,Ko=null;function vC(n){Of(n,0)}function ai(n){var r=lo(n);if(Fd(r))return n}function EC(n,r){if(n==="change")return r}var Nf=!1;if(p){var Sl;if(p){var Tl="oninput"in document;if(!Tl){var Rf=document.createElement("div");Rf.setAttribute("oninput","return;"),Tl=typeof Rf.oninput=="function"}Sl=Tl}else Sl=!1;Nf=Sl&&(!document.documentMode||9<document.documentMode)}function kf(){Wo&&(Wo.detachEvent("onpropertychange",Pf),Ko=Wo=null)}function Pf(n){if(n.propertyName==="value"&&ai(Ko)){var r=[];If(r,Ko,n,tl(n)),Qd(vC,r)}}function _C(n,r,s){n==="focusin"?(kf(),Wo=r,Ko=s,Wo.attachEvent("onpropertychange",Pf)):n==="focusout"&&kf()}function SC(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ai(Ko)}function TC(n,r){if(n==="click")return ai(r)}function CC(n,r){if(n==="input"||n==="change")return ai(r)}function wC(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var kt=typeof Object.is=="function"?Object.is:wC;function Yo(n,r){if(kt(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var s=Object.keys(n),d=Object.keys(r);if(s.length!==d.length)return!1;for(d=0;d<s.length;d++){var m=s[d];if(!g.call(r,m)||!kt(n[m],r[m]))return!1}return!0}function Mf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Df(n,r){var s=Mf(n);n=0;for(var d;s;){if(s.nodeType===3){if(d=n+s.textContent.length,n<=r&&d>=r)return{node:s,offset:r-n};n=d}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Mf(s)}}function Ff(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Ff(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Lf(){for(var n=window,r=Or();r instanceof n.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)n=r.contentWindow;else break;r=Or(n.document)}return r}function Cl(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function AC(n){var r=Lf(),s=n.focusedElem,d=n.selectionRange;if(r!==s&&s&&s.ownerDocument&&Ff(s.ownerDocument.documentElement,s)){if(d!==null&&Cl(s)){if(r=d.start,n=d.end,n===void 0&&(n=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(n,s.value.length);else if(n=(r=s.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var m=s.textContent.length,y=Math.min(d.start,m);d=d.end===void 0?y:Math.min(d.end,m),!n.extend&&y>d&&(m=d,d=y,y=m),m=Df(s,y);var S=Df(s,d);m&&S&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(r=r.createRange(),r.setStart(m.node,m.offset),n.removeAllRanges(),y>d?(n.addRange(r),n.extend(S.node,S.offset)):(r.setEnd(S.node,S.offset),n.addRange(r)))}}for(r=[],n=s;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)n=r[s],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var xC=p&&"documentMode"in document&&11>=document.documentMode,oo=null,wl=null,Qo=null,Al=!1;function Uf(n,r,s){var d=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Al||oo==null||oo!==Or(d)||(d=oo,"selectionStart"in d&&Cl(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Qo&&Yo(Qo,d)||(Qo=d,d=fi(wl,"onSelect"),0<d.length&&(r=new hl("onSelect","select",null,r,s),n.push({event:r,listeners:d}),r.target=oo)))}function ui(n,r){var s={};return s[n.toLowerCase()]=r.toLowerCase(),s["Webkit"+n]="webkit"+r,s["Moz"+n]="moz"+r,s}var ro={animationend:ui("Animation","AnimationEnd"),animationiteration:ui("Animation","AnimationIteration"),animationstart:ui("Animation","AnimationStart"),transitionend:ui("Transition","TransitionEnd")},xl={},bf={};p&&(bf=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function ci(n){if(xl[n])return xl[n];if(!ro[n])return n;var r=ro[n],s;for(s in r)if(r.hasOwnProperty(s)&&s in bf)return xl[n]=r[s];return n}var Vf=ci("animationend"),Gf=ci("animationiteration"),qf=ci("animationstart"),Hf=ci("transitionend"),Bf=new Map,$f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cn(n,r){Bf.set(n,r),c(r,[n])}for(var Il=0;Il<$f.length;Il++){var Nl=$f[Il],IC=Nl.toLowerCase(),NC=Nl[0].toUpperCase()+Nl.slice(1);cn(IC,"on"+NC)}cn(Vf,"onAnimationEnd"),cn(Gf,"onAnimationIteration"),cn(qf,"onAnimationStart"),cn("dblclick","onDoubleClick"),cn("focusin","onFocus"),cn("focusout","onBlur"),cn(Hf,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xo));function zf(n,r,s){var d=n.type||"unknown-event";n.currentTarget=s,IT(d,r,void 0,n),n.currentTarget=null}function Of(n,r){r=(r&4)!==0;for(var s=0;s<n.length;s++){var d=n[s],m=d.event;d=d.listeners;e:{var y=void 0;if(r)for(var S=d.length-1;0<=S;S--){var C=d[S],A=C.instance,D=C.currentTarget;if(C=C.listener,A!==y&&m.isPropagationStopped())break e;zf(m,C,D),y=A}else for(S=0;S<d.length;S++){if(C=d[S],A=C.instance,D=C.currentTarget,C=C.listener,A!==y&&m.isPropagationStopped())break e;zf(m,C,D),y=A}}}if(Kr)throw n=il,Kr=!1,il=null,n}function Me(n,r){var s=r[Ul];s===void 0&&(s=r[Ul]=new Set);var d=n+"__bubble";s.has(d)||(Jf(r,n,2,!1),s.add(d))}function Rl(n,r,s){var d=0;r&&(d|=4),Jf(s,n,d,r)}var di="_reactListening"+Math.random().toString(36).slice(2);function Zo(n){if(!n[di]){n[di]=!0,i.forEach(function(s){s!=="selectionchange"&&(RC.has(s)||Rl(s,!1,n),Rl(s,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[di]||(r[di]=!0,Rl("selectionchange",!1,r))}}function Jf(n,r,s,d){switch(hf(r)){case 1:var m=$T;break;case 4:m=zT;break;default:m=fl}s=m.bind(null,r,s,n),m=void 0,!rl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),d?m!==void 0?n.addEventListener(r,s,{capture:!0,passive:m}):n.addEventListener(r,s,!0):m!==void 0?n.addEventListener(r,s,{passive:m}):n.addEventListener(r,s,!1)}function kl(n,r,s,d,m){var y=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var C=d.stateNode.containerInfo;if(C===m||C.nodeType===8&&C.parentNode===m)break;if(S===4)for(S=d.return;S!==null;){var A=S.tag;if((A===3||A===4)&&(A=S.stateNode.containerInfo,A===m||A.nodeType===8&&A.parentNode===m))return;S=S.return}for(;C!==null;){if(S=Nn(C),S===null)return;if(A=S.tag,A===5||A===6){d=y=S;continue e}C=C.parentNode}}d=d.return}Qd(function(){var D=y,H=tl(s),O=[];e:{var G=Bf.get(n);if(G!==void 0){var ne=hl,se=n;switch(n){case"keypress":if(ii(s)===0)break e;case"keydown":case"keyup":ne=iC;break;case"focusin":se="focus",ne=vl;break;case"focusout":se="blur",ne=vl;break;case"beforeblur":case"afterblur":ne=vl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=vf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=WT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=aC;break;case Vf:case Gf:case qf:ne=QT;break;case Hf:ne=cC;break;case"scroll":ne=OT;break;case"wheel":ne=fC;break;case"copy":case"cut":case"paste":ne=ZT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=_f}var le=(r&4)!==0,Ge=!le&&n==="scroll",R=le?G!==null?G+"Capture":null:G;le=[];for(var x=D,P;x!==null;){P=x;var Q=P.stateNode;if(P.tag===5&&Q!==null&&(P=Q,R!==null&&(Q=Fo(x,R),Q!=null&&le.push(jo(x,Q,P)))),Ge)break;x=x.return}0<le.length&&(G=new ne(G,se,null,s,H),O.push({event:G,listeners:le}))}}if((r&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",G&&s!==el&&(se=s.relatedTarget||s.fromElement)&&(Nn(se)||se[Jt]))break e;if((ne||G)&&(G=H.window===H?H:(G=H.ownerDocument)?G.defaultView||G.parentWindow:window,ne?(se=s.relatedTarget||s.toElement,ne=D,se=se?Nn(se):null,se!==null&&(Ge=In(se),se!==Ge||se.tag!==5&&se.tag!==6)&&(se=null)):(ne=null,se=D),ne!==se)){if(le=vf,Q="onMouseLeave",R="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(le=_f,Q="onPointerLeave",R="onPointerEnter",x="pointer"),Ge=ne==null?G:lo(ne),P=se==null?G:lo(se),G=new le(Q,x+"leave",ne,s,H),G.target=Ge,G.relatedTarget=P,Q=null,Nn(H)===D&&(le=new le(R,x+"enter",se,s,H),le.target=P,le.relatedTarget=Ge,Q=le),Ge=Q,ne&&se)t:{for(le=ne,R=se,x=0,P=le;P;P=io(P))x++;for(P=0,Q=R;Q;Q=io(Q))P++;for(;0<x-P;)le=io(le),x--;for(;0<P-x;)R=io(R),P--;for(;x--;){if(le===R||R!==null&&le===R.alternate)break t;le=io(le),R=io(R)}le=null}else le=null;ne!==null&&Wf(O,G,ne,le,!1),se!==null&&Ge!==null&&Wf(O,Ge,se,le,!0)}}e:{if(G=D?lo(D):window,ne=G.nodeName&&G.nodeName.toLowerCase(),ne==="select"||ne==="input"&&G.type==="file")var ue=EC;else if(xf(G))if(Nf)ue=CC;else{ue=SC;var me=_C}else(ne=G.nodeName)&&ne.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ue=TC);if(ue&&(ue=ue(n,D))){If(O,ue,s,H);break e}me&&me(n,G,D),n==="focusout"&&(me=G._wrapperState)&&me.controlled&&G.type==="number"&&Ys(G,"number",G.value)}switch(me=D?lo(D):window,n){case"focusin":(xf(me)||me.contentEditable==="true")&&(oo=me,wl=D,Qo=null);break;case"focusout":Qo=wl=oo=null;break;case"mousedown":Al=!0;break;case"contextmenu":case"mouseup":case"dragend":Al=!1,Uf(O,s,H);break;case"selectionchange":if(xC)break;case"keydown":case"keyup":Uf(O,s,H)}var he;if(_l)e:{switch(n){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else no?wf(n,s)&&(ye="onCompositionEnd"):n==="keydown"&&s.keyCode===229&&(ye="onCompositionStart");ye&&(Sf&&s.locale!=="ko"&&(no||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&no&&(he=gf()):(un=H,ml="value"in un?un.value:un.textContent,no=!0)),me=fi(D,ye),0<me.length&&(ye=new Ef(ye,n,null,s,H),O.push({event:ye,listeners:me}),he?ye.data=he:(he=Af(s),he!==null&&(ye.data=he)))),(he=mC?hC(n,s):gC(n,s))&&(D=fi(D,"onBeforeInput"),0<D.length&&(H=new Ef("onBeforeInput","beforeinput",null,s,H),O.push({event:H,listeners:D}),H.data=he))}Of(O,r)})}function jo(n,r,s){return{instance:n,listener:r,currentTarget:s}}function fi(n,r){for(var s=r+"Capture",d=[];n!==null;){var m=n,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Fo(n,s),y!=null&&d.unshift(jo(n,y,m)),y=Fo(n,r),y!=null&&d.push(jo(n,y,m))),n=n.return}return d}function io(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wf(n,r,s,d,m){for(var y=r._reactName,S=[];s!==null&&s!==d;){var C=s,A=C.alternate,D=C.stateNode;if(A!==null&&A===d)break;C.tag===5&&D!==null&&(C=D,m?(A=Fo(s,y),A!=null&&S.unshift(jo(s,A,C))):m||(A=Fo(s,y),A!=null&&S.push(jo(s,A,C)))),s=s.return}S.length!==0&&n.push({event:r,listeners:S})}var kC=/\r\n?/g,PC=/\u0000|\uFFFD/g;function Kf(n){return(typeof n=="string"?n:""+n).replace(kC,`
`).replace(PC,"")}function pi(n,r,s){if(r=Kf(r),Kf(n)!==r&&s)throw Error(o(425))}function mi(){}var Pl=null,Ml=null;function Dl(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Fl=typeof setTimeout=="function"?setTimeout:void 0,MC=typeof clearTimeout=="function"?clearTimeout:void 0,Yf=typeof Promise=="function"?Promise:void 0,DC=typeof queueMicrotask=="function"?queueMicrotask:typeof Yf<"u"?function(n){return Yf.resolve(null).then(n).catch(FC)}:Fl;function FC(n){setTimeout(function(){throw n})}function Ll(n,r){var s=r,d=0;do{var m=s.nextSibling;if(n.removeChild(s),m&&m.nodeType===8)if(s=m.data,s==="/$"){if(d===0){n.removeChild(m),$o(r);return}d--}else s!=="$"&&s!=="$?"&&s!=="$!"||d++;s=m}while(s);$o(r)}function dn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Qf(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var s=n.data;if(s==="$"||s==="$!"||s==="$?"){if(r===0)return n;r--}else s==="/$"&&r++}n=n.previousSibling}return null}var so=Math.random().toString(36).slice(2),Vt="__reactFiber$"+so,er="__reactProps$"+so,Jt="__reactContainer$"+so,Ul="__reactEvents$"+so,LC="__reactListeners$"+so,UC="__reactHandles$"+so;function Nn(n){var r=n[Vt];if(r)return r;for(var s=n.parentNode;s;){if(r=s[Jt]||s[Vt]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(n=Qf(n);n!==null;){if(s=n[Vt])return s;n=Qf(n)}return r}n=s,s=n.parentNode}return null}function tr(n){return n=n[Vt]||n[Jt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function lo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(o(33))}function hi(n){return n[er]||null}var bl=[],ao=-1;function fn(n){return{current:n}}function De(n){0>ao||(n.current=bl[ao],bl[ao]=null,ao--)}function Re(n,r){ao++,bl[ao]=n.current,n.current=r}var pn={},Qe=fn(pn),lt=fn(!1),Rn=pn;function uo(n,r){var s=n.type.contextTypes;if(!s)return pn;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===r)return d.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in s)m[y]=r[y];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=m),m}function at(n){return n=n.childContextTypes,n!=null}function gi(){De(lt),De(Qe)}function Xf(n,r,s){if(Qe.current!==pn)throw Error(o(168));Re(Qe,r),Re(lt,s)}function Zf(n,r,s){var d=n.stateNode;if(r=r.childContextTypes,typeof d.getChildContext!="function")return s;d=d.getChildContext();for(var m in d)if(!(m in r))throw Error(o(108,ce(n)||"Unknown",m));return oe({},s,d)}function yi(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||pn,Rn=Qe.current,Re(Qe,n),Re(lt,lt.current),!0}function jf(n,r,s){var d=n.stateNode;if(!d)throw Error(o(169));s?(n=Zf(n,r,Rn),d.__reactInternalMemoizedMergedChildContext=n,De(lt),De(Qe),Re(Qe,n)):De(lt),Re(lt,s)}var Wt=null,vi=!1,Vl=!1;function ep(n){Wt===null?Wt=[n]:Wt.push(n)}function bC(n){vi=!0,ep(n)}function mn(){if(!Vl&&Wt!==null){Vl=!0;var n=0,r=Ne;try{var s=Wt;for(Ne=1;n<s.length;n++){var d=s[n];do d=d(!0);while(d!==null)}Wt=null,vi=!1}catch(m){throw Wt!==null&&(Wt=Wt.slice(n+1)),tf(sl,mn),m}finally{Ne=r,Vl=!1}}return null}var co=[],fo=0,Ei=null,_i=0,vt=[],Et=0,kn=null,Kt=1,Yt="";function Pn(n,r){co[fo++]=_i,co[fo++]=Ei,Ei=n,_i=r}function tp(n,r,s){vt[Et++]=Kt,vt[Et++]=Yt,vt[Et++]=kn,kn=n;var d=Kt;n=Yt;var m=32-Rt(d)-1;d&=~(1<<m),s+=1;var y=32-Rt(r)+m;if(30<y){var S=m-m%5;y=(d&(1<<S)-1).toString(32),d>>=S,m-=S,Kt=1<<32-Rt(r)+m|s<<m|d,Yt=y+n}else Kt=1<<y|s<<m|d,Yt=n}function Gl(n){n.return!==null&&(Pn(n,1),tp(n,1,0))}function ql(n){for(;n===Ei;)Ei=co[--fo],co[fo]=null,_i=co[--fo],co[fo]=null;for(;n===kn;)kn=vt[--Et],vt[Et]=null,Yt=vt[--Et],vt[Et]=null,Kt=vt[--Et],vt[Et]=null}var pt=null,mt=null,Fe=!1,Pt=null;function np(n,r){var s=Ct(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=n,r=n.deletions,r===null?(n.deletions=[s],n.flags|=16):r.push(s)}function op(n,r){switch(n.tag){case 5:var s=n.type;return r=r.nodeType!==1||s.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,pt=n,mt=dn(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,pt=n,mt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(s=kn!==null?{id:Kt,overflow:Yt}:null,n.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=Ct(18,null,null,0),s.stateNode=r,s.return=n,n.child=s,pt=n,mt=null,!0):!1;default:return!1}}function Hl(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Bl(n){if(Fe){var r=mt;if(r){var s=r;if(!op(n,r)){if(Hl(n))throw Error(o(418));r=dn(s.nextSibling);var d=pt;r&&op(n,r)?np(d,s):(n.flags=n.flags&-4097|2,Fe=!1,pt=n)}}else{if(Hl(n))throw Error(o(418));n.flags=n.flags&-4097|2,Fe=!1,pt=n}}}function rp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;pt=n}function Si(n){if(n!==pt)return!1;if(!Fe)return rp(n),Fe=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Dl(n.type,n.memoizedProps)),r&&(r=mt)){if(Hl(n))throw ip(),Error(o(418));for(;r;)np(n,r),r=dn(r.nextSibling)}if(rp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var s=n.data;if(s==="/$"){if(r===0){mt=dn(n.nextSibling);break e}r--}else s!=="$"&&s!=="$!"&&s!=="$?"||r++}n=n.nextSibling}mt=null}}else mt=pt?dn(n.stateNode.nextSibling):null;return!0}function ip(){for(var n=mt;n;)n=dn(n.nextSibling)}function po(){mt=pt=null,Fe=!1}function $l(n){Pt===null?Pt=[n]:Pt.push(n)}var VC=q.ReactCurrentBatchConfig;function nr(n,r,s){if(n=s.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(o(309));var d=s.stateNode}if(!d)throw Error(o(147,n));var m=d,y=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===y?r.ref:(r=function(S){var C=m.refs;S===null?delete C[y]:C[y]=S},r._stringRef=y,r)}if(typeof n!="string")throw Error(o(284));if(!s._owner)throw Error(o(290,n))}return n}function Ti(n,r){throw n=Object.prototype.toString.call(r),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function sp(n){var r=n._init;return r(n._payload)}function lp(n){function r(R,x){if(n){var P=R.deletions;P===null?(R.deletions=[x],R.flags|=16):P.push(x)}}function s(R,x){if(!n)return null;for(;x!==null;)r(R,x),x=x.sibling;return null}function d(R,x){for(R=new Map;x!==null;)x.key!==null?R.set(x.key,x):R.set(x.index,x),x=x.sibling;return R}function m(R,x){return R=Tn(R,x),R.index=0,R.sibling=null,R}function y(R,x,P){return R.index=P,n?(P=R.alternate,P!==null?(P=P.index,P<x?(R.flags|=2,x):P):(R.flags|=2,x)):(R.flags|=1048576,x)}function S(R){return n&&R.alternate===null&&(R.flags|=2),R}function C(R,x,P,Q){return x===null||x.tag!==6?(x=Fa(P,R.mode,Q),x.return=R,x):(x=m(x,P),x.return=R,x)}function A(R,x,P,Q){var ue=P.type;return ue===U?H(R,x,P.props.children,Q,P.key):x!==null&&(x.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Ee&&sp(ue)===x.type)?(Q=m(x,P.props),Q.ref=nr(R,x,P),Q.return=R,Q):(Q=Ji(P.type,P.key,P.props,null,R.mode,Q),Q.ref=nr(R,x,P),Q.return=R,Q)}function D(R,x,P,Q){return x===null||x.tag!==4||x.stateNode.containerInfo!==P.containerInfo||x.stateNode.implementation!==P.implementation?(x=La(P,R.mode,Q),x.return=R,x):(x=m(x,P.children||[]),x.return=R,x)}function H(R,x,P,Q,ue){return x===null||x.tag!==7?(x=Gn(P,R.mode,Q,ue),x.return=R,x):(x=m(x,P),x.return=R,x)}function O(R,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Fa(""+x,R.mode,P),x.return=R,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case X:return P=Ji(x.type,x.key,x.props,null,R.mode,P),P.ref=nr(R,null,x),P.return=R,P;case L:return x=La(x,R.mode,P),x.return=R,x;case Ee:var Q=x._init;return O(R,Q(x._payload),P)}if(Po(x)||de(x))return x=Gn(x,R.mode,P,null),x.return=R,x;Ti(R,x)}return null}function G(R,x,P,Q){var ue=x!==null?x.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return ue!==null?null:C(R,x,""+P,Q);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case X:return P.key===ue?A(R,x,P,Q):null;case L:return P.key===ue?D(R,x,P,Q):null;case Ee:return ue=P._init,G(R,x,ue(P._payload),Q)}if(Po(P)||de(P))return ue!==null?null:H(R,x,P,Q,null);Ti(R,P)}return null}function ne(R,x,P,Q,ue){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return R=R.get(P)||null,C(x,R,""+Q,ue);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case X:return R=R.get(Q.key===null?P:Q.key)||null,A(x,R,Q,ue);case L:return R=R.get(Q.key===null?P:Q.key)||null,D(x,R,Q,ue);case Ee:var me=Q._init;return ne(R,x,P,me(Q._payload),ue)}if(Po(Q)||de(Q))return R=R.get(P)||null,H(x,R,Q,ue,null);Ti(x,Q)}return null}function se(R,x,P,Q){for(var ue=null,me=null,he=x,ye=x=0,Je=null;he!==null&&ye<P.length;ye++){he.index>ye?(Je=he,he=null):Je=he.sibling;var Ie=G(R,he,P[ye],Q);if(Ie===null){he===null&&(he=Je);break}n&&he&&Ie.alternate===null&&r(R,he),x=y(Ie,x,ye),me===null?ue=Ie:me.sibling=Ie,me=Ie,he=Je}if(ye===P.length)return s(R,he),Fe&&Pn(R,ye),ue;if(he===null){for(;ye<P.length;ye++)he=O(R,P[ye],Q),he!==null&&(x=y(he,x,ye),me===null?ue=he:me.sibling=he,me=he);return Fe&&Pn(R,ye),ue}for(he=d(R,he);ye<P.length;ye++)Je=ne(he,R,ye,P[ye],Q),Je!==null&&(n&&Je.alternate!==null&&he.delete(Je.key===null?ye:Je.key),x=y(Je,x,ye),me===null?ue=Je:me.sibling=Je,me=Je);return n&&he.forEach(function(Cn){return r(R,Cn)}),Fe&&Pn(R,ye),ue}function le(R,x,P,Q){var ue=de(P);if(typeof ue!="function")throw Error(o(150));if(P=ue.call(P),P==null)throw Error(o(151));for(var me=ue=null,he=x,ye=x=0,Je=null,Ie=P.next();he!==null&&!Ie.done;ye++,Ie=P.next()){he.index>ye?(Je=he,he=null):Je=he.sibling;var Cn=G(R,he,Ie.value,Q);if(Cn===null){he===null&&(he=Je);break}n&&he&&Cn.alternate===null&&r(R,he),x=y(Cn,x,ye),me===null?ue=Cn:me.sibling=Cn,me=Cn,he=Je}if(Ie.done)return s(R,he),Fe&&Pn(R,ye),ue;if(he===null){for(;!Ie.done;ye++,Ie=P.next())Ie=O(R,Ie.value,Q),Ie!==null&&(x=y(Ie,x,ye),me===null?ue=Ie:me.sibling=Ie,me=Ie);return Fe&&Pn(R,ye),ue}for(he=d(R,he);!Ie.done;ye++,Ie=P.next())Ie=ne(he,R,ye,Ie.value,Q),Ie!==null&&(n&&Ie.alternate!==null&&he.delete(Ie.key===null?ye:Ie.key),x=y(Ie,x,ye),me===null?ue=Ie:me.sibling=Ie,me=Ie);return n&&he.forEach(function(yw){return r(R,yw)}),Fe&&Pn(R,ye),ue}function Ge(R,x,P,Q){if(typeof P=="object"&&P!==null&&P.type===U&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case X:e:{for(var ue=P.key,me=x;me!==null;){if(me.key===ue){if(ue=P.type,ue===U){if(me.tag===7){s(R,me.sibling),x=m(me,P.props.children),x.return=R,R=x;break e}}else if(me.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Ee&&sp(ue)===me.type){s(R,me.sibling),x=m(me,P.props),x.ref=nr(R,me,P),x.return=R,R=x;break e}s(R,me);break}else r(R,me);me=me.sibling}P.type===U?(x=Gn(P.props.children,R.mode,Q,P.key),x.return=R,R=x):(Q=Ji(P.type,P.key,P.props,null,R.mode,Q),Q.ref=nr(R,x,P),Q.return=R,R=Q)}return S(R);case L:e:{for(me=P.key;x!==null;){if(x.key===me)if(x.tag===4&&x.stateNode.containerInfo===P.containerInfo&&x.stateNode.implementation===P.implementation){s(R,x.sibling),x=m(x,P.children||[]),x.return=R,R=x;break e}else{s(R,x);break}else r(R,x);x=x.sibling}x=La(P,R.mode,Q),x.return=R,R=x}return S(R);case Ee:return me=P._init,Ge(R,x,me(P._payload),Q)}if(Po(P))return se(R,x,P,Q);if(de(P))return le(R,x,P,Q);Ti(R,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,x!==null&&x.tag===6?(s(R,x.sibling),x=m(x,P),x.return=R,R=x):(s(R,x),x=Fa(P,R.mode,Q),x.return=R,R=x),S(R)):s(R,x)}return Ge}var mo=lp(!0),ap=lp(!1),Ci=fn(null),wi=null,ho=null,zl=null;function Ol(){zl=ho=wi=null}function Jl(n){var r=Ci.current;De(Ci),n._currentValue=r}function Wl(n,r,s){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===s)break;n=n.return}}function go(n,r){wi=n,zl=ho=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(ut=!0),n.firstContext=null)}function _t(n){var r=n._currentValue;if(zl!==n)if(n={context:n,memoizedValue:r,next:null},ho===null){if(wi===null)throw Error(o(308));ho=n,wi.dependencies={lanes:0,firstContext:n}}else ho=ho.next=n;return r}var Mn=null;function Kl(n){Mn===null?Mn=[n]:Mn.push(n)}function up(n,r,s,d){var m=r.interleaved;return m===null?(s.next=s,Kl(r)):(s.next=m.next,m.next=s),r.interleaved=s,Qt(n,d)}function Qt(n,r){n.lanes|=r;var s=n.alternate;for(s!==null&&(s.lanes|=r),s=n,n=n.return;n!==null;)n.childLanes|=r,s=n.alternate,s!==null&&(s.childLanes|=r),s=n,n=n.return;return s.tag===3?s.stateNode:null}var hn=!1;function Yl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cp(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Xt(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function gn(n,r,s){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Ae&2)!==0){var m=d.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),d.pending=r,Qt(n,s)}return m=d.interleaved,m===null?(r.next=r,Kl(d)):(r.next=m.next,m.next=r),d.interleaved=r,Qt(n,s)}function Ai(n,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var d=r.lanes;d&=n.pendingLanes,s|=d,r.lanes=s,ul(n,s)}}function dp(n,r){var s=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,s===d)){var m=null,y=null;if(s=s.firstBaseUpdate,s!==null){do{var S={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};y===null?m=y=S:y=y.next=S,s=s.next}while(s!==null);y===null?m=y=r:y=y.next=r}else m=y=r;s={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,effects:d.effects},n.updateQueue=s;return}n=s.lastBaseUpdate,n===null?s.firstBaseUpdate=r:n.next=r,s.lastBaseUpdate=r}function xi(n,r,s,d){var m=n.updateQueue;hn=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var A=C,D=A.next;A.next=null,S===null?y=D:S.next=D,S=A;var H=n.alternate;H!==null&&(H=H.updateQueue,C=H.lastBaseUpdate,C!==S&&(C===null?H.firstBaseUpdate=D:C.next=D,H.lastBaseUpdate=A))}if(y!==null){var O=m.baseState;S=0,H=D=A=null,C=y;do{var G=C.lane,ne=C.eventTime;if((d&G)===G){H!==null&&(H=H.next={eventTime:ne,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var se=n,le=C;switch(G=r,ne=s,le.tag){case 1:if(se=le.payload,typeof se=="function"){O=se.call(ne,O,G);break e}O=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=le.payload,G=typeof se=="function"?se.call(ne,O,G):se,G==null)break e;O=oe({},O,G);break e;case 2:hn=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,G=m.effects,G===null?m.effects=[C]:G.push(C))}else ne={eventTime:ne,lane:G,tag:C.tag,payload:C.payload,callback:C.callback,next:null},H===null?(D=H=ne,A=O):H=H.next=ne,S|=G;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;G=C,C=G.next,G.next=null,m.lastBaseUpdate=G,m.shared.pending=null}}while(!0);if(H===null&&(A=O),m.baseState=A,m.firstBaseUpdate=D,m.lastBaseUpdate=H,r=m.shared.interleaved,r!==null){m=r;do S|=m.lane,m=m.next;while(m!==r)}else y===null&&(m.shared.lanes=0);Ln|=S,n.lanes=S,n.memoizedState=O}}function fp(n,r,s){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var d=n[r],m=d.callback;if(m!==null){if(d.callback=null,d=s,typeof m!="function")throw Error(o(191,m));m.call(d)}}}var or={},Gt=fn(or),rr=fn(or),ir=fn(or);function Dn(n){if(n===or)throw Error(o(174));return n}function Ql(n,r){switch(Re(ir,r),Re(rr,n),Re(Gt,or),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Xs(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=Xs(r,n)}De(Gt),Re(Gt,r)}function yo(){De(Gt),De(rr),De(ir)}function pp(n){Dn(ir.current);var r=Dn(Gt.current),s=Xs(r,n.type);r!==s&&(Re(rr,n),Re(Gt,s))}function Xl(n){rr.current===n&&(De(Gt),De(rr))}var Le=fn(0);function Ii(n){for(var r=n;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Zl=[];function jl(){for(var n=0;n<Zl.length;n++)Zl[n]._workInProgressVersionPrimary=null;Zl.length=0}var Ni=q.ReactCurrentDispatcher,ea=q.ReactCurrentBatchConfig,Fn=0,Ue=null,He=null,ze=null,Ri=!1,sr=!1,lr=0,GC=0;function Xe(){throw Error(o(321))}function ta(n,r){if(r===null)return!1;for(var s=0;s<r.length&&s<n.length;s++)if(!kt(n[s],r[s]))return!1;return!0}function na(n,r,s,d,m,y){if(Fn=y,Ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ni.current=n===null||n.memoizedState===null?$C:zC,n=s(d,m),sr){y=0;do{if(sr=!1,lr=0,25<=y)throw Error(o(301));y+=1,ze=He=null,r.updateQueue=null,Ni.current=OC,n=s(d,m)}while(sr)}if(Ni.current=Mi,r=He!==null&&He.next!==null,Fn=0,ze=He=Ue=null,Ri=!1,r)throw Error(o(300));return n}function oa(){var n=lr!==0;return lr=0,n}function qt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Ue.memoizedState=ze=n:ze=ze.next=n,ze}function St(){if(He===null){var n=Ue.alternate;n=n!==null?n.memoizedState:null}else n=He.next;var r=ze===null?Ue.memoizedState:ze.next;if(r!==null)ze=r,He=n;else{if(n===null)throw Error(o(310));He=n,n={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},ze===null?Ue.memoizedState=ze=n:ze=ze.next=n}return ze}function ar(n,r){return typeof r=="function"?r(n):r}function ra(n){var r=St(),s=r.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=n;var d=He,m=d.baseQueue,y=s.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}d.baseQueue=m=y,s.pending=null}if(m!==null){y=m.next,d=d.baseState;var C=S=null,A=null,D=y;do{var H=D.lane;if((Fn&H)===H)A!==null&&(A=A.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),d=D.hasEagerState?D.eagerState:n(d,D.action);else{var O={lane:H,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};A===null?(C=A=O,S=d):A=A.next=O,Ue.lanes|=H,Ln|=H}D=D.next}while(D!==null&&D!==y);A===null?S=d:A.next=C,kt(d,r.memoizedState)||(ut=!0),r.memoizedState=d,r.baseState=S,r.baseQueue=A,s.lastRenderedState=d}if(n=s.interleaved,n!==null){m=n;do y=m.lane,Ue.lanes|=y,Ln|=y,m=m.next;while(m!==n)}else m===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function ia(n){var r=St(),s=r.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=n;var d=s.dispatch,m=s.pending,y=r.memoizedState;if(m!==null){s.pending=null;var S=m=m.next;do y=n(y,S.action),S=S.next;while(S!==m);kt(y,r.memoizedState)||(ut=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),s.lastRenderedState=y}return[y,d]}function mp(){}function hp(n,r){var s=Ue,d=St(),m=r(),y=!kt(d.memoizedState,m);if(y&&(d.memoizedState=m,ut=!0),d=d.queue,sa(vp.bind(null,s,d,n),[n]),d.getSnapshot!==r||y||ze!==null&&ze.memoizedState.tag&1){if(s.flags|=2048,ur(9,yp.bind(null,s,d,m,r),void 0,null),Oe===null)throw Error(o(349));(Fn&30)!==0||gp(s,r,m)}return m}function gp(n,r,s){n.flags|=16384,n={getSnapshot:r,value:s},r=Ue.updateQueue,r===null?(r={lastEffect:null,stores:null},Ue.updateQueue=r,r.stores=[n]):(s=r.stores,s===null?r.stores=[n]:s.push(n))}function yp(n,r,s,d){r.value=s,r.getSnapshot=d,Ep(r)&&_p(n)}function vp(n,r,s){return s(function(){Ep(r)&&_p(n)})}function Ep(n){var r=n.getSnapshot;n=n.value;try{var s=r();return!kt(n,s)}catch{return!0}}function _p(n){var r=Qt(n,1);r!==null&&Lt(r,n,1,-1)}function Sp(n){var r=qt();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:n},r.queue=n,n=n.dispatch=BC.bind(null,Ue,n),[r.memoizedState,n]}function ur(n,r,s,d){return n={tag:n,create:r,destroy:s,deps:d,next:null},r=Ue.updateQueue,r===null?(r={lastEffect:null,stores:null},Ue.updateQueue=r,r.lastEffect=n.next=n):(s=r.lastEffect,s===null?r.lastEffect=n.next=n:(d=s.next,s.next=n,n.next=d,r.lastEffect=n)),n}function Tp(){return St().memoizedState}function ki(n,r,s,d){var m=qt();Ue.flags|=n,m.memoizedState=ur(1|r,s,void 0,d===void 0?null:d)}function Pi(n,r,s,d){var m=St();d=d===void 0?null:d;var y=void 0;if(He!==null){var S=He.memoizedState;if(y=S.destroy,d!==null&&ta(d,S.deps)){m.memoizedState=ur(r,s,y,d);return}}Ue.flags|=n,m.memoizedState=ur(1|r,s,y,d)}function Cp(n,r){return ki(8390656,8,n,r)}function sa(n,r){return Pi(2048,8,n,r)}function wp(n,r){return Pi(4,2,n,r)}function Ap(n,r){return Pi(4,4,n,r)}function xp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Ip(n,r,s){return s=s!=null?s.concat([n]):null,Pi(4,4,xp.bind(null,r,n),s)}function la(){}function Np(n,r){var s=St();r=r===void 0?null:r;var d=s.memoizedState;return d!==null&&r!==null&&ta(r,d[1])?d[0]:(s.memoizedState=[n,r],n)}function Rp(n,r){var s=St();r=r===void 0?null:r;var d=s.memoizedState;return d!==null&&r!==null&&ta(r,d[1])?d[0]:(n=n(),s.memoizedState=[n,r],n)}function kp(n,r,s){return(Fn&21)===0?(n.baseState&&(n.baseState=!1,ut=!0),n.memoizedState=s):(kt(s,r)||(s=sf(),Ue.lanes|=s,Ln|=s,n.baseState=!0),r)}function qC(n,r){var s=Ne;Ne=s!==0&&4>s?s:4,n(!0);var d=ea.transition;ea.transition={};try{n(!1),r()}finally{Ne=s,ea.transition=d}}function Pp(){return St().memoizedState}function HC(n,r,s){var d=_n(n);if(s={lane:d,action:s,hasEagerState:!1,eagerState:null,next:null},Mp(n))Dp(r,s);else if(s=up(n,r,s,d),s!==null){var m=ot();Lt(s,n,d,m),Fp(s,r,d)}}function BC(n,r,s){var d=_n(n),m={lane:d,action:s,hasEagerState:!1,eagerState:null,next:null};if(Mp(n))Dp(r,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var S=r.lastRenderedState,C=y(S,s);if(m.hasEagerState=!0,m.eagerState=C,kt(C,S)){var A=r.interleaved;A===null?(m.next=m,Kl(r)):(m.next=A.next,A.next=m),r.interleaved=m;return}}catch{}finally{}s=up(n,r,m,d),s!==null&&(m=ot(),Lt(s,n,d,m),Fp(s,r,d))}}function Mp(n){var r=n.alternate;return n===Ue||r!==null&&r===Ue}function Dp(n,r){sr=Ri=!0;var s=n.pending;s===null?r.next=r:(r.next=s.next,s.next=r),n.pending=r}function Fp(n,r,s){if((s&4194240)!==0){var d=r.lanes;d&=n.pendingLanes,s|=d,r.lanes=s,ul(n,s)}}var Mi={readContext:_t,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},$C={readContext:_t,useCallback:function(n,r){return qt().memoizedState=[n,r===void 0?null:r],n},useContext:_t,useEffect:Cp,useImperativeHandle:function(n,r,s){return s=s!=null?s.concat([n]):null,ki(4194308,4,xp.bind(null,r,n),s)},useLayoutEffect:function(n,r){return ki(4194308,4,n,r)},useInsertionEffect:function(n,r){return ki(4,2,n,r)},useMemo:function(n,r){var s=qt();return r=r===void 0?null:r,n=n(),s.memoizedState=[n,r],n},useReducer:function(n,r,s){var d=qt();return r=s!==void 0?s(r):r,d.memoizedState=d.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},d.queue=n,n=n.dispatch=HC.bind(null,Ue,n),[d.memoizedState,n]},useRef:function(n){var r=qt();return n={current:n},r.memoizedState=n},useState:Sp,useDebugValue:la,useDeferredValue:function(n){return qt().memoizedState=n},useTransition:function(){var n=Sp(!1),r=n[0];return n=qC.bind(null,n[1]),qt().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,s){var d=Ue,m=qt();if(Fe){if(s===void 0)throw Error(o(407));s=s()}else{if(s=r(),Oe===null)throw Error(o(349));(Fn&30)!==0||gp(d,r,s)}m.memoizedState=s;var y={value:s,getSnapshot:r};return m.queue=y,Cp(vp.bind(null,d,y,n),[n]),d.flags|=2048,ur(9,yp.bind(null,d,y,s,r),void 0,null),s},useId:function(){var n=qt(),r=Oe.identifierPrefix;if(Fe){var s=Yt,d=Kt;s=(d&~(1<<32-Rt(d)-1)).toString(32)+s,r=":"+r+"R"+s,s=lr++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=GC++,r=":"+r+"r"+s.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},zC={readContext:_t,useCallback:Np,useContext:_t,useEffect:sa,useImperativeHandle:Ip,useInsertionEffect:wp,useLayoutEffect:Ap,useMemo:Rp,useReducer:ra,useRef:Tp,useState:function(){return ra(ar)},useDebugValue:la,useDeferredValue:function(n){var r=St();return kp(r,He.memoizedState,n)},useTransition:function(){var n=ra(ar)[0],r=St().memoizedState;return[n,r]},useMutableSource:mp,useSyncExternalStore:hp,useId:Pp,unstable_isNewReconciler:!1},OC={readContext:_t,useCallback:Np,useContext:_t,useEffect:sa,useImperativeHandle:Ip,useInsertionEffect:wp,useLayoutEffect:Ap,useMemo:Rp,useReducer:ia,useRef:Tp,useState:function(){return ia(ar)},useDebugValue:la,useDeferredValue:function(n){var r=St();return He===null?r.memoizedState=n:kp(r,He.memoizedState,n)},useTransition:function(){var n=ia(ar)[0],r=St().memoizedState;return[n,r]},useMutableSource:mp,useSyncExternalStore:hp,useId:Pp,unstable_isNewReconciler:!1};function Mt(n,r){if(n&&n.defaultProps){r=oe({},r),n=n.defaultProps;for(var s in n)r[s]===void 0&&(r[s]=n[s]);return r}return r}function aa(n,r,s,d){r=n.memoizedState,s=s(d,r),s=s==null?r:oe({},r,s),n.memoizedState=s,n.lanes===0&&(n.updateQueue.baseState=s)}var Di={isMounted:function(n){return(n=n._reactInternals)?In(n)===n:!1},enqueueSetState:function(n,r,s){n=n._reactInternals;var d=ot(),m=_n(n),y=Xt(d,m);y.payload=r,s!=null&&(y.callback=s),r=gn(n,y,m),r!==null&&(Lt(r,n,m,d),Ai(r,n,m))},enqueueReplaceState:function(n,r,s){n=n._reactInternals;var d=ot(),m=_n(n),y=Xt(d,m);y.tag=1,y.payload=r,s!=null&&(y.callback=s),r=gn(n,y,m),r!==null&&(Lt(r,n,m,d),Ai(r,n,m))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var s=ot(),d=_n(n),m=Xt(s,d);m.tag=2,r!=null&&(m.callback=r),r=gn(n,m,d),r!==null&&(Lt(r,n,d,s),Ai(r,n,d))}};function Lp(n,r,s,d,m,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,S):r.prototype&&r.prototype.isPureReactComponent?!Yo(s,d)||!Yo(m,y):!0}function Up(n,r,s){var d=!1,m=pn,y=r.contextType;return typeof y=="object"&&y!==null?y=_t(y):(m=at(r)?Rn:Qe.current,d=r.contextTypes,y=(d=d!=null)?uo(n,m):pn),r=new r(s,y),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Di,n.stateNode=r,r._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=y),r}function bp(n,r,s,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,d),r.state!==n&&Di.enqueueReplaceState(r,r.state,null)}function ua(n,r,s,d){var m=n.stateNode;m.props=s,m.state=n.memoizedState,m.refs={},Yl(n);var y=r.contextType;typeof y=="object"&&y!==null?m.context=_t(y):(y=at(r)?Rn:Qe.current,m.context=uo(n,y)),m.state=n.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(aa(n,r,y,s),m.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(r=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),r!==m.state&&Di.enqueueReplaceState(m,m.state,null),xi(n,s,m,d),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function vo(n,r){try{var s="",d=r;do s+=Z(d),d=d.return;while(d);var m=s}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:r,stack:m,digest:null}}function ca(n,r,s){return{value:n,source:null,stack:s??null,digest:r??null}}function da(n,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var JC=typeof WeakMap=="function"?WeakMap:Map;function Vp(n,r,s){s=Xt(-1,s),s.tag=3,s.payload={element:null};var d=r.value;return s.callback=function(){qi||(qi=!0,xa=d),da(n,r)},s}function Gp(n,r,s){s=Xt(-1,s),s.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var m=r.value;s.payload=function(){return d(m)},s.callback=function(){da(n,r)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(s.callback=function(){da(n,r),typeof d!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var S=r.stack;this.componentDidCatch(r.value,{componentStack:S!==null?S:""})}),s}function qp(n,r,s){var d=n.pingCache;if(d===null){d=n.pingCache=new JC;var m=new Set;d.set(r,m)}else m=d.get(r),m===void 0&&(m=new Set,d.set(r,m));m.has(s)||(m.add(s),n=sw.bind(null,n,r,s),r.then(n,n))}function Hp(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Bp(n,r,s,d,m){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=Xt(-1,1),r.tag=2,gn(s,r,1))),s.lanes|=1),n):(n.flags|=65536,n.lanes=m,n)}var WC=q.ReactCurrentOwner,ut=!1;function nt(n,r,s,d){r.child=n===null?ap(r,null,s,d):mo(r,n.child,s,d)}function $p(n,r,s,d,m){s=s.render;var y=r.ref;return go(r,m),d=na(n,r,s,d,y,m),s=oa(),n!==null&&!ut?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~m,Zt(n,r,m)):(Fe&&s&&Gl(r),r.flags|=1,nt(n,r,d,m),r.child)}function zp(n,r,s,d,m){if(n===null){var y=s.type;return typeof y=="function"&&!Da(y)&&y.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=y,Op(n,r,y,d,m)):(n=Ji(s.type,null,d,r,r.mode,m),n.ref=r.ref,n.return=r,r.child=n)}if(y=n.child,(n.lanes&m)===0){var S=y.memoizedProps;if(s=s.compare,s=s!==null?s:Yo,s(S,d)&&n.ref===r.ref)return Zt(n,r,m)}return r.flags|=1,n=Tn(y,d),n.ref=r.ref,n.return=r,r.child=n}function Op(n,r,s,d,m){if(n!==null){var y=n.memoizedProps;if(Yo(y,d)&&n.ref===r.ref)if(ut=!1,r.pendingProps=d=y,(n.lanes&m)!==0)(n.flags&131072)!==0&&(ut=!0);else return r.lanes=n.lanes,Zt(n,r,m)}return fa(n,r,s,d,m)}function Jp(n,r,s){var d=r.pendingProps,m=d.children,y=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(_o,ht),ht|=s;else{if((s&1073741824)===0)return n=y!==null?y.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Re(_o,ht),ht|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:s,Re(_o,ht),ht|=d}else y!==null?(d=y.baseLanes|s,r.memoizedState=null):d=s,Re(_o,ht),ht|=d;return nt(n,r,m,s),r.child}function Wp(n,r){var s=r.ref;(n===null&&s!==null||n!==null&&n.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function fa(n,r,s,d,m){var y=at(s)?Rn:Qe.current;return y=uo(r,y),go(r,m),s=na(n,r,s,d,y,m),d=oa(),n!==null&&!ut?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~m,Zt(n,r,m)):(Fe&&d&&Gl(r),r.flags|=1,nt(n,r,s,m),r.child)}function Kp(n,r,s,d,m){if(at(s)){var y=!0;yi(r)}else y=!1;if(go(r,m),r.stateNode===null)Li(n,r),Up(r,s,d),ua(r,s,d,m),d=!0;else if(n===null){var S=r.stateNode,C=r.memoizedProps;S.props=C;var A=S.context,D=s.contextType;typeof D=="object"&&D!==null?D=_t(D):(D=at(s)?Rn:Qe.current,D=uo(r,D));var H=s.getDerivedStateFromProps,O=typeof H=="function"||typeof S.getSnapshotBeforeUpdate=="function";O||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(C!==d||A!==D)&&bp(r,S,d,D),hn=!1;var G=r.memoizedState;S.state=G,xi(r,d,S,m),A=r.memoizedState,C!==d||G!==A||lt.current||hn?(typeof H=="function"&&(aa(r,s,H,d),A=r.memoizedState),(C=hn||Lp(r,s,C,d,G,A,D))?(O||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(r.flags|=4194308)):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=A),S.props=d,S.state=A,S.context=D,d=C):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{S=r.stateNode,cp(n,r),C=r.memoizedProps,D=r.type===r.elementType?C:Mt(r.type,C),S.props=D,O=r.pendingProps,G=S.context,A=s.contextType,typeof A=="object"&&A!==null?A=_t(A):(A=at(s)?Rn:Qe.current,A=uo(r,A));var ne=s.getDerivedStateFromProps;(H=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(C!==O||G!==A)&&bp(r,S,d,A),hn=!1,G=r.memoizedState,S.state=G,xi(r,d,S,m);var se=r.memoizedState;C!==O||G!==se||lt.current||hn?(typeof ne=="function"&&(aa(r,s,ne,d),se=r.memoizedState),(D=hn||Lp(r,s,D,d,G,se,A)||!1)?(H||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,se,A),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,se,A)),typeof S.componentDidUpdate=="function"&&(r.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof S.componentDidUpdate!="function"||C===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=se),S.props=d,S.state=se,S.context=A,d=D):(typeof S.componentDidUpdate!="function"||C===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),d=!1)}return pa(n,r,s,d,y,m)}function pa(n,r,s,d,m,y){Wp(n,r);var S=(r.flags&128)!==0;if(!d&&!S)return m&&jf(r,s,!1),Zt(n,r,y);d=r.stateNode,WC.current=r;var C=S&&typeof s.getDerivedStateFromError!="function"?null:d.render();return r.flags|=1,n!==null&&S?(r.child=mo(r,n.child,null,y),r.child=mo(r,null,C,y)):nt(n,r,C,y),r.memoizedState=d.state,m&&jf(r,s,!0),r.child}function Yp(n){var r=n.stateNode;r.pendingContext?Xf(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Xf(n,r.context,!1),Ql(n,r.containerInfo)}function Qp(n,r,s,d,m){return po(),$l(m),r.flags|=256,nt(n,r,s,d),r.child}var ma={dehydrated:null,treeContext:null,retryLane:0};function ha(n){return{baseLanes:n,cachePool:null,transitions:null}}function Xp(n,r,s){var d=r.pendingProps,m=Le.current,y=!1,S=(r.flags&128)!==0,C;if((C=S)||(C=n!==null&&n.memoizedState===null?!1:(m&2)!==0),C?(y=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),Re(Le,m&1),n===null)return Bl(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(S=d.children,n=d.fallback,y?(d=r.mode,y=r.child,S={mode:"hidden",children:S},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=S):y=Wi(S,d,0,null),n=Gn(n,d,s,null),y.return=r,n.return=r,y.sibling=n,r.child=y,r.child.memoizedState=ha(s),r.memoizedState=ma,n):ga(r,S));if(m=n.memoizedState,m!==null&&(C=m.dehydrated,C!==null))return KC(n,r,S,d,C,m,s);if(y){y=d.fallback,S=r.mode,m=n.child,C=m.sibling;var A={mode:"hidden",children:d.children};return(S&1)===0&&r.child!==m?(d=r.child,d.childLanes=0,d.pendingProps=A,r.deletions=null):(d=Tn(m,A),d.subtreeFlags=m.subtreeFlags&14680064),C!==null?y=Tn(C,y):(y=Gn(y,S,s,null),y.flags|=2),y.return=r,d.return=r,d.sibling=y,r.child=d,d=y,y=r.child,S=n.child.memoizedState,S=S===null?ha(s):{baseLanes:S.baseLanes|s,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=n.childLanes&~s,r.memoizedState=ma,d}return y=n.child,n=y.sibling,d=Tn(y,{mode:"visible",children:d.children}),(r.mode&1)===0&&(d.lanes=s),d.return=r,d.sibling=null,n!==null&&(s=r.deletions,s===null?(r.deletions=[n],r.flags|=16):s.push(n)),r.child=d,r.memoizedState=null,d}function ga(n,r){return r=Wi({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Fi(n,r,s,d){return d!==null&&$l(d),mo(r,n.child,null,s),n=ga(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function KC(n,r,s,d,m,y,S){if(s)return r.flags&256?(r.flags&=-257,d=ca(Error(o(422))),Fi(n,r,S,d)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(y=d.fallback,m=r.mode,d=Wi({mode:"visible",children:d.children},m,0,null),y=Gn(y,m,S,null),y.flags|=2,d.return=r,y.return=r,d.sibling=y,r.child=d,(r.mode&1)!==0&&mo(r,n.child,null,S),r.child.memoizedState=ha(S),r.memoizedState=ma,y);if((r.mode&1)===0)return Fi(n,r,S,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var C=d.dgst;return d=C,y=Error(o(419)),d=ca(y,d,void 0),Fi(n,r,S,d)}if(C=(S&n.childLanes)!==0,ut||C){if(d=Oe,d!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|S))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,Qt(n,m),Lt(d,n,m,-1))}return Ma(),d=ca(Error(o(421))),Fi(n,r,S,d)}return m.data==="$?"?(r.flags|=128,r.child=n.child,r=lw.bind(null,n),m._reactRetry=r,null):(n=y.treeContext,mt=dn(m.nextSibling),pt=r,Fe=!0,Pt=null,n!==null&&(vt[Et++]=Kt,vt[Et++]=Yt,vt[Et++]=kn,Kt=n.id,Yt=n.overflow,kn=r),r=ga(r,d.children),r.flags|=4096,r)}function Zp(n,r,s){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),Wl(n.return,r,s)}function ya(n,r,s,d,m){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:s,tailMode:m}:(y.isBackwards=r,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=s,y.tailMode=m)}function jp(n,r,s){var d=r.pendingProps,m=d.revealOrder,y=d.tail;if(nt(n,r,d.children,s),d=Le.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zp(n,s,r);else if(n.tag===19)Zp(n,s,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Re(Le,d),(r.mode&1)===0)r.memoizedState=null;else switch(m){case"forwards":for(s=r.child,m=null;s!==null;)n=s.alternate,n!==null&&Ii(n)===null&&(m=s),s=s.sibling;s=m,s===null?(m=r.child,r.child=null):(m=s.sibling,s.sibling=null),ya(r,!1,m,s,y);break;case"backwards":for(s=null,m=r.child,r.child=null;m!==null;){if(n=m.alternate,n!==null&&Ii(n)===null){r.child=m;break}n=m.sibling,m.sibling=s,s=m,m=n}ya(r,!0,s,null,y);break;case"together":ya(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Li(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Zt(n,r,s){if(n!==null&&(r.dependencies=n.dependencies),Ln|=r.lanes,(s&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(o(153));if(r.child!==null){for(n=r.child,s=Tn(n,n.pendingProps),r.child=s,s.return=r;n.sibling!==null;)n=n.sibling,s=s.sibling=Tn(n,n.pendingProps),s.return=r;s.sibling=null}return r.child}function YC(n,r,s){switch(r.tag){case 3:Yp(r),po();break;case 5:pp(r);break;case 1:at(r.type)&&yi(r);break;case 4:Ql(r,r.stateNode.containerInfo);break;case 10:var d=r.type._context,m=r.memoizedProps.value;Re(Ci,d._currentValue),d._currentValue=m;break;case 13:if(d=r.memoizedState,d!==null)return d.dehydrated!==null?(Re(Le,Le.current&1),r.flags|=128,null):(s&r.child.childLanes)!==0?Xp(n,r,s):(Re(Le,Le.current&1),n=Zt(n,r,s),n!==null?n.sibling:null);Re(Le,Le.current&1);break;case 19:if(d=(s&r.childLanes)!==0,(n.flags&128)!==0){if(d)return jp(n,r,s);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Re(Le,Le.current),d)break;return null;case 22:case 23:return r.lanes=0,Jp(n,r,s)}return Zt(n,r,s)}var em,va,tm,nm;em=function(n,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)n.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},va=function(){},tm=function(n,r,s,d){var m=n.memoizedProps;if(m!==d){n=r.stateNode,Dn(Gt.current);var y=null;switch(s){case"input":m=Ws(n,m),d=Ws(n,d),y=[];break;case"select":m=oe({},m,{value:void 0}),d=oe({},d,{value:void 0}),y=[];break;case"textarea":m=Qs(n,m),d=Qs(n,d),y=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=mi)}Zs(s,d);var S;s=null;for(D in m)if(!d.hasOwnProperty(D)&&m.hasOwnProperty(D)&&m[D]!=null)if(D==="style"){var C=m[D];for(S in C)C.hasOwnProperty(S)&&(s||(s={}),s[S]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(l.hasOwnProperty(D)?y||(y=[]):(y=y||[]).push(D,null));for(D in d){var A=d[D];if(C=m!=null?m[D]:void 0,d.hasOwnProperty(D)&&A!==C&&(A!=null||C!=null))if(D==="style")if(C){for(S in C)!C.hasOwnProperty(S)||A&&A.hasOwnProperty(S)||(s||(s={}),s[S]="");for(S in A)A.hasOwnProperty(S)&&C[S]!==A[S]&&(s||(s={}),s[S]=A[S])}else s||(y||(y=[]),y.push(D,s)),s=A;else D==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,C=C?C.__html:void 0,A!=null&&C!==A&&(y=y||[]).push(D,A)):D==="children"?typeof A!="string"&&typeof A!="number"||(y=y||[]).push(D,""+A):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(l.hasOwnProperty(D)?(A!=null&&D==="onScroll"&&Me("scroll",n),y||C===A||(y=[])):(y=y||[]).push(D,A))}s&&(y=y||[]).push("style",s);var D=y;(r.updateQueue=D)&&(r.flags|=4)}},nm=function(n,r,s,d){s!==d&&(r.flags|=4)};function cr(n,r){if(!Fe)switch(n.tailMode){case"hidden":r=n.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?n.tail=null:s.sibling=null;break;case"collapsed":s=n.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ze(n){var r=n.alternate!==null&&n.alternate.child===n.child,s=0,d=0;if(r)for(var m=n.child;m!==null;)s|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)s|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=d,n.childLanes=s,r}function QC(n,r,s){var d=r.pendingProps;switch(ql(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(r),null;case 1:return at(r.type)&&gi(),Ze(r),null;case 3:return d=r.stateNode,yo(),De(lt),De(Qe),jl(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(Si(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Pt!==null&&(Ra(Pt),Pt=null))),va(n,r),Ze(r),null;case 5:Xl(r);var m=Dn(ir.current);if(s=r.type,n!==null&&r.stateNode!=null)tm(n,r,s,d,m),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!d){if(r.stateNode===null)throw Error(o(166));return Ze(r),null}if(n=Dn(Gt.current),Si(r)){d=r.stateNode,s=r.type;var y=r.memoizedProps;switch(d[Vt]=r,d[er]=y,n=(r.mode&1)!==0,s){case"dialog":Me("cancel",d),Me("close",d);break;case"iframe":case"object":case"embed":Me("load",d);break;case"video":case"audio":for(m=0;m<Xo.length;m++)Me(Xo[m],d);break;case"source":Me("error",d);break;case"img":case"image":case"link":Me("error",d),Me("load",d);break;case"details":Me("toggle",d);break;case"input":Ld(d,y),Me("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Me("invalid",d);break;case"textarea":Vd(d,y),Me("invalid",d)}Zs(s,y),m=null;for(var S in y)if(y.hasOwnProperty(S)){var C=y[S];S==="children"?typeof C=="string"?d.textContent!==C&&(y.suppressHydrationWarning!==!0&&pi(d.textContent,C,n),m=["children",C]):typeof C=="number"&&d.textContent!==""+C&&(y.suppressHydrationWarning!==!0&&pi(d.textContent,C,n),m=["children",""+C]):l.hasOwnProperty(S)&&C!=null&&S==="onScroll"&&Me("scroll",d)}switch(s){case"input":Qn(d),bd(d,y,!0);break;case"textarea":Qn(d),qd(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=mi)}d=m,r.updateQueue=d,d!==null&&(r.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Hd(s)),n==="http://www.w3.org/1999/xhtml"?s==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=S.createElement(s,{is:d.is}):(n=S.createElement(s),s==="select"&&(S=n,d.multiple?S.multiple=!0:d.size&&(S.size=d.size))):n=S.createElementNS(n,s),n[Vt]=r,n[er]=d,em(n,r,!1,!1),r.stateNode=n;e:{switch(S=js(s,d),s){case"dialog":Me("cancel",n),Me("close",n),m=d;break;case"iframe":case"object":case"embed":Me("load",n),m=d;break;case"video":case"audio":for(m=0;m<Xo.length;m++)Me(Xo[m],n);m=d;break;case"source":Me("error",n),m=d;break;case"img":case"image":case"link":Me("error",n),Me("load",n),m=d;break;case"details":Me("toggle",n),m=d;break;case"input":Ld(n,d),m=Ws(n,d),Me("invalid",n);break;case"option":m=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},m=oe({},d,{value:void 0}),Me("invalid",n);break;case"textarea":Vd(n,d),m=Qs(n,d),Me("invalid",n);break;default:m=d}Zs(s,m),C=m;for(y in C)if(C.hasOwnProperty(y)){var A=C[y];y==="style"?zd(n,A):y==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&Bd(n,A)):y==="children"?typeof A=="string"?(s!=="textarea"||A!=="")&&Mo(n,A):typeof A=="number"&&Mo(n,""+A):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(l.hasOwnProperty(y)?A!=null&&y==="onScroll"&&Me("scroll",n):A!=null&&b(n,y,A,S))}switch(s){case"input":Qn(n),bd(n,d,!1);break;case"textarea":Qn(n),qd(n);break;case"option":d.value!=null&&n.setAttribute("value",""+_e(d.value));break;case"select":n.multiple=!!d.multiple,y=d.value,y!=null?Xn(n,!!d.multiple,y,!1):d.defaultValue!=null&&Xn(n,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=mi)}switch(s){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ze(r),null;case 6:if(n&&r.stateNode!=null)nm(n,r,n.memoizedProps,d);else{if(typeof d!="string"&&r.stateNode===null)throw Error(o(166));if(s=Dn(ir.current),Dn(Gt.current),Si(r)){if(d=r.stateNode,s=r.memoizedProps,d[Vt]=r,(y=d.nodeValue!==s)&&(n=pt,n!==null))switch(n.tag){case 3:pi(d.nodeValue,s,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&pi(d.nodeValue,s,(n.mode&1)!==0)}y&&(r.flags|=4)}else d=(s.nodeType===9?s:s.ownerDocument).createTextNode(d),d[Vt]=r,r.stateNode=d}return Ze(r),null;case 13:if(De(Le),d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Fe&&mt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)ip(),po(),r.flags|=98560,y=!1;else if(y=Si(r),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(o(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Vt]=r}else po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ze(r),y=!1}else Pt!==null&&(Ra(Pt),Pt=null),y=!0;if(!y)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=s,r):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(Le.current&1)!==0?Be===0&&(Be=3):Ma())),r.updateQueue!==null&&(r.flags|=4),Ze(r),null);case 4:return yo(),va(n,r),n===null&&Zo(r.stateNode.containerInfo),Ze(r),null;case 10:return Jl(r.type._context),Ze(r),null;case 17:return at(r.type)&&gi(),Ze(r),null;case 19:if(De(Le),y=r.memoizedState,y===null)return Ze(r),null;if(d=(r.flags&128)!==0,S=y.rendering,S===null)if(d)cr(y,!1);else{if(Be!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(S=Ii(n),S!==null){for(r.flags|=128,cr(y,!1),d=S.updateQueue,d!==null&&(r.updateQueue=d,r.flags|=4),r.subtreeFlags=0,d=s,s=r.child;s!==null;)y=s,n=d,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,n=S.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),s=s.sibling;return Re(Le,Le.current&1|2),r.child}n=n.sibling}y.tail!==null&&Ve()>So&&(r.flags|=128,d=!0,cr(y,!1),r.lanes=4194304)}else{if(!d)if(n=Ii(S),n!==null){if(r.flags|=128,d=!0,s=n.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),cr(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!Fe)return Ze(r),null}else 2*Ve()-y.renderingStartTime>So&&s!==1073741824&&(r.flags|=128,d=!0,cr(y,!1),r.lanes=4194304);y.isBackwards?(S.sibling=r.child,r.child=S):(s=y.last,s!==null?s.sibling=S:r.child=S,y.last=S)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=Ve(),r.sibling=null,s=Le.current,Re(Le,d?s&1|2:s&1),r):(Ze(r),null);case 22:case 23:return Pa(),d=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(r.flags|=8192),d&&(r.mode&1)!==0?(ht&1073741824)!==0&&(Ze(r),r.subtreeFlags&6&&(r.flags|=8192)):Ze(r),null;case 24:return null;case 25:return null}throw Error(o(156,r.tag))}function XC(n,r){switch(ql(r),r.tag){case 1:return at(r.type)&&gi(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return yo(),De(lt),De(Qe),jl(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return Xl(r),null;case 13:if(De(Le),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(o(340));po()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return De(Le),null;case 4:return yo(),null;case 10:return Jl(r.type._context),null;case 22:case 23:return Pa(),null;case 24:return null;default:return null}}var Ui=!1,je=!1,ZC=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Eo(n,r){var s=n.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(d){be(n,r,d)}else s.current=null}function Ea(n,r,s){try{s()}catch(d){be(n,r,d)}}var om=!1;function jC(n,r){if(Pl=ni,n=Lf(),Cl(n)){if("selectionStart"in n)var s={start:n.selectionStart,end:n.selectionEnd};else e:{s=(s=n.ownerDocument)&&s.defaultView||window;var d=s.getSelection&&s.getSelection();if(d&&d.rangeCount!==0){s=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{s.nodeType,y.nodeType}catch{s=null;break e}var S=0,C=-1,A=-1,D=0,H=0,O=n,G=null;t:for(;;){for(var ne;O!==s||m!==0&&O.nodeType!==3||(C=S+m),O!==y||d!==0&&O.nodeType!==3||(A=S+d),O.nodeType===3&&(S+=O.nodeValue.length),(ne=O.firstChild)!==null;)G=O,O=ne;for(;;){if(O===n)break t;if(G===s&&++D===m&&(C=S),G===y&&++H===d&&(A=S),(ne=O.nextSibling)!==null)break;O=G,G=O.parentNode}O=ne}s=C===-1||A===-1?null:{start:C,end:A}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ml={focusedElem:n,selectionRange:s},ni=!1,ie=r;ie!==null;)if(r=ie,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ie=n;else for(;ie!==null;){r=ie;try{var se=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(se!==null){var le=se.memoizedProps,Ge=se.memoizedState,R=r.stateNode,x=R.getSnapshotBeforeUpdate(r.elementType===r.type?le:Mt(r.type,le),Ge);R.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var P=r.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Q){be(r,r.return,Q)}if(n=r.sibling,n!==null){n.return=r.return,ie=n;break}ie=r.return}return se=om,om=!1,se}function dr(n,r,s){var d=r.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&n)===n){var y=m.destroy;m.destroy=void 0,y!==void 0&&Ea(r,s,y)}m=m.next}while(m!==d)}}function bi(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var d=s.create;s.destroy=d()}s=s.next}while(s!==r)}}function _a(n){var r=n.ref;if(r!==null){var s=n.stateNode;switch(n.tag){case 5:n=s;break;default:n=s}typeof r=="function"?r(n):r.current=n}}function rm(n){var r=n.alternate;r!==null&&(n.alternate=null,rm(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Vt],delete r[er],delete r[Ul],delete r[LC],delete r[UC])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function im(n){return n.tag===5||n.tag===3||n.tag===4}function sm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||im(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sa(n,r,s){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?s.nodeType===8?s.parentNode.insertBefore(n,r):s.insertBefore(n,r):(s.nodeType===8?(r=s.parentNode,r.insertBefore(n,s)):(r=s,r.appendChild(n)),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=mi));else if(d!==4&&(n=n.child,n!==null))for(Sa(n,r,s),n=n.sibling;n!==null;)Sa(n,r,s),n=n.sibling}function Ta(n,r,s){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?s.insertBefore(n,r):s.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Ta(n,r,s),n=n.sibling;n!==null;)Ta(n,r,s),n=n.sibling}var We=null,Dt=!1;function yn(n,r,s){for(s=s.child;s!==null;)lm(n,r,s),s=s.sibling}function lm(n,r,s){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Qr,s)}catch{}switch(s.tag){case 5:je||Eo(s,r);case 6:var d=We,m=Dt;We=null,yn(n,r,s),We=d,Dt=m,We!==null&&(Dt?(n=We,s=s.stateNode,n.nodeType===8?n.parentNode.removeChild(s):n.removeChild(s)):We.removeChild(s.stateNode));break;case 18:We!==null&&(Dt?(n=We,s=s.stateNode,n.nodeType===8?Ll(n.parentNode,s):n.nodeType===1&&Ll(n,s),$o(n)):Ll(We,s.stateNode));break;case 4:d=We,m=Dt,We=s.stateNode.containerInfo,Dt=!0,yn(n,r,s),We=d,Dt=m;break;case 0:case 11:case 14:case 15:if(!je&&(d=s.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var y=m,S=y.destroy;y=y.tag,S!==void 0&&((y&2)!==0||(y&4)!==0)&&Ea(s,r,S),m=m.next}while(m!==d)}yn(n,r,s);break;case 1:if(!je&&(Eo(s,r),d=s.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=s.memoizedProps,d.state=s.memoizedState,d.componentWillUnmount()}catch(C){be(s,r,C)}yn(n,r,s);break;case 21:yn(n,r,s);break;case 22:s.mode&1?(je=(d=je)||s.memoizedState!==null,yn(n,r,s),je=d):yn(n,r,s);break;default:yn(n,r,s)}}function am(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var s=n.stateNode;s===null&&(s=n.stateNode=new ZC),r.forEach(function(d){var m=aw.bind(null,n,d);s.has(d)||(s.add(d),d.then(m,m))})}}function Ft(n,r){var s=r.deletions;if(s!==null)for(var d=0;d<s.length;d++){var m=s[d];try{var y=n,S=r,C=S;e:for(;C!==null;){switch(C.tag){case 5:We=C.stateNode,Dt=!1;break e;case 3:We=C.stateNode.containerInfo,Dt=!0;break e;case 4:We=C.stateNode.containerInfo,Dt=!0;break e}C=C.return}if(We===null)throw Error(o(160));lm(y,S,m),We=null,Dt=!1;var A=m.alternate;A!==null&&(A.return=null),m.return=null}catch(D){be(m,r,D)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)um(r,n),r=r.sibling}function um(n,r){var s=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ft(r,n),Ht(n),d&4){try{dr(3,n,n.return),bi(3,n)}catch(le){be(n,n.return,le)}try{dr(5,n,n.return)}catch(le){be(n,n.return,le)}}break;case 1:Ft(r,n),Ht(n),d&512&&s!==null&&Eo(s,s.return);break;case 5:if(Ft(r,n),Ht(n),d&512&&s!==null&&Eo(s,s.return),n.flags&32){var m=n.stateNode;try{Mo(m,"")}catch(le){be(n,n.return,le)}}if(d&4&&(m=n.stateNode,m!=null)){var y=n.memoizedProps,S=s!==null?s.memoizedProps:y,C=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{C==="input"&&y.type==="radio"&&y.name!=null&&Ud(m,y),js(C,S);var D=js(C,y);for(S=0;S<A.length;S+=2){var H=A[S],O=A[S+1];H==="style"?zd(m,O):H==="dangerouslySetInnerHTML"?Bd(m,O):H==="children"?Mo(m,O):b(m,H,O,D)}switch(C){case"input":Ks(m,y);break;case"textarea":Gd(m,y);break;case"select":var G=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var ne=y.value;ne!=null?Xn(m,!!y.multiple,ne,!1):G!==!!y.multiple&&(y.defaultValue!=null?Xn(m,!!y.multiple,y.defaultValue,!0):Xn(m,!!y.multiple,y.multiple?[]:"",!1))}m[er]=y}catch(le){be(n,n.return,le)}}break;case 6:if(Ft(r,n),Ht(n),d&4){if(n.stateNode===null)throw Error(o(162));m=n.stateNode,y=n.memoizedProps;try{m.nodeValue=y}catch(le){be(n,n.return,le)}}break;case 3:if(Ft(r,n),Ht(n),d&4&&s!==null&&s.memoizedState.isDehydrated)try{$o(r.containerInfo)}catch(le){be(n,n.return,le)}break;case 4:Ft(r,n),Ht(n);break;case 13:Ft(r,n),Ht(n),m=n.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(Aa=Ve())),d&4&&am(n);break;case 22:if(H=s!==null&&s.memoizedState!==null,n.mode&1?(je=(D=je)||H,Ft(r,n),je=D):Ft(r,n),Ht(n),d&8192){if(D=n.memoizedState!==null,(n.stateNode.isHidden=D)&&!H&&(n.mode&1)!==0)for(ie=n,H=n.child;H!==null;){for(O=ie=H;ie!==null;){switch(G=ie,ne=G.child,G.tag){case 0:case 11:case 14:case 15:dr(4,G,G.return);break;case 1:Eo(G,G.return);var se=G.stateNode;if(typeof se.componentWillUnmount=="function"){d=G,s=G.return;try{r=d,se.props=r.memoizedProps,se.state=r.memoizedState,se.componentWillUnmount()}catch(le){be(d,s,le)}}break;case 5:Eo(G,G.return);break;case 22:if(G.memoizedState!==null){fm(O);continue}}ne!==null?(ne.return=G,ie=ne):fm(O)}H=H.sibling}e:for(H=null,O=n;;){if(O.tag===5){if(H===null){H=O;try{m=O.stateNode,D?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(C=O.stateNode,A=O.memoizedProps.style,S=A!=null&&A.hasOwnProperty("display")?A.display:null,C.style.display=$d("display",S))}catch(le){be(n,n.return,le)}}}else if(O.tag===6){if(H===null)try{O.stateNode.nodeValue=D?"":O.memoizedProps}catch(le){be(n,n.return,le)}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===n)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===n)break e;for(;O.sibling===null;){if(O.return===null||O.return===n)break e;H===O&&(H=null),O=O.return}H===O&&(H=null),O.sibling.return=O.return,O=O.sibling}}break;case 19:Ft(r,n),Ht(n),d&4&&am(n);break;case 21:break;default:Ft(r,n),Ht(n)}}function Ht(n){var r=n.flags;if(r&2){try{e:{for(var s=n.return;s!==null;){if(im(s)){var d=s;break e}s=s.return}throw Error(o(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(Mo(m,""),d.flags&=-33);var y=sm(n);Ta(n,y,m);break;case 3:case 4:var S=d.stateNode.containerInfo,C=sm(n);Sa(n,C,S);break;default:throw Error(o(161))}}catch(A){be(n,n.return,A)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function ew(n,r,s){ie=n,cm(n)}function cm(n,r,s){for(var d=(n.mode&1)!==0;ie!==null;){var m=ie,y=m.child;if(m.tag===22&&d){var S=m.memoizedState!==null||Ui;if(!S){var C=m.alternate,A=C!==null&&C.memoizedState!==null||je;C=Ui;var D=je;if(Ui=S,(je=A)&&!D)for(ie=m;ie!==null;)S=ie,A=S.child,S.tag===22&&S.memoizedState!==null?pm(m):A!==null?(A.return=S,ie=A):pm(m);for(;y!==null;)ie=y,cm(y),y=y.sibling;ie=m,Ui=C,je=D}dm(n)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,ie=y):dm(n)}}function dm(n){for(;ie!==null;){var r=ie;if((r.flags&8772)!==0){var s=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:je||bi(5,r);break;case 1:var d=r.stateNode;if(r.flags&4&&!je)if(s===null)d.componentDidMount();else{var m=r.elementType===r.type?s.memoizedProps:Mt(r.type,s.memoizedProps);d.componentDidUpdate(m,s.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=r.updateQueue;y!==null&&fp(r,y,d);break;case 3:var S=r.updateQueue;if(S!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}fp(r,S,s)}break;case 5:var C=r.stateNode;if(s===null&&r.flags&4){s=C;var A=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&s.focus();break;case"img":A.src&&(s.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var D=r.alternate;if(D!==null){var H=D.memoizedState;if(H!==null){var O=H.dehydrated;O!==null&&$o(O)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}je||r.flags&512&&_a(r)}catch(G){be(r,r.return,G)}}if(r===n){ie=null;break}if(s=r.sibling,s!==null){s.return=r.return,ie=s;break}ie=r.return}}function fm(n){for(;ie!==null;){var r=ie;if(r===n){ie=null;break}var s=r.sibling;if(s!==null){s.return=r.return,ie=s;break}ie=r.return}}function pm(n){for(;ie!==null;){var r=ie;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{bi(4,r)}catch(A){be(r,s,A)}break;case 1:var d=r.stateNode;if(typeof d.componentDidMount=="function"){var m=r.return;try{d.componentDidMount()}catch(A){be(r,m,A)}}var y=r.return;try{_a(r)}catch(A){be(r,y,A)}break;case 5:var S=r.return;try{_a(r)}catch(A){be(r,S,A)}}}catch(A){be(r,r.return,A)}if(r===n){ie=null;break}var C=r.sibling;if(C!==null){C.return=r.return,ie=C;break}ie=r.return}}var tw=Math.ceil,Vi=q.ReactCurrentDispatcher,Ca=q.ReactCurrentOwner,Tt=q.ReactCurrentBatchConfig,Ae=0,Oe=null,qe=null,Ke=0,ht=0,_o=fn(0),Be=0,fr=null,Ln=0,Gi=0,wa=0,pr=null,ct=null,Aa=0,So=1/0,jt=null,qi=!1,xa=null,vn=null,Hi=!1,En=null,Bi=0,mr=0,Ia=null,$i=-1,zi=0;function ot(){return(Ae&6)!==0?Ve():$i!==-1?$i:$i=Ve()}function _n(n){return(n.mode&1)===0?1:(Ae&2)!==0&&Ke!==0?Ke&-Ke:VC.transition!==null?(zi===0&&(zi=sf()),zi):(n=Ne,n!==0||(n=window.event,n=n===void 0?16:hf(n.type)),n)}function Lt(n,r,s,d){if(50<mr)throw mr=0,Ia=null,Error(o(185));Vo(n,s,d),((Ae&2)===0||n!==Oe)&&(n===Oe&&((Ae&2)===0&&(Gi|=s),Be===4&&Sn(n,Ke)),dt(n,d),s===1&&Ae===0&&(r.mode&1)===0&&(So=Ve()+500,vi&&mn()))}function dt(n,r){var s=n.callbackNode;VT(n,r);var d=jr(n,n===Oe?Ke:0);if(d===0)s!==null&&nf(s),n.callbackNode=null,n.callbackPriority=0;else if(r=d&-d,n.callbackPriority!==r){if(s!=null&&nf(s),r===1)n.tag===0?bC(hm.bind(null,n)):ep(hm.bind(null,n)),DC(function(){(Ae&6)===0&&mn()}),s=null;else{switch(lf(d)){case 1:s=sl;break;case 4:s=of;break;case 16:s=Yr;break;case 536870912:s=rf;break;default:s=Yr}s=Cm(s,mm.bind(null,n))}n.callbackPriority=r,n.callbackNode=s}}function mm(n,r){if($i=-1,zi=0,(Ae&6)!==0)throw Error(o(327));var s=n.callbackNode;if(To()&&n.callbackNode!==s)return null;var d=jr(n,n===Oe?Ke:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||r)r=Oi(n,d);else{r=d;var m=Ae;Ae|=2;var y=ym();(Oe!==n||Ke!==r)&&(jt=null,So=Ve()+500,bn(n,r));do try{rw();break}catch(C){gm(n,C)}while(!0);Ol(),Vi.current=y,Ae=m,qe!==null?r=0:(Oe=null,Ke=0,r=Be)}if(r!==0){if(r===2&&(m=ll(n),m!==0&&(d=m,r=Na(n,m))),r===1)throw s=fr,bn(n,0),Sn(n,d),dt(n,Ve()),s;if(r===6)Sn(n,d);else{if(m=n.current.alternate,(d&30)===0&&!nw(m)&&(r=Oi(n,d),r===2&&(y=ll(n),y!==0&&(d=y,r=Na(n,y))),r===1))throw s=fr,bn(n,0),Sn(n,d),dt(n,Ve()),s;switch(n.finishedWork=m,n.finishedLanes=d,r){case 0:case 1:throw Error(o(345));case 2:Vn(n,ct,jt);break;case 3:if(Sn(n,d),(d&130023424)===d&&(r=Aa+500-Ve(),10<r)){if(jr(n,0)!==0)break;if(m=n.suspendedLanes,(m&d)!==d){ot(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=Fl(Vn.bind(null,n,ct,jt),r);break}Vn(n,ct,jt);break;case 4:if(Sn(n,d),(d&4194240)===d)break;for(r=n.eventTimes,m=-1;0<d;){var S=31-Rt(d);y=1<<S,S=r[S],S>m&&(m=S),d&=~y}if(d=m,d=Ve()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*tw(d/1960))-d,10<d){n.timeoutHandle=Fl(Vn.bind(null,n,ct,jt),d);break}Vn(n,ct,jt);break;case 5:Vn(n,ct,jt);break;default:throw Error(o(329))}}}return dt(n,Ve()),n.callbackNode===s?mm.bind(null,n):null}function Na(n,r){var s=pr;return n.current.memoizedState.isDehydrated&&(bn(n,r).flags|=256),n=Oi(n,r),n!==2&&(r=ct,ct=s,r!==null&&Ra(r)),n}function Ra(n){ct===null?ct=n:ct.push.apply(ct,n)}function nw(n){for(var r=n;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var d=0;d<s.length;d++){var m=s[d],y=m.getSnapshot;m=m.value;try{if(!kt(y(),m))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Sn(n,r){for(r&=~wa,r&=~Gi,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var s=31-Rt(r),d=1<<s;n[s]=-1,r&=~d}}function hm(n){if((Ae&6)!==0)throw Error(o(327));To();var r=jr(n,0);if((r&1)===0)return dt(n,Ve()),null;var s=Oi(n,r);if(n.tag!==0&&s===2){var d=ll(n);d!==0&&(r=d,s=Na(n,d))}if(s===1)throw s=fr,bn(n,0),Sn(n,r),dt(n,Ve()),s;if(s===6)throw Error(o(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Vn(n,ct,jt),dt(n,Ve()),null}function ka(n,r){var s=Ae;Ae|=1;try{return n(r)}finally{Ae=s,Ae===0&&(So=Ve()+500,vi&&mn())}}function Un(n){En!==null&&En.tag===0&&(Ae&6)===0&&To();var r=Ae;Ae|=1;var s=Tt.transition,d=Ne;try{if(Tt.transition=null,Ne=1,n)return n()}finally{Ne=d,Tt.transition=s,Ae=r,(Ae&6)===0&&mn()}}function Pa(){ht=_o.current,De(_o)}function bn(n,r){n.finishedWork=null,n.finishedLanes=0;var s=n.timeoutHandle;if(s!==-1&&(n.timeoutHandle=-1,MC(s)),qe!==null)for(s=qe.return;s!==null;){var d=s;switch(ql(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&gi();break;case 3:yo(),De(lt),De(Qe),jl();break;case 5:Xl(d);break;case 4:yo();break;case 13:De(Le);break;case 19:De(Le);break;case 10:Jl(d.type._context);break;case 22:case 23:Pa()}s=s.return}if(Oe=n,qe=n=Tn(n.current,null),Ke=ht=r,Be=0,fr=null,wa=Gi=Ln=0,ct=pr=null,Mn!==null){for(r=0;r<Mn.length;r++)if(s=Mn[r],d=s.interleaved,d!==null){s.interleaved=null;var m=d.next,y=s.pending;if(y!==null){var S=y.next;y.next=m,d.next=S}s.pending=d}Mn=null}return n}function gm(n,r){do{var s=qe;try{if(Ol(),Ni.current=Mi,Ri){for(var d=Ue.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Ri=!1}if(Fn=0,ze=He=Ue=null,sr=!1,lr=0,Ca.current=null,s===null||s.return===null){Be=1,fr=r,qe=null;break}e:{var y=n,S=s.return,C=s,A=r;if(r=Ke,C.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var D=A,H=C,O=H.tag;if((H.mode&1)===0&&(O===0||O===11||O===15)){var G=H.alternate;G?(H.updateQueue=G.updateQueue,H.memoizedState=G.memoizedState,H.lanes=G.lanes):(H.updateQueue=null,H.memoizedState=null)}var ne=Hp(S);if(ne!==null){ne.flags&=-257,Bp(ne,S,C,y,r),ne.mode&1&&qp(y,D,r),r=ne,A=D;var se=r.updateQueue;if(se===null){var le=new Set;le.add(A),r.updateQueue=le}else se.add(A);break e}else{if((r&1)===0){qp(y,D,r),Ma();break e}A=Error(o(426))}}else if(Fe&&C.mode&1){var Ge=Hp(S);if(Ge!==null){(Ge.flags&65536)===0&&(Ge.flags|=256),Bp(Ge,S,C,y,r),$l(vo(A,C));break e}}y=A=vo(A,C),Be!==4&&(Be=2),pr===null?pr=[y]:pr.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,r&=-r,y.lanes|=r;var R=Vp(y,A,r);dp(y,R);break e;case 1:C=A;var x=y.type,P=y.stateNode;if((y.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(vn===null||!vn.has(P)))){y.flags|=65536,r&=-r,y.lanes|=r;var Q=Gp(y,C,r);dp(y,Q);break e}}y=y.return}while(y!==null)}Em(s)}catch(ue){r=ue,qe===s&&s!==null&&(qe=s=s.return);continue}break}while(!0)}function ym(){var n=Vi.current;return Vi.current=Mi,n===null?Mi:n}function Ma(){(Be===0||Be===3||Be===2)&&(Be=4),Oe===null||(Ln&268435455)===0&&(Gi&268435455)===0||Sn(Oe,Ke)}function Oi(n,r){var s=Ae;Ae|=2;var d=ym();(Oe!==n||Ke!==r)&&(jt=null,bn(n,r));do try{ow();break}catch(m){gm(n,m)}while(!0);if(Ol(),Ae=s,Vi.current=d,qe!==null)throw Error(o(261));return Oe=null,Ke=0,Be}function ow(){for(;qe!==null;)vm(qe)}function rw(){for(;qe!==null&&!RT();)vm(qe)}function vm(n){var r=Tm(n.alternate,n,ht);n.memoizedProps=n.pendingProps,r===null?Em(n):qe=r,Ca.current=null}function Em(n){var r=n;do{var s=r.alternate;if(n=r.return,(r.flags&32768)===0){if(s=QC(s,r,ht),s!==null){qe=s;return}}else{if(s=XC(s,r),s!==null){s.flags&=32767,qe=s;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Be=6,qe=null;return}}if(r=r.sibling,r!==null){qe=r;return}qe=r=n}while(r!==null);Be===0&&(Be=5)}function Vn(n,r,s){var d=Ne,m=Tt.transition;try{Tt.transition=null,Ne=1,iw(n,r,s,d)}finally{Tt.transition=m,Ne=d}return null}function iw(n,r,s,d){do To();while(En!==null);if((Ae&6)!==0)throw Error(o(327));s=n.finishedWork;var m=n.finishedLanes;if(s===null)return null;if(n.finishedWork=null,n.finishedLanes=0,s===n.current)throw Error(o(177));n.callbackNode=null,n.callbackPriority=0;var y=s.lanes|s.childLanes;if(GT(n,y),n===Oe&&(qe=Oe=null,Ke=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Hi||(Hi=!0,Cm(Yr,function(){return To(),null})),y=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||y){y=Tt.transition,Tt.transition=null;var S=Ne;Ne=1;var C=Ae;Ae|=4,Ca.current=null,jC(n,s),um(s,n),AC(Ml),ni=!!Pl,Ml=Pl=null,n.current=s,ew(s),kT(),Ae=C,Ne=S,Tt.transition=y}else n.current=s;if(Hi&&(Hi=!1,En=n,Bi=m),y=n.pendingLanes,y===0&&(vn=null),DT(s.stateNode),dt(n,Ve()),r!==null)for(d=n.onRecoverableError,s=0;s<r.length;s++)m=r[s],d(m.value,{componentStack:m.stack,digest:m.digest});if(qi)throw qi=!1,n=xa,xa=null,n;return(Bi&1)!==0&&n.tag!==0&&To(),y=n.pendingLanes,(y&1)!==0?n===Ia?mr++:(mr=0,Ia=n):mr=0,mn(),null}function To(){if(En!==null){var n=lf(Bi),r=Tt.transition,s=Ne;try{if(Tt.transition=null,Ne=16>n?16:n,En===null)var d=!1;else{if(n=En,En=null,Bi=0,(Ae&6)!==0)throw Error(o(331));var m=Ae;for(Ae|=4,ie=n.current;ie!==null;){var y=ie,S=y.child;if((ie.flags&16)!==0){var C=y.deletions;if(C!==null){for(var A=0;A<C.length;A++){var D=C[A];for(ie=D;ie!==null;){var H=ie;switch(H.tag){case 0:case 11:case 15:dr(8,H,y)}var O=H.child;if(O!==null)O.return=H,ie=O;else for(;ie!==null;){H=ie;var G=H.sibling,ne=H.return;if(rm(H),H===D){ie=null;break}if(G!==null){G.return=ne,ie=G;break}ie=ne}}}var se=y.alternate;if(se!==null){var le=se.child;if(le!==null){se.child=null;do{var Ge=le.sibling;le.sibling=null,le=Ge}while(le!==null)}}ie=y}}if((y.subtreeFlags&2064)!==0&&S!==null)S.return=y,ie=S;else e:for(;ie!==null;){if(y=ie,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:dr(9,y,y.return)}var R=y.sibling;if(R!==null){R.return=y.return,ie=R;break e}ie=y.return}}var x=n.current;for(ie=x;ie!==null;){S=ie;var P=S.child;if((S.subtreeFlags&2064)!==0&&P!==null)P.return=S,ie=P;else e:for(S=x;ie!==null;){if(C=ie,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:bi(9,C)}}catch(ue){be(C,C.return,ue)}if(C===S){ie=null;break e}var Q=C.sibling;if(Q!==null){Q.return=C.return,ie=Q;break e}ie=C.return}}if(Ae=m,mn(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Qr,n)}catch{}d=!0}return d}finally{Ne=s,Tt.transition=r}}return!1}function _m(n,r,s){r=vo(s,r),r=Vp(n,r,1),n=gn(n,r,1),r=ot(),n!==null&&(Vo(n,1,r),dt(n,r))}function be(n,r,s){if(n.tag===3)_m(n,n,s);else for(;r!==null;){if(r.tag===3){_m(r,n,s);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(vn===null||!vn.has(d))){n=vo(s,n),n=Gp(r,n,1),r=gn(r,n,1),n=ot(),r!==null&&(Vo(r,1,n),dt(r,n));break}}r=r.return}}function sw(n,r,s){var d=n.pingCache;d!==null&&d.delete(r),r=ot(),n.pingedLanes|=n.suspendedLanes&s,Oe===n&&(Ke&s)===s&&(Be===4||Be===3&&(Ke&130023424)===Ke&&500>Ve()-Aa?bn(n,0):wa|=s),dt(n,r)}function Sm(n,r){r===0&&((n.mode&1)===0?r=1:(r=Zr,Zr<<=1,(Zr&130023424)===0&&(Zr=4194304)));var s=ot();n=Qt(n,r),n!==null&&(Vo(n,r,s),dt(n,s))}function lw(n){var r=n.memoizedState,s=0;r!==null&&(s=r.retryLane),Sm(n,s)}function aw(n,r){var s=0;switch(n.tag){case 13:var d=n.stateNode,m=n.memoizedState;m!==null&&(s=m.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(o(314))}d!==null&&d.delete(r),Sm(n,s)}var Tm;Tm=function(n,r,s){if(n!==null)if(n.memoizedProps!==r.pendingProps||lt.current)ut=!0;else{if((n.lanes&s)===0&&(r.flags&128)===0)return ut=!1,YC(n,r,s);ut=(n.flags&131072)!==0}else ut=!1,Fe&&(r.flags&1048576)!==0&&tp(r,_i,r.index);switch(r.lanes=0,r.tag){case 2:var d=r.type;Li(n,r),n=r.pendingProps;var m=uo(r,Qe.current);go(r,s),m=na(null,r,d,n,m,s);var y=oa();return r.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,at(d)?(y=!0,yi(r)):y=!1,r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Yl(r),m.updater=Di,r.stateNode=m,m._reactInternals=r,ua(r,d,n,s),r=pa(null,r,d,!0,y,s)):(r.tag=0,Fe&&y&&Gl(r),nt(null,r,m,s),r=r.child),r;case 16:d=r.elementType;e:{switch(Li(n,r),n=r.pendingProps,m=d._init,d=m(d._payload),r.type=d,m=r.tag=cw(d),n=Mt(d,n),m){case 0:r=fa(null,r,d,n,s);break e;case 1:r=Kp(null,r,d,n,s);break e;case 11:r=$p(null,r,d,n,s);break e;case 14:r=zp(null,r,d,Mt(d.type,n),s);break e}throw Error(o(306,d,""))}return r;case 0:return d=r.type,m=r.pendingProps,m=r.elementType===d?m:Mt(d,m),fa(n,r,d,m,s);case 1:return d=r.type,m=r.pendingProps,m=r.elementType===d?m:Mt(d,m),Kp(n,r,d,m,s);case 3:e:{if(Yp(r),n===null)throw Error(o(387));d=r.pendingProps,y=r.memoizedState,m=y.element,cp(n,r),xi(r,d,null,s);var S=r.memoizedState;if(d=S.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){m=vo(Error(o(423)),r),r=Qp(n,r,d,s,m);break e}else if(d!==m){m=vo(Error(o(424)),r),r=Qp(n,r,d,s,m);break e}else for(mt=dn(r.stateNode.containerInfo.firstChild),pt=r,Fe=!0,Pt=null,s=ap(r,null,d,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(po(),d===m){r=Zt(n,r,s);break e}nt(n,r,d,s)}r=r.child}return r;case 5:return pp(r),n===null&&Bl(r),d=r.type,m=r.pendingProps,y=n!==null?n.memoizedProps:null,S=m.children,Dl(d,m)?S=null:y!==null&&Dl(d,y)&&(r.flags|=32),Wp(n,r),nt(n,r,S,s),r.child;case 6:return n===null&&Bl(r),null;case 13:return Xp(n,r,s);case 4:return Ql(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=mo(r,null,d,s):nt(n,r,d,s),r.child;case 11:return d=r.type,m=r.pendingProps,m=r.elementType===d?m:Mt(d,m),$p(n,r,d,m,s);case 7:return nt(n,r,r.pendingProps,s),r.child;case 8:return nt(n,r,r.pendingProps.children,s),r.child;case 12:return nt(n,r,r.pendingProps.children,s),r.child;case 10:e:{if(d=r.type._context,m=r.pendingProps,y=r.memoizedProps,S=m.value,Re(Ci,d._currentValue),d._currentValue=S,y!==null)if(kt(y.value,S)){if(y.children===m.children&&!lt.current){r=Zt(n,r,s);break e}}else for(y=r.child,y!==null&&(y.return=r);y!==null;){var C=y.dependencies;if(C!==null){S=y.child;for(var A=C.firstContext;A!==null;){if(A.context===d){if(y.tag===1){A=Xt(-1,s&-s),A.tag=2;var D=y.updateQueue;if(D!==null){D=D.shared;var H=D.pending;H===null?A.next=A:(A.next=H.next,H.next=A),D.pending=A}}y.lanes|=s,A=y.alternate,A!==null&&(A.lanes|=s),Wl(y.return,s,r),C.lanes|=s;break}A=A.next}}else if(y.tag===10)S=y.type===r.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(o(341));S.lanes|=s,C=S.alternate,C!==null&&(C.lanes|=s),Wl(S,s,r),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===r){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}nt(n,r,m.children,s),r=r.child}return r;case 9:return m=r.type,d=r.pendingProps.children,go(r,s),m=_t(m),d=d(m),r.flags|=1,nt(n,r,d,s),r.child;case 14:return d=r.type,m=Mt(d,r.pendingProps),m=Mt(d.type,m),zp(n,r,d,m,s);case 15:return Op(n,r,r.type,r.pendingProps,s);case 17:return d=r.type,m=r.pendingProps,m=r.elementType===d?m:Mt(d,m),Li(n,r),r.tag=1,at(d)?(n=!0,yi(r)):n=!1,go(r,s),Up(r,d,m),ua(r,d,m,s),pa(null,r,d,!0,n,s);case 19:return jp(n,r,s);case 22:return Jp(n,r,s)}throw Error(o(156,r.tag))};function Cm(n,r){return tf(n,r)}function uw(n,r,s,d){this.tag=n,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(n,r,s,d){return new uw(n,r,s,d)}function Da(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cw(n){if(typeof n=="function")return Da(n)?1:0;if(n!=null){if(n=n.$$typeof,n===te)return 11;if(n===pe)return 14}return 2}function Tn(n,r){var s=n.alternate;return s===null?(s=Ct(n.tag,r,n.key,n.mode),s.elementType=n.elementType,s.type=n.type,s.stateNode=n.stateNode,s.alternate=n,n.alternate=s):(s.pendingProps=r,s.type=n.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=n.flags&14680064,s.childLanes=n.childLanes,s.lanes=n.lanes,s.child=n.child,s.memoizedProps=n.memoizedProps,s.memoizedState=n.memoizedState,s.updateQueue=n.updateQueue,r=n.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=n.sibling,s.index=n.index,s.ref=n.ref,s}function Ji(n,r,s,d,m,y){var S=2;if(d=n,typeof n=="function")Da(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case U:return Gn(s.children,m,y,r);case ee:S=8,m|=8;break;case K:return n=Ct(12,s,r,m|2),n.elementType=K,n.lanes=y,n;case $:return n=Ct(13,s,r,m),n.elementType=$,n.lanes=y,n;case fe:return n=Ct(19,s,r,m),n.elementType=fe,n.lanes=y,n;case Te:return Wi(s,m,y,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ae:S=10;break e;case W:S=9;break e;case te:S=11;break e;case pe:S=14;break e;case Ee:S=16,d=null;break e}throw Error(o(130,n==null?n:typeof n,""))}return r=Ct(S,s,r,m),r.elementType=n,r.type=d,r.lanes=y,r}function Gn(n,r,s,d){return n=Ct(7,n,d,r),n.lanes=s,n}function Wi(n,r,s,d){return n=Ct(22,n,d,r),n.elementType=Te,n.lanes=s,n.stateNode={isHidden:!1},n}function Fa(n,r,s){return n=Ct(6,n,null,r),n.lanes=s,n}function La(n,r,s){return r=Ct(4,n.children!==null?n.children:[],n.key,r),r.lanes=s,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function dw(n,r,s,d,m){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=al(0),this.expirationTimes=al(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=al(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Ua(n,r,s,d,m,y,S,C,A){return n=new dw(n,r,s,C,A),r===1?(r=1,y===!0&&(r|=8)):r=0,y=Ct(3,null,null,r),n.current=y,y.stateNode=n,y.memoizedState={element:d,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yl(y),n}function fw(n,r,s){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:d==null?null:""+d,children:n,containerInfo:r,implementation:s}}function wm(n){if(!n)return pn;n=n._reactInternals;e:{if(In(n)!==n||n.tag!==1)throw Error(o(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(at(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(o(171))}if(n.tag===1){var s=n.type;if(at(s))return Zf(n,s,r)}return r}function Am(n,r,s,d,m,y,S,C,A){return n=Ua(s,d,!0,n,m,y,S,C,A),n.context=wm(null),s=n.current,d=ot(),m=_n(s),y=Xt(d,m),y.callback=r??null,gn(s,y,m),n.current.lanes=m,Vo(n,m,d),dt(n,d),n}function Ki(n,r,s,d){var m=r.current,y=ot(),S=_n(m);return s=wm(s),r.context===null?r.context=s:r.pendingContext=s,r=Xt(y,S),r.payload={element:n},d=d===void 0?null:d,d!==null&&(r.callback=d),n=gn(m,r,S),n!==null&&(Lt(n,m,S,y),Ai(n,m,S)),S}function Yi(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var s=n.retryLane;n.retryLane=s!==0&&s<r?s:r}}function ba(n,r){xm(n,r),(n=n.alternate)&&xm(n,r)}function pw(){return null}var Im=typeof reportError=="function"?reportError:function(n){console.error(n)};function Va(n){this._internalRoot=n}Qi.prototype.render=Va.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(o(409));Ki(n,r,null,null)},Qi.prototype.unmount=Va.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Un(function(){Ki(null,n,null,null)}),r[Jt]=null}};function Qi(n){this._internalRoot=n}Qi.prototype.unstable_scheduleHydration=function(n){if(n){var r=cf();n={blockedOn:null,target:n,priority:r};for(var s=0;s<an.length&&r!==0&&r<an[s].priority;s++);an.splice(s,0,n),s===0&&pf(n)}};function Ga(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Xi(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Nm(){}function mw(n,r,s,d,m){if(m){if(typeof d=="function"){var y=d;d=function(){var D=Yi(S);y.call(D)}}var S=Am(r,d,n,0,null,!1,!1,"",Nm);return n._reactRootContainer=S,n[Jt]=S.current,Zo(n.nodeType===8?n.parentNode:n),Un(),S}for(;m=n.lastChild;)n.removeChild(m);if(typeof d=="function"){var C=d;d=function(){var D=Yi(A);C.call(D)}}var A=Ua(n,0,!1,null,null,!1,!1,"",Nm);return n._reactRootContainer=A,n[Jt]=A.current,Zo(n.nodeType===8?n.parentNode:n),Un(function(){Ki(r,A,s,d)}),A}function Zi(n,r,s,d,m){var y=s._reactRootContainer;if(y){var S=y;if(typeof m=="function"){var C=m;m=function(){var A=Yi(S);C.call(A)}}Ki(r,S,n,m)}else S=mw(s,r,n,m,d);return Yi(S)}af=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var s=bo(r.pendingLanes);s!==0&&(ul(r,s|1),dt(r,Ve()),(Ae&6)===0&&(So=Ve()+500,mn()))}break;case 13:Un(function(){var d=Qt(n,1);if(d!==null){var m=ot();Lt(d,n,1,m)}}),ba(n,1)}},cl=function(n){if(n.tag===13){var r=Qt(n,134217728);if(r!==null){var s=ot();Lt(r,n,134217728,s)}ba(n,134217728)}},uf=function(n){if(n.tag===13){var r=_n(n),s=Qt(n,r);if(s!==null){var d=ot();Lt(s,n,r,d)}ba(n,r)}},cf=function(){return Ne},df=function(n,r){var s=Ne;try{return Ne=n,r()}finally{Ne=s}},nl=function(n,r,s){switch(r){case"input":if(Ks(n,s),r=s.name,s.type==="radio"&&r!=null){for(s=n;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<s.length;r++){var d=s[r];if(d!==n&&d.form===n.form){var m=hi(d);if(!m)throw Error(o(90));Fd(d),Ks(d,m)}}}break;case"textarea":Gd(n,s);break;case"select":r=s.value,r!=null&&Xn(n,!!s.multiple,r,!1)}},Kd=ka,Yd=Un;var hw={usingClientEntryPoint:!1,Events:[tr,lo,hi,Jd,Wd,ka]},hr={findFiberByHostInstance:Nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gw={bundleType:hr.bundleType,version:hr.version,rendererPackageName:hr.rendererPackageName,rendererConfig:hr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=jd(n),n===null?null:n.stateNode},findFiberByHostInstance:hr.findFiberByHostInstance||pw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ji.isDisabled&&ji.supportsFiber)try{Qr=ji.inject(gw),bt=ji}catch{}}return it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hw,it.createPortal=function(n,r){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ga(r))throw Error(o(200));return fw(n,r,null,s)},it.createRoot=function(n,r){if(!Ga(n))throw Error(o(299));var s=!1,d="",m=Im;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),r=Ua(n,1,!1,null,null,s,!1,d,m),n[Jt]=r.current,Zo(n.nodeType===8?n.parentNode:n),new Va(r)},it.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=jd(r),n=n===null?null:n.stateNode,n},it.flushSync=function(n){return Un(n)},it.hydrate=function(n,r,s){if(!Xi(r))throw Error(o(200));return Zi(null,n,r,!0,s)},it.hydrateRoot=function(n,r,s){if(!Ga(n))throw Error(o(405));var d=s!=null&&s.hydratedSources||null,m=!1,y="",S=Im;if(s!=null&&(s.unstable_strictMode===!0&&(m=!0),s.identifierPrefix!==void 0&&(y=s.identifierPrefix),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),r=Am(r,null,n,1,s??null,m,!1,y,S),n[Jt]=r.current,Zo(n),d)for(n=0;n<d.length;n++)s=d[n],m=s._getVersion,m=m(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,m]:r.mutableSourceEagerHydrationData.push(s,m);return new Qi(r)},it.render=function(n,r,s){if(!Xi(r))throw Error(o(200));return Zi(null,n,r,!1,s)},it.unmountComponentAtNode=function(n){if(!Xi(n))throw Error(o(40));return n._reactRootContainer?(Un(function(){Zi(null,null,n,!1,function(){n._reactRootContainer=null,n[Jt]=null})}),!0):!1},it.unstable_batchedUpdates=ka,it.unstable_renderSubtreeIntoContainer=function(n,r,s,d){if(!Xi(s))throw Error(o(200));if(n==null||n._reactInternals===void 0)throw Error(o(38));return Zi(n,r,s,!1,d)},it.version="18.3.1-next-f1338f8080-20240426",it}var ou;function eg(){if(ou)return vs.exports;ou=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vs.exports=jh(),vs.exports}var ru;function tg(){if(ru)return Tr;ru=1;var t=eg();return Tr.createRoot=t.createRoot,Tr.hydrateRoot=t.hydrateRoot,Tr}var ng=tg();const og=wt(ng),rg=({settings:t,isDark:e,hasApiKey:o,onUpdateSettings:i,onOpenApiKeyDialog:l})=>T.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[T.jsx("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:T.jsxs("div",{className:"flex items-center justify-between px-1",children:[T.jsx("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest",children:"API Key"}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:`text-[9px] font-black uppercase ${o?"text-emerald-500":"text-amber-500"}`,children:o?"Configured":"Not Set"}),T.jsxs("button",{onClick:l,className:`p-2 rounded-md transition-all flex items-center gap-2 text-[10px] font-black uppercase border ${e?"bg-white/5 border-white/10":"bg-white border-slate-200"}`,children:[T.jsx(Xa,{size:12,className:o?"text-emerald-500":"text-amber-500"}),o?"Update":"Configure"]})]})]})}),T.jsx("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:T.jsxs("div",{className:"flex items-center justify-between px-1",children:[T.jsx("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest",children:"Interface Theme"}),T.jsxs("button",{onClick:()=>i({theme:e?Ao.LIGHT:Ao.DARK}),className:`p-2 rounded-md transition-all flex items-center gap-2 text-[10px] font-black uppercase border ${e?"bg-white/5 border-white/10":"bg-slate-100 border-slate-200"}`,children:[e?T.jsx(Dh,{size:12,className:"text-amber-400"}):T.jsx(wh,{size:12,className:"text-blue-500"}),e?"Switch to Light":"Switch to Dark"]})]})}),T.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[T.jsx("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest ml-1",children:"Active Synthesis Model"}),T.jsxs("select",{value:t.primaryModel,onChange:c=>i({primaryModel:c.target.value}),className:`w-full p-2 rounded-md border text-[10px] font-black uppercase transition-all appearance-none outline-none ${e?"bg-black/40 border-white/10 focus:border-blue-500/50":"bg-white border-slate-200 shadow-sm"}`,children:[T.jsx("option",{value:vr.FLASH,children:"Flash 2.0 (High Speed)"}),T.jsx("option",{value:vr.PRO,children:"Imagen 3 (High Fidelity)"})]})]}),T.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[T.jsx("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest ml-1",children:"Global Prefix"}),T.jsx("input",{value:t.prefix,onChange:c=>i({prefix:c.target.value}),placeholder:"Text to prepend to all prompts...",className:`w-full p-2 rounded-md border text-xs outline-none ${e?"bg-black/40 border-white/10":"bg-white border-slate-200"}`})]}),T.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[T.jsx("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest ml-1",children:"Global Suffix"}),T.jsx("input",{value:t.suffix,onChange:c=>i({suffix:c.target.value}),placeholder:"Text to append to all prompts...",className:`w-full p-2 rounded-md border text-xs outline-none ${e?"bg-black/40 border-white/10":"bg-white border-slate-200"}`})]}),T.jsx("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:T.jsxs("div",{className:"flex items-center justify-between px-1",children:[T.jsxs("div",{children:[T.jsx("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest block",children:"Sidebar Position"}),T.jsx("p",{className:"text-[8px] opacity-30 mt-1",children:"Where to show Nano Flow panel"})]}),T.jsxs("button",{onClick:()=>i({position:t.position===tn.LEFT?tn.RIGHT:tn.LEFT}),className:`p-2 rounded-md transition-all flex items-center gap-2 text-[10px] font-black uppercase border ${e?"bg-white/5 border-white/10":"bg-slate-100 border-slate-200"}`,children:[t.position===tn.LEFT?T.jsx(Ah,{size:12,className:"text-blue-500"}):T.jsx(xh,{size:12,className:"text-blue-500"}),t.position===tn.LEFT?"Left Side":"Right Side"]})]})}),T.jsxs("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:[T.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[T.jsxs("div",{children:[T.jsx("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest block",children:"Global Negative Prompts"}),T.jsx("p",{className:"text-[8px] opacity-30 mt-1",children:"Things to avoid in all generations"})]}),T.jsx("button",{onClick:()=>i({globalNegativesEnabled:!t.globalNegativesEnabled}),className:`w-10 h-5 rounded-full transition-all relative ${t.globalNegativesEnabled?"bg-blue-600":"bg-white/10"}`,children:T.jsx("div",{className:`absolute w-4 h-4 rounded-full bg-white top-0.5 transition-all shadow-md ${t.globalNegativesEnabled?"left-5":"left-0.5"}`})})]}),T.jsx("textarea",{value:t.globalNegatives,onChange:c=>i({globalNegatives:c.target.value}),placeholder:"Things to avoid in all generations...",disabled:!t.globalNegativesEnabled,className:`w-full p-2 rounded-md border text-xs outline-none min-h-[60px] transition-opacity ${e?"bg-black/40 border-white/10":"bg-white border-slate-200"} ${t.globalNegativesEnabled?"":"opacity-40"}`})]}),T.jsx("div",{className:`p-2 space-y-2 border rounded-md ${e?"border-white/5 bg-white/2":"border-slate-100 bg-slate-50"}`,children:T.jsxs("div",{className:"flex items-center justify-between px-1",children:[T.jsxs("div",{children:[T.jsx("label",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest block",children:"Drip Feed Mode"}),T.jsx("p",{className:"text-[8px] opacity-30 mt-1",children:"Add random delays between generations"})]}),T.jsx("button",{onClick:()=>i({dripFeed:!t.dripFeed}),className:`w-10 h-5 rounded-full transition-all relative ${t.dripFeed?"bg-blue-600":"bg-white/10"}`,children:T.jsx("div",{className:`absolute w-4 h-4 rounded-full bg-white top-0.5 transition-all shadow-md ${t.dripFeed?"left-5":"left-0.5"}`})})]})})]}),ig=({folders:t,isDark:e,onCreateFolder:o,onDeleteFolder:i,onToggleFolder:l,onUseTemplate:c,onDeleteTemplate:f,onSaveTemplate:p,onImproveTemplate:g,onImproveFolder:h})=>{const[v,E]=ge.useState(!1),[_,w]=ge.useState(""),[k,M]=ge.useState(new Set),[I,F]=ge.useState(null),J=ge.useRef(null),b=()=>{_.trim()&&(o(_.trim()),w(""),E(!1))},q=(W,te)=>{te.stopPropagation(),confirm("Delete folder and all templates inside?")&&i(W)},X=(W,te,$)=>{$.stopPropagation(),confirm("Delete this template?")&&f(W,te)},L=(W,te,$)=>{if($&&($.stopPropagation(),$.preventDefault()),te){const fe=t.find(Ee=>Ee.id===W),pe=fe==null?void 0:fe.templates.find(Ee=>Ee.id===te);pe&&F({folderId:W,template:{...pe}})}else F({folderId:W,template:{id:Math.random().toString(36).substr(2,9),name:"",text:"",createdAt:Date.now(),lastEditedAt:Date.now(),timesUsed:0,images:[]}})},U=()=>{!I||!I.template.name||(p(I.folderId,I.template),F(null))},ee=async(W,te,$)=>{$.stopPropagation(),M(fe=>new Set(fe).add(te));try{await g(W,te)}finally{M(fe=>{const pe=new Set(fe);return pe.delete(te),pe})}},K=async(W,te)=>{te.stopPropagation();const $=t.find(pe=>pe.id===W);if(!$)return;const fe=$.templates.map(pe=>pe.id);M(pe=>new Set([...Array.from(pe),...fe,W]));try{await h(W)}finally{M(pe=>{const Ee=new Set(pe);return fe.forEach(Te=>Ee.delete(Te)),Ee.delete(W),Ee})}},ae=W=>{Array.from(W.target.files||[]).forEach($=>{const fe=new FileReader;fe.onload=pe=>{var Te;const Ee=(Te=pe.target)==null?void 0:Te.result;I&&F(Y=>Y?{...Y,template:{...Y.template,images:[...Y.template.images||[],Ee]}}:null)},fe.readAsDataURL($)}),W.target.value=""};return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"space-y-2 animate-in fade-in duration-300",children:[T.jsxs("div",{className:"flex items-center justify-between px-1",children:[T.jsx("span",{className:"text-[9px] font-black uppercase opacity-40 tracking-widest",children:"Managed Collections"}),T.jsx("button",{onClick:()=>E(!0),className:"p-1.5 rounded-md bg-blue-500/10 text-blue-500 hover:bg-blue-600 hover:text-white transition-all shadow-sm",children:T.jsx(Eh,{size:14})})]}),T.jsxs("div",{className:"space-y-2",children:[t.map(W=>T.jsxs("div",{className:"space-y-1",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsxs("button",{onClick:()=>l(W.id),className:`flex-1 flex items-center gap-2 p-2 rounded-md border text-xs font-black transition-all ${e?"bg-white/5 border-white/5 hover:bg-white/10":"bg-slate-50 border-slate-100 hover:bg-slate-100"}`,children:[T.jsx(_h,{size:14,className:"text-blue-500"}),T.jsx("span",{className:"flex-1 text-left",children:W.name}),T.jsx(ch,{size:14,className:`transition-transform duration-300 ${W.isOpen?"rotate-180":""}`})]}),T.jsx("button",{onClick:te=>K(W.id,te),disabled:k.has(W.id),title:"Improve all prompts in folder",className:`p-2 rounded-md transition-all ${k.has(W.id)?"bg-amber-500 text-white animate-pulse":"bg-amber-500/10 text-amber-500/60 hover:bg-amber-600 hover:text-white"}`,children:k.has(W.id)?T.jsx(Za,{size:14,className:"animate-spin"}):T.jsx(gs,{size:14})}),T.jsx("button",{onClick:te=>q(W.id,te),className:"p-2 rounded-md bg-red-500/10 text-red-500/60 hover:bg-red-600 hover:text-white transition-all",children:T.jsx(yr,{size:14})})]}),W.isOpen&&T.jsxs("div",{className:"space-y-1 mt-1 animate-in slide-in-from-top-1",children:[W.templates.map(te=>T.jsx("div",{className:`group flex flex-col p-2 rounded-md border shadow-sm transition-all ${e?"bg-white/2 border-white/5 hover:border-blue-500/30":"bg-white border-slate-50"}`,children:T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>c(W.id,te.id),children:[T.jsx("p",{className:"text-[10px] font-black text-blue-500 truncate",children:te.name}),T.jsxs("p",{className:"text-[9px] opacity-40 truncate",children:['"',te.text,'"']})]}),T.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[T.jsx("button",{onClick:$=>ee(W.id,te.id,$),disabled:k.has(te.id),className:`p-1 rounded-md transition-all ${k.has(te.id)?"bg-amber-500 text-white animate-pulse":"hover:bg-amber-500/20 text-amber-500"}`,title:"AI Optimization",children:k.has(te.id)?T.jsx(Za,{size:12,className:"animate-spin"}):T.jsx(gs,{size:12})}),T.jsx("button",{onClick:$=>L(W.id,te.id,$),className:"p-1 rounded-md hover:bg-blue-500/20",children:T.jsx(Nh,{size:12})}),T.jsx("button",{onClick:$=>X(W.id,te.id,$),className:"p-1 rounded-md hover:bg-red-500/20 text-red-500",children:T.jsx(yr,{size:12})}),T.jsx("button",{onClick:()=>c(W.id,te.id),className:"p-1 rounded-md bg-blue-600 text-white shadow-lg",children:T.jsx(kh,{size:12})})]})]})},te.id)),T.jsx("button",{onClick:te=>L(W.id,void 0,te),className:"w-full p-2 rounded-md border-2 border-dashed border-white/5 text-[9px] font-black uppercase opacity-20 hover:opacity-100 transition-all",children:"New Style"})]})]},W.id)),t.length===0&&T.jsxs("div",{className:"py-12 flex flex-col items-center justify-center opacity-10 gap-2 border-2 border-dashed border-white/5 rounded-md",children:[T.jsx(fs,{size:24}),T.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Library Empty"})]})]})]}),v&&T.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/80 backdrop-blur-md p-2",children:T.jsxs("div",{className:`max-w-md w-full p-2 rounded-md border shadow-2xl ${e?"glass-panel border-white/10":"bg-white border-slate-200"}`,children:[T.jsxs("div",{className:"flex items-center justify-between p-2",children:[T.jsx("h2",{className:"text-sm font-black",children:"New Folder"}),T.jsx("button",{onClick:()=>E(!1),className:"p-1 hover:bg-white/5 rounded-md transition-all",children:T.jsx(en,{size:18})})]}),T.jsxs("div",{className:"p-2 space-y-2",children:[T.jsx("input",{autoFocus:!0,value:_,onChange:W=>w(W.target.value),onKeyDown:W=>W.key==="Enter"&&b(),placeholder:"Folder Name",className:`w-full p-2 rounded-md outline-none border text-xs font-bold ${e?"bg-black/40 border-white/10":"bg-slate-50 border-slate-200"}`}),T.jsx("button",{onClick:b,className:"w-full p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-md font-black text-xs",children:"Create"})]})]})}),I&&T.jsx("div",{className:"fixed inset-0 z-[900] flex items-center justify-center bg-black/80 backdrop-blur-md p-2",children:T.jsxs("div",{className:`max-w-xl w-full p-2 rounded-md border shadow-2xl ${e?"glass-panel border-white/10":"bg-white border-slate-200"}`,children:[T.jsxs("div",{className:"flex items-center justify-between p-2",children:[T.jsx("h2",{className:"text-sm font-black",children:I.template.createdAt?"Refine Prompt":"New Library Entry"}),T.jsx("button",{onClick:()=>F(null),className:"p-1 hover:bg-white/5 rounded-md",children:T.jsx(en,{size:18})})]}),T.jsxs("div",{className:"p-2 space-y-3",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-[10px] font-black uppercase opacity-40 ml-1",children:"Template Title"}),T.jsx("input",{autoFocus:!0,value:I.template.name,onChange:W=>F({...I,template:{...I.template,name:W.target.value}}),placeholder:"e.g. Dreamy Portrait",className:`w-full p-2 rounded-md outline-none border font-bold text-xs ${e?"bg-black/40 border-white/10":"bg-slate-50 border-slate-200"}`})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-[10px] font-black uppercase opacity-40 ml-1",children:"Logic / Modifiers"}),T.jsx("textarea",{value:I.template.text,onChange:W=>F({...I,template:{...I.template,text:W.target.value}}),placeholder:"Add instructions...",className:`w-full p-2 rounded-md outline-none border min-h-[100px] text-xs ${e?"bg-black/40 border-white/10":"bg-slate-50 border-slate-200"}`})]}),T.jsxs("div",{className:"space-y-1",children:[T.jsx("label",{className:"text-[10px] font-black uppercase opacity-40 ml-1",children:"Assets"}),T.jsxs("div",{onClick:()=>{var W;return(W=J.current)==null?void 0:W.click()},className:`p-2 rounded-md border-2 border-dashed transition-all cursor-pointer flex flex-wrap gap-1 min-h-[80px] items-center justify-center ${e?"bg-white/5 border-white/10 hover:border-blue-500/50":"bg-slate-50 border-slate-200 hover:border-blue-500/50"}`,children:[T.jsx("input",{ref:J,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:ae}),!I.template.images||I.template.images.length===0?T.jsxs("div",{className:"flex flex-col items-center gap-1 opacity-20",children:[T.jsx(hs,{size:20}),T.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Select Files"})]}):I.template.images.map((W,te)=>T.jsxs("div",{className:"relative group/asset",onClick:$=>$.stopPropagation(),children:[T.jsx("img",{src:W,className:"w-12 h-12 rounded-md object-cover border border-white/10 shadow-md",alt:"ref"}),T.jsx("button",{onClick:()=>{var $;return F({...I,template:{...I.template,images:($=I.template.images)==null?void 0:$.filter((fe,pe)=>pe!==te)}})},className:"absolute -top-1.5 -right-1.5 bg-red-600 text-white rounded-md p-1 shadow-lg scale-75 hover:scale-100 transition-transform",children:T.jsx(en,{size:8})})]},te))]})]}),T.jsxs("button",{onClick:U,className:"w-full p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-md font-black text-xs flex items-center justify-center gap-2 shadow-lg",children:[T.jsx(Ph,{size:14})," Commit to Library"]})]})]})})]})},ke={textInput:'.ql-editor[contenteditable="true"]',textInputAlt:'rich-textarea .ql-editor[contenteditable="true"]',textInputAlt2:'div[role="textbox"][contenteditable="true"]',textInputAlt3:'.textarea[contenteditable="true"]',toolboxButton:'button[aria-label=""]',toolboxButtonAlt:"button.toolbox-drawer-button",toolboxButtonAlt2:".toolbox-drawer-button-with-label",toolboxButtonAlt3:'button[aria-label="Tools"]',submitButton:'button[aria-label=" "]',submitButtonAlt:'button[aria-label="Submit prompt"]',submitButtonAlt2:'button[aria-label="Send message"]',submitButtonAlt3:'button[data-test-id="send-button"]',submitButtonAlt4:".send-button",uploadButton:'button[aria-label="   "]',uploadButtonAlt:'button[aria-label="Open upload file menu"]',uploadButtonAlt2:".upload-button",uploadButtonAlt3:'button[data-test-id="upload-button"]',fileInput:'input[type="file"]',thinkingAvatar:".bard-avatar.thinking",processingState:".processing-state_container--processing",processingButton:".processing-state_button--processing"};function xo(...t){for(const e of t)try{const o=document.querySelector(e);if(o)return console.log("[Nano Flow] Found element with selector:",e),o}catch{}return null}function st(t){return new Promise(e=>setTimeout(e,t))}function sg(t,e){const o=t.split(","),i=o[0].match(/:(.*?);/),l=i?i[1]:"image/png",c=o.length>1?o[1]:o[0],f=atob(c),p=new Uint8Array(f.length);for(let g=0;g<f.length;g++)p[g]=f.charCodeAt(g);return new File([p],e,{type:l})}async function lg(t){if(!t||t.length===0)return!0;console.log("[Nano Flow] Uploading",t.length,"image(s)...");let e=xo(ke.uploadButton,ke.uploadButtonAlt,ke.uploadButtonAlt2,ke.uploadButtonAlt3);if(!e){const p=document.querySelectorAll('mat-icon[fonticon="add_2"], mat-icon[fonticon="add"], mat-icon[data-mat-icon-name="add"]');for(const g of p){const h=g.closest("button");if(h){e=h,console.log("[Nano Flow] Found upload button by add icon");break}}}if(!e){const p=document.querySelectorAll("button");for(const g of p){const h=(g.getAttribute("aria-label")||"").toLowerCase();if(h.includes("upload")||h.includes("file")||h.includes("")||h.includes("")){e=g,console.log("[Nano Flow] Found upload button by aria-label:",h);break}}}e?(e.click(),await st(500)):console.error("[Nano Flow] Upload button not found, trying to find file input directly");let o=document.querySelector(ke.fileInput);if(!o){const p=document.querySelectorAll('input[type="file"]');for(const g of p){const h=g.getAttribute("accept")||"";if(h.includes("image")||h==="*/*"||!h){o=g,console.log("[Nano Flow] Found file input with accept:",h);break}}}if(!o)return console.error("[Nano Flow] File input not found"),!1;const i=t.map((p,g)=>sg(p,`image_${g+1}.png`)),l=new DataTransfer;i.forEach(p=>l.items.add(p)),o.files=l.files;const c=new Event("change",{bubbles:!0});o.dispatchEvent(c);const f=new Event("input",{bubbles:!0});return o.dispatchEvent(f),await st(1e3),console.log("[Nano Flow] Images uploaded successfully"),!0}async function ag(t){var c;console.log("[Nano Flow] Pasting prompt:",t.substring(0,50)+"...");const e=xo(ke.textInput,ke.textInputAlt,ke.textInputAlt2,ke.textInputAlt3);if(!e)return console.error("[Nano Flow] Text input not found. Available elements:"),console.log("[Nano Flow] contenteditable elements:",document.querySelectorAll('[contenteditable="true"]')),console.log("[Nano Flow] textbox elements:",document.querySelectorAll('[role="textbox"]')),!1;const o=e;o.focus(),await st(100),o.innerHTML="",await st(50);const i=document.createElement("p");i.textContent=t,o.appendChild(i);const l=new InputEvent("input",{bubbles:!0,cancelable:!0,inputType:"insertText",data:t});o.dispatchEvent(l),o.dispatchEvent(new Event("input",{bubbles:!0})),o.dispatchEvent(new Event("change",{bubbles:!0}));try{const f=window.getSelection(),p=document.createRange();p.selectNodeContents(o),f==null||f.removeAllRanges(),f==null||f.addRange(p),document.execCommand("insertText",!1,t)}catch(f){console.log("[Nano Flow] execCommand fallback failed:",f)}return await st(200),o.classList.remove("ql-blank"),console.log("[Nano Flow] Prompt pasted successfully. Editor content:",(c=o.textContent)==null?void 0:c.substring(0,50)),!0}async function ug(){console.log("[Nano Flow] Opening toolbox...");let t=xo(ke.toolboxButton,ke.toolboxButtonAlt,ke.toolboxButtonAlt2,ke.toolboxButtonAlt3);if(!t){const e=document.querySelectorAll("button");for(const o of e){const i=o.getAttribute("aria-label")||"",l=o.className||"";if(i.includes("")||i.includes("Tools")||l.includes("toolbox-drawer-button")){t=o,console.log("[Nano Flow] Found toolbox by fallback search");break}}}if(!t){const e=document.querySelectorAll('mat-icon[fonticon="page_info"]');for(const o of e){const i=o.closest("button");if(i){t=i,console.log("[Nano Flow] Found toolbox by icon");break}}}return t?(t.click(),await st(600),console.log("[Nano Flow] Toolbox opened"),!0):(console.error("[Nano Flow] Toolbox button not found"),!1)}async function iu(){var o,i;console.log("[Nano Flow] Enabling image creation..."),await ug()||console.warn("[Nano Flow] Failed to open toolbox, trying to find image button directly"),await st(500);let e=null;if(e=document.querySelector('button[jf-ext-button-ct=" "]'),e||(e=document.querySelector('button[jf-ext-button-ct="Image creation"]')),!e){const l=document.querySelectorAll("button");for(const c of l){const f=((o=c.textContent)==null?void 0:o.trim())||"";if(f.includes(" ")||f.includes("Image creation")||f.includes("Create image")||f.includes("Generate image")){e=c,console.log("[Nano Flow] Found image button by text:",f.substring(0,30));break}}}if(!e){const l=document.querySelectorAll(".toolbox-drawer-item-list-button");for(const c of l){const f=((i=c.textContent)==null?void 0:i.trim())||"";if(f.includes("")||f.includes("image")||f.includes("Image")){e=c,console.log("[Nano Flow] Found image button by class:",f.substring(0,30));break}}}if(!e){const l=document.querySelectorAll('img[src*="image"], img[src*="boq-bard"]');for(const c of l){const f=c.closest("button");if(f){e=f,console.log("[Nano Flow] Found image button by img src");break}}}if(!e){console.error("[Nano Flow] Image creation button not found after all attempts");const l=document.querySelectorAll("button");return console.log("[Nano Flow] Available buttons:",l.length),l.forEach((c,f)=>{var p,g;(p=c.textContent)!=null&&p.trim()&&console.log(`[Nano Flow] Button ${f}:`,(g=c.textContent)==null?void 0:g.substring(0,50))}),!1}return e.click(),await st(400),console.log("[Nano Flow] Image creation enabled"),!0}async function su(){var e;console.log("[Nano Flow] Submitting prompt...");let t=xo(ke.submitButton,ke.submitButtonAlt,ke.submitButtonAlt2,ke.submitButtonAlt3,ke.submitButtonAlt4);if(!t){const o=document.querySelectorAll('mat-icon[fonticon="send"], mat-icon[data-mat-icon-name="send"]');for(const i of o){const l=i.closest("button");if(l&&!l.disabled){t=l,console.log("[Nano Flow] Found submit by send icon");break}}}if(!t){const o=document.querySelectorAll("button:not([disabled])");for(const i of o){const l=(i.getAttribute("aria-label")||"").toLowerCase();if(l.includes("send")||l.includes("submit")||l.includes("")||l.includes("")){t=i,console.log("[Nano Flow] Found submit by aria-label:",l);break}}}if(!t){const o=document.querySelectorAll("button:not([disabled])");for(const i of o){const l=((e=i.textContent)==null?void 0:e.toLowerCase())||"";if(l==="send"||l.includes("")){t=i,console.log("[Nano Flow] Found submit by text");break}}}if(!t){console.log("[Nano Flow] Submit button not found, trying Enter key...");const o=xo(ke.textInput,ke.textInputAlt,ke.textInputAlt2,ke.textInputAlt3);if(o){o.focus();const i=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});o.dispatchEvent(i);const l=new KeyboardEvent("keypress",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0});o.dispatchEvent(l);const c=new KeyboardEvent("keyup",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0});return o.dispatchEvent(c),await st(500),console.log("[Nano Flow] Submitted via Enter key"),!0}return console.error("[Nano Flow] Could not submit - no button or input found"),!1}return t.click(),await st(300),console.log("[Nano Flow] Prompt submitted via button"),!0}function lu(){return document.querySelector(ke.thinkingAvatar)?(console.log("[Nano Flow] Gemini thinking - avatar indicator present"),!0):document.querySelector(ke.processingState)?(console.log("[Nano Flow] Gemini thinking - processing state present"),!0):document.querySelector(ke.processingButton)?(console.log("[Nano Flow] Gemini thinking - processing button present"),!0):document.querySelector('[data-loading="true"], [aria-busy="true"]')?(console.log("[Nano Flow] Gemini thinking - generic loading indicator present"),!0):!1}async function cg(t=18e4){console.log("[Nano Flow] Waiting for generation to complete..."),await st(2e3);const e=Date.now();let o=0;for(;Date.now()-e<t;){const i=lu();if(Date.now()-o>5e3){const l=Math.round((Date.now()-e)/1e3);console.log(`[Nano Flow] Waiting... ${l}s elapsed, thinking: ${i}`),o=Date.now()}if(!i&&(await st(1e3),!lu())){const l=document.querySelectorAll(".response-container img, .generated-image, img[alt*='Generated'], img[src*='blob:']");if(l.length>0)return console.log("[Nano Flow] Generation complete - images found:",l.length),!0;const c=document.querySelector(".model-response-text, .response-text, .response-content");if(c&&c.textContent&&c.textContent.length>20)return console.log("[Nano Flow] Generation complete - response text found"),!0;if(Date.now()-e>5e3)return console.log("[Nano Flow] Generation appears complete - no thinking indicators"),!0}await st(1e3)}return console.log("[Nano Flow] Generation timeout reached after",Math.round(t/1e3),"seconds"),!0}async function dg(t,e,o){try{if(e&&(await iu()||console.warn("[Nano Flow] Could not enable image creation, continuing anyway...")),o&&o.length>0&&(console.log("[Nano Flow] Uploading reference images:",o.length),await lg(o)||console.warn("[Nano Flow] Could not upload images, continuing with text only..."),await st(500)),!await ag(t))throw new Error("Failed to paste prompt");if(!await su())throw new Error("Failed to submit prompt");return await cg(),!0}catch(i){return console.error("[Nano Flow] Error processing prompt:",i),!1}}const fg={init(){console.log("[Nano Flow] Automation module initializing..."),chrome.runtime.sendMessage({type:Ut.CONTENT_SCRIPT_READY}).catch(()=>{}),chrome.runtime.onMessage.addListener((t,e,o)=>(console.log("[Nano Flow] Received message:",t.type),(async()=>{var l;switch(t.type){case Ut.PASTE_PROMPT:{const c=t.payload;return console.log("[Nano Flow] Processing prompt with",((l=c.images)==null?void 0:l.length)||0,"images"),{success:await dg(c.prompt,c.enableImages??!0,c.images)}}case Ut.ENABLE_IMAGE_CREATION:return{success:await iu()};case Ut.SUBMIT_PROMPT:return{success:await su()};default:return{success:!1,error:"Unknown message type"}}})().then(o).catch(l=>{console.error("[Nano Flow] Message handler error:",l),o({success:!1,error:l instanceof Error?l.message:"Unknown error"})}),!0)),document.addEventListener("keydown",t=>{(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.key==="g"&&(t.preventDefault(),window.dispatchEvent(new CustomEvent("nano-flow-toggle-sidebar")))}),console.log("[Nano Flow] Automation module initialized")}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pg,mg;function hg(){return{geminiUrl:pg,vertexUrl:mg}}function gg(t,e,o,i){var l,c;if(!(t!=null&&t.baseUrl)){const f=hg();return e?(l=f.vertexUrl)!==null&&l!==void 0?l:o:(c=f.geminiUrl)!==null&&c!==void 0?c:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $t{}function j(t,e){const o=/\{([^}]+)\}/g;return t.replace(o,(i,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const c=e[l];return c!=null?String(c):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function u(t,e,o){for(let c=0;c<e.length-1;c++){const f=e[c];if(f.endsWith("[]")){const p=f.slice(0,-2);if(!(p in t))if(Array.isArray(o))t[p]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(t[p])){const g=t[p];if(Array.isArray(o))for(let h=0;h<g.length;h++){const v=g[h];u(v,e.slice(c+1),o[h])}else for(const h of g)u(h,e.slice(c+1),o)}return}else if(f.endsWith("[0]")){const p=f.slice(0,-3);p in t||(t[p]=[{}]);const g=t[p];u(g[0],e.slice(c+1),o);return}(!t[f]||typeof t[f]!="object")&&(t[f]={}),t=t[f]}const i=e[e.length-1],l=t[i];if(l!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===l)return;if(typeof l=="object"&&typeof o=="object"&&l!==null&&o!==null)Object.assign(l,o);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(t,o):t[i]=o}function a(t,e,o=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return o;const l=e[i];if(l.endsWith("[]")){const c=l.slice(0,-2);if(c in t){const f=t[c];return Array.isArray(f)?f.map(p=>a(p,e.slice(i+1),o)):o}else return o}else t=t[l]}return t}catch(i){if(i instanceof TypeError)return o;throw i}}function yg(t,e){for(const[o,i]of Object.entries(e)){const l=o.split("."),c=i.split("."),f=new Set;let p=-1;for(let g=0;g<l.length;g++)if(l[g]==="*"){p=g;break}if(p!==-1&&c.length>p)for(let g=p;g<c.length;g++){const h=c[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&f.add(h)}Ss(t,l,c,0,f)}}function Ss(t,e,o,i,l){if(i>=e.length||typeof t!="object"||t===null)return;const c=e[i];if(c.endsWith("[]")){const f=c.slice(0,-2),p=t;if(f in p&&Array.isArray(p[f]))for(const g of p[f])Ss(g,e,o,i+1,l)}else if(c==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const f=t,p=Object.keys(f).filter(h=>!h.startsWith("_")&&!l.has(h)),g={};for(const h of p)g[h]=f[h];for(const[h,v]of Object.entries(g)){const E=[];for(const _ of o.slice(i))_==="*"?E.push(h):E.push(_);u(f,E,v)}for(const h of p)delete f[h]}}else{const f=t;c in f&&Ss(f[c],e,o,i+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ts(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vg(t){const e={},o=a(t,["operationName"]);o!=null&&u(e,["operationName"],o);const i=a(t,["resourceName"]);return i!=null&&u(e,["_url","resourceName"],i),e}function Eg(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response","generateVideoResponse"]);return f!=null&&u(e,["response"],Sg(f)),e}function _g(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response"]);return f!=null&&u(e,["response"],Tg(f)),e}function Sg(t){const e={},o=a(t,["generatedSamples"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>Cg(f))),u(e,["generatedVideos"],c)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&u(e,["raiMediaFilteredReasons"],l),e}function Tg(t){const e={},o=a(t,["videos"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>wg(f))),u(e,["generatedVideos"],c)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&u(e,["raiMediaFilteredReasons"],l),e}function Cg(t){const e={},o=a(t,["video"]);return o!=null&&u(e,["video"],kg(o)),e}function wg(t){const e={},o=a(t,["_self"]);return o!=null&&u(e,["video"],Pg(o)),e}function Ag(t){const e={},o=a(t,["operationName"]);return o!=null&&u(e,["_url","operationName"],o),e}function xg(t){const e={},o=a(t,["operationName"]);return o!=null&&u(e,["_url","operationName"],o),e}function Ig(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response"]);return f!=null&&u(e,["response"],Ng(f)),e}function Ng(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["parent"]);i!=null&&u(e,["parent"],i);const l=a(t,["documentName"]);return l!=null&&u(e,["documentName"],l),e}function au(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response"]);return f!=null&&u(e,["response"],Rg(f)),e}function Rg(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["parent"]);i!=null&&u(e,["parent"],i);const l=a(t,["documentName"]);return l!=null&&u(e,["documentName"],l),e}function kg(t){const e={},o=a(t,["uri"]);o!=null&&u(e,["uri"],o);const i=a(t,["encodedVideo"]);i!=null&&u(e,["videoBytes"],Ts(i));const l=a(t,["encoding"]);return l!=null&&u(e,["mimeType"],l),e}function Pg(t){const e={},o=a(t,["gcsUri"]);o!=null&&u(e,["uri"],o);const i=a(t,["bytesBase64Encoded"]);i!=null&&u(e,["videoBytes"],Ts(i));const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var uu;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(uu||(uu={}));var cu;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(cu||(cu={}));var du;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(du||(du={}));var nn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(nn||(nn={}));var fu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fu||(fu={}));var pu;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(pu||(pu={}));var mu;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(mu||(mu={}));var hu;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(hu||(hu={}));var gu;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(gu||(gu={}));var yu;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(yu||(yu={}));var vu;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(vu||(vu={}));var Eu;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Eu||(Eu={}));var _u;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(_u||(_u={}));var Su;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Su||(Su={}));var Tu;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Tu||(Tu={}));var Cu;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Cu||(Cu={}));var wu;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(wu||(wu={}));var Au;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Au||(Au={}));var xu;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(xu||(xu={}));var Cr;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Cr||(Cr={}));var Iu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Iu||(Iu={}));var Nu;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Nu||(Nu={}));var Ru;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ru||(Ru={}));var Cs;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Cs||(Cs={}));var ku;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ku||(ku={}));var Pu;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Pu||(Pu={}));var Mu;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Mu||(Mu={}));var Du;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Du||(Du={}));var Fu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Fu||(Fu={}));var Lu;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Lu||(Lu={}));var Uu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Uu||(Uu={}));var bu;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(bu||(bu={}));var Vu;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Vu||(Vu={}));var Gu;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Gu||(Gu={}));var qu;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qu||(qu={}));var Hu;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Hu||(Hu={}));var Bu;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Bu||(Bu={}));var $u;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})($u||($u={}));var zu;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(zu||(zu={}));var Ou;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Ou||(Ou={}));var Ju;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Ju||(Ju={}));var Wu;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Wu||(Wu={}));var Ku;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ku||(Ku={}));var Yu;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Yu||(Yu={}));var Qu;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Qu||(Qu={}));var Xu;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Xu||(Xu={}));var Zu;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Zu||(Zu={}));var ju;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ju||(ju={}));var ec;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ec||(ec={}));var tc;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tc||(tc={}));var nc;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(nc||(nc={}));var oc;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(oc||(oc={}));var rc;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(rc||(rc={}));var ic;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ic||(ic={}));var sc;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(sc||(sc={}));var Bn;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Bn||(Bn={}));class ws{constructor(e){const o={};for(const i of e.headers.entries())o[i[0]]=i[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class Io{get text(){var e,o,i,l,c,f,p,g;if(((l=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const E=[];for(const _ of(g=(p=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)!==null&&g!==void 0?g:[]){for(const[w,k]of Object.entries(_))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(k!==null||k!==void 0)&&E.push(w);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;v=!0,h+=_.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,o,i,l,c,f,p,g;if(((l=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const E of(g=(p=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)!==null&&g!==void 0?g:[]){for(const[_,w]of Object.entries(E))_!=="inlineData"&&(w!==null||w!==void 0)&&v.push(_);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,o,i,l,c,f,p,g;if(((l=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(p=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,o,i,l,c,f,p,g,h;if(((l=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(p=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,o,i,l,c,f,p,g,h;if(((l=(i=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||i===void 0?void 0:i.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(p=(f=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class lc{}class ac{}class Mg{}class Dg{}class Fg{}class Lg{}class uc{}class cc{}class dc{}class Ug{}class wr{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const i=new wr;let l;const c=e;return o?l=_g(c):l=Eg(c),Object.assign(i,l),i}}class fc{}class pc{}class mc{}class hc{}class bg{}class Vg{}class Gg{}class As{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const i=new As,c=Ig(e);return Object.assign(i,c),i}}class qg{}class Hg{}class Bg{}class gc{}class $g{get text(){var e,o,i;let l="",c=!1;const f=[];for(const p of(i=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(p))g!=="text"&&g!=="thought"&&h!==null&&f.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;c=!0,l+=p.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?l:void 0}get data(){var e,o,i;let l="";const c=[];for(const f of(i=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&i!==void 0?i:[]){for(const[p,g]of Object.entries(f))p!=="inlineData"&&g!==null&&c.push(p);f.inlineData&&typeof f.inlineData.data=="string"&&(l+=atob(f.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class zg{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class xs{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const i=new xs,c=au(e);return Object.assign(i,c),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function yc(t,e){const o=xe(t,e);return o?o.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}`:o.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${o}`:o:""}function vc(t){return Array.isArray(t)?t.map(e=>Ar(e)):[Ar(t)]}function Ar(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ec(t){const e=Ar(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _c(t){const e=Ar(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Sc(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Tc(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Sc(e)):[Sc(t)]}function Is(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Cc(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function wc(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ye(t){if(t==null)throw new Error("ContentUnion is required");return Is(t)?t:{role:"user",parts:Tc(t)}}function Ns(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const i=Ye(o);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const o=Ye(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>Ye(o)):[Ye(e)]}function gt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Cc(t)||wc(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ye(t)]}const e=[],o=[],i=Is(t[0]);for(const l of t){const c=Is(l);if(c!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)e.push(l);else{if(Cc(l)||wc(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(l)}}return i||e.push({role:"user",parts:Tc(o)}),e}function Og(t,e){t.includes("null")&&(e.nullable=!0);const o=t.filter(i=>i!=="null");if(o.length===1)e.type=Object.values(nn).includes(o[0].toUpperCase())?o[0].toUpperCase():nn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of o)e.anyOf.push({type:Object.values(nn).includes(i.toUpperCase())?i.toUpperCase():nn.TYPE_UNSPECIFIED})}}function $n(t){const e={},o=["items"],i=["anyOf"],l=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=t.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(e.nullable=!0,t=c[1]):c[1].type==="null"&&(e.nullable=!0,t=c[0])),t.type instanceof Array&&Og(t.type,e);for(const[f,p]of Object.entries(t))if(p!=null)if(f=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(nn).includes(p.toUpperCase())?p.toUpperCase():nn.TYPE_UNSPECIFIED}else if(o.includes(f))e[f]=$n(p);else if(i.includes(f)){const g=[];for(const h of p){if(h.type=="null"){e.nullable=!0;continue}g.push($n(h))}e[f]=g}else if(l.includes(f)){const g={};for(const[h,v]of Object.entries(p))g[h]=$n(v);e[f]=g}else{if(f==="additionalProperties")continue;e[f]=p}return e}function Rs(t){return $n(t)}function ks(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ps(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function zn(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$n(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$n(e.response));return t}function On(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of t)e.push(o);return e}function Jg(t,e,o,i=1){const l=!e.startsWith(`${o}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:l?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}/${e}`:e:l?`${o}/${e}`:e}function zt(t,e){if(typeof e!="string")throw new Error("name must be a string");return Jg(t,e,"cachedContents")}function Ac(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function on(t){return Ts(t)}function Wg(t){return t!=null&&typeof t=="object"&&"name"in t}function Kg(t){return t!=null&&typeof t=="object"&&"video"in t}function Yg(t){return t!=null&&typeof t=="object"&&"uri"in t}function xc(t){var e;let o;if(Wg(t)&&(o=t.name),!(Yg(t)&&(o=t.uri,o===void 0))&&!(Kg(t)&&(o=(e=t.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof t=="string"&&(o=t),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const l=o.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${o}`);o=l[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function Ic(t,e){let o;return t.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function Nc(t){for(const e of["models","tunedModels","publisherModels"])if(Qg(t,e))return t[e];return[]}function Qg(t,e){return t!==null&&typeof t=="object"&&e in t}function Xg(t,e={}){const o=t,i={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(i.responseJsonSchema=o.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Zg(t,e={}){const o=[],i=new Set;for(const l of t){const c=l.name;if(i.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);i.add(c);const f=Xg(l,e);f.functionDeclarations&&o.push(...f.functionDeclarations)}return{functionDeclarations:o}}function Rc(t,e){let o;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))o={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))o={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))o={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:e}}else o=e;const i=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,l=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(t.isVertexAI()){if(l>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function jg(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function kc(t){if(typeof t!="object"||t===null)return{};const e=t,o=e.inlinedResponses;if(typeof o!="object"||o===null)return t;const l=o.inlinedResponses;if(!Array.isArray(l)||l.length===0)return t;let c=!1;for(const f of l){if(typeof f!="object"||f===null)continue;const g=f.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){c=!0;break}}return c&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Jn(t,e){const o=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function Pc(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ey(t){const e={},o=a(t,["responsesFile"]);o!=null&&u(e,["fileName"],o);const i=a(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>Fy(f))),u(e,["inlinedResponses"],c)}const l=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["inlinedEmbedContentResponses"],c)}return e}function ty(t){const e={},o=a(t,["predictionsFormat"]);o!=null&&u(e,["format"],o);const i=a(t,["gcsDestination","outputUriPrefix"]);i!=null&&u(e,["gcsUri"],i);const l=a(t,["bigqueryDestination","outputUri"]);return l!=null&&u(e,["bigqueryUri"],l),e}function ny(t){const e={},o=a(t,["format"]);o!=null&&u(e,["predictionsFormat"],o);const i=a(t,["gcsUri"]);i!=null&&u(e,["gcsDestination","outputUriPrefix"],i);const l=a(t,["bigqueryUri"]);if(l!=null&&u(e,["bigqueryDestination","outputUri"],l),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function xr(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata","displayName"]);i!=null&&u(e,["displayName"],i);const l=a(t,["metadata","state"]);l!=null&&u(e,["state"],Pc(l));const c=a(t,["metadata","createTime"]);c!=null&&u(e,["createTime"],c);const f=a(t,["metadata","endTime"]);f!=null&&u(e,["endTime"],f);const p=a(t,["metadata","updateTime"]);p!=null&&u(e,["updateTime"],p);const g=a(t,["metadata","model"]);g!=null&&u(e,["model"],g);const h=a(t,["metadata","output"]);return h!=null&&u(e,["dest"],ey(kc(h))),e}function Ms(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=a(t,["state"]);l!=null&&u(e,["state"],Pc(l));const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["createTime"]);f!=null&&u(e,["createTime"],f);const p=a(t,["startTime"]);p!=null&&u(e,["startTime"],p);const g=a(t,["endTime"]);g!=null&&u(e,["endTime"],g);const h=a(t,["updateTime"]);h!=null&&u(e,["updateTime"],h);const v=a(t,["model"]);v!=null&&u(e,["model"],v);const E=a(t,["inputConfig"]);E!=null&&u(e,["src"],oy(E));const _=a(t,["outputConfig"]);_!=null&&u(e,["dest"],ty(kc(_)));const w=a(t,["completionStats"]);return w!=null&&u(e,["completionStats"],w),e}function oy(t){const e={},o=a(t,["instancesFormat"]);o!=null&&u(e,["format"],o);const i=a(t,["gcsSource","uris"]);i!=null&&u(e,["gcsUri"],i);const l=a(t,["bigquerySource","inputUri"]);return l!=null&&u(e,["bigqueryUri"],l),e}function ry(t,e){const o={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=a(e,["fileName"]);i!=null&&u(o,["fileName"],i);const l=a(e,["inlinedRequests"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Dy(t,f))),u(o,["requests","requests"],c)}return o}function iy(t){const e={},o=a(t,["format"]);o!=null&&u(e,["instancesFormat"],o);const i=a(t,["gcsUri"]);i!=null&&u(e,["gcsSource","uris"],i);const l=a(t,["bigqueryUri"]);if(l!=null&&u(e,["bigquerySource","inputUri"],l),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function sy(t){const e={},o=a(t,["data"]);if(o!=null&&u(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function ly(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Jn(t,i)),o}function ay(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Jn(t,i)),o}function uy(t){const e={},o=a(t,["content"]);o!=null&&u(e,["content"],o);const i=a(t,["citationMetadata"]);i!=null&&u(e,["citationMetadata"],cy(i));const l=a(t,["tokenCount"]);l!=null&&u(e,["tokenCount"],l);const c=a(t,["finishReason"]);c!=null&&u(e,["finishReason"],c);const f=a(t,["avgLogprobs"]);f!=null&&u(e,["avgLogprobs"],f);const p=a(t,["groundingMetadata"]);p!=null&&u(e,["groundingMetadata"],p);const g=a(t,["index"]);g!=null&&u(e,["index"],g);const h=a(t,["logprobsResult"]);h!=null&&u(e,["logprobsResult"],h);const v=a(t,["safetyRatings"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(w=>w)),u(e,["safetyRatings"],_)}const E=a(t,["urlContextMetadata"]);return E!=null&&u(e,["urlContextMetadata"],E),e}function cy(t){const e={},o=a(t,["citationSources"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),u(e,["citations"],i)}return e}function Mc(t){const e={},o=a(t,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Hy(c))),u(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&u(e,["role"],i),e}function dy(t,e){const o={},i=a(t,["displayName"]);if(e!==void 0&&i!=null&&u(e,["batch","displayName"],i),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function fy(t,e){const o={},i=a(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const l=a(t,["dest"]);return e!==void 0&&l!=null&&u(e,["outputConfig"],ny(jg(l))),o}function Dc(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["src"]);l!=null&&u(o,["batch","inputConfig"],ry(t,Rc(t,l)));const c=a(e,["config"]);return c!=null&&dy(c,o),o}function py(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["model"],xe(t,i));const l=a(e,["src"]);l!=null&&u(o,["inputConfig"],iy(Rc(t,l)));const c=a(e,["config"]);return c!=null&&fy(c,o),o}function my(t,e){const o={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&u(e,["batch","displayName"],i),o}function hy(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["src"]);l!=null&&u(o,["batch","inputConfig"],Ty(t,l));const c=a(e,["config"]);return c!=null&&my(c,o),o}function gy(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Jn(t,i)),o}function yy(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Jn(t,i)),o}function vy(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["name"]);i!=null&&u(e,["name"],i);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const c=a(t,["error"]);return c!=null&&u(e,["error"],c),e}function Ey(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["name"]);i!=null&&u(e,["name"],i);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const c=a(t,["error"]);return c!=null&&u(e,["error"],c),e}function _y(t,e){const o={},i=a(e,["contents"]);if(i!=null){let c=Ns(t,i);Array.isArray(c)&&(c=c.map(f=>f)),u(o,["requests[]","request","content"],c)}const l=a(e,["config"]);return l!=null&&(u(o,["_self"],Sy(l,o)),yg(o,{"requests[].*":"requests[].request.*"})),o}function Sy(t,e){const o={},i=a(t,["taskType"]);e!==void 0&&i!=null&&u(e,["requests[]","taskType"],i);const l=a(t,["title"]);e!==void 0&&l!=null&&u(e,["requests[]","title"],l);const c=a(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&u(e,["requests[]","outputDimensionality"],c),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Ty(t,e){const o={},i=a(e,["fileName"]);i!=null&&u(o,["file_name"],i);const l=a(e,["inlinedRequests"]);return l!=null&&u(o,["requests"],_y(t,l)),o}function Cy(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function wy(t){const e={},o=a(t,["id"]);o!=null&&u(e,["id"],o);const i=a(t,["args"]);i!=null&&u(e,["args"],i);const l=a(t,["name"]);if(l!=null&&u(e,["name"],l),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ay(t){const e={},o=a(t,["mode"]);o!=null&&u(e,["mode"],o);const i=a(t,["allowedFunctionNames"]);if(i!=null&&u(e,["allowedFunctionNames"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xy(t,e,o){const i={},l=a(e,["systemInstruction"]);o!==void 0&&l!=null&&u(o,["systemInstruction"],Mc(Ye(l)));const c=a(e,["temperature"]);c!=null&&u(i,["temperature"],c);const f=a(e,["topP"]);f!=null&&u(i,["topP"],f);const p=a(e,["topK"]);p!=null&&u(i,["topK"],p);const g=a(e,["candidateCount"]);g!=null&&u(i,["candidateCount"],g);const h=a(e,["maxOutputTokens"]);h!=null&&u(i,["maxOutputTokens"],h);const v=a(e,["stopSequences"]);v!=null&&u(i,["stopSequences"],v);const E=a(e,["responseLogprobs"]);E!=null&&u(i,["responseLogprobs"],E);const _=a(e,["logprobs"]);_!=null&&u(i,["logprobs"],_);const w=a(e,["presencePenalty"]);w!=null&&u(i,["presencePenalty"],w);const k=a(e,["frequencyPenalty"]);k!=null&&u(i,["frequencyPenalty"],k);const M=a(e,["seed"]);M!=null&&u(i,["seed"],M);const I=a(e,["responseMimeType"]);I!=null&&u(i,["responseMimeType"],I);const F=a(e,["responseSchema"]);F!=null&&u(i,["responseSchema"],Rs(F));const J=a(e,["responseJsonSchema"]);if(J!=null&&u(i,["responseJsonSchema"],J),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=a(e,["safetySettings"]);if(o!==void 0&&b!=null){let $=b;Array.isArray($)&&($=$.map(fe=>By(fe))),u(o,["safetySettings"],$)}const q=a(e,["tools"]);if(o!==void 0&&q!=null){let $=On(q);Array.isArray($)&&($=$.map(fe=>zy(zn(fe)))),u(o,["tools"],$)}const X=a(e,["toolConfig"]);if(o!==void 0&&X!=null&&u(o,["toolConfig"],$y(X)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=a(e,["cachedContent"]);o!==void 0&&L!=null&&u(o,["cachedContent"],zt(t,L));const U=a(e,["responseModalities"]);U!=null&&u(i,["responseModalities"],U);const ee=a(e,["mediaResolution"]);ee!=null&&u(i,["mediaResolution"],ee);const K=a(e,["speechConfig"]);if(K!=null&&u(i,["speechConfig"],ks(K)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ae=a(e,["thinkingConfig"]);ae!=null&&u(i,["thinkingConfig"],ae);const W=a(e,["imageConfig"]);W!=null&&u(i,["imageConfig"],My(W));const te=a(e,["enableEnhancedCivicAnswers"]);return te!=null&&u(i,["enableEnhancedCivicAnswers"],te),i}function Iy(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>uy(h))),u(e,["candidates"],g)}const l=a(t,["modelVersion"]);l!=null&&u(e,["modelVersion"],l);const c=a(t,["promptFeedback"]);c!=null&&u(e,["promptFeedback"],c);const f=a(t,["responseId"]);f!=null&&u(e,["responseId"],f);const p=a(t,["usageMetadata"]);return p!=null&&u(e,["usageMetadata"],p),e}function Ny(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Jn(t,i)),o}function Ry(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],Jn(t,i)),o}function ky(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&u(e,["enableWidget"],o),e}function Py(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&u(e,["timeRangeFilter"],o),e}function My(t){const e={},o=a(t,["aspectRatio"]);o!=null&&u(e,["aspectRatio"],o);const i=a(t,["imageSize"]);if(i!=null&&u(e,["imageSize"],i),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Dy(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["request","model"],xe(t,i));const l=a(e,["contents"]);if(l!=null){let p=gt(l);Array.isArray(p)&&(p=p.map(g=>Mc(g))),u(o,["request","contents"],p)}const c=a(e,["metadata"]);c!=null&&u(o,["metadata"],c);const f=a(e,["config"]);return f!=null&&u(o,["request","generationConfig"],xy(t,f,a(o,["request"],{}))),o}function Fy(t){const e={},o=a(t,["response"]);o!=null&&u(e,["response"],Iy(o));const i=a(t,["error"]);return i!=null&&u(e,["error"],i),e}function Ly(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);if(e!==void 0&&l!=null&&u(e,["_query","pageToken"],l),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function Uy(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);e!==void 0&&l!=null&&u(e,["_query","pageToken"],l);const c=a(t,["filter"]);return e!==void 0&&c!=null&&u(e,["_query","filter"],c),o}function by(t){const e={},o=a(t,["config"]);return o!=null&&Ly(o,e),e}function Vy(t){const e={},o=a(t,["config"]);return o!=null&&Uy(o,e),e}function Gy(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=a(t,["operations"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>xr(f))),u(e,["batchJobs"],c)}return e}function qy(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=a(t,["batchPredictionJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Ms(f))),u(e,["batchJobs"],c)}return e}function Hy(t){const e={},o=a(t,["mediaResolution"]);o!=null&&u(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&u(e,["codeExecutionResult"],i);const l=a(t,["executableCode"]);l!=null&&u(e,["executableCode"],l);const c=a(t,["fileData"]);c!=null&&u(e,["fileData"],Cy(c));const f=a(t,["functionCall"]);f!=null&&u(e,["functionCall"],wy(f));const p=a(t,["functionResponse"]);p!=null&&u(e,["functionResponse"],p);const g=a(t,["inlineData"]);g!=null&&u(e,["inlineData"],sy(g));const h=a(t,["text"]);h!=null&&u(e,["text"],h);const v=a(t,["thought"]);v!=null&&u(e,["thought"],v);const E=a(t,["thoughtSignature"]);E!=null&&u(e,["thoughtSignature"],E);const _=a(t,["videoMetadata"]);return _!=null&&u(e,["videoMetadata"],_),e}function By(t){const e={},o=a(t,["category"]);if(o!=null&&u(e,["category"],o),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function $y(t){const e={},o=a(t,["functionCallingConfig"]);o!=null&&u(e,["functionCallingConfig"],Ay(o));const i=a(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],i),e}function zy(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),u(e,["functionDeclarations"],v)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const l=a(t,["computerUse"]);l!=null&&u(e,["computerUse"],l);const c=a(t,["fileSearch"]);c!=null&&u(e,["fileSearch"],c);const f=a(t,["codeExecution"]);if(f!=null&&u(e,["codeExecution"],f),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=a(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],ky(p));const g=a(t,["googleSearch"]);g!=null&&u(e,["googleSearch"],Py(g));const h=a(t,["urlContext"]);return h!=null&&u(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ot;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ot||(Ot={}));class An{constructor(e,o,i,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,i,l)}init(e,o,i){var l,c;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let f={config:{}};!i||Object.keys(i).length===0?f={config:{}}:typeof i=="object"?f=Object.assign({},i):f=i,f.config&&(f.config.pageToken=o.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(c=(l=f.config)===null||l===void 0?void 0:l.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oy extends $t{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new An(Ot.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(e){const o=Dc(this.apiClient,e),i=o._url,l=j("{model}:batchGenerateContent",i),p=o.batch.inputConfig.requests,g=p.requests,h=[];for(const v of g){const E=Object.assign({},v);if(E.systemInstruction){const _=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=_,E.request=w}h.push(E)}return p.requests=h,delete o.config,delete o._url,delete o._query,{path:l,body:o}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,o){const i=o?Object.assign({},o):{},l=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${l}`),i.dest===void 0){const c=this.getGcsUri(e),f=this.getBigqueryUri(e);if(c)c.endsWith(".jsonl")?i.dest=`${c.slice(0,-6)}/dest`:i.dest=`${c}_dest_${l}`;else if(f)i.dest=`${f}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=py(this.apiClient,e);return p=j("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>Ms(v))}else{const h=Dc(this.apiClient,e);return p=j("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>xr(v))}}async createEmbeddingsInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=hy(this.apiClient,e);return c=j("{model}:asyncBatchEmbedContent",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>xr(g))}}async get(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Ry(this.apiClient,e);return p=j("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>Ms(v))}else{const h=Ny(this.apiClient,e);return p=j("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>xr(v))}}async cancel(e){var o,i,l,c;let f="",p={};if(this.apiClient.isVertexAI()){const g=ay(this.apiClient,e);f=j("batchPredictionJobs/{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=ly(this.apiClient,e);f=j("batches/{name}:cancel",g._url),p=g._query,delete g._url,delete g._query,await this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Vy(e);return p=j("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=qy(v),_=new gc;return Object.assign(_,E),_})}else{const h=by(e);return p=j("batches",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=Gy(v),_=new gc;return Object.assign(_,E),_})}}async delete(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=yy(this.apiClient,e);return p=j("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>Ey(v))}else{const h=gy(this.apiClient,e);return p=j("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>vy(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jy(t){const e={},o=a(t,["data"]);if(o!=null&&u(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Fc(t){const e={},o=a(t,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>hv(c))),u(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&u(e,["role"],i),e}function Wy(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const l=a(t,["expireTime"]);e!==void 0&&l!=null&&u(e,["expireTime"],l);const c=a(t,["displayName"]);e!==void 0&&c!=null&&u(e,["displayName"],c);const f=a(t,["contents"]);if(e!==void 0&&f!=null){let v=gt(f);Array.isArray(v)&&(v=v.map(E=>Fc(E))),u(e,["contents"],v)}const p=a(t,["systemInstruction"]);e!==void 0&&p!=null&&u(e,["systemInstruction"],Fc(Ye(p)));const g=a(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>yv(E))),u(e,["tools"],v)}const h=a(t,["toolConfig"]);if(e!==void 0&&h!=null&&u(e,["toolConfig"],gv(h)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function Ky(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const l=a(t,["expireTime"]);e!==void 0&&l!=null&&u(e,["expireTime"],l);const c=a(t,["displayName"]);e!==void 0&&c!=null&&u(e,["displayName"],c);const f=a(t,["contents"]);if(e!==void 0&&f!=null){let E=gt(f);Array.isArray(E)&&(E=E.map(_=>_)),u(e,["contents"],E)}const p=a(t,["systemInstruction"]);e!==void 0&&p!=null&&u(e,["systemInstruction"],Ye(p));const g=a(t,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(_=>vv(_))),u(e,["tools"],E)}const h=a(t,["toolConfig"]);e!==void 0&&h!=null&&u(e,["toolConfig"],h);const v=a(t,["kmsKeyName"]);return e!==void 0&&v!=null&&u(e,["encryption_spec","kmsKeyName"],v),o}function Yy(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["model"],yc(t,i));const l=a(e,["config"]);return l!=null&&Wy(l,o),o}function Qy(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["model"],yc(t,i));const l=a(e,["config"]);return l!=null&&Ky(l,o),o}function Xy(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],zt(t,i)),o}function Zy(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],zt(t,i)),o}function jy(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function ev(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function tv(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function nv(t){const e={},o=a(t,["id"]);o!=null&&u(e,["id"],o);const i=a(t,["args"]);i!=null&&u(e,["args"],i);const l=a(t,["name"]);if(l!=null&&u(e,["name"],l),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ov(t){const e={},o=a(t,["mode"]);o!=null&&u(e,["mode"],o);const i=a(t,["allowedFunctionNames"]);if(i!=null&&u(e,["allowedFunctionNames"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function rv(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=a(t,["description"]);o!=null&&u(e,["description"],o);const i=a(t,["name"]);i!=null&&u(e,["name"],i);const l=a(t,["parameters"]);l!=null&&u(e,["parameters"],l);const c=a(t,["parametersJsonSchema"]);c!=null&&u(e,["parametersJsonSchema"],c);const f=a(t,["response"]);f!=null&&u(e,["response"],f);const p=a(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function iv(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],zt(t,i)),o}function sv(t,e){const o={},i=a(e,["name"]);return i!=null&&u(o,["_url","name"],zt(t,i)),o}function lv(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&u(e,["enableWidget"],o),e}function av(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&u(e,["timeRangeFilter"],o),e}function uv(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&u(e,["_query","pageToken"],l),o}function cv(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&u(e,["_query","pageToken"],l),o}function dv(t){const e={},o=a(t,["config"]);return o!=null&&uv(o,e),e}function fv(t){const e={},o=a(t,["config"]);return o!=null&&cv(o,e),e}function pv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=a(t,["cachedContents"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["cachedContents"],c)}return e}function mv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=a(t,["cachedContents"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["cachedContents"],c)}return e}function hv(t){const e={},o=a(t,["mediaResolution"]);o!=null&&u(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&u(e,["codeExecutionResult"],i);const l=a(t,["executableCode"]);l!=null&&u(e,["executableCode"],l);const c=a(t,["fileData"]);c!=null&&u(e,["fileData"],tv(c));const f=a(t,["functionCall"]);f!=null&&u(e,["functionCall"],nv(f));const p=a(t,["functionResponse"]);p!=null&&u(e,["functionResponse"],p);const g=a(t,["inlineData"]);g!=null&&u(e,["inlineData"],Jy(g));const h=a(t,["text"]);h!=null&&u(e,["text"],h);const v=a(t,["thought"]);v!=null&&u(e,["thought"],v);const E=a(t,["thoughtSignature"]);E!=null&&u(e,["thoughtSignature"],E);const _=a(t,["videoMetadata"]);return _!=null&&u(e,["videoMetadata"],_),e}function gv(t){const e={},o=a(t,["functionCallingConfig"]);o!=null&&u(e,["functionCallingConfig"],ov(o));const i=a(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],i),e}function yv(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),u(e,["functionDeclarations"],v)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const l=a(t,["computerUse"]);l!=null&&u(e,["computerUse"],l);const c=a(t,["fileSearch"]);c!=null&&u(e,["fileSearch"],c);const f=a(t,["codeExecution"]);if(f!=null&&u(e,["codeExecution"],f),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=a(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],lv(p));const g=a(t,["googleSearch"]);g!=null&&u(e,["googleSearch"],av(g));const h=a(t,["urlContext"]);return h!=null&&u(e,["urlContext"],h),e}function vv(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let E=o;Array.isArray(E)&&(E=E.map(_=>rv(_))),u(e,["functionDeclarations"],E)}const i=a(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const l=a(t,["googleSearchRetrieval"]);l!=null&&u(e,["googleSearchRetrieval"],l);const c=a(t,["computerUse"]);if(c!=null&&u(e,["computerUse"],c),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=a(t,["codeExecution"]);f!=null&&u(e,["codeExecution"],f);const p=a(t,["enterpriseWebSearch"]);p!=null&&u(e,["enterpriseWebSearch"],p);const g=a(t,["googleMaps"]);g!=null&&u(e,["googleMaps"],g);const h=a(t,["googleSearch"]);h!=null&&u(e,["googleSearch"],h);const v=a(t,["urlContext"]);return v!=null&&u(e,["urlContext"],v),e}function Ev(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const l=a(t,["expireTime"]);return e!==void 0&&l!=null&&u(e,["expireTime"],l),o}function _v(t,e){const o={},i=a(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const l=a(t,["expireTime"]);return e!==void 0&&l!=null&&u(e,["expireTime"],l),o}function Sv(t,e){const o={},i=a(e,["name"]);i!=null&&u(o,["_url","name"],zt(t,i));const l=a(e,["config"]);return l!=null&&Ev(l,o),o}function Tv(t,e){const o={},i=a(e,["name"]);i!=null&&u(o,["_url","name"],zt(t,i));const l=a(e,["config"]);return l!=null&&_v(l,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cv extends $t{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new An(Ot.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(o),o)}async create(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Qy(this.apiClient,e);return p=j("cachedContents",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const h=Yy(this.apiClient,e);return p=j("cachedContents",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async get(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=sv(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const h=iv(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async delete(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Zy(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=ev(v),_=new mc;return Object.assign(_,E),_})}else{const h=Xy(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=jy(v),_=new mc;return Object.assign(_,E),_})}}async update(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Tv(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const h=Sv(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async listInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=fv(e);return p=j("cachedContents",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=mv(v),_=new hc;return Object.assign(_,E),_})}else{const h=dv(e);return p=j("cachedContents",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=pv(v),_=new hc;return Object.assign(_,E),_})}}}function Ir(t,e){var o={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(o[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)e.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(o[i[l]]=t[i[l]]);return o}function Lc(t){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&t[e],i=0;if(o)return o.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(t){return this instanceof ve?(this.v=t,this):new ve(t)}function xt(t,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=o.apply(t,e||[]),l,c=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",f),l[Symbol.asyncIterator]=function(){return this},l;function f(w){return function(k){return Promise.resolve(k).then(w,E)}}function p(w,k){i[w]&&(l[w]=function(M){return new Promise(function(I,F){c.push([w,M,I,F])>1||g(w,M)})},k&&(l[w]=k(l[w])))}function g(w,k){try{h(i[w](k))}catch(M){_(c[0][3],M)}}function h(w){w.value instanceof ve?Promise.resolve(w.value.v).then(v,E):_(c[0][2],w)}function v(w){g("next",w)}function E(w){g("throw",w)}function _(w,k){w(k),c.shift(),c.length&&g(c[0][0],c[0][1])}}function It(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],o;return e?e.call(t):(t=typeof Lc=="function"?Lc(t):t[Symbol.iterator](),o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o);function i(c){o[c]=t[c]&&function(f){return new Promise(function(p,g){f=t[c](f),l(p,g,f.done,f.value)})}}function l(c,f,p,g){Promise.resolve(g).then(function(h){c({value:h,done:p})},f)}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wv(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const o=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:Uc(o)}function Uc(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Av(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bc(t){if(t===void 0||t.length===0)return[];const e=[],o=t.length;let i=0;for(;i<o;)if(t[i].role==="user")e.push(t[i]),i++;else{const l=[];let c=!0;for(;i<o&&t[i].role==="model";)l.push(t[i]),c&&!Uc(t[i])&&(c=!1),i++;c?e.push(...l):e.pop()}return e}class xv{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new Iv(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Iv{constructor(e,o,i,l={},c=[]){this.apiClient=e,this.modelsModule=o,this.model=i,this.config=l,this.history=c,this.sendPromise=Promise.resolve(),Av(c)}async sendMessage(e){var o;await this.sendPromise;const i=Ye(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var c,f,p;const g=await l,h=(f=(c=g.candidates)===null||c===void 0?void 0:c[0])===null||f===void 0?void 0:f.content,v=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let _=[];v!=null&&(_=(p=v.slice(E))!==null&&p!==void 0?p:[]);const w=h?[h]:[];this.recordHistory(i,w,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var o;await this.sendPromise;const i=Ye(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const c=await l;return this.processStreamResponse(c,i)}getHistory(e=!1){const o=e?bc(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){return xt(this,arguments,function*(){var l,c,f,p,g,h;const v=[];try{for(var E=!0,_=It(e),w;w=yield ve(_.next()),l=w.done,!l;E=!0){p=w.value,E=!1;const k=p;if(wv(k)){const M=(h=(g=k.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;M!==void 0&&v.push(M)}yield yield ve(k)}}catch(k){c={error:k}}finally{try{!E&&!l&&(f=_.return)&&(yield ve(f.call(_)))}finally{if(c)throw c.error}}this.recordHistory(o,v)})}recordHistory(e,o,i){let l=[];o.length>0&&o.every(c=>c.role!==void 0)?l=o:l.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...bc(i)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nr extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Nr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nv(t){const e={},o=a(t,["file"]);return o!=null&&u(e,["file"],o),e}function Rv(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function kv(t){const e={},o=a(t,["name"]);return o!=null&&u(e,["_url","file"],xc(o)),e}function Pv(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function Mv(t){const e={},o=a(t,["name"]);return o!=null&&u(e,["_url","file"],xc(o)),e}function Dv(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&u(e,["_query","pageToken"],l),o}function Fv(t){const e={},o=a(t,["config"]);return o!=null&&Dv(o,e),e}function Lv(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=a(t,["files"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["files"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uv extends $t{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new An(Ot.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>o)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Fv(e);return c=j("files",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const h=Lv(g),v=new qg;return Object.assign(v,h),v})}}async createInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Nv(e);return c=j("upload/v1beta/files",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const h=Rv(g),v=new Hg;return Object.assign(v,h),v})}}async get(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Mv(e);return c=j("files/{file}",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=kv(e);return c=j("files/{file}",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const h=Pv(g),v=new Bg;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rr(t){const e={},o=a(t,["data"]);if(o!=null&&u(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function bv(t){const e={},o=a(t,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>jv(c))),u(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&u(e,["role"],i),e}function Vv(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Gv(t){const e={},o=a(t,["id"]);o!=null&&u(e,["id"],o);const i=a(t,["args"]);i!=null&&u(e,["args"],i);const l=a(t,["name"]);if(l!=null&&u(e,["name"],l),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qv(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=a(t,["description"]);o!=null&&u(e,["description"],o);const i=a(t,["name"]);i!=null&&u(e,["name"],i);const l=a(t,["parameters"]);l!=null&&u(e,["parameters"],l);const c=a(t,["parametersJsonSchema"]);c!=null&&u(e,["parametersJsonSchema"],c);const f=a(t,["response"]);f!=null&&u(e,["response"],f);const p=a(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function Hv(t){const e={},o=a(t,["modelSelectionConfig"]);o!=null&&u(e,["modelConfig"],o);const i=a(t,["responseJsonSchema"]);i!=null&&u(e,["responseJsonSchema"],i);const l=a(t,["audioTimestamp"]);l!=null&&u(e,["audioTimestamp"],l);const c=a(t,["candidateCount"]);c!=null&&u(e,["candidateCount"],c);const f=a(t,["enableAffectiveDialog"]);f!=null&&u(e,["enableAffectiveDialog"],f);const p=a(t,["frequencyPenalty"]);p!=null&&u(e,["frequencyPenalty"],p);const g=a(t,["logprobs"]);g!=null&&u(e,["logprobs"],g);const h=a(t,["maxOutputTokens"]);h!=null&&u(e,["maxOutputTokens"],h);const v=a(t,["mediaResolution"]);v!=null&&u(e,["mediaResolution"],v);const E=a(t,["presencePenalty"]);E!=null&&u(e,["presencePenalty"],E);const _=a(t,["responseLogprobs"]);_!=null&&u(e,["responseLogprobs"],_);const w=a(t,["responseMimeType"]);w!=null&&u(e,["responseMimeType"],w);const k=a(t,["responseModalities"]);k!=null&&u(e,["responseModalities"],k);const M=a(t,["responseSchema"]);M!=null&&u(e,["responseSchema"],M);const I=a(t,["routingConfig"]);I!=null&&u(e,["routingConfig"],I);const F=a(t,["seed"]);F!=null&&u(e,["seed"],F);const J=a(t,["speechConfig"]);J!=null&&u(e,["speechConfig"],J);const b=a(t,["stopSequences"]);b!=null&&u(e,["stopSequences"],b);const q=a(t,["temperature"]);q!=null&&u(e,["temperature"],q);const X=a(t,["thinkingConfig"]);X!=null&&u(e,["thinkingConfig"],X);const L=a(t,["topK"]);L!=null&&u(e,["topK"],L);const U=a(t,["topP"]);if(U!=null&&u(e,["topP"],U),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Bv(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&u(e,["enableWidget"],o),e}function $v(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&u(e,["timeRangeFilter"],o),e}function zv(t,e){const o={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],i);const l=a(t,["responseModalities"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","responseModalities"],l);const c=a(t,["temperature"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","temperature"],c);const f=a(t,["topP"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","topP"],f);const p=a(t,["topK"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","topK"],p);const g=a(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const h=a(t,["mediaResolution"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","mediaResolution"],h);const v=a(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const E=a(t,["speechConfig"]);e!==void 0&&E!=null&&u(e,["setup","generationConfig","speechConfig"],Ps(E));const _=a(t,["thinkingConfig"]);e!==void 0&&_!=null&&u(e,["setup","generationConfig","thinkingConfig"],_);const w=a(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=a(t,["systemInstruction"]);e!==void 0&&k!=null&&u(e,["setup","systemInstruction"],bv(Ye(k)));const M=a(t,["tools"]);if(e!==void 0&&M!=null){let L=On(M);Array.isArray(L)&&(L=L.map(U=>t0(zn(U)))),u(e,["setup","tools"],L)}const I=a(t,["sessionResumption"]);e!==void 0&&I!=null&&u(e,["setup","sessionResumption"],e0(I));const F=a(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&u(e,["setup","inputAudioTranscription"],F);const J=a(t,["outputAudioTranscription"]);e!==void 0&&J!=null&&u(e,["setup","outputAudioTranscription"],J);const b=a(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&u(e,["setup","realtimeInputConfig"],b);const q=a(t,["contextWindowCompression"]);e!==void 0&&q!=null&&u(e,["setup","contextWindowCompression"],q);const X=a(t,["proactivity"]);if(e!==void 0&&X!=null&&u(e,["setup","proactivity"],X),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function Ov(t,e){const o={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],Hv(i));const l=a(t,["responseModalities"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","responseModalities"],l);const c=a(t,["temperature"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","temperature"],c);const f=a(t,["topP"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","topP"],f);const p=a(t,["topK"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","topK"],p);const g=a(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const h=a(t,["mediaResolution"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","mediaResolution"],h);const v=a(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const E=a(t,["speechConfig"]);e!==void 0&&E!=null&&u(e,["setup","generationConfig","speechConfig"],Ps(E));const _=a(t,["thinkingConfig"]);e!==void 0&&_!=null&&u(e,["setup","generationConfig","thinkingConfig"],_);const w=a(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=a(t,["systemInstruction"]);e!==void 0&&k!=null&&u(e,["setup","systemInstruction"],Ye(k));const M=a(t,["tools"]);if(e!==void 0&&M!=null){let U=On(M);Array.isArray(U)&&(U=U.map(ee=>n0(zn(ee)))),u(e,["setup","tools"],U)}const I=a(t,["sessionResumption"]);e!==void 0&&I!=null&&u(e,["setup","sessionResumption"],I);const F=a(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&u(e,["setup","inputAudioTranscription"],F);const J=a(t,["outputAudioTranscription"]);e!==void 0&&J!=null&&u(e,["setup","outputAudioTranscription"],J);const b=a(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&u(e,["setup","realtimeInputConfig"],b);const q=a(t,["contextWindowCompression"]);e!==void 0&&q!=null&&u(e,["setup","contextWindowCompression"],q);const X=a(t,["proactivity"]);e!==void 0&&X!=null&&u(e,["setup","proactivity"],X);const L=a(t,["explicitVadSignal"]);return e!==void 0&&L!=null&&u(e,["setup","explicitVadSignal"],L),o}function Jv(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["setup","model"],xe(t,i));const l=a(e,["config"]);return l!=null&&u(o,["config"],zv(l,o)),o}function Wv(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["setup","model"],xe(t,i));const l=a(e,["config"]);return l!=null&&u(o,["config"],Ov(l,o)),o}function Kv(t){const e={},o=a(t,["musicGenerationConfig"]);return o!=null&&u(e,["musicGenerationConfig"],o),e}function Yv(t){const e={},o=a(t,["weightedPrompts"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),u(e,["weightedPrompts"],i)}return e}function Qv(t){const e={},o=a(t,["media"]);if(o!=null){let h=vc(o);Array.isArray(h)&&(h=h.map(v=>Rr(v))),u(e,["mediaChunks"],h)}const i=a(t,["audio"]);i!=null&&u(e,["audio"],Rr(_c(i)));const l=a(t,["audioStreamEnd"]);l!=null&&u(e,["audioStreamEnd"],l);const c=a(t,["video"]);c!=null&&u(e,["video"],Rr(Ec(c)));const f=a(t,["text"]);f!=null&&u(e,["text"],f);const p=a(t,["activityStart"]);p!=null&&u(e,["activityStart"],p);const g=a(t,["activityEnd"]);return g!=null&&u(e,["activityEnd"],g),e}function Xv(t){const e={},o=a(t,["media"]);if(o!=null){let h=vc(o);Array.isArray(h)&&(h=h.map(v=>v)),u(e,["mediaChunks"],h)}const i=a(t,["audio"]);i!=null&&u(e,["audio"],_c(i));const l=a(t,["audioStreamEnd"]);l!=null&&u(e,["audioStreamEnd"],l);const c=a(t,["video"]);c!=null&&u(e,["video"],Ec(c));const f=a(t,["text"]);f!=null&&u(e,["text"],f);const p=a(t,["activityStart"]);p!=null&&u(e,["activityStart"],p);const g=a(t,["activityEnd"]);return g!=null&&u(e,["activityEnd"],g),e}function Zv(t){const e={},o=a(t,["setupComplete"]);o!=null&&u(e,["setupComplete"],o);const i=a(t,["serverContent"]);i!=null&&u(e,["serverContent"],i);const l=a(t,["toolCall"]);l!=null&&u(e,["toolCall"],l);const c=a(t,["toolCallCancellation"]);c!=null&&u(e,["toolCallCancellation"],c);const f=a(t,["usageMetadata"]);f!=null&&u(e,["usageMetadata"],o0(f));const p=a(t,["goAway"]);p!=null&&u(e,["goAway"],p);const g=a(t,["sessionResumptionUpdate"]);g!=null&&u(e,["sessionResumptionUpdate"],g);const h=a(t,["voiceActivityDetectionSignal"]);return h!=null&&u(e,["voiceActivityDetectionSignal"],h),e}function jv(t){const e={},o=a(t,["mediaResolution"]);o!=null&&u(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&u(e,["codeExecutionResult"],i);const l=a(t,["executableCode"]);l!=null&&u(e,["executableCode"],l);const c=a(t,["fileData"]);c!=null&&u(e,["fileData"],Vv(c));const f=a(t,["functionCall"]);f!=null&&u(e,["functionCall"],Gv(f));const p=a(t,["functionResponse"]);p!=null&&u(e,["functionResponse"],p);const g=a(t,["inlineData"]);g!=null&&u(e,["inlineData"],Rr(g));const h=a(t,["text"]);h!=null&&u(e,["text"],h);const v=a(t,["thought"]);v!=null&&u(e,["thought"],v);const E=a(t,["thoughtSignature"]);E!=null&&u(e,["thoughtSignature"],E);const _=a(t,["videoMetadata"]);return _!=null&&u(e,["videoMetadata"],_),e}function e0(t){const e={},o=a(t,["handle"]);if(o!=null&&u(e,["handle"],o),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function t0(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),u(e,["functionDeclarations"],v)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const l=a(t,["computerUse"]);l!=null&&u(e,["computerUse"],l);const c=a(t,["fileSearch"]);c!=null&&u(e,["fileSearch"],c);const f=a(t,["codeExecution"]);if(f!=null&&u(e,["codeExecution"],f),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=a(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],Bv(p));const g=a(t,["googleSearch"]);g!=null&&u(e,["googleSearch"],$v(g));const h=a(t,["urlContext"]);return h!=null&&u(e,["urlContext"],h),e}function n0(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let E=o;Array.isArray(E)&&(E=E.map(_=>qv(_))),u(e,["functionDeclarations"],E)}const i=a(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const l=a(t,["googleSearchRetrieval"]);l!=null&&u(e,["googleSearchRetrieval"],l);const c=a(t,["computerUse"]);if(c!=null&&u(e,["computerUse"],c),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=a(t,["codeExecution"]);f!=null&&u(e,["codeExecution"],f);const p=a(t,["enterpriseWebSearch"]);p!=null&&u(e,["enterpriseWebSearch"],p);const g=a(t,["googleMaps"]);g!=null&&u(e,["googleMaps"],g);const h=a(t,["googleSearch"]);h!=null&&u(e,["googleSearch"],h);const v=a(t,["urlContext"]);return v!=null&&u(e,["urlContext"],v),e}function o0(t){const e={},o=a(t,["promptTokenCount"]);o!=null&&u(e,["promptTokenCount"],o);const i=a(t,["cachedContentTokenCount"]);i!=null&&u(e,["cachedContentTokenCount"],i);const l=a(t,["candidatesTokenCount"]);l!=null&&u(e,["responseTokenCount"],l);const c=a(t,["toolUsePromptTokenCount"]);c!=null&&u(e,["toolUsePromptTokenCount"],c);const f=a(t,["thoughtsTokenCount"]);f!=null&&u(e,["thoughtsTokenCount"],f);const p=a(t,["totalTokenCount"]);p!=null&&u(e,["totalTokenCount"],p);const g=a(t,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(k=>k)),u(e,["promptTokensDetails"],w)}const h=a(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(k=>k)),u(e,["cacheTokensDetails"],w)}const v=a(t,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(k=>k)),u(e,["responseTokensDetails"],w)}const E=a(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(k=>k)),u(e,["toolUsePromptTokensDetails"],w)}const _=a(t,["trafficType"]);return _!=null&&u(e,["trafficType"],_),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r0(t){const e={},o=a(t,["data"]);if(o!=null&&u(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function i0(t){const e={},o=a(t,["content"]);o!=null&&u(e,["content"],o);const i=a(t,["citationMetadata"]);i!=null&&u(e,["citationMetadata"],s0(i));const l=a(t,["tokenCount"]);l!=null&&u(e,["tokenCount"],l);const c=a(t,["finishReason"]);c!=null&&u(e,["finishReason"],c);const f=a(t,["avgLogprobs"]);f!=null&&u(e,["avgLogprobs"],f);const p=a(t,["groundingMetadata"]);p!=null&&u(e,["groundingMetadata"],p);const g=a(t,["index"]);g!=null&&u(e,["index"],g);const h=a(t,["logprobsResult"]);h!=null&&u(e,["logprobsResult"],h);const v=a(t,["safetyRatings"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(w=>w)),u(e,["safetyRatings"],_)}const E=a(t,["urlContextMetadata"]);return E!=null&&u(e,["urlContextMetadata"],E),e}function s0(t){const e={},o=a(t,["citationSources"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>l)),u(e,["citations"],i)}return e}function l0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["contents"]);if(l!=null){let c=gt(l);Array.isArray(c)&&(c=c.map(f=>f)),u(o,["contents"],c)}return o}function a0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["tokensInfo"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),u(e,["tokensInfo"],l)}return e}function u0(t){const e={},o=a(t,["values"]);o!=null&&u(e,["values"],o);const i=a(t,["statistics"]);return i!=null&&u(e,["statistics"],c0(i)),e}function c0(t){const e={},o=a(t,["truncated"]);o!=null&&u(e,["truncated"],o);const i=a(t,["token_count"]);return i!=null&&u(e,["tokenCount"],i),e}function kr(t){const e={},o=a(t,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>EE(c))),u(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&u(e,["role"],i),e}function d0(t){const e={},o=a(t,["controlType"]);o!=null&&u(e,["controlType"],o);const i=a(t,["enableControlImageComputation"]);return i!=null&&u(e,["computeControl"],i),e}function f0(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function p0(t,e){const o={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&u(e,["systemInstruction"],Ye(i));const l=a(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>Oc(p))),u(e,["tools"],f)}const c=a(t,["generationConfig"]);return e!==void 0&&c!=null&&u(e,["generationConfig"],rE(c)),o}function m0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["contents"]);if(l!=null){let f=gt(l);Array.isArray(f)&&(f=f.map(p=>kr(p))),u(o,["contents"],f)}const c=a(e,["config"]);return c!=null&&f0(c),o}function h0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["contents"]);if(l!=null){let f=gt(l);Array.isArray(f)&&(f=f.map(p=>p)),u(o,["contents"],f)}const c=a(e,["config"]);return c!=null&&p0(c,o),o}function g0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["totalTokens"]);i!=null&&u(e,["totalTokens"],i);const l=a(t,["cachedContentTokenCount"]);return l!=null&&u(e,["cachedContentTokenCount"],l),e}function y0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["totalTokens"]);return i!=null&&u(e,["totalTokens"],i),e}function v0(t,e){const o={},i=a(e,["model"]);return i!=null&&u(o,["_url","name"],xe(t,i)),o}function E0(t,e){const o={},i=a(e,["model"]);return i!=null&&u(o,["_url","name"],xe(t,i)),o}function _0(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function S0(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}function T0(t,e){const o={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const l=a(t,["negativePrompt"]);e!==void 0&&l!=null&&u(e,["parameters","negativePrompt"],l);const c=a(t,["numberOfImages"]);e!==void 0&&c!=null&&u(e,["parameters","sampleCount"],c);const f=a(t,["aspectRatio"]);e!==void 0&&f!=null&&u(e,["parameters","aspectRatio"],f);const p=a(t,["guidanceScale"]);e!==void 0&&p!=null&&u(e,["parameters","guidanceScale"],p);const g=a(t,["seed"]);e!==void 0&&g!=null&&u(e,["parameters","seed"],g);const h=a(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&u(e,["parameters","safetySetting"],h);const v=a(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const E=a(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&u(e,["parameters","includeSafetyAttributes"],E);const _=a(t,["includeRaiReason"]);e!==void 0&&_!=null&&u(e,["parameters","includeRaiReason"],_);const w=a(t,["language"]);e!==void 0&&w!=null&&u(e,["parameters","language"],w);const k=a(t,["outputMimeType"]);e!==void 0&&k!=null&&u(e,["parameters","outputOptions","mimeType"],k);const M=a(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&u(e,["parameters","outputOptions","compressionQuality"],M);const I=a(t,["addWatermark"]);e!==void 0&&I!=null&&u(e,["parameters","addWatermark"],I);const F=a(t,["labels"]);e!==void 0&&F!=null&&u(e,["labels"],F);const J=a(t,["editMode"]);e!==void 0&&J!=null&&u(e,["parameters","editMode"],J);const b=a(t,["baseSteps"]);return e!==void 0&&b!=null&&u(e,["parameters","editConfig","baseSteps"],b),o}function C0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["prompt"]);l!=null&&u(o,["instances[0]","prompt"],l);const c=a(e,["referenceImages"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>AE(g))),u(o,["instances[0]","referenceImages"],p)}const f=a(e,["config"]);return f!=null&&T0(f,o),o}function w0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Pr(c))),u(e,["generatedImages"],l)}return e}function A0(t,e){const o={},i=a(t,["taskType"]);e!==void 0&&i!=null&&u(e,["requests[]","taskType"],i);const l=a(t,["title"]);e!==void 0&&l!=null&&u(e,["requests[]","title"],l);const c=a(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&u(e,["requests[]","outputDimensionality"],c),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function x0(t,e){const o={},i=a(t,["taskType"]);e!==void 0&&i!=null&&u(e,["instances[]","task_type"],i);const l=a(t,["title"]);e!==void 0&&l!=null&&u(e,["instances[]","title"],l);const c=a(t,["outputDimensionality"]);e!==void 0&&c!=null&&u(e,["parameters","outputDimensionality"],c);const f=a(t,["mimeType"]);e!==void 0&&f!=null&&u(e,["instances[]","mimeType"],f);const p=a(t,["autoTruncate"]);return e!==void 0&&p!=null&&u(e,["parameters","autoTruncate"],p),o}function I0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["contents"]);if(l!=null){let p=Ns(t,l);Array.isArray(p)&&(p=p.map(g=>g)),u(o,["requests[]","content"],p)}const c=a(e,["config"]);c!=null&&A0(c,o);const f=a(e,["model"]);return f!==void 0&&u(o,["requests[]","model"],xe(t,f)),o}function N0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["contents"]);if(l!=null){let f=Ns(t,l);Array.isArray(f)&&(f=f.map(p=>p)),u(o,["instances[]","content"],f)}const c=a(e,["config"]);return c!=null&&x0(c,o),o}function R0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["embeddings"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["embeddings"],c)}const l=a(t,["metadata"]);return l!=null&&u(e,["metadata"],l),e}function k0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["predictions[]","embeddings"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>u0(f))),u(e,["embeddings"],c)}const l=a(t,["metadata"]);return l!=null&&u(e,["metadata"],l),e}function P0(t){const e={},o=a(t,["endpoint"]);o!=null&&u(e,["name"],o);const i=a(t,["deployedModelId"]);return i!=null&&u(e,["deployedModelId"],i),e}function M0(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function D0(t){const e={},o=a(t,["id"]);o!=null&&u(e,["id"],o);const i=a(t,["args"]);i!=null&&u(e,["args"],i);const l=a(t,["name"]);if(l!=null&&u(e,["name"],l),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function F0(t){const e={},o=a(t,["mode"]);o!=null&&u(e,["mode"],o);const i=a(t,["allowedFunctionNames"]);if(i!=null&&u(e,["allowedFunctionNames"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function L0(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=a(t,["description"]);o!=null&&u(e,["description"],o);const i=a(t,["name"]);i!=null&&u(e,["name"],i);const l=a(t,["parameters"]);l!=null&&u(e,["parameters"],l);const c=a(t,["parametersJsonSchema"]);c!=null&&u(e,["parametersJsonSchema"],c);const f=a(t,["response"]);f!=null&&u(e,["response"],f);const p=a(t,["responseJsonSchema"]);return p!=null&&u(e,["responseJsonSchema"],p),e}function U0(t,e,o){const i={},l=a(e,["systemInstruction"]);o!==void 0&&l!=null&&u(o,["systemInstruction"],kr(Ye(l)));const c=a(e,["temperature"]);c!=null&&u(i,["temperature"],c);const f=a(e,["topP"]);f!=null&&u(i,["topP"],f);const p=a(e,["topK"]);p!=null&&u(i,["topK"],p);const g=a(e,["candidateCount"]);g!=null&&u(i,["candidateCount"],g);const h=a(e,["maxOutputTokens"]);h!=null&&u(i,["maxOutputTokens"],h);const v=a(e,["stopSequences"]);v!=null&&u(i,["stopSequences"],v);const E=a(e,["responseLogprobs"]);E!=null&&u(i,["responseLogprobs"],E);const _=a(e,["logprobs"]);_!=null&&u(i,["logprobs"],_);const w=a(e,["presencePenalty"]);w!=null&&u(i,["presencePenalty"],w);const k=a(e,["frequencyPenalty"]);k!=null&&u(i,["frequencyPenalty"],k);const M=a(e,["seed"]);M!=null&&u(i,["seed"],M);const I=a(e,["responseMimeType"]);I!=null&&u(i,["responseMimeType"],I);const F=a(e,["responseSchema"]);F!=null&&u(i,["responseSchema"],Rs(F));const J=a(e,["responseJsonSchema"]);if(J!=null&&u(i,["responseJsonSchema"],J),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=a(e,["safetySettings"]);if(o!==void 0&&b!=null){let $=b;Array.isArray($)&&($=$.map(fe=>xE(fe))),u(o,["safetySettings"],$)}const q=a(e,["tools"]);if(o!==void 0&&q!=null){let $=On(q);Array.isArray($)&&($=$.map(fe=>DE(zn(fe)))),u(o,["tools"],$)}const X=a(e,["toolConfig"]);if(o!==void 0&&X!=null&&u(o,["toolConfig"],ME(X)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=a(e,["cachedContent"]);o!==void 0&&L!=null&&u(o,["cachedContent"],zt(t,L));const U=a(e,["responseModalities"]);U!=null&&u(i,["responseModalities"],U);const ee=a(e,["mediaResolution"]);ee!=null&&u(i,["mediaResolution"],ee);const K=a(e,["speechConfig"]);if(K!=null&&u(i,["speechConfig"],ks(K)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ae=a(e,["thinkingConfig"]);ae!=null&&u(i,["thinkingConfig"],ae);const W=a(e,["imageConfig"]);W!=null&&u(i,["imageConfig"],uE(W));const te=a(e,["enableEnhancedCivicAnswers"]);return te!=null&&u(i,["enableEnhancedCivicAnswers"],te),i}function b0(t,e,o){const i={},l=a(e,["systemInstruction"]);o!==void 0&&l!=null&&u(o,["systemInstruction"],Ye(l));const c=a(e,["temperature"]);c!=null&&u(i,["temperature"],c);const f=a(e,["topP"]);f!=null&&u(i,["topP"],f);const p=a(e,["topK"]);p!=null&&u(i,["topK"],p);const g=a(e,["candidateCount"]);g!=null&&u(i,["candidateCount"],g);const h=a(e,["maxOutputTokens"]);h!=null&&u(i,["maxOutputTokens"],h);const v=a(e,["stopSequences"]);v!=null&&u(i,["stopSequences"],v);const E=a(e,["responseLogprobs"]);E!=null&&u(i,["responseLogprobs"],E);const _=a(e,["logprobs"]);_!=null&&u(i,["logprobs"],_);const w=a(e,["presencePenalty"]);w!=null&&u(i,["presencePenalty"],w);const k=a(e,["frequencyPenalty"]);k!=null&&u(i,["frequencyPenalty"],k);const M=a(e,["seed"]);M!=null&&u(i,["seed"],M);const I=a(e,["responseMimeType"]);I!=null&&u(i,["responseMimeType"],I);const F=a(e,["responseSchema"]);F!=null&&u(i,["responseSchema"],Rs(F));const J=a(e,["responseJsonSchema"]);J!=null&&u(i,["responseJsonSchema"],J);const b=a(e,["routingConfig"]);b!=null&&u(i,["routingConfig"],b);const q=a(e,["modelSelectionConfig"]);q!=null&&u(i,["modelConfig"],q);const X=a(e,["safetySettings"]);if(o!==void 0&&X!=null){let Ee=X;Array.isArray(Ee)&&(Ee=Ee.map(Te=>Te)),u(o,["safetySettings"],Ee)}const L=a(e,["tools"]);if(o!==void 0&&L!=null){let Ee=On(L);Array.isArray(Ee)&&(Ee=Ee.map(Te=>Oc(zn(Te)))),u(o,["tools"],Ee)}const U=a(e,["toolConfig"]);o!==void 0&&U!=null&&u(o,["toolConfig"],U);const ee=a(e,["labels"]);o!==void 0&&ee!=null&&u(o,["labels"],ee);const K=a(e,["cachedContent"]);o!==void 0&&K!=null&&u(o,["cachedContent"],zt(t,K));const ae=a(e,["responseModalities"]);ae!=null&&u(i,["responseModalities"],ae);const W=a(e,["mediaResolution"]);W!=null&&u(i,["mediaResolution"],W);const te=a(e,["speechConfig"]);te!=null&&u(i,["speechConfig"],ks(te));const $=a(e,["audioTimestamp"]);$!=null&&u(i,["audioTimestamp"],$);const fe=a(e,["thinkingConfig"]);fe!=null&&u(i,["thinkingConfig"],fe);const pe=a(e,["imageConfig"]);if(pe!=null&&u(i,["imageConfig"],cE(pe)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function Vc(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["contents"]);if(l!=null){let f=gt(l);Array.isArray(f)&&(f=f.map(p=>kr(p))),u(o,["contents"],f)}const c=a(e,["config"]);return c!=null&&u(o,["generationConfig"],U0(t,c,o)),o}function Gc(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["contents"]);if(l!=null){let f=gt(l);Array.isArray(f)&&(f=f.map(p=>p)),u(o,["contents"],f)}const c=a(e,["config"]);return c!=null&&u(o,["generationConfig"],b0(t,c,o)),o}function qc(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>i0(h))),u(e,["candidates"],g)}const l=a(t,["modelVersion"]);l!=null&&u(e,["modelVersion"],l);const c=a(t,["promptFeedback"]);c!=null&&u(e,["promptFeedback"],c);const f=a(t,["responseId"]);f!=null&&u(e,["responseId"],f);const p=a(t,["usageMetadata"]);return p!=null&&u(e,["usageMetadata"],p),e}function Hc(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),u(e,["candidates"],h)}const l=a(t,["createTime"]);l!=null&&u(e,["createTime"],l);const c=a(t,["modelVersion"]);c!=null&&u(e,["modelVersion"],c);const f=a(t,["promptFeedback"]);f!=null&&u(e,["promptFeedback"],f);const p=a(t,["responseId"]);p!=null&&u(e,["responseId"],p);const g=a(t,["usageMetadata"]);return g!=null&&u(e,["usageMetadata"],g),e}function V0(t,e){const o={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const l=a(t,["aspectRatio"]);e!==void 0&&l!=null&&u(e,["parameters","aspectRatio"],l);const c=a(t,["guidanceScale"]);if(e!==void 0&&c!=null&&u(e,["parameters","guidanceScale"],c),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&u(e,["parameters","safetySetting"],f);const p=a(t,["personGeneration"]);e!==void 0&&p!=null&&u(e,["parameters","personGeneration"],p);const g=a(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&u(e,["parameters","includeSafetyAttributes"],g);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&u(e,["parameters","includeRaiReason"],h);const v=a(t,["language"]);e!==void 0&&v!=null&&u(e,["parameters","language"],v);const E=a(t,["outputMimeType"]);e!==void 0&&E!=null&&u(e,["parameters","outputOptions","mimeType"],E);const _=a(t,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&u(e,["parameters","outputOptions","compressionQuality"],_),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=a(t,["imageSize"]);if(e!==void 0&&w!=null&&u(e,["parameters","sampleImageSize"],w),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function G0(t,e){const o={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const l=a(t,["negativePrompt"]);e!==void 0&&l!=null&&u(e,["parameters","negativePrompt"],l);const c=a(t,["numberOfImages"]);e!==void 0&&c!=null&&u(e,["parameters","sampleCount"],c);const f=a(t,["aspectRatio"]);e!==void 0&&f!=null&&u(e,["parameters","aspectRatio"],f);const p=a(t,["guidanceScale"]);e!==void 0&&p!=null&&u(e,["parameters","guidanceScale"],p);const g=a(t,["seed"]);e!==void 0&&g!=null&&u(e,["parameters","seed"],g);const h=a(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&u(e,["parameters","safetySetting"],h);const v=a(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const E=a(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&u(e,["parameters","includeSafetyAttributes"],E);const _=a(t,["includeRaiReason"]);e!==void 0&&_!=null&&u(e,["parameters","includeRaiReason"],_);const w=a(t,["language"]);e!==void 0&&w!=null&&u(e,["parameters","language"],w);const k=a(t,["outputMimeType"]);e!==void 0&&k!=null&&u(e,["parameters","outputOptions","mimeType"],k);const M=a(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&u(e,["parameters","outputOptions","compressionQuality"],M);const I=a(t,["addWatermark"]);e!==void 0&&I!=null&&u(e,["parameters","addWatermark"],I);const F=a(t,["labels"]);e!==void 0&&F!=null&&u(e,["labels"],F);const J=a(t,["imageSize"]);e!==void 0&&J!=null&&u(e,["parameters","sampleImageSize"],J);const b=a(t,["enhancePrompt"]);return e!==void 0&&b!=null&&u(e,["parameters","enhancePrompt"],b),o}function q0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["prompt"]);l!=null&&u(o,["instances[0]","prompt"],l);const c=a(e,["config"]);return c!=null&&V0(c,o),o}function H0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["prompt"]);l!=null&&u(o,["instances[0]","prompt"],l);const c=a(e,["config"]);return c!=null&&G0(c,o),o}function B0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["predictions"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>eE(f))),u(e,["generatedImages"],c)}const l=a(t,["positivePromptSafetyAttributes"]);return l!=null&&u(e,["positivePromptSafetyAttributes"],$c(l)),e}function $0(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["predictions"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>Pr(f))),u(e,["generatedImages"],c)}const l=a(t,["positivePromptSafetyAttributes"]);return l!=null&&u(e,["positivePromptSafetyAttributes"],zc(l)),e}function z0(t,e){const o={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=a(t,["durationSeconds"]);if(e!==void 0&&l!=null&&u(e,["parameters","durationSeconds"],l),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=a(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const f=a(t,["resolution"]);e!==void 0&&f!=null&&u(e,["parameters","resolution"],f);const p=a(t,["personGeneration"]);if(e!==void 0&&p!=null&&u(e,["parameters","personGeneration"],p),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=a(t,["negativePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","negativePrompt"],g);const h=a(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&u(e,["parameters","enhancePrompt"],h),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=a(t,["lastFrame"]);e!==void 0&&v!=null&&u(e,["instances[0]","lastFrame"],Mr(v));const E=a(t,["referenceImages"]);if(e!==void 0&&E!=null){let _=E;Array.isArray(_)&&(_=_.map(w=>JE(w))),u(e,["instances[0]","referenceImages"],_)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function O0(t,e){const o={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const l=a(t,["outputGcsUri"]);e!==void 0&&l!=null&&u(e,["parameters","storageUri"],l);const c=a(t,["fps"]);e!==void 0&&c!=null&&u(e,["parameters","fps"],c);const f=a(t,["durationSeconds"]);e!==void 0&&f!=null&&u(e,["parameters","durationSeconds"],f);const p=a(t,["seed"]);e!==void 0&&p!=null&&u(e,["parameters","seed"],p);const g=a(t,["aspectRatio"]);e!==void 0&&g!=null&&u(e,["parameters","aspectRatio"],g);const h=a(t,["resolution"]);e!==void 0&&h!=null&&u(e,["parameters","resolution"],h);const v=a(t,["personGeneration"]);e!==void 0&&v!=null&&u(e,["parameters","personGeneration"],v);const E=a(t,["pubsubTopic"]);e!==void 0&&E!=null&&u(e,["parameters","pubsubTopic"],E);const _=a(t,["negativePrompt"]);e!==void 0&&_!=null&&u(e,["parameters","negativePrompt"],_);const w=a(t,["enhancePrompt"]);e!==void 0&&w!=null&&u(e,["parameters","enhancePrompt"],w);const k=a(t,["generateAudio"]);e!==void 0&&k!=null&&u(e,["parameters","generateAudio"],k);const M=a(t,["lastFrame"]);e!==void 0&&M!=null&&u(e,["instances[0]","lastFrame"],Nt(M));const I=a(t,["referenceImages"]);if(e!==void 0&&I!=null){let b=I;Array.isArray(b)&&(b=b.map(q=>WE(q))),u(e,["instances[0]","referenceImages"],b)}const F=a(t,["mask"]);e!==void 0&&F!=null&&u(e,["instances[0]","mask"],OE(F));const J=a(t,["compressionQuality"]);return e!==void 0&&J!=null&&u(e,["parameters","compressionQuality"],J),o}function J0(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response","generateVideoResponse"]);return f!=null&&u(e,["response"],Q0(f)),e}function W0(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response"]);return f!=null&&u(e,["response"],X0(f)),e}function K0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["prompt"]);l!=null&&u(o,["instances[0]","prompt"],l);const c=a(e,["image"]);c!=null&&u(o,["instances[0]","image"],Mr(c));const f=a(e,["video"]);f!=null&&u(o,["instances[0]","video"],Jc(f));const p=a(e,["source"]);p!=null&&Z0(p,o);const g=a(e,["config"]);return g!=null&&z0(g,o),o}function Y0(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["prompt"]);l!=null&&u(o,["instances[0]","prompt"],l);const c=a(e,["image"]);c!=null&&u(o,["instances[0]","image"],Nt(c));const f=a(e,["video"]);f!=null&&u(o,["instances[0]","video"],Wc(f));const p=a(e,["source"]);p!=null&&j0(p,o);const g=a(e,["config"]);return g!=null&&O0(g,o),o}function Q0(t){const e={},o=a(t,["generatedSamples"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>nE(f))),u(e,["generatedVideos"],c)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&u(e,["raiMediaFilteredReasons"],l),e}function X0(t){const e={},o=a(t,["videos"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>oE(f))),u(e,["generatedVideos"],c)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const l=a(t,["raiMediaFilteredReasons"]);return l!=null&&u(e,["raiMediaFilteredReasons"],l),e}function Z0(t,e){const o={},i=a(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const l=a(t,["image"]);e!==void 0&&l!=null&&u(e,["instances[0]","image"],Mr(l));const c=a(t,["video"]);return e!==void 0&&c!=null&&u(e,["instances[0]","video"],Jc(c)),o}function j0(t,e){const o={},i=a(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const l=a(t,["image"]);e!==void 0&&l!=null&&u(e,["instances[0]","image"],Nt(l));const c=a(t,["video"]);return e!==void 0&&c!=null&&u(e,["instances[0]","video"],Wc(c)),o}function eE(t){const e={},o=a(t,["_self"]);o!=null&&u(e,["image"],dE(o));const i=a(t,["raiFilteredReason"]);i!=null&&u(e,["raiFilteredReason"],i);const l=a(t,["_self"]);return l!=null&&u(e,["safetyAttributes"],$c(l)),e}function Pr(t){const e={},o=a(t,["_self"]);o!=null&&u(e,["image"],Bc(o));const i=a(t,["raiFilteredReason"]);i!=null&&u(e,["raiFilteredReason"],i);const l=a(t,["_self"]);l!=null&&u(e,["safetyAttributes"],zc(l));const c=a(t,["prompt"]);return c!=null&&u(e,["enhancedPrompt"],c),e}function tE(t){const e={},o=a(t,["_self"]);o!=null&&u(e,["mask"],Bc(o));const i=a(t,["labels"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),u(e,["labels"],l)}return e}function nE(t){const e={},o=a(t,["video"]);return o!=null&&u(e,["video"],$E(o)),e}function oE(t){const e={},o=a(t,["_self"]);return o!=null&&u(e,["video"],zE(o)),e}function rE(t){const e={},o=a(t,["modelSelectionConfig"]);o!=null&&u(e,["modelConfig"],o);const i=a(t,["responseJsonSchema"]);i!=null&&u(e,["responseJsonSchema"],i);const l=a(t,["audioTimestamp"]);l!=null&&u(e,["audioTimestamp"],l);const c=a(t,["candidateCount"]);c!=null&&u(e,["candidateCount"],c);const f=a(t,["enableAffectiveDialog"]);f!=null&&u(e,["enableAffectiveDialog"],f);const p=a(t,["frequencyPenalty"]);p!=null&&u(e,["frequencyPenalty"],p);const g=a(t,["logprobs"]);g!=null&&u(e,["logprobs"],g);const h=a(t,["maxOutputTokens"]);h!=null&&u(e,["maxOutputTokens"],h);const v=a(t,["mediaResolution"]);v!=null&&u(e,["mediaResolution"],v);const E=a(t,["presencePenalty"]);E!=null&&u(e,["presencePenalty"],E);const _=a(t,["responseLogprobs"]);_!=null&&u(e,["responseLogprobs"],_);const w=a(t,["responseMimeType"]);w!=null&&u(e,["responseMimeType"],w);const k=a(t,["responseModalities"]);k!=null&&u(e,["responseModalities"],k);const M=a(t,["responseSchema"]);M!=null&&u(e,["responseSchema"],M);const I=a(t,["routingConfig"]);I!=null&&u(e,["routingConfig"],I);const F=a(t,["seed"]);F!=null&&u(e,["seed"],F);const J=a(t,["speechConfig"]);J!=null&&u(e,["speechConfig"],J);const b=a(t,["stopSequences"]);b!=null&&u(e,["stopSequences"],b);const q=a(t,["temperature"]);q!=null&&u(e,["temperature"],q);const X=a(t,["thinkingConfig"]);X!=null&&u(e,["thinkingConfig"],X);const L=a(t,["topK"]);L!=null&&u(e,["topK"],L);const U=a(t,["topP"]);if(U!=null&&u(e,["topP"],U),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function iE(t,e){const o={},i=a(e,["model"]);return i!=null&&u(o,["_url","name"],xe(t,i)),o}function sE(t,e){const o={},i=a(e,["model"]);return i!=null&&u(o,["_url","name"],xe(t,i)),o}function lE(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&u(e,["enableWidget"],o),e}function aE(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&u(e,["timeRangeFilter"],o),e}function uE(t){const e={},o=a(t,["aspectRatio"]);o!=null&&u(e,["aspectRatio"],o);const i=a(t,["imageSize"]);if(i!=null&&u(e,["imageSize"],i),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function cE(t){const e={},o=a(t,["aspectRatio"]);o!=null&&u(e,["aspectRatio"],o);const i=a(t,["imageSize"]);i!=null&&u(e,["imageSize"],i);const l=a(t,["outputMimeType"]);l!=null&&u(e,["imageOutputOptions","mimeType"],l);const c=a(t,["outputCompressionQuality"]);return c!=null&&u(e,["imageOutputOptions","compressionQuality"],c),e}function dE(t){const e={},o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["imageBytes"],on(o));const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Bc(t){const e={},o=a(t,["gcsUri"]);o!=null&&u(e,["gcsUri"],o);const i=a(t,["bytesBase64Encoded"]);i!=null&&u(e,["imageBytes"],on(i));const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function Mr(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=a(t,["imageBytes"]);o!=null&&u(e,["bytesBase64Encoded"],on(o));const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Nt(t){const e={},o=a(t,["gcsUri"]);o!=null&&u(e,["gcsUri"],o);const i=a(t,["imageBytes"]);i!=null&&u(e,["bytesBase64Encoded"],on(i));const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function fE(t,e,o){const i={},l=a(e,["pageSize"]);o!==void 0&&l!=null&&u(o,["_query","pageSize"],l);const c=a(e,["pageToken"]);o!==void 0&&c!=null&&u(o,["_query","pageToken"],c);const f=a(e,["filter"]);o!==void 0&&f!=null&&u(o,["_query","filter"],f);const p=a(e,["queryBase"]);return o!==void 0&&p!=null&&u(o,["_url","models_url"],Ic(t,p)),i}function pE(t,e,o){const i={},l=a(e,["pageSize"]);o!==void 0&&l!=null&&u(o,["_query","pageSize"],l);const c=a(e,["pageToken"]);o!==void 0&&c!=null&&u(o,["_query","pageToken"],c);const f=a(e,["filter"]);o!==void 0&&f!=null&&u(o,["_query","filter"],f);const p=a(e,["queryBase"]);return o!==void 0&&p!=null&&u(o,["_url","models_url"],Ic(t,p)),i}function mE(t,e){const o={},i=a(e,["config"]);return i!=null&&fE(t,i,o),o}function hE(t,e){const o={},i=a(e,["config"]);return i!=null&&pE(t,i,o),o}function gE(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=a(t,["_self"]);if(l!=null){let c=Nc(l);Array.isArray(c)&&(c=c.map(f=>Ds(f))),u(e,["models"],c)}return e}function yE(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=a(t,["_self"]);if(l!=null){let c=Nc(l);Array.isArray(c)&&(c=c.map(f=>Fs(f))),u(e,["models"],c)}return e}function vE(t){const e={},o=a(t,["maskMode"]);o!=null&&u(e,["maskMode"],o);const i=a(t,["segmentationClasses"]);i!=null&&u(e,["maskClasses"],i);const l=a(t,["maskDilation"]);return l!=null&&u(e,["dilation"],l),e}function Ds(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=a(t,["description"]);l!=null&&u(e,["description"],l);const c=a(t,["version"]);c!=null&&u(e,["version"],c);const f=a(t,["_self"]);f!=null&&u(e,["tunedModelInfo"],FE(f));const p=a(t,["inputTokenLimit"]);p!=null&&u(e,["inputTokenLimit"],p);const g=a(t,["outputTokenLimit"]);g!=null&&u(e,["outputTokenLimit"],g);const h=a(t,["supportedGenerationMethods"]);h!=null&&u(e,["supportedActions"],h);const v=a(t,["temperature"]);v!=null&&u(e,["temperature"],v);const E=a(t,["maxTemperature"]);E!=null&&u(e,["maxTemperature"],E);const _=a(t,["topP"]);_!=null&&u(e,["topP"],_);const w=a(t,["topK"]);w!=null&&u(e,["topK"],w);const k=a(t,["thinking"]);return k!=null&&u(e,["thinking"],k),e}function Fs(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["displayName"]);i!=null&&u(e,["displayName"],i);const l=a(t,["description"]);l!=null&&u(e,["description"],l);const c=a(t,["versionId"]);c!=null&&u(e,["version"],c);const f=a(t,["deployedModels"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(_=>P0(_))),u(e,["endpoints"],E)}const p=a(t,["labels"]);p!=null&&u(e,["labels"],p);const g=a(t,["_self"]);g!=null&&u(e,["tunedModelInfo"],LE(g));const h=a(t,["defaultCheckpointId"]);h!=null&&u(e,["defaultCheckpointId"],h);const v=a(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(_=>_)),u(e,["checkpoints"],E)}return e}function EE(t){const e={},o=a(t,["mediaResolution"]);o!=null&&u(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&u(e,["codeExecutionResult"],i);const l=a(t,["executableCode"]);l!=null&&u(e,["executableCode"],l);const c=a(t,["fileData"]);c!=null&&u(e,["fileData"],M0(c));const f=a(t,["functionCall"]);f!=null&&u(e,["functionCall"],D0(f));const p=a(t,["functionResponse"]);p!=null&&u(e,["functionResponse"],p);const g=a(t,["inlineData"]);g!=null&&u(e,["inlineData"],r0(g));const h=a(t,["text"]);h!=null&&u(e,["text"],h);const v=a(t,["thought"]);v!=null&&u(e,["thought"],v);const E=a(t,["thoughtSignature"]);E!=null&&u(e,["thoughtSignature"],E);const _=a(t,["videoMetadata"]);return _!=null&&u(e,["videoMetadata"],_),e}function _E(t){const e={},o=a(t,["productImage"]);return o!=null&&u(e,["image"],Nt(o)),e}function SE(t,e){const o={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const l=a(t,["baseSteps"]);e!==void 0&&l!=null&&u(e,["parameters","baseSteps"],l);const c=a(t,["outputGcsUri"]);e!==void 0&&c!=null&&u(e,["parameters","storageUri"],c);const f=a(t,["seed"]);e!==void 0&&f!=null&&u(e,["parameters","seed"],f);const p=a(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&u(e,["parameters","safetySetting"],p);const g=a(t,["personGeneration"]);e!==void 0&&g!=null&&u(e,["parameters","personGeneration"],g);const h=a(t,["addWatermark"]);e!==void 0&&h!=null&&u(e,["parameters","addWatermark"],h);const v=a(t,["outputMimeType"]);e!==void 0&&v!=null&&u(e,["parameters","outputOptions","mimeType"],v);const E=a(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&u(e,["parameters","outputOptions","compressionQuality"],E);const _=a(t,["enhancePrompt"]);e!==void 0&&_!=null&&u(e,["parameters","enhancePrompt"],_);const w=a(t,["labels"]);return e!==void 0&&w!=null&&u(e,["labels"],w),o}function TE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["source"]);l!=null&&wE(l,o);const c=a(e,["config"]);return c!=null&&SE(c,o),o}function CE(t){const e={},o=a(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>Pr(l))),u(e,["generatedImages"],i)}return e}function wE(t,e){const o={},i=a(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const l=a(t,["personImage"]);e!==void 0&&l!=null&&u(e,["instances[0]","personImage","image"],Nt(l));const c=a(t,["productImages"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>_E(p))),u(e,["instances[0]","productImages"],f)}return o}function AE(t){const e={},o=a(t,["referenceImage"]);o!=null&&u(e,["referenceImage"],Nt(o));const i=a(t,["referenceId"]);i!=null&&u(e,["referenceId"],i);const l=a(t,["referenceType"]);l!=null&&u(e,["referenceType"],l);const c=a(t,["maskImageConfig"]);c!=null&&u(e,["maskImageConfig"],vE(c));const f=a(t,["controlImageConfig"]);f!=null&&u(e,["controlImageConfig"],d0(f));const p=a(t,["styleImageConfig"]);p!=null&&u(e,["styleImageConfig"],p);const g=a(t,["subjectImageConfig"]);return g!=null&&u(e,["subjectImageConfig"],g),e}function $c(t){const e={},o=a(t,["safetyAttributes","categories"]);o!=null&&u(e,["categories"],o);const i=a(t,["safetyAttributes","scores"]);i!=null&&u(e,["scores"],i);const l=a(t,["contentType"]);return l!=null&&u(e,["contentType"],l),e}function zc(t){const e={},o=a(t,["safetyAttributes","categories"]);o!=null&&u(e,["categories"],o);const i=a(t,["safetyAttributes","scores"]);i!=null&&u(e,["scores"],i);const l=a(t,["contentType"]);return l!=null&&u(e,["contentType"],l),e}function xE(t){const e={},o=a(t,["category"]);if(o!=null&&u(e,["category"],o),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function IE(t){const e={},o=a(t,["image"]);return o!=null&&u(e,["image"],Nt(o)),e}function NE(t,e){const o={},i=a(t,["mode"]);e!==void 0&&i!=null&&u(e,["parameters","mode"],i);const l=a(t,["maxPredictions"]);e!==void 0&&l!=null&&u(e,["parameters","maxPredictions"],l);const c=a(t,["confidenceThreshold"]);e!==void 0&&c!=null&&u(e,["parameters","confidenceThreshold"],c);const f=a(t,["maskDilation"]);e!==void 0&&f!=null&&u(e,["parameters","maskDilation"],f);const p=a(t,["binaryColorThreshold"]);e!==void 0&&p!=null&&u(e,["parameters","binaryColorThreshold"],p);const g=a(t,["labels"]);return e!==void 0&&g!=null&&u(e,["labels"],g),o}function RE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["source"]);l!=null&&PE(l,o);const c=a(e,["config"]);return c!=null&&NE(c,o),o}function kE(t){const e={},o=a(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(l=>tE(l))),u(e,["generatedMasks"],i)}return e}function PE(t,e){const o={},i=a(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const l=a(t,["image"]);e!==void 0&&l!=null&&u(e,["instances[0]","image"],Nt(l));const c=a(t,["scribbleImage"]);return e!==void 0&&c!=null&&u(e,["instances[0]","scribble"],IE(c)),o}function ME(t){const e={},o=a(t,["functionCallingConfig"]);o!=null&&u(e,["functionCallingConfig"],F0(o));const i=a(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],i),e}function DE(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),u(e,["functionDeclarations"],v)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const l=a(t,["computerUse"]);l!=null&&u(e,["computerUse"],l);const c=a(t,["fileSearch"]);c!=null&&u(e,["fileSearch"],c);const f=a(t,["codeExecution"]);if(f!=null&&u(e,["codeExecution"],f),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=a(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],lE(p));const g=a(t,["googleSearch"]);g!=null&&u(e,["googleSearch"],aE(g));const h=a(t,["urlContext"]);return h!=null&&u(e,["urlContext"],h),e}function Oc(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let E=o;Array.isArray(E)&&(E=E.map(_=>L0(_))),u(e,["functionDeclarations"],E)}const i=a(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const l=a(t,["googleSearchRetrieval"]);l!=null&&u(e,["googleSearchRetrieval"],l);const c=a(t,["computerUse"]);if(c!=null&&u(e,["computerUse"],c),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=a(t,["codeExecution"]);f!=null&&u(e,["codeExecution"],f);const p=a(t,["enterpriseWebSearch"]);p!=null&&u(e,["enterpriseWebSearch"],p);const g=a(t,["googleMaps"]);g!=null&&u(e,["googleMaps"],g);const h=a(t,["googleSearch"]);h!=null&&u(e,["googleSearch"],h);const v=a(t,["urlContext"]);return v!=null&&u(e,["urlContext"],v),e}function FE(t){const e={},o=a(t,["baseModel"]);o!=null&&u(e,["baseModel"],o);const i=a(t,["createTime"]);i!=null&&u(e,["createTime"],i);const l=a(t,["updateTime"]);return l!=null&&u(e,["updateTime"],l),e}function LE(t){const e={},o=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&u(e,["baseModel"],o);const i=a(t,["createTime"]);i!=null&&u(e,["createTime"],i);const l=a(t,["updateTime"]);return l!=null&&u(e,["updateTime"],l),e}function UE(t,e){const o={},i=a(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const l=a(t,["description"]);e!==void 0&&l!=null&&u(e,["description"],l);const c=a(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&u(e,["defaultCheckpointId"],c),o}function bE(t,e){const o={},i=a(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const l=a(t,["description"]);e!==void 0&&l!=null&&u(e,["description"],l);const c=a(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&u(e,["defaultCheckpointId"],c),o}function VE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","name"],xe(t,i));const l=a(e,["config"]);return l!=null&&UE(l,o),o}function GE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["config"]);return l!=null&&bE(l,o),o}function qE(t,e){const o={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&u(e,["parameters","safetySetting"],l);const c=a(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const f=a(t,["includeRaiReason"]);e!==void 0&&f!=null&&u(e,["parameters","includeRaiReason"],f);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","mimeType"],p);const g=a(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g);const h=a(t,["enhanceInputImage"]);e!==void 0&&h!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],h);const v=a(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=a(t,["labels"]);e!==void 0&&E!=null&&u(e,["labels"],E);const _=a(t,["numberOfImages"]);e!==void 0&&_!=null&&u(e,["parameters","sampleCount"],_);const w=a(t,["mode"]);return e!==void 0&&w!=null&&u(e,["parameters","mode"],w),o}function HE(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["_url","model"],xe(t,i));const l=a(e,["image"]);l!=null&&u(o,["instances[0]","image"],Nt(l));const c=a(e,["upscaleFactor"]);c!=null&&u(o,["parameters","upscaleConfig","upscaleFactor"],c);const f=a(e,["config"]);return f!=null&&qE(f,o),o}function BE(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Pr(c))),u(e,["generatedImages"],l)}return e}function $E(t){const e={},o=a(t,["uri"]);o!=null&&u(e,["uri"],o);const i=a(t,["encodedVideo"]);i!=null&&u(e,["videoBytes"],on(i));const l=a(t,["encoding"]);return l!=null&&u(e,["mimeType"],l),e}function zE(t){const e={},o=a(t,["gcsUri"]);o!=null&&u(e,["uri"],o);const i=a(t,["bytesBase64Encoded"]);i!=null&&u(e,["videoBytes"],on(i));const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}function OE(t){const e={},o=a(t,["image"]);o!=null&&u(e,["_self"],Nt(o));const i=a(t,["maskMode"]);return i!=null&&u(e,["maskMode"],i),e}function JE(t){const e={},o=a(t,["image"]);o!=null&&u(e,["image"],Mr(o));const i=a(t,["referenceType"]);return i!=null&&u(e,["referenceType"],i),e}function WE(t){const e={},o=a(t,["image"]);o!=null&&u(e,["image"],Nt(o));const i=a(t,["referenceType"]);return i!=null&&u(e,["referenceType"],i),e}function Jc(t){const e={},o=a(t,["uri"]);o!=null&&u(e,["uri"],o);const i=a(t,["videoBytes"]);i!=null&&u(e,["encodedVideo"],on(i));const l=a(t,["mimeType"]);return l!=null&&u(e,["encoding"],l),e}function Wc(t){const e={},o=a(t,["uri"]);o!=null&&u(e,["gcsUri"],o);const i=a(t,["videoBytes"]);i!=null&&u(e,["bytesBase64Encoded"],on(i));const l=a(t,["mimeType"]);return l!=null&&u(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KE(t,e){const o={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&u(e,["displayName"],i),o}function YE(t){const e={},o=a(t,["config"]);return o!=null&&KE(o,e),e}function QE(t,e){const o={},i=a(t,["force"]);return e!==void 0&&i!=null&&u(e,["_query","force"],i),o}function XE(t){const e={},o=a(t,["name"]);o!=null&&u(e,["_url","name"],o);const i=a(t,["config"]);return i!=null&&QE(i,e),e}function ZE(t){const e={},o=a(t,["name"]);return o!=null&&u(e,["_url","name"],o),e}function jE(t,e){const o={},i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["customMetadata"],c)}const l=a(t,["chunkingConfig"]);return e!==void 0&&l!=null&&u(e,["chunkingConfig"],l),o}function e_(t){const e={},o=a(t,["name"]);o!=null&&u(e,["name"],o);const i=a(t,["metadata"]);i!=null&&u(e,["metadata"],i);const l=a(t,["done"]);l!=null&&u(e,["done"],l);const c=a(t,["error"]);c!=null&&u(e,["error"],c);const f=a(t,["response"]);return f!=null&&u(e,["response"],n_(f)),e}function t_(t){const e={},o=a(t,["fileSearchStoreName"]);o!=null&&u(e,["_url","file_search_store_name"],o);const i=a(t,["fileName"]);i!=null&&u(e,["fileName"],i);const l=a(t,["config"]);return l!=null&&jE(l,e),e}function n_(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["parent"]);i!=null&&u(e,["parent"],i);const l=a(t,["documentName"]);return l!=null&&u(e,["documentName"],l),e}function o_(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&u(e,["_query","pageToken"],l),o}function r_(t){const e={},o=a(t,["config"]);return o!=null&&o_(o,e),e}function i_(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=a(t,["fileSearchStores"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["fileSearchStores"],c)}return e}function Kc(t,e){const o={},i=a(t,["mimeType"]);e!==void 0&&i!=null&&u(e,["mimeType"],i);const l=a(t,["displayName"]);e!==void 0&&l!=null&&u(e,["displayName"],l);const c=a(t,["customMetadata"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>g)),u(e,["customMetadata"],p)}const f=a(t,["chunkingConfig"]);return e!==void 0&&f!=null&&u(e,["chunkingConfig"],f),o}function s_(t){const e={},o=a(t,["fileSearchStoreName"]);o!=null&&u(e,["_url","file_search_store_name"],o);const i=a(t,["config"]);return i!=null&&Kc(i,e),e}function l_(t){const e={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(e,["sdkHttpResponse"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a_="Content-Type",u_="X-Server-Timeout",c_="User-Agent",Ls="x-goog-api-client",d_="google-genai-sdk/1.34.0",f_="v1beta1",p_="v1beta";class m_{constructor(e){var o,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:f_,l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:p_,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,i){const l=[this.getRequestUrlInternal(o)];return i&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,o,i);if(e.queryParams)for(const[f,p]of Object.entries(e.queryParams))l.searchParams.append(f,String(p));let c={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=e.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,o,l.toString(),e.abortSignal),this.unaryApiCall(l,c,e.httpMethod)}patchHttpOptions(e,o){const i=JSON.parse(JSON.stringify(e));for(const[l,c]of Object.entries(o))typeof c=="object"?i[l]=Object.assign(Object.assign({},i[l]),c):c!==void 0&&(i[l]=c);return i}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,o,i);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let c={};return c.body=e.body,c=await this.includeExtraHttpOptionsToRequestInit(c,o,l.toString(),e.abortSignal),this.streamApiCall(l,c,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,i,l){if(o&&o.timeout||l){const c=new AbortController,f=c.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const p=setTimeout(()=>c.abort(),o.timeout);p&&typeof p.unref=="function"&&p.unref()}l&&l.addEventListener("abort",()=>{c.abort()}),e.signal=f}return o&&o.extraBody!==null&&h_(e,o.extraBody),e.headers=await this.getHeadersInternal(o,i),e}async unaryApiCall(e,o,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:i})).then(async l=>(await Yc(l),new ws(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,o,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:i})).then(async l=>(await Yc(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){return xt(this,arguments,function*(){var i;const l=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),c=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let f="";const p="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield ve(l.read());if(h){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=c.decode(v,{stream:!0});try{const k=JSON.parse(E);if("error"in k){const M=JSON.parse(JSON.stringify(k.error)),I=M.status,F=M.code,J=`got status: ${I}. ${JSON.stringify(k)}`;if(F>=400&&F<600)throw new Nr({message:J,status:F})}}catch(k){if(k.name==="ApiError")throw k}f+=E;let _=-1,w=0;for(;;){_=-1,w=0;for(const I of g){const F=f.indexOf(I);F!==-1&&(_===-1||F<_)&&(_=F,w=I.length)}if(_===-1)break;const k=f.substring(0,_);f=f.substring(_+w);const M=k.trim();if(M.startsWith(p)){const I=M.substring(p.length).trim();try{const F=new Response(I,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ve(new ws(F))}catch(F){throw new Error(`exception parsing stream chunk ${I}. ${F}`)}}}}}finally{l.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},o=d_+" "+this.clientOptions.userAgentExtra;return e[c_]=o,e[Ls]=o,e[a_]="application/json",e}async getHeadersInternal(e,o){const i=new Headers;if(e&&e.headers){for(const[l,c]of Object.entries(e.headers))i.append(l,c);e.timeout&&e.timeout>0&&i.append(u_,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,o),i}getFileName(e){var o;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(o=i.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),i}async uploadFile(e,o){var i;const l={};o!=null&&(l.mimeType=o.mimeType,l.name=o.name,l.displayName=o.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const c=this.clientOptions.uploader,f=await c.stat(e);l.sizeBytes=String(f.size);const p=(i=o==null?void 0:o.mimeType)!==null&&i!==void 0?i:f.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=p;const g={file:l},h=this.getFileName(e),v=j("upload/v1beta/files",g._url),E=await this.fetchUploadUrl(v,l.sizeBytes,l.mimeType,h,g,o==null?void 0:o.httpOptions);return c.upload(e,E,this)}async uploadFileToFileSearchStore(e,o,i){var l;const c=this.clientOptions.uploader,f=await c.stat(o),p=String(f.size),g=(l=i==null?void 0:i.mimeType)!==null&&l!==void 0?l:f.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(o),E={};i!=null&&Kc(i,E);const _=await this.fetchUploadUrl(h,p,g,v,E,i==null?void 0:i.httpOptions);return c.uploadToFileSearchStore(o,_,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o,i,l,c,f){var p;let g={};f?g=f:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${i}`},l?{"X-Goog-Upload-File-Name":l}:{})};const h=await this.request({path:e,body:JSON.stringify(c),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(p=h==null?void 0:h.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Yc(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const o=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=JSON.stringify(i);throw o>=400&&o<600?new Nr({message:l,status:o}):new Error(l)}}function h_(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof t.body=="string"&&t.body.length>0)try{const c=JSON.parse(t.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))o=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(c,f){const p=Object.assign({},c);for(const g in f)if(Object.prototype.hasOwnProperty.call(f,g)){const h=f[g],v=p[g];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?p[g]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),p[g]=h)}return p}const l=i(o,e);t.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g_="mcp_used/unknown";let y_=!1;function Qc(t){for(const e of t)if(v_(e)||typeof e=="object"&&"inputSchema"in e)return!0;return y_}function Xc(t){var e;const o=(e=t[Ls])!==null&&e!==void 0?e:"";t[Ls]=(o+` ${g_}`).trimStart()}function v_(t){return t!==null&&typeof t=="object"&&t instanceof Us}function E_(t){return xt(this,arguments,function*(o,i=100){let l,c=0;for(;c<i;){const f=yield ve(o.listTools({cursor:l}));for(const p of f.tools)yield yield ve(p),c++;if(!f.nextCursor)break;l=f.nextCursor}})}class Us{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new Us(e,o)}async initialize(){var e,o,i,l;if(this.mcpTools.length>0)return;const c={},f=[];for(const v of this.mcpClients)try{for(var p=!0,g=(o=void 0,It(E_(v))),h;h=await g.next(),e=h.done,!e;p=!0){l=h.value,p=!1;const E=l;f.push(E);const _=E.name;if(c[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);c[_]=v}}catch(E){o={error:E}}finally{try{!p&&!e&&(i=g.return)&&await i.call(g)}finally{if(o)throw o.error}}this.mcpTools=f,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),Zg(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[i.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const f=await l.callTool({name:i.name,arguments:i.args},void 0,c);o.push({functionResponse:{name:i.name,response:f.isError?{error:f}:f}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function __(t,e,o){const i=new zg;let l;o.data instanceof Blob?l=JSON.parse(await o.data.text()):l=JSON.parse(o.data),Object.assign(i,l),e(i)}class S_{constructor(e,o,i){this.apiClient=e,this.auth=o,this.webSocketFactory=i}async connect(e){var o,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),f=w_(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),g=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${p}`;let h=()=>{};const v=new Promise(b=>{h=b}),E=e.callbacks,_=function(){h({})},w=this.apiClient,k={onopen:_,onmessage:b=>{__(w,E.onmessage,b)},onerror:(o=E==null?void 0:E.onerror)!==null&&o!==void 0?o:function(b){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(b){}},M=this.webSocketFactory.create(g,C_(f),k);M.connect(),await v;const J={setup:{model:xe(this.apiClient,e.model)}};return M.send(JSON.stringify(J)),new T_(M,this.apiClient)}}class T_{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=Yv(e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=Kv(e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const o={playbackControl:e};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Bn.PLAY)}pause(){this.sendPlaybackControl(Bn.PAUSE)}stop(){this.sendPlaybackControl(Bn.STOP)}resetContext(){this.sendPlaybackControl(Bn.RESET_CONTEXT)}close(){this.conn.close()}}function C_(t){const e={};return t.forEach((o,i)=>{e[i]=o}),e}function w_(t){const e=new Headers;for(const[o,i]of Object.entries(t))e.append(o,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A_="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function x_(t,e,o){const i=new $g;let l;o.data instanceof Blob?l=await o.data.text():o.data instanceof ArrayBuffer?l=new TextDecoder().decode(o.data):l=o.data;const c=JSON.parse(l);if(t.isVertexAI()){const f=Zv(c);Object.assign(i,f)}else Object.assign(i,c);e(i)}class I_{constructor(e,o,i){this.apiClient=e,this.auth=o,this.webSocketFactory=i,this.music=new S_(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,i,l,c,f,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&Qc(e.config.tools)&&Xc(E);const _=P_(E);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,v);else{const K=this.apiClient.getApiKey();let ae="BidiGenerateContent",W="key";K!=null&&K.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ae="BidiGenerateContentConstrained",W="access_token"),v=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ae}?${W}=${K}`}let w=()=>{};const k=new Promise(K=>{w=K}),M=e.callbacks,I=function(){var K;(K=M==null?void 0:M.onopen)===null||K===void 0||K.call(M),w({})},F=this.apiClient,J={onopen:I,onmessage:K=>{x_(F,M.onmessage,K)},onerror:(o=M==null?void 0:M.onerror)!==null&&o!==void 0?o:function(K){},onclose:(i=M==null?void 0:M.onclose)!==null&&i!==void 0?i:function(K){}},b=this.webSocketFactory.create(v,k_(_),J);b.connect(),await k;let q=xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const K=this.apiClient.getProject(),ae=this.apiClient.getLocation();q=`projects/${K}/locations/${ae}/`+q}let X={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Cr.AUDIO]}:e.config.responseModalities=[Cr.AUDIO]),!((c=e.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(p=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&p!==void 0?p:[],U=[];for(const K of L)if(this.isCallableTool(K)){const ae=K;U.push(await ae.tool())}else U.push(K);U.length>0&&(e.config.tools=U);const ee={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=Wv(this.apiClient,ee):X=Jv(this.apiClient,ee),delete X.config,b.send(JSON.stringify(X)),new R_(b,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const N_={turnComplete:!0};class R_{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let i=[];try{i=gt(o.turns),e.isVertexAI()||(i=i.map(l=>kr(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:i,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let i=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?i=o.functionResponses:i=[o.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const c of i){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!e.isVertexAI()&&!("id"in c))throw new Error(A_)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},N_),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:Xv(e)}:o={realtimeInput:Qv(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function k_(t){const e={};return t.forEach((o,i)=>{e[i]=o}),e}function P_(t){const e=new Headers;for(const[o,i]of Object.entries(t))e.append(o,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zc=10;function jc(t){var e,o,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const f of(o=t==null?void 0:t.tools)!==null&&o!==void 0?o:[])if(Wn(f)){l=!0;break}if(!l)return!0;const c=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function Wn(t){return"callTool"in t&&typeof t.callTool=="function"}function M_(t){var e,o,i;return(i=(o=(e=t.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(l=>Wn(l)))!==null&&i!==void 0?i:!1}function ed(t){var e;const o=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,l)=>{if(Wn(i))return;const c=i;c.functionDeclarations&&c.functionDeclarations.length>0&&o.push(l)}),o}function td(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D_ extends $t{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var i,l,c,f,p;const g=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!M_(o)||jc(o.config))return await this.generateContentInternal(g);const h=ed(o);if(h.length>0){const M=h.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let v,E;const _=gt(g.contents),w=(c=(l=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&c!==void 0?c:Zc;let k=0;for(;k<w&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const M=v.candidates[0].content,I=[];for(const F of(p=(f=o.config)===null||f===void 0?void 0:f.tools)!==null&&p!==void 0?p:[])if(Wn(F)){const b=await F.callTool(v.functionCalls);I.push(...b)}k++,E={role:"user",parts:I},g.contents=gt(g.contents),g.contents.push(M),g.contents.push(E),td(g.config)&&(_.push(M),_.push(E))}return td(g.config)&&(v.automaticFunctionCallingHistory=_),v},this.generateContentStream=async o=>{var i,l,c,f,p;if(this.maybeMoveToResponseJsonSchem(o),jc(o.config)){const E=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(E)}const g=ed(o);if(g.length>0){const E=g.map(_=>`tools[${_}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(c=(l=(i=o==null?void 0:o.config)===null||i===void 0?void 0:i.toolConfig)===null||l===void 0?void 0:l.functionCallingConfig)===null||c===void 0?void 0:c.streamFunctionCallArguments,v=(p=(f=o==null?void 0:o.config)===null||f===void 0?void 0:f.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(i=>{var l;let c;const f=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((l=g==null?void 0:g.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?c=g==null?void 0:g.safetyAttributes:f.push(g);let p;return c?p={generatedImages:f,positivePromptSafetyAttributes:c,sdkHttpResponse:i.sdkHttpResponse}:p={generatedImages:f,sdkHttpResponse:i.sdkHttpResponse},p}),this.list=async o=>{var i;const f={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((i=f.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new An(Ot.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(f),f)},this.editImage=async o=>{const i={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(i.referenceImages=o.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async o=>{let i={numberOfImages:1,mode:"upscale"};o.config&&(i=Object.assign(Object.assign({},i),o.config));const l={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:i};return await this.upscaleImageInternal(l)},this.generateVideos=async o=>{var i,l,c,f,p,g;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=o.video)===null||i===void 0)&&i.uri&&(!((l=o.video)===null||l===void 0)&&l.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((f=(c=o.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.uri&&(!((g=(p=o.source)===null||p===void 0?void 0:p.video)===null||g===void 0)&&g.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,i,l;const c=(o=e.config)===null||o===void 0?void 0:o.tools;if(!c)return e;const f=await Promise.all(c.map(async g=>Wn(g)?await g.tool():g)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:f})};if(p.config.tools=f,e.config&&e.config.tools&&Qc(e.config.tools)){const g=(l=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&l!==void 0?l:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Xc(h),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return p}async initAfcToolsMap(e){var o,i,l;const c=new Map;for(const f of(i=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&i!==void 0?i:[])if(Wn(f)){const p=f,g=await p.tool();for(const h of(l=g.functionDeclarations)!==null&&l!==void 0?l:[]){if(!h.name)throw new Error("Function declaration name is required.");if(c.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);c.set(h.name,p)}}return c}async processAfcStream(e){var o,i,l;const c=(l=(i=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&l!==void 0?l:Zc;let f=!1,p=0;const g=await this.initAfcToolsMap(e);return(function(h,v,E){return xt(this,arguments,function*(){for(var _,w,k,M,I,F;p<c;){f&&(p++,f=!1);const X=yield ve(h.processParamsMaybeAddMcpUsage(E)),L=yield ve(h.generateContentStreamInternal(X)),U=[],ee=[];try{for(var J=!0,b=(w=void 0,It(L)),q;q=yield ve(b.next()),_=q.done,!_;J=!0){M=q.value,J=!1;const K=M;if(yield yield ve(K),K.candidates&&(!((I=K.candidates[0])===null||I===void 0)&&I.content)){ee.push(K.candidates[0].content);for(const ae of(F=K.candidates[0].content.parts)!==null&&F!==void 0?F:[])if(p<c&&ae.functionCall){if(!ae.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ae.functionCall.name)){const W=yield ve(v.get(ae.functionCall.name).callTool([ae.functionCall]));U.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ae.functionCall.name}`)}}}}catch(K){w={error:K}}finally{try{!J&&!_&&(k=b.return)&&(yield ve(k.call(b)))}finally{if(w)throw w.error}}if(U.length>0){f=!0;const K=new Io;K.candidates=[{content:{role:"user",parts:U}}],yield yield ve(K);const ae=[];ae.push(...ee),ae.push({role:"user",parts:U});const W=gt(E.contents).concat(ae);E.contents=W}else break}})})(this,g,e)}async generateContentInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Gc(this.apiClient,e);return p=j("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=Hc(v),_=new Io;return Object.assign(_,E),_})}else{const h=Vc(this.apiClient,e);return p=j("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=qc(v),_=new Io;return Object.assign(_,E),_})}}async generateContentStreamInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Gc(this.apiClient,e);return p=j("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.requestStream({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),f.then(function(E){return xt(this,arguments,function*(){var _,w,k,M;try{for(var I=!0,F=It(E),J;J=yield ve(F.next()),_=J.done,!_;I=!0){M=J.value,I=!1;const b=M,q=Hc(yield ve(b.json()));q.sdkHttpResponse={headers:b.headers};const X=new Io;Object.assign(X,q),yield yield ve(X)}}catch(b){w={error:b}}finally{try{!I&&!_&&(k=F.return)&&(yield ve(k.call(F)))}finally{if(w)throw w.error}}})})}else{const h=Vc(this.apiClient,e);return p=j("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.requestStream({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}),f.then(function(E){return xt(this,arguments,function*(){var _,w,k,M;try{for(var I=!0,F=It(E),J;J=yield ve(F.next()),_=J.done,!_;I=!0){M=J.value,I=!1;const b=M,q=qc(yield ve(b.json()));q.sdkHttpResponse={headers:b.headers};const X=new Io;Object.assign(X,q),yield yield ve(X)}}catch(b){w={error:b}}finally{try{!I&&!_&&(k=F.return)&&(yield ve(k.call(F)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=N0(this.apiClient,e);return p=j("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=k0(v),_=new lc;return Object.assign(_,E),_})}else{const h=I0(this.apiClient,e);return p=j("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=R0(v),_=new lc;return Object.assign(_,E),_})}}async generateImagesInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=H0(this.apiClient,e);return p=j("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=$0(v),_=new ac;return Object.assign(_,E),_})}else{const h=q0(this.apiClient,e);return p=j("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=B0(v),_=new ac;return Object.assign(_,E),_})}}async editImageInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI()){const p=C0(this.apiClient,e);return c=j("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const h=w0(g),v=new Mg;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI()){const p=HE(this.apiClient,e);return c=j("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const h=BE(g),v=new Dg;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI()){const p=TE(this.apiClient,e);return c=j("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const h=CE(g),v=new Fg;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI()){const p=RE(this.apiClient,e);return c=j("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const h=kE(g),v=new Lg;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=sE(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>Fs(v))}else{const h=iE(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>Ds(v))}}async listInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=hE(this.apiClient,e);return p=j("{models_url}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=yE(v),_=new uc;return Object.assign(_,E),_})}else{const h=mE(this.apiClient,e);return p=j("{models_url}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=gE(v),_=new uc;return Object.assign(_,E),_})}}async update(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=GE(this.apiClient,e);return p=j("{model}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>Fs(v))}else{const h=VE(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>Ds(v))}}async delete(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=E0(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=S0(v),_=new cc;return Object.assign(_,E),_})}else{const h=v0(this.apiClient,e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=_0(v),_=new cc;return Object.assign(_,E),_})}}async countTokens(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=h0(this.apiClient,e);return p=j("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=y0(v),_=new dc;return Object.assign(_,E),_})}else{const h=m0(this.apiClient,e);return p=j("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=g0(v),_=new dc;return Object.assign(_,E),_})}}async computeTokens(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI()){const p=l0(this.apiClient,e);return c=j("{model}:computeTokens",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const h=a0(g),v=new Ug;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=Y0(this.apiClient,e);return p=j("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f.then(v=>{const E=W0(v),_=new wr;return Object.assign(_,E),_})}else{const h=K0(this.apiClient,e);return p=j("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f.then(v=>{const E=J0(v),_=new wr;return Object.assign(_,E),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F_ extends $t{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,i=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=o.name.split("/operations/")[0];let c;i&&"httpOptions"in i&&(c=i.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:l,config:{httpOptions:c}});return o._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:o.name,config:i});return o._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async get(e){const o=e.operation,i=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=o.name.split("/operations/")[0];let c;i&&"httpOptions"in i&&(c=i.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:l,config:{httpOptions:c}});return o._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:o.name,config:i});return o._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async getVideosOperationInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=xg(e);return p=j("{operationName}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),f}else{const h=Ag(e);return p=j("{operationName}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json()),f}}async fetchPredictVideosOperationInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI()){const p=vg(e);return c=j("{resourceName}:fetchPredictOperation",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L_(t){const e={},o=a(t,["data"]);if(o!=null&&u(e,["data"],o),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function U_(t){const e={},o=a(t,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>O_(c))),u(e,["parts"],l)}const i=a(t,["role"]);return i!=null&&u(e,["role"],i),e}function b_(t,e,o){const i={},l=a(e,["expireTime"]);o!==void 0&&l!=null&&u(o,["expireTime"],l);const c=a(e,["newSessionExpireTime"]);o!==void 0&&c!=null&&u(o,["newSessionExpireTime"],c);const f=a(e,["uses"]);o!==void 0&&f!=null&&u(o,["uses"],f);const p=a(e,["liveConnectConstraints"]);o!==void 0&&p!=null&&u(o,["bidiGenerateContentSetup"],z_(t,p));const g=a(e,["lockAdditionalFields"]);return o!==void 0&&g!=null&&u(o,["fieldMask"],g),i}function V_(t,e){const o={},i=a(e,["config"]);return i!=null&&u(o,["config"],b_(t,i,o)),o}function G_(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=a(t,["fileUri"]);o!=null&&u(e,["fileUri"],o);const i=a(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function q_(t){const e={},o=a(t,["id"]);o!=null&&u(e,["id"],o);const i=a(t,["args"]);i!=null&&u(e,["args"],i);const l=a(t,["name"]);if(l!=null&&u(e,["name"],l),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function H_(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=a(t,["enableWidget"]);return o!=null&&u(e,["enableWidget"],o),e}function B_(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=a(t,["timeRangeFilter"]);return o!=null&&u(e,["timeRangeFilter"],o),e}function $_(t,e){const o={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],i);const l=a(t,["responseModalities"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","responseModalities"],l);const c=a(t,["temperature"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","temperature"],c);const f=a(t,["topP"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","topP"],f);const p=a(t,["topK"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","topK"],p);const g=a(t,["maxOutputTokens"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","maxOutputTokens"],g);const h=a(t,["mediaResolution"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","mediaResolution"],h);const v=a(t,["seed"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","seed"],v);const E=a(t,["speechConfig"]);e!==void 0&&E!=null&&u(e,["setup","generationConfig","speechConfig"],Ps(E));const _=a(t,["thinkingConfig"]);e!==void 0&&_!=null&&u(e,["setup","generationConfig","thinkingConfig"],_);const w=a(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=a(t,["systemInstruction"]);e!==void 0&&k!=null&&u(e,["setup","systemInstruction"],U_(Ye(k)));const M=a(t,["tools"]);if(e!==void 0&&M!=null){let L=On(M);Array.isArray(L)&&(L=L.map(U=>W_(zn(U)))),u(e,["setup","tools"],L)}const I=a(t,["sessionResumption"]);e!==void 0&&I!=null&&u(e,["setup","sessionResumption"],J_(I));const F=a(t,["inputAudioTranscription"]);e!==void 0&&F!=null&&u(e,["setup","inputAudioTranscription"],F);const J=a(t,["outputAudioTranscription"]);e!==void 0&&J!=null&&u(e,["setup","outputAudioTranscription"],J);const b=a(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&u(e,["setup","realtimeInputConfig"],b);const q=a(t,["contextWindowCompression"]);e!==void 0&&q!=null&&u(e,["setup","contextWindowCompression"],q);const X=a(t,["proactivity"]);if(e!==void 0&&X!=null&&u(e,["setup","proactivity"],X),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function z_(t,e){const o={},i=a(e,["model"]);i!=null&&u(o,["setup","model"],xe(t,i));const l=a(e,["config"]);return l!=null&&u(o,["config"],$_(l,o)),o}function O_(t){const e={},o=a(t,["mediaResolution"]);o!=null&&u(e,["mediaResolution"],o);const i=a(t,["codeExecutionResult"]);i!=null&&u(e,["codeExecutionResult"],i);const l=a(t,["executableCode"]);l!=null&&u(e,["executableCode"],l);const c=a(t,["fileData"]);c!=null&&u(e,["fileData"],G_(c));const f=a(t,["functionCall"]);f!=null&&u(e,["functionCall"],q_(f));const p=a(t,["functionResponse"]);p!=null&&u(e,["functionResponse"],p);const g=a(t,["inlineData"]);g!=null&&u(e,["inlineData"],L_(g));const h=a(t,["text"]);h!=null&&u(e,["text"],h);const v=a(t,["thought"]);v!=null&&u(e,["thought"],v);const E=a(t,["thoughtSignature"]);E!=null&&u(e,["thoughtSignature"],E);const _=a(t,["videoMetadata"]);return _!=null&&u(e,["videoMetadata"],_),e}function J_(t){const e={},o=a(t,["handle"]);if(o!=null&&u(e,["handle"],o),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function W_(t){const e={},o=a(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(E=>E)),u(e,["functionDeclarations"],v)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const l=a(t,["computerUse"]);l!=null&&u(e,["computerUse"],l);const c=a(t,["fileSearch"]);c!=null&&u(e,["fileSearch"],c);const f=a(t,["codeExecution"]);if(f!=null&&u(e,["codeExecution"],f),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const p=a(t,["googleMaps"]);p!=null&&u(e,["googleMaps"],H_(p));const g=a(t,["googleSearch"]);g!=null&&u(e,["googleSearch"],B_(g));const h=a(t,["urlContext"]);return h!=null&&u(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K_(t){const e=[];for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const i=t[o];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const l=Object.keys(i).map(c=>`${o}.${c}`);e.push(...l)}else e.push(o)}return e.join(",")}function Y_(t,e){let o=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const c=i.setup;typeof c=="object"&&c!==null?(t.bidiGenerateContentSetup=c,o=c):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const l=t.fieldMask;if(o){const c=K_(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)c?t.fieldMask=c:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const f=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];l.length>0&&(p=l.map(h=>f.includes(h)?`generationConfig.${h}`:h));const g=[];c&&g.push(c),p.length>0&&g.push(...p),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?t.fieldMask=l.join(","):delete t.fieldMask;return t}class Q_ extends $t{constructor(e){super(),this.apiClient=e}async create(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=V_(this.apiClient,e);c=j("auth_tokens",p._url),f=p._query,delete p.config,delete p._url,delete p._query;const g=Y_(p,e.config);return l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),l.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X_(t,e){const o={},i=a(t,["force"]);return e!==void 0&&i!=null&&u(e,["_query","force"],i),o}function Z_(t){const e={},o=a(t,["name"]);o!=null&&u(e,["_url","name"],o);const i=a(t,["config"]);return i!=null&&X_(i,e),e}function j_(t){const e={},o=a(t,["name"]);return o!=null&&u(e,["_url","name"],o),e}function eS(t,e){const o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const l=a(t,["pageToken"]);return e!==void 0&&l!=null&&u(e,["_query","pageToken"],l),o}function tS(t){const e={},o=a(t,["parent"]);o!=null&&u(e,["_url","parent"],o);const i=a(t,["config"]);return i!=null&&eS(i,e),e}function nS(t){const e={},o=a(t,["sdkHttpResponse"]);o!=null&&u(e,["sdkHttpResponse"],o);const i=a(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const l=a(t,["documents"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>f)),u(e,["documents"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oS extends $t{constructor(e){super(),this.apiClient=e,this.list=async o=>new An(Ot.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:o.parent,config:i.config}),await this.listInternal(o),o)}async get(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=j_(e);return c=j("{name}",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var o,i;let l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Z_(e);l=j("{name}",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=tS(e);return c=j("{parent}/documents",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const h=nS(g),v=new bg;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rS extends $t{constructor(e,o=new oS(e)){super(),this.apiClient=e,this.documents=o,this.list=async(i={})=>new An(Ot.PAGED_ITEM_FILE_SEARCH_STORES,l=>this.listInternal(l),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=YE(e);return c=j("fileSearchStores",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=ZE(e);return c=j("{name}",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var o,i;let l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=XE(e);l=j("{name}",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=r_(e);return c=j("fileSearchStores",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const h=i_(g),v=new Vg;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=s_(e);return c=j("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const h=l_(g),v=new Gg;return Object.assign(v,h),v})}}async importFile(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=t_(e);return c=j("{file_search_store_name}:importFile",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),l.then(g=>{const h=e_(g),v=new As;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nd=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return nd=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),o=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^o()&15>>+i/4).toString(16))};const iS=()=>nd();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bs(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Vs=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yt extends Error{}class et extends yt{constructor(e,o,i,l){super(`${et.makeMessage(e,o,i)}`),this.status=e,this.headers=l,this.error=o}static makeMessage(e,o,i){const l=o!=null&&o.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):i;return e&&l?`${e} ${l}`:e?`${e} status code (no body)`:l||"(no status code or body)"}static generate(e,o,i,l){if(!e||!l)return new Dr({message:i,cause:Vs(o)});const c=o;return e===400?new rd(e,c,i,l):e===401?new id(e,c,i,l):e===403?new sd(e,c,i,l):e===404?new ld(e,c,i,l):e===409?new ad(e,c,i,l):e===422?new ud(e,c,i,l):e===429?new cd(e,c,i,l):e>=500?new dd(e,c,i,l):new et(e,c,i,l)}}class Gs extends et{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Dr extends et{constructor({message:e,cause:o}){super(void 0,void 0,e||"Connection error.",void 0),o&&(this.cause=o)}}class od extends Dr{constructor({message:e}={}){super({message:e??"Request timed out."})}}class rd extends et{}class id extends et{}class sd extends et{}class ld extends et{}class ad extends et{}class ud extends et{}class cd extends et{}class dd extends et{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sS=/^[a-z][a-z0-9+.-]*:/i,lS=t=>sS.test(t);let qs=t=>(qs=Array.isArray,qs(t));const fd=qs;function aS(t){if(!t)return!0;for(const e in t)return!1;return!0}function uS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const cS=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new yt(`${t} must be an integer`);if(e<0)throw new yt(`${t} must be a positive integer`);return e},dS=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fS=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kn="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pS(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const mS=()=>{var t,e,o,i,l;const c=pS();if(c==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Kn,"X-Stainless-OS":md(Deno.build.os),"X-Stainless-Arch":pd(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Kn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(c==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Kn,"X-Stainless-OS":md((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":pd((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(l=globalThis.process.version)!==null&&l!==void 0?l:"unknown"};const f=hS();return f?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Kn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${f.browser}`,"X-Stainless-Runtime-Version":f.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Kn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function hS(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:o}of t){const i=o.exec(navigator.userAgent);if(i){const l=i[1]||0,c=i[2]||0,f=i[3]||0;return{browser:e,version:`${l}.${c}.${f}`}}}return null}const pd=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",md=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Fr;const gS=()=>Fr??(Fr=mS());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yS(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function hd(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function vS(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return hd({start(){},async pull(o){const{done:i,value:l}=await e.next();i?o.close():o.enqueue(l)},async cancel(){var o;await((o=e.return)===null||o===void 0?void 0:o.call(e))}})}function gd(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const o=await e.read();return o!=null&&o.done&&e.releaseLock(),o}catch(o){throw e.releaseLock(),o}},async return(){const o=e.cancel();return e.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function ES(t){var e,o;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((o=(e=t[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(e));return}const i=t.getReader(),l=i.cancel();i.releaseLock(),await l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _S=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yd=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,o=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Hs(t,e,o){return yd(),new File(t,e??"unknown_file",o)}function SS(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const TS=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vd=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",CS=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&vd(t),wS=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function AS(t,e,o){if(yd(),t=await t,CS(t))return t instanceof File?t:Hs([await t.arrayBuffer()],t.name);if(wS(t)){const l=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Hs(await Bs(l),e,o)}const i=await Bs(t);if(e||(e=SS(t)),!(o!=null&&o.type)){const l=i.find(c=>typeof c=="object"&&"type"in c&&c.type);typeof l=="string"&&(o=Object.assign(Object.assign({},o),{type:l}))}return Hs(i,e,o)}async function Bs(t){var e,o,i,l,c;let f=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)f.push(t);else if(vd(t))f.push(t instanceof Blob?t:await t.arrayBuffer());else if(TS(t))try{for(var p=!0,g=It(t),h;h=await g.next(),e=h.done,!e;p=!0){l=h.value,p=!1;const v=l;f.push(...await Bs(v))}}catch(v){o={error:v}}finally{try{!p&&!e&&(i=g.return)&&await i.call(g)}finally{if(o)throw o.error}}else{const v=(c=t==null?void 0:t.constructor)===null||c===void 0?void 0:c.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${xS(t)}`)}return f}function xS(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(o=>`"${o}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ed{constructor(e){this._client=e}}Ed._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _d(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Sd=Object.freeze(Object.create(null)),Lr=((t=_d)=>(function(o,...i){if(o.length===1)return o[0];let l=!1;const c=[],f=o.reduce((v,E,_)=>{var w,k,M;/[?#]/.test(E)&&(l=!0);const I=i[_];let F=(l?encodeURIComponent:t)(""+I);return _!==i.length&&(I==null||typeof I=="object"&&I.toString===((M=Object.getPrototypeOf((k=Object.getPrototypeOf((w=I.hasOwnProperty)!==null&&w!==void 0?w:Sd))!==null&&k!==void 0?k:Sd))===null||M===void 0?void 0:M.toString))&&(F=I+"",c.push({start:v.length+E.length,length:F.length,error:`Value of type ${Object.prototype.toString.call(I).slice(8,-1)} is not a valid path parameter`})),v+E+(_===i.length?"":F)},""),p=f.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(p))!==null;)c.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(c.sort((v,E)=>v.start-E.start),c.length>0){let v=0;const E=c.reduce((_,w)=>{const k=" ".repeat(w.start-v),M="^".repeat(w.length);return v=w.start+w.length,_+k+M},"");throw new yt(`Path parameters result in path with invalid segments:
${c.map(_=>_.error).join(`
`)}
${f}
${E}`)}return f}))(_d);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Td extends Ed{create(e,o){var i;const{api_version:l=this._client.apiVersion}=e,c=Ir(e,["api_version"]);if("model"in c&&"agent_config"in c)throw new yt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in c&&"generation_config"in c)throw new yt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Lr`/${l}/interactions`,Object.assign(Object.assign({body:c},o),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,o={},i){const{api_version:l=this._client.apiVersion}=o??{};return this._client.delete(Lr`/${l}/interactions/${e}`,i)}cancel(e,o={},i){const{api_version:l=this._client.apiVersion}=o??{};return this._client.post(Lr`/${l}/interactions/${e}/cancel`,i)}get(e,o={},i){var l;const c=o??{},{api_version:f=this._client.apiVersion}=c,p=Ir(c,["api_version"]);return this._client.get(Lr`/${f}/interactions/${e}`,Object.assign(Object.assign({query:p},i),{stream:(l=o==null?void 0:o.stream)!==null&&l!==void 0?l:!1}))}}Td._key=Object.freeze(["interactions"]);class Cd extends Td{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IS(t){let e=0;for(const l of t)e+=l.length;const o=new Uint8Array(e);let i=0;for(const l of t)o.set(l,i),i+=l.length;return o}let Ur;function $s(t){let e;return(Ur??(e=new globalThis.TextEncoder,Ur=e.encode.bind(e)))(t)}let br;function wd(t){let e;return(br??(e=new globalThis.TextDecoder,br=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vr{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const o=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?$s(e):e;this.buffer=IS([this.buffer,o]);const i=[];let l;for(;(l=NS(this.buffer,this.carriageReturnIndex))!=null;){if(l.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=l.index;continue}if(this.carriageReturnIndex!=null&&(l.index!==this.carriageReturnIndex+1||l.carriage)){i.push(wd(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const c=this.carriageReturnIndex!==null?l.preceding-1:l.preceding,f=wd(this.buffer.subarray(0,c));i.push(f),this.buffer=this.buffer.subarray(l.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Vr.NEWLINE_CHARS=new Set([`
`,"\r"]),Vr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function NS(t,e){for(let l=e??0;l<t.length;l++){if(t[l]===10)return{preceding:l,index:l+1,carriage:!1};if(t[l]===13)return{preceding:l,index:l+1,carriage:!0}}return null}function RS(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gr={off:0,error:200,warn:300,info:400,debug:500},Ad=(t,e,o)=>{if(t){if(uS(Gr,t))return t;tt(o).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Gr))}`)}};function No(){}function qr(t,e,o){return!e||Gr[t]>Gr[o]?No:e[t].bind(e)}const kS={error:No,warn:No,info:No,debug:No};let xd=new WeakMap;function tt(t){var e;const o=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!o)return kS;const l=xd.get(o);if(l&&l[0]===i)return l[1];const c={error:qr("error",o,i),warn:qr("warn",o,i),info:qr("info",o,i),debug:qr("debug",o,i)};return xd.set(o,[i,c]),c}const xn=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,o])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yn{constructor(e,o,i){this.iterator=e,this.controller=o,this.client=i}static fromSSEResponse(e,o,i){let l=!1;const c=i?tt(i):console;function f(){return xt(this,arguments,function*(){var g,h,v,E;if(l)throw new yt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let _=!1;try{try{for(var w=!0,k=It(PS(e,o)),M;M=yield ve(k.next()),g=M.done,!g;w=!0){E=M.value,w=!1;const I=E;if(!_)if(I.data.startsWith("[DONE]")){_=!0;continue}else try{yield yield ve(JSON.parse(I.data))}catch(F){throw c.error("Could not parse message into JSON:",I.data),c.error("From chunk:",I.raw),F}}}catch(I){h={error:I}}finally{try{!w&&!g&&(v=k.return)&&(yield ve(v.call(k)))}finally{if(h)throw h.error}}_=!0}catch(I){if(bs(I))return yield ve(void 0);throw I}finally{_||o.abort()}})}return new Yn(f,o,i)}static fromReadableStream(e,o,i){let l=!1;function c(){return xt(this,arguments,function*(){var g,h,v,E;const _=new Vr,w=gd(e);try{for(var k=!0,M=It(w),I;I=yield ve(M.next()),g=I.done,!g;k=!0){E=I.value,k=!1;const F=E;for(const J of _.decode(F))yield yield ve(J)}}catch(F){h={error:F}}finally{try{!k&&!g&&(v=M.return)&&(yield ve(v.call(M)))}finally{if(h)throw h.error}}for(const F of _.flush())yield yield ve(F)})}function f(){return xt(this,arguments,function*(){var g,h,v,E;if(l)throw new yt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let _=!1;try{try{for(var w=!0,k=It(c()),M;M=yield ve(k.next()),g=M.done,!g;w=!0){E=M.value,w=!1;const I=E;_||I&&(yield yield ve(JSON.parse(I)))}}catch(I){h={error:I}}finally{try{!w&&!g&&(v=k.return)&&(yield ve(v.call(k)))}finally{if(h)throw h.error}}_=!0}catch(I){if(bs(I))return yield ve(void 0);throw I}finally{_||o.abort()}})}return new Yn(f,o,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],o=[],i=this.iterator(),l=c=>({next:()=>{if(c.length===0){const f=i.next();e.push(f),o.push(f)}return c.shift()}});return[new Yn(()=>l(e),this.controller,this.client),new Yn(()=>l(o),this.controller,this.client)]}toReadableStream(){const e=this;let o;return hd({async start(){o=e[Symbol.asyncIterator]()},async pull(i){try{const{value:l,done:c}=await o.next();if(c)return i.close();const f=$s(JSON.stringify(l)+`
`);i.enqueue(f)}catch(l){i.error(l)}},async cancel(){var i;await((i=o.return)===null||i===void 0?void 0:i.call(o))}})}}function PS(t,e){return xt(this,arguments,function*(){var i,l,c,f;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new yt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new yt("Attempted to iterate over a response with no body");const p=new DS,g=new Vr,h=gd(t.body);try{for(var v=!0,E=It(MS(h)),_;_=yield ve(E.next()),i=_.done,!i;v=!0){f=_.value,v=!1;const w=f;for(const k of g.decode(w)){const M=p.decode(k);M&&(yield yield ve(M))}}}catch(w){l={error:w}}finally{try{!v&&!i&&(c=E.return)&&(yield ve(c.call(E)))}finally{if(l)throw l.error}}for(const w of g.flush()){const k=p.decode(w);k&&(yield yield ve(k))}})}function MS(t){return xt(this,arguments,function*(){var o,i,l,c;let f=new Uint8Array;try{for(var p=!0,g=It(t),h;h=yield ve(g.next()),o=h.done,!o;p=!0){c=h.value,p=!1;const v=c;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?$s(v):v;let _=new Uint8Array(f.length+E.length);_.set(f),_.set(E,f.length),f=_;let w;for(;(w=RS(f))!==-1;)yield yield ve(f.slice(0,w)),f=f.slice(w)}}catch(v){i={error:v}}finally{try{!p&&!o&&(l=g.return)&&(yield ve(l.call(g)))}finally{if(i)throw i.error}}f.length>0&&(yield yield ve(f))})}class DS{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(e),e.startsWith(":"))return null;let[o,i,l]=FS(e,":");return l.startsWith(" ")&&(l=l.substring(1)),o==="event"?this.event=l:o==="data"&&this.data.push(l),null}}function FS(t,e){const o=t.indexOf(e);return o!==-1?[t.substring(0,o),e,t.substring(o+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function LS(t,e){const{response:o,requestLogID:i,retryOfRequestLogID:l,startTime:c}=e,f=await(async()=>{var p;if(e.options.stream)return tt(t).debug("response",o.status,o.url,o.headers,o.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(o,e.controller,t):Yn.fromSSEResponse(o,e.controller,t);if(o.status===204)return null;if(e.options.__binaryResponse)return o;const g=o.headers.get("content-type"),h=(p=g==null?void 0:g.split(";")[0])===null||p===void 0?void 0:p.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await o.json():await o.text()})();return tt(t).debug(`[${i}] response parsed`,xn({retryOfRequestLogID:l,url:o.url,status:o.status,body:f,durationMs:Date.now()-c})),f}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zs extends Promise{constructor(e,o,i=LS){super(l=>{l(null)}),this.responsePromise=o,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new zs(this.client,this.responsePromise,async(o,i)=>e(await this.parseResponse(o,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,o){return this.parse().then(e,o)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Id=Symbol("brand.privateNullableHeaders");function*US(t){if(!t)return;if(Id in t){const{values:i,nulls:l}=t;yield*i.entries();for(const c of l)yield[c,null];return}let e=!1,o;t instanceof Headers?o=t.entries():fd(t)?o=t:(e=!0,o=Object.entries(t??{}));for(let i of o){const l=i[0];if(typeof l!="string")throw new TypeError("expected header name to be a string");const c=fd(i[1])?i[1]:[i[1]];let f=!1;for(const p of c)p!==void 0&&(e&&!f&&(f=!0,yield[l,null]),yield[l,p])}}const Ro=t=>{const e=new Headers,o=new Set;for(const i of t){const l=new Set;for(const[c,f]of US(i)){const p=c.toLowerCase();l.has(p)||(e.delete(c),l.add(p)),f===null?(e.delete(c),o.add(p)):(e.append(c,f),o.delete(p))}}return{[Id]:!0,values:e,nulls:o}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Os=t=>{var e,o,i,l,c,f;if(typeof globalThis.process<"u")return(i=(o=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||o===void 0?void 0:o.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(f=(c=(l=globalThis.Deno.env)===null||l===void 0?void 0:l.get)===null||c===void 0?void 0:c.call(l,t))===null||f===void 0?void 0:f.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nd;class Hr{constructor(e){var o,i,l,c,f,p,g,{baseURL:h=Os("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(o=Os("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:E="v1beta"}=e,_=Ir(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:v,apiVersion:E},_),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:Hr.DEFAULT_TIMEOUT,this.logger=(l=w.logger)!==null&&l!==void 0?l:console;const k="warn";this.logLevel=k,this.logLevel=(f=(c=Ad(w.logLevel,"ClientOptions.logLevel",this))!==null&&c!==void 0?c:Ad(Os("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&f!==void 0?f:k,this.fetchOptions=w.fetchOptions,this.maxRetries=(p=w.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:yS(),this.encoder=_S,this._options=w,this.apiKey=v,this.apiVersion=E,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:o}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const o=Ro([e.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return Ro([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ro([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([o,i])=>typeof i<"u").map(([o,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(o)}=`;throw new yt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Kn}`}defaultIdempotencyKey(){return`stainless-node-retry-${iS()}`}makeStatusError(e,o,i,l){return et.generate(e,o,i,l)}buildURL(e,o,i){const l=!this.baseURLOverridden()&&i||this.baseURL,c=lS(e)?new URL(e):new URL(l+(l.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),f=this.defaultQuery();return aS(f)||(o=Object.assign(Object.assign({},f),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(c.search=this.stringifyQuery(o)),c.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const o=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(e,{url:o,options:i}){}get(e,o){return this.methodRequest("get",e,o)}post(e,o){return this.methodRequest("post",e,o)}patch(e,o){return this.methodRequest("patch",e,o)}put(e,o){return this.methodRequest("put",e,o)}delete(e,o){return this.methodRequest("delete",e,o)}methodRequest(e,o,i){return this.request(Promise.resolve(i).then(l=>Object.assign({method:e,path:o},l)))}request(e,o=null){return new zs(this,this.makeRequest(e,o,void 0))}async makeRequest(e,o,i){var l,c,f;const p=await e,g=(l=p.maxRetries)!==null&&l!==void 0?l:this.maxRetries;o==null&&(o=g),await this.prepareOptions(p);const{req:h,url:v,timeout:E}=await this.buildRequest(p,{retryCount:g-o});await this.prepareRequest(h,{url:v,options:p});const _="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,k=Date.now();if(tt(this).debug(`[${_}] sending request`,xn({retryOfRequestLogID:i,method:p.method,url:v,options:p,headers:h.headers})),!((c=p.signal)===null||c===void 0)&&c.aborted)throw new Gs;const M=new AbortController,I=await this.fetchWithTimeout(v,h,E,M).catch(Vs),F=Date.now();if(I instanceof globalThis.Error){const b=`retrying, ${o} attempts remaining`;if(!((f=p.signal)===null||f===void 0)&&f.aborted)throw new Gs;const q=bs(I)||/timed? ?out/i.test(String(I)+("cause"in I?String(I.cause):""));if(o)return tt(this).info(`[${_}] connection ${q?"timed out":"failed"} - ${b}`),tt(this).debug(`[${_}] connection ${q?"timed out":"failed"} (${b})`,xn({retryOfRequestLogID:i,url:v,durationMs:F-k,message:I.message})),this.retryRequest(p,o,i??_);throw tt(this).info(`[${_}] connection ${q?"timed out":"failed"} - error; no more retries left`),tt(this).debug(`[${_}] connection ${q?"timed out":"failed"} (error; no more retries left)`,xn({retryOfRequestLogID:i,url:v,durationMs:F-k,message:I.message})),q?new od:new Dr({cause:I})}const J=`[${_}${w}] ${h.method} ${v} ${I.ok?"succeeded":"failed"} with status ${I.status} in ${F-k}ms`;if(!I.ok){const b=await this.shouldRetry(I);if(o&&b){const K=`retrying, ${o} attempts remaining`;return await ES(I.body),tt(this).info(`${J} - ${K}`),tt(this).debug(`[${_}] response error (${K})`,xn({retryOfRequestLogID:i,url:I.url,status:I.status,headers:I.headers,durationMs:F-k})),this.retryRequest(p,o,i??_,I.headers)}const q=b?"error; no more retries left":"error; not retryable";tt(this).info(`${J} - ${q}`);const X=await I.text().catch(K=>Vs(K).message),L=dS(X),U=L?void 0:X;throw tt(this).debug(`[${_}] response error (${q})`,xn({retryOfRequestLogID:i,url:I.url,status:I.status,headers:I.headers,message:U,durationMs:Date.now()-k})),this.makeStatusError(I.status,L,U,I.headers)}return tt(this).info(J),tt(this).debug(`[${_}] response start`,xn({retryOfRequestLogID:i,url:I.url,status:I.status,headers:I.headers,durationMs:F-k})),{response:I,options:p,controller:M,requestLogID:_,retryOfRequestLogID:i,startTime:k}}async fetchWithTimeout(e,o,i,l){const c=o||{},{signal:f,method:p}=c,g=Ir(c,["signal","method"]);f&&f.addEventListener("abort",()=>l.abort());const h=setTimeout(()=>l.abort(),i),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,E=Object.assign(Object.assign(Object.assign({signal:l.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);p&&(E.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(h)}}async shouldRetry(e){const o=e.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,o,i,l){var c;let f;const p=l==null?void 0:l.get("retry-after-ms");if(p){const h=parseFloat(p);Number.isNaN(h)||(f=h)}const g=l==null?void 0:l.get("retry-after");if(g&&!f){const h=parseFloat(g);Number.isNaN(h)?f=Date.parse(g)-Date.now():f=h*1e3}if(!(f&&0<=f&&f<6e4)){const h=(c=e.maxRetries)!==null&&c!==void 0?c:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(o,h)}return await fS(f),this.makeRequest(e,o-1,i)}calculateDefaultRetryTimeoutMillis(e,o){const c=o-e,f=Math.min(.5*Math.pow(2,c),8),p=1-Math.random()*.25;return f*p*1e3}async buildRequest(e,{retryCount:o=0}={}){var i,l,c;const f=Object.assign({},e),{method:p,path:g,query:h,defaultBaseURL:v}=f,E=this.buildURL(g,h,v);"timeout"in f&&cS("timeout",f.timeout),f.timeout=(i=f.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:_,body:w}=this.buildBody({options:f}),k=await this.buildHeaders({options:e,method:p,bodyHeaders:_,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:k},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(l=this.fetchOptions)!==null&&l!==void 0?l:{}),(c=f.fetchOptions)!==null&&c!==void 0?c:{}),url:E,timeout:f.timeout}}async buildHeaders({options:e,method:o,bodyHeaders:i,retryCount:l}){let c={};this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const f=await this.authHeaders(e);let p=Ro([c,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(l)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),gS()),this._options.defaultHeaders,i,e.headers,f]);return this.validateHeaders(p),p.values}buildBody({options:{body:e,headers:o}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Ro([o]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:vS(e)}:this.encoder({body:e,headers:i})}}Hr.DEFAULT_TIMEOUT=6e4;class $e extends Hr{constructor(){super(...arguments),this.interactions=new Cd(this)}}Nd=$e,$e.GeminiNextGenAPIClient=Nd,$e.GeminiNextGenAPIClientError=yt,$e.APIError=et,$e.APIConnectionError=Dr,$e.APIConnectionTimeoutError=od,$e.APIUserAbortError=Gs,$e.NotFoundError=ld,$e.ConflictError=ad,$e.RateLimitError=cd,$e.BadRequestError=rd,$e.AuthenticationError=id,$e.InternalServerError=dd,$e.PermissionDeniedError=sd,$e.UnprocessableEntityError=ud,$e.toFile=AS,$e.Interactions=Cd;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bS(t,e){const o={},i=a(t,["name"]);return i!=null&&u(o,["_url","name"],i),o}function VS(t,e){const o={},i=a(t,["name"]);return i!=null&&u(o,["_url","name"],i),o}function GS(t,e){const o={},i=a(t,["sdkHttpResponse"]);return i!=null&&u(o,["sdkHttpResponse"],i),o}function qS(t,e){const o={},i=a(t,["sdkHttpResponse"]);return i!=null&&u(o,["sdkHttpResponse"],i),o}function HS(t,e,o){const i={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=a(t,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&u(e,["displayName"],l),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=a(t,["epochCount"]);e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","epochCount"],c);const f=a(t,["learningRateMultiplier"]);if(f!=null&&u(i,["tuningTask","hyperparameters","learningRateMultiplier"],f),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const p=a(t,["batchSize"]);e!==void 0&&p!=null&&u(e,["tuningTask","hyperparameters","batchSize"],p);const g=a(t,["learningRate"]);if(e!==void 0&&g!=null&&u(e,["tuningTask","hyperparameters","learningRate"],g),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function BS(t,e,o){const i={};let l=a(o,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const w=a(t,["validationDataset"]);e!==void 0&&w!=null&&u(e,["supervisedTuningSpec"],kd(w))}else if(l==="PREFERENCE_TUNING"){const w=a(t,["validationDataset"]);e!==void 0&&w!=null&&u(e,["preferenceOptimizationSpec"],kd(w))}const c=a(t,["tunedModelDisplayName"]);e!==void 0&&c!=null&&u(e,["tunedModelDisplayName"],c);const f=a(t,["description"]);e!==void 0&&f!=null&&u(e,["description"],f);let p=a(o,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=a(t,["epochCount"]);e!==void 0&&w!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(p==="PREFERENCE_TUNING"){const w=a(t,["epochCount"]);e!==void 0&&w!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=a(o,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=a(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=a(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=a(o,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=a(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=a(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&u(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=a(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=a(t,["adapterSize"]);e!==void 0&&w!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=a(t,["adapterSize"]);e!==void 0&&w!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=a(t,["labels"]);e!==void 0&&E!=null&&u(e,["labels"],E);const _=a(t,["beta"]);return e!==void 0&&_!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","beta"],_),i}function $S(t,e){const o={},i=a(t,["baseModel"]);i!=null&&u(o,["baseModel"],i);const l=a(t,["preTunedModel"]);l!=null&&u(o,["preTunedModel"],l);const c=a(t,["trainingDataset"]);c!=null&&eT(c);const f=a(t,["config"]);return f!=null&&HS(f,o),o}function zS(t,e){const o={},i=a(t,["baseModel"]);i!=null&&u(o,["baseModel"],i);const l=a(t,["preTunedModel"]);l!=null&&u(o,["preTunedModel"],l);const c=a(t,["trainingDataset"]);c!=null&&tT(c,o,e);const f=a(t,["config"]);return f!=null&&BS(f,o,e),o}function OS(t,e){const o={},i=a(t,["name"]);return i!=null&&u(o,["_url","name"],i),o}function JS(t,e){const o={},i=a(t,["name"]);return i!=null&&u(o,["_url","name"],i),o}function WS(t,e,o){const i={},l=a(t,["pageSize"]);e!==void 0&&l!=null&&u(e,["_query","pageSize"],l);const c=a(t,["pageToken"]);e!==void 0&&c!=null&&u(e,["_query","pageToken"],c);const f=a(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function KS(t,e,o){const i={},l=a(t,["pageSize"]);e!==void 0&&l!=null&&u(e,["_query","pageSize"],l);const c=a(t,["pageToken"]);e!==void 0&&c!=null&&u(e,["_query","pageToken"],c);const f=a(t,["filter"]);return e!==void 0&&f!=null&&u(e,["_query","filter"],f),i}function YS(t,e){const o={},i=a(t,["config"]);return i!=null&&WS(i,o),o}function QS(t,e){const o={},i=a(t,["config"]);return i!=null&&KS(i,o),o}function XS(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&u(o,["sdkHttpResponse"],i);const l=a(t,["nextPageToken"]);l!=null&&u(o,["nextPageToken"],l);const c=a(t,["tunedModels"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>Rd(p))),u(o,["tuningJobs"],f)}return o}function ZS(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&u(o,["sdkHttpResponse"],i);const l=a(t,["nextPageToken"]);l!=null&&u(o,["nextPageToken"],l);const c=a(t,["tuningJobs"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>Js(p))),u(o,["tuningJobs"],f)}return o}function jS(t,e){const o={},i=a(t,["name"]);i!=null&&u(o,["model"],i);const l=a(t,["name"]);return l!=null&&u(o,["endpoint"],l),o}function eT(t,e){const o={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=a(t,["examples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),u(o,["examples","examples"],l)}return o}function tT(t,e,o){const i={};let l=a(o,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const f=a(t,["gcsUri"]);e!==void 0&&f!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(l==="PREFERENCE_TUNING"){const f=a(t,["gcsUri"]);e!==void 0&&f!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}let c=a(o,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const f=a(t,["vertexDatasetResource"]);e!==void 0&&f!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(c==="PREFERENCE_TUNING"){const f=a(t,["vertexDatasetResource"]);e!==void 0&&f!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Rd(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&u(o,["sdkHttpResponse"],i);const l=a(t,["name"]);l!=null&&u(o,["name"],l);const c=a(t,["state"]);c!=null&&u(o,["state"],Ac(c));const f=a(t,["createTime"]);f!=null&&u(o,["createTime"],f);const p=a(t,["tuningTask","startTime"]);p!=null&&u(o,["startTime"],p);const g=a(t,["tuningTask","completeTime"]);g!=null&&u(o,["endTime"],g);const h=a(t,["updateTime"]);h!=null&&u(o,["updateTime"],h);const v=a(t,["description"]);v!=null&&u(o,["description"],v);const E=a(t,["baseModel"]);E!=null&&u(o,["baseModel"],E);const _=a(t,["_self"]);return _!=null&&u(o,["tunedModel"],jS(_)),o}function Js(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&u(o,["sdkHttpResponse"],i);const l=a(t,["name"]);l!=null&&u(o,["name"],l);const c=a(t,["state"]);c!=null&&u(o,["state"],Ac(c));const f=a(t,["createTime"]);f!=null&&u(o,["createTime"],f);const p=a(t,["startTime"]);p!=null&&u(o,["startTime"],p);const g=a(t,["endTime"]);g!=null&&u(o,["endTime"],g);const h=a(t,["updateTime"]);h!=null&&u(o,["updateTime"],h);const v=a(t,["error"]);v!=null&&u(o,["error"],v);const E=a(t,["description"]);E!=null&&u(o,["description"],E);const _=a(t,["baseModel"]);_!=null&&u(o,["baseModel"],_);const w=a(t,["tunedModel"]);w!=null&&u(o,["tunedModel"],w);const k=a(t,["preTunedModel"]);k!=null&&u(o,["preTunedModel"],k);const M=a(t,["supervisedTuningSpec"]);M!=null&&u(o,["supervisedTuningSpec"],M);const I=a(t,["preferenceOptimizationSpec"]);I!=null&&u(o,["preferenceOptimizationSpec"],I);const F=a(t,["tuningDataStats"]);F!=null&&u(o,["tuningDataStats"],F);const J=a(t,["encryptionSpec"]);J!=null&&u(o,["encryptionSpec"],J);const b=a(t,["partnerModelTuningSpec"]);b!=null&&u(o,["partnerModelTuningSpec"],b);const q=a(t,["customBaseModel"]);q!=null&&u(o,["customBaseModel"],q);const X=a(t,["experiment"]);X!=null&&u(o,["experiment"],X);const L=a(t,["labels"]);L!=null&&u(o,["labels"],L);const U=a(t,["outputUri"]);U!=null&&u(o,["outputUri"],U);const ee=a(t,["pipelineJob"]);ee!=null&&u(o,["pipelineJob"],ee);const K=a(t,["serviceAccount"]);K!=null&&u(o,["serviceAccount"],K);const ae=a(t,["tunedModelDisplayName"]);ae!=null&&u(o,["tunedModelDisplayName"],ae);const W=a(t,["veoTuningSpec"]);return W!=null&&u(o,["veoTuningSpec"],W),o}function nT(t,e){const o={},i=a(t,["sdkHttpResponse"]);i!=null&&u(o,["sdkHttpResponse"],i);const l=a(t,["name"]);l!=null&&u(o,["name"],l);const c=a(t,["metadata"]);c!=null&&u(o,["metadata"],c);const f=a(t,["done"]);f!=null&&u(o,["done"],f);const p=a(t,["error"]);return p!=null&&u(o,["error"],p),o}function kd(t,e){const o={},i=a(t,["gcsUri"]);i!=null&&u(o,["validationDatasetUri"],i);const l=a(t,["vertexDatasetResource"]);return l!=null&&u(o,["validationDatasetUri"],l),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oT extends $t{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new An(Ot.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var i;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const l={tunedModelName:o.baseModel};!((i=o.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(l.checkpointId=o.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},o),{preTunedModel:l});return c.baseModel=void 0,await this.tuneInternal(c)}else{const l=Object.assign({},o);return await this.tuneInternal(l)}else{const l=Object.assign({},o),c=await this.tuneMldevInternal(l);let f="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?f=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(f=c.name.split("/operations/")[0]),{name:f,state:Cs.JOB_STATE_QUEUED}}}}async getInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=JS(e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>Js(v))}else{const h=OS(e);return p=j("{name}",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>Rd(v))}}async listInternal(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=QS(e);return p=j("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=ZS(v),_=new fc;return Object.assign(_,E),_})}else{const h=YS(e);return p=j("tunedModels",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=XS(v),_=new fc;return Object.assign(_,E),_})}}async cancel(e){var o,i,l,c;let f,p="",g={};if(this.apiClient.isVertexAI()){const h=VS(e);return p=j("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=qS(v),_=new pc;return Object.assign(_,E),_})}else{const h=bS(e);return p=j("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(v=>v.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:v.headers},_})),f.then(v=>{const E=GS(v),_=new pc;return Object.assign(_,E),_})}}async tuneInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI()){const p=zS(e,e);return c=j("tuningJobs",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>Js(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,i;let l,c="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=$S(e);return c=j("tunedModels",p._url),f=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>nT(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rT{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const iT=1024*1024*8,sT=3,lT=1e3,aT=2,Br="x-goog-upload-status";async function uT(t,e,o){var i;const l=await Pd(t,e,o),c=await(l==null?void 0:l.json());if(((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[Br])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function cT(t,e,o){var i;const l=await Pd(t,e,o),c=await(l==null?void 0:l.json());if(((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[Br])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const f=au(c),p=new xs;return Object.assign(p,f),p}async function Pd(t,e,o){var i,l;let c=0,f=0,p=new ws(new Response),g="upload";for(c=t.size;f<c;){const h=Math.min(iT,c-f),v=t.slice(f,f+h);f+h>=c&&(g+=", finalize");let E=0,_=lT;for(;E<sT&&(p=await o.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(f),"Content-Length":String(h)}}}),!(!((i=p==null?void 0:p.headers)===null||i===void 0)&&i[Br]));)E++,await fT(_),_=_*aT;if(f+=h,((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[Br])!=="active")break;if(c<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function dT(t){return{size:t.size,type:t.type}}function fT(t){return new Promise(e=>setTimeout(e,t))}class pT{async upload(e,o,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uT(e,o,i)}async uploadToFileSearchStore(e,o,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cT(e,o,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dT(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mT{create(e,o,i){return new hT(e,o,i)}}class hT{constructor(e,o,i){this.url=e,this.headers=o,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Md="x-goog-api-key";class gT{constructor(e){this.apiKey=e}async addAuthHeaders(e,o){if(e.get(Md)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Md,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yT="gl-node/";class vT{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new $e({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=o.interactions,this._interactions}constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const i=gg(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const l=new gT(this.apiKey);this.apiClient=new m_({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:yT+"web",uploader:new pT,downloader:new rT}),this.models=new D_(this.apiClient),this.live=new I_(this.apiClient,l,new mT),this.batches=new Oy(this.apiClient),this.chats=new xv(this.models,this.apiClient),this.caches=new Cv(this.apiClient),this.files=new Uv(this.apiClient),this.operations=new F_(this.apiClient),this.authTokens=new Q_(this.apiClient),this.tunings=new oT(this.apiClient),this.fileSearchStores=new rS(this.apiClient)}}async function Dd(t){const e=await $h();if(!e)throw new Error("API Key not configured. Please set your Gemini API key in settings.");const o=new vT({apiKey:e});try{return(await o.models.generateContent({model:"gemini-2.0-flash",contents:`You are a professional prompt engineer. Your task is to take a simple image generation prompt and expand it to be more precise, descriptive, and high-quality, ensuring it yields better results in models like Midjourney or Gemini. Keep the core intent but add stylistic details, lighting, and composition. Return ONLY the improved prompt text. Input: "${t}"`})).text||t}catch(i){throw console.error("AI Prompt Improvement Error:",i),i}}function ET(){const[t,e]=ge.useState([]),[o,i]=ge.useState([]),[l,c]=ge.useState(ys),[f,p]=ge.useState(!1),[g,h]=ge.useState("queue"),[v,E]=ge.useState(0),[_,w]=ge.useState(!1),[k,M]=ge.useState(!1),[I,F]=ge.useState(!1),[J,b]=ge.useState(!1),q=l.theme===Ao.DARK,X=l.position===tn.LEFT;ge.useEffect(()=>{(async()=>{const[B,Z,re,ce]=await Promise.all([Vh(),ja(),qh(),Hh()]);e(B),c(Z),i(re),w(!ce)})()},[]),ge.useEffect(()=>zh(B=>{B[rt.QUEUE]&&e(B[rt.QUEUE].newValue||[]),B[rt.SETTINGS]&&c(B[rt.SETTINGS].newValue||ys),B[rt.FOLDERS]&&i(B[rt.FOLDERS].newValue||[])}),[]),ge.useEffect(()=>{const z=B=>{B.type===Ut.PROCESS_QUEUE?p(!0):B.type===Ut.STOP_PROCESSING?p(!1):B.type===Ut.UPDATE_QUEUE&&e(B.payload)};return chrome.runtime.onMessage.addListener(z),()=>chrome.runtime.onMessage.removeListener(z)},[]),ge.useEffect(()=>{let z;return f?z=setInterval(()=>E(B=>B+100),100):E(0),()=>clearInterval(z)},[f]);const L=ge.useCallback(z=>{var Z;let B=`${l.prefix} ${z} ${l.suffix}`.trim();return l.globalNegativesEnabled&&((Z=l.globalNegatives)!=null&&Z.trim())&&(B+=`. NOT ${l.globalNegatives.trim()}`),B},[l.prefix,l.suffix,l.globalNegatives,l.globalNegativesEnabled]),U=ge.useCallback(async(z,B,Z)=>{const _e=(z||"").split(/[,\n]/).map(Pe=>Pe.trim()).filter(Pe=>Pe!=="").map(Pe=>{const Qn=B?`${Pe} ${B}`:Pe;return{id:Math.random().toString(36).substr(2,9),originalPrompt:Pe,finalPrompt:L(Qn),status:At.IDLE,images:Z&&Z.length>0?[...Z]:void 0}}),Se=[...t,..._e];e(Se),await Sr(Se)},[t,L]),ee=ge.useCallback(async z=>{const B=t.filter(Z=>Z.id!==z);e(B),await Sr(B)},[t]),K=ge.useCallback(async()=>{const z=t.filter(B=>B.status!==At.COMPLETED);e(z),await Sr(z)},[t]),ae=ge.useCallback(async z=>{const B=z.map(re=>{const ce=re.modifier?`${re.prompt} ${re.modifier}`:re.prompt;return{id:Math.random().toString(36).substr(2,9),originalPrompt:re.prompt,finalPrompt:L(ce),status:At.IDLE}}),Z=[...t,...B];e(Z),await Sr(Z)},[t,L]),W=ge.useCallback(async()=>{f?(await chrome.runtime.sendMessage({type:Ut.STOP_PROCESSING}),p(!1)):(await chrome.runtime.sendMessage({type:Ut.PROCESS_QUEUE}),p(!0))},[f]),te=ge.useCallback(async z=>{const B={...l,...z};c(B),await Gh(B)},[l]),$=ge.useCallback(async z=>{await te({apiKey:z})},[te]),fe=ge.useCallback(async z=>{const B={id:Math.random().toString(36).substr(2,9),name:z,templates:[],isOpen:!0},Z=[...o,B];i(Z),await wn(Z)},[o]),pe=ge.useCallback(async z=>{const B=o.filter(Z=>Z.id!==z);i(B),await wn(B)},[o]),Ee=ge.useCallback(async z=>{const B=o.map(Z=>Z.id===z?{...Z,isOpen:!Z.isOpen}:Z);i(B),await wn(B)},[o]),Te=ge.useCallback((z,B)=>{const Z=o.find(ce=>ce.id===z),re=Z==null?void 0:Z.templates.find(ce=>ce.id===B);re&&(U(re.text,void 0,re.images),h("queue"))},[o,U]),Y=ge.useCallback(async(z,B)=>{const Z=o.map(re=>re.id===z?{...re,templates:re.templates.filter(ce=>ce.id!==B)}:re);i(Z),await wn(Z)},[o]),de=ge.useCallback(async(z,B)=>{const Z=o.map(re=>{if(re.id===z){const ce=re.templates.findIndex(Se=>Se.id===B.id),_e={id:B.id||Math.random().toString(36).substr(2,9),name:B.name||"Unnamed",text:B.text||"",createdAt:B.createdAt||Date.now(),lastEditedAt:Date.now(),timesUsed:B.timesUsed||0,images:B.images||[]};if(ce>-1){const Se=[...re.templates];return Se[ce]=_e,{...re,templates:Se}}else return{...re,templates:[...re.templates,_e]}}return re});i(Z),await wn(Z)},[o]),oe=ge.useCallback(async(z,B)=>{const Z=o.find(ce=>ce.id===z),re=Z==null?void 0:Z.templates.find(ce=>ce.id===B);if(re){const ce=await Dd(re.text),_e=o.map(Se=>Se.id===z?{...Se,templates:Se.templates.map(Pe=>Pe.id===B?{...Pe,text:ce,lastEditedAt:Date.now()}:Pe)}:Se);i(_e),await wn(_e)}},[o]),N=ge.useCallback(async z=>{const B=o.find(ce=>ce.id===z);if(!B)return;const Z=await Promise.all(B.templates.map(async ce=>{const _e=await Dd(ce.text);return{...ce,text:_e,lastEditedAt:Date.now()}})),re=o.map(ce=>ce.id===z?{...ce,templates:Z}:ce);i(re),await wn(re)},[o]),V=ge.useCallback(async()=>{await Bh(!0),w(!1)},[]);return J?T.jsx("div",{className:`nano-flow-collapsed ${X?"nano-flow-left":"nano-flow-right"}`,style:{position:"fixed",top:"50%",transform:"translateY(-50%)",[X?"left":"right"]:"0",zIndex:999999},children:T.jsx("button",{onClick:()=>b(!1),className:`p-2 rounded-md shadow-lg transition-all ${q?"bg-[#1a1a1a] text-white border border-white/10":"bg-white text-slate-800 border border-slate-200"}`,style:{borderRadius:X?"0 8px 8px 0":"8px 0 0 8px"},children:T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx(ms,{size:16,className:"text-blue-500"}),T.jsx(Sh,{size:12,className:"opacity-50"})]})})}):T.jsx("div",{className:`nano-flow-sidebar ${X?"nano-flow-left":"nano-flow-right"}`,style:{position:"fixed",top:0,bottom:0,[X?"left":"right"]:0,width:"320px",zIndex:999999,display:"flex",flexDirection:"column"},children:T.jsxs("div",{className:`flex flex-col h-full overflow-hidden transition-colors duration-500 ${q?"bg-[#0a0a0a] text-white":"bg-[#f8fafc] text-[#1e293b]"}`,style:{borderLeft:X?"none":`1px solid ${q?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}`,borderRight:X?`1px solid ${q?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}`:"none"},children:[_&&T.jsx(Wh,{onComplete:V,isDark:q}),T.jsx(Jh,{isOpen:k,isDark:q,onClose:()=>M(!1),onUpload:ae}),T.jsx(Oh,{isOpen:I,isDark:q,currentKey:l.apiKey,onClose:()=>F(!1),onSave:$}),T.jsxs("div",{className:`p-2 flex items-center justify-between border-b ${q?"border-white/10 bg-white/5":"border-slate-100 bg-slate-50"}`,children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"p-1 rounded-md bg-blue-600 shadow-lg shadow-blue-600/20",children:T.jsx(ms,{size:16,className:"text-white"})}),T.jsx("h1",{className:"text-sm font-black tracking-tight",children:"Nano Flow"})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[f&&T.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 bg-blue-500/10 rounded-md border border-blue-500/20",children:[T.jsx(mh,{size:10,className:"text-blue-500 animate-spin"}),T.jsxs("span",{className:"text-[10px] font-black text-blue-500",children:[(v/1e3).toFixed(1),"s"]})]}),T.jsx("button",{onClick:()=>b(!0),className:`p-1 rounded opacity-50 hover:opacity-100 transition-opacity ${q?"hover:bg-white/10":"hover:bg-black/5"}`,children:T.jsx(en,{size:14})})]})]}),T.jsx("nav",{className:`flex border-b overflow-hidden ${q?"border-white/5 bg-white/2":"border-slate-100"}`,children:[{id:"queue",icon:ps,label:"Queue"},{id:"templates",icon:fs,label:"Templates"},{id:"settings",icon:Mh,label:"Settings"}].map(z=>T.jsxs("button",{onClick:()=>h(z.id),className:`flex-1 py-3 text-[8px] font-black uppercase tracking-widest flex flex-col items-center gap-1 transition-all relative ${g===z.id?"text-blue-500":"opacity-40 hover:opacity-100"}`,children:[T.jsx(z.icon,{size:14}),T.jsx("span",{className:"truncate w-full text-center px-1",children:z.label}),g===z.id&&T.jsx("div",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-blue-500 rounded-t-md"})]},z.id))}),T.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar p-2",children:[g==="queue"&&T.jsx(Qh,{queue:t,isDark:q,onAddToQueue:U,onRemoveFromQueue:ee,onOpenCsvDialog:()=>M(!0)}),g==="templates"&&T.jsx(ig,{folders:o,isDark:q,onCreateFolder:fe,onDeleteFolder:pe,onToggleFolder:Ee,onUseTemplate:Te,onDeleteTemplate:Y,onSaveTemplate:de,onImproveTemplate:oe,onImproveFolder:N}),g==="settings"&&T.jsx(rg,{settings:l,isDark:q,hasApiKey:!!l.apiKey,onUpdateSettings:te,onOpenApiKeyDialog:()=>F(!0)})]}),T.jsxs("div",{className:`p-2 border-t space-y-2 ${q?"bg-black/80 border-white/10 backdrop-blur-xl":"bg-slate-50 border-slate-200"}`,children:[T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:K,className:"flex-1 p-2 rounded-md border text-[10px] font-black uppercase hover:bg-red-500 hover:text-white transition-all border-white/10",children:T.jsx(yr,{size:14,className:"mx-auto"})}),T.jsxs("button",{onClick:W,disabled:t.length===0,className:`flex-[4] p-2 rounded-md flex items-center justify-center gap-2 text-xs font-black uppercase shadow-xl transition-all active:scale-[0.98] ${f?"bg-amber-500 shadow-amber-500/30":"bg-blue-600 shadow-blue-600/30"} text-white disabled:opacity-30`,children:[f?T.jsx(Ih,{size:16,fill:"currentColor"}):T.jsx(Rh,{size:16,fill:"currentColor"}),f?"Stop":"Start"]})]}),t.filter(z=>z.status===At.COMPLETED).length>0&&T.jsx("div",{className:"flex gap-1 overflow-x-auto no-scrollbar py-1",children:t.filter(z=>z.status===At.COMPLETED).slice(-5).map(z=>{var Z,re,ce,_e;const B=((re=(Z=z.results)==null?void 0:Z.flash)==null?void 0:re.url)||((_e=(ce=z.results)==null?void 0:ce.pro)==null?void 0:_e.url);return B?T.jsxs("div",{className:"relative group shrink-0",children:[T.jsx("img",{src:B,className:"w-12 h-12 rounded-md object-cover border border-white/10",alt:"Result"}),T.jsx("button",{onClick:()=>{const Se=document.createElement("a");Se.href=B,Se.download=`nano_flow_${z.id}.png`,Se.click()},className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center rounded-md",children:T.jsx(Qa,{size:12,className:"text-white"})})]},z.id):null})})]})]})})}const _T={matches:["https://gemini.google.com/*"],runAt:"document_idle",cssInjectionMode:"ui",async main(t){console.log("[Nano Flow] Content script with UI loaded on gemini.google.com"),fg.init(),(await Ym(t,{name:"nano-flow-sidebar",position:"inline",anchor:"body",onMount:o=>{const i=og.createRoot(o);return i.render(T.jsx(ET,{})),i},onRemove:o=>{o==null||o.unmount()}})).mount(),console.log("[Nano Flow] Sidebar UI injected into page")}};function uA(){}function $r(t,...e){}const ST={debug:(...t)=>$r(console.debug,...t),log:(...t)=>$r(console.log,...t),warn:(...t)=>$r(console.warn,...t),error:(...t)=>$r(console.error,...t)};return(async()=>{try{const{main:t,...e}=_T,o=new os("gemini",e);return await t(o)}catch(t){throw ST.error('The content script "gemini" crashed on startup!',t),t}})()})();
gemini;
